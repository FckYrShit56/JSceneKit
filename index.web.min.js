var JSceneKit=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=128)}([function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(41),a=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(){function t(){r(this,t),this._autoContentAccessingProxy=null,this._classForArchiver=null,this._classForCoder=null,this._classForKeyedArchiver=null,this._attributeKeys=null,this._classDescription=null,this._toManyRelationshipKeys=null,this._toOneRelationshipKeys=null,this.scriptingProperties=null,this._classCode=0,this.observationInfo=null,this.accessibilityActivationPoint=null,this.accessibilityCustomActions=null,this.accessibilityCustomRotors=null,this.accessibilityElements=null,this.accessibilityElementsHidden=!1,this.accessibilityFrame=null,this.accessibilityHeaderElements=null,this.accessibilityHint=null,this.accessibilityLabel=null,this.accessibilityLanguage=null,this.accessibilityNavigationStyle=null,this.accessibilityPath=null,this.accessibilityTraits=null,this.accessibilityValue=null,this.accessibilityViewIsModal=!1,this.isAccessibilityElement=!1,this.shouldGroupAccessibilityChildren=!1,this._hashValue=0,this._accessibilityFocusedUIElement=null,this._accessibilityNotifiesWhenDestroyed=!1,this._exposedBindings=null,this._objectForWebScript=null,this._objectSpecifier=null,this._webFrame=null,this._webPlugInContainerSelectionColor=null,this._isSelectable=!1,this._destroyed=!1}return i(t,null,[{key:"initialize",value:function(){}},{key:"load",value:function(){}},{key:"_propTypes",get:function(){return{}}}]),i(t,[{key:"copy",value:function(){return new this.constructor}},{key:"mutableCopy",value:function(){return null}},{key:"isInstanceOf",value:function(e){return this.constructor.isSubclassOf(e)}},{key:"methodFor",value:function(e){return null}},{key:"performWithAfterDelay",value:function(e,t,n){}},{key:"performWithAfterDelayInModes",value:function(e,t,n,r){}},{key:"performSelectorOnMainThreadWithWaitUntilDone",value:function(e,t,n){}},{key:"performSelectorOnMainThreadWithWaitUntilDoneModes",value:function(e,t,n,r){}},{key:"performOnWithWaitUntilDone",value:function(e,t,n,r){}},{key:"performOnWithWaitUntilDoneModes",value:function(e,t,n,r,i){}},{key:"performSelectorInBackgroundWith",value:function(e,t){}},{key:"forwardingTargetFor",value:function(e){return null}},{key:"doesNotRecognizeSelector",value:function(e){}},{key:"awakeAfterUsing",value:function(e){return null}},{key:"replacementObjectFor",value:function(e){return null}},{key:"inverseForRelationshipKey",value:function(e){return null}},{key:"copyScriptingValueForKeyWithProperties",value:function(e,t,n){return null}},{key:"newScriptingObjectOfForValueForKeyWithContentsValue",value:function(e,t,n,r){return null}},{key:"scriptingValueFor",value:function(e){return null}},{key:"finalize",value:function(){}},{key:"addObserverForKeyPath",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments[3]}},{key:"attemptRecoveryFromErrorOptionIndex",value:function(e,t){return!1}},{key:"dictionaryWithValuesForKeys",value:function(e){return null}},{key:"didChangeValuesAtForKey",value:function(e,t,n){}},{key:"didChangeValueForKey",value:function(e){}},{key:"didChangeValueForKeyWithSetMutationUsing",value:function(e,t,n){}},{key:"fileManagerShouldProceedAfterError",value:function(e,t){return!1}},{key:"fileManagerWillProcessPath",value:function(e,t){}},{key:"mutableArrayValueForKey",value:function(e){return null}},{key:"mutableArrayValueForKeyPath",value:function(e){return null}},{key:"mutableOrderedSetValueForKey",value:function(e){return null}},{key:"mutableOrderedSetValueForKeyPath",value:function(e){return null}},{key:"mutableSetValueForKey",value:function(e){return null}},{key:"mutableSetValueForKeyPath",value:function(e){return null}},{key:"observeValueForKeyPathOf",value:function(e,t,n,r){}},{key:"removeObserverForKeyPath",value:function(e,t){}},{key:"setNilValueForKey",value:function(e){}},{key:"setValueForKey",value:function(e,t){void 0===this[t]?this.setValueForUndefinedKey(e,t):this[t]=e}},{key:"setValueForKeyPath",value:function(e,t){if("string"!=typeof t)throw new Error("setValueForKeyPath: keyPath should be string");var n=t.split("."),r=n.shift();if(0===n.length)return void this.setValueForKey(e,r);var i=this.valueForKey(r);if(null===i)return void console.error("setValueForKeyPath: key "+r+" is null.");i.setValueForKeyPath(e,n.join("."))}},{key:"setValueForUndefinedKey",value:function(e,t){throw new Error("setValueForKey: undefined key: "+t)}},{key:"setValuesForKeys",value:function(e){}},{key:"validateValueForKey",value:function(e,t){}},{key:"validateValueForKeyPath",value:function(e,t){}},{key:"valueForKey",value:function(e){if("string"!=typeof e)throw new Error("error: valueForKey(key): key should be string");return void 0===this[e]?this.valueForUndefinedKey(e):this[e]}},{key:"valueForKeyPath",value:function(e){if("string"!=typeof e)throw new Error("valueForKeyPath(keyPath): keyPath should be string");var t=e.split("."),n=t.shift(),r=this.valueForKey(n);return 0===t.length?r:null===r?null:r.valueForKeyPath(t.join("."))}},{key:"valueForUndefinedKey",value:function(e){}},{key:"willChangeValuesAtForKey",value:function(e,t,n){}},{key:"willChangeValueForKey",value:function(e){}},{key:"willChangeValueForKeyWithSetMutationUsing",value:function(e,t,n){}},{key:"acceptsPreviewPanelControl",value:function(e){return!1}},{key:"accessibilityActionDescription",value:function(e){return null}},{key:"accessibilityActionNames",value:function(){return null}},{key:"accessibilityArrayAttributeCount",value:function(e){return 0}},{key:"accessibilityArrayAttributeValues",value:function(e,t,n){return null}},{key:"accessibilityAttributeNames",value:function(){return null}},{key:"accessibilityAttributeValue",value:function(e){return null}},{key:"accessibilityAttributeValueForParameter",value:function(e,t){return null}},{key:"accessibilityHitTest",value:function(e){return null}},{key:"accessibilityIndexOfChild",value:function(e){return 0}},{key:"accessibilityIsAttributeSettable",value:function(e){return!1}},{key:"accessibilityIsIgnored",value:function(){return!1}},{key:"accessibilityParameterizedAttributeNames",value:function(){return null}},{key:"accessibilityPerformAction",value:function(e){}},{key:"accessibilitySetOverrideValueForAttribute",value:function(e,t){return!1}},{key:"accessibilitySetValueForAttribute",value:function(e,t){}},{key:"actionProperty",value:function(){return null}},{key:"applicationDelegateHandlesKey",value:function(e,t){return!1}},{key:"authorizationViewCreatedAuthorization",value:function(e){}},{key:"authorizationViewDidAuthorize",value:function(e){}},{key:"authorizationViewDidDeauthorize",value:function(e){}},{key:"authorizationViewDidHide",value:function(e){}},{key:"authorizationViewReleasedAuthorization",value:function(e){}},{key:"authorizationViewShouldDeauthorize",value:function(e){return 0}},{key:"awakeFromNib",value:function(){}},{key:"beginPreviewPanelControl",value:function(e){}},{key:"bindToWithKeyPath",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3]}},{key:"candidates",value:function(e){return null}},{key:"certificatePanelShowHelp",value:function(e){return 0}},{key:"changeColor",value:function(e){}},{key:"changeFont",value:function(e){}},{key:"chooseIdentityPanelShowHelp",value:function(e){return 0}},{key:"classForAnnotationClass",value:function(e){return null}},{key:"classForPage",value:function(){return null}},{key:"coerceValueForKey",value:function(e,t){return null}},{key:"commitComposition",value:function(e){}},{key:"commitEditing",value:function(){return!1}},{key:"commitEditingAndReturnError",value:function(){}},{key:"commitEditingWithDelegateDidCommit",value:function(e,t,n){}},{key:"composedString",value:function(e){return null}},{key:"compositionParameterViewDidChangeParameterWithKey",value:function(e,t){}},{key:"compositionParameterViewShouldDisplayParameterWithKeyAttributes",value:function(e,t){arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map;return!1}},{key:"compositionPickerViewDidSelect",value:function(e,t){}},{key:"compositionPickerViewDidStartAnimating",value:function(e){}},{key:"compositionPickerViewWillStopAnimating",value:function(e){}},{key:"controlTextDidBeginEditing",value:function(e){}},{key:"controlTextDidChange",value:function(e){}},{key:"controlTextDidEndEditing",value:function(e){}},{key:"didCommandByClient",value:function(e,t){return!1}},{key:"didMatchString",value:function(e){}},{key:"discardEditing",value:function(){}},{key:"documentDidBeginDocumentFind",value:function(e){}},{key:"documentDidBeginPageFind",value:function(e){}},{key:"documentDidEndDocumentFind",value:function(e){}},{key:"documentDidEndPageFind",value:function(e){}},{key:"documentDidFindMatch",value:function(e){}},{key:"documentDidUnlock",value:function(e){}},{key:"doesContain",value:function(e){return!1}},{key:"endPreviewPanelControl",value:function(e){}},{key:"exceptionHandlerShouldHandleMask",value:function(e,t,n){return!1}},{key:"exceptionHandlerShouldLogExceptionMask",value:function(e,t,n){return!1}},{key:"fileTransferServicesAbortCompleteError",value:function(e,t){}},{key:"fileTransferServicesConnectionCompleteError",value:function(e,t){}},{key:"fileTransferServicesCopyRemoteFileCompleteError",value:function(e,t){}},{key:"fileTransferServicesCopyRemoteFileProgressTransferProgress",value:function(e,t){}},{key:"fileTransferServicesCreateFolderCompleteErrorFolder",value:function(e,t,n){}},{key:"fileTransferServicesDisconnectionCompleteError",value:function(e,t){}},{key:"fileTransferServicesFilePreparationCompleteError",value:function(e,t){}},{key:"fileTransferServicesPathChangeCompleteErrorFinalPath",value:function(e,t,n){}},{key:"fileTransferServicesRemoveItemCompleteErrorRemovedItem",value:function(e,t,n){}},{key:"fileTransferServicesRetrieveFolderListingCompleteErrorListing",value:function(e,t,n){}},{key:"fileTransferServicesSendFileCompleteError",value:function(e,t){}},{key:"fileTransferServicesSendFileProgressTransferProgress",value:function(e,t){}},{key:"finalizeForWebScript",value:function(){}},{key:"fontManagerWillIncludeFont",value:function(e,t){return!1}},{key:"handleClient",value:function(e,t){return!1}},{key:"imageBrowserBackgroundWasRightClickedWith",value:function(e,t){}},{key:"imageBrowserCellWasDoubleClickedAt",value:function(e,t){}},{key:"imageBrowserCellWasRightClickedAtWith",value:function(e,t,n){}},{key:"imageBrowserGroupAt",value:function(e,t){return null}},{key:"imageBrowserItemAt",value:function(e,t){return null}},{key:"imageBrowserMoveItemsAtTo",value:function(e,t,n){return!1}},{key:"imageBrowserRemoveItemsAt",value:function(e,t){}},{key:"imageBrowserWriteItemsAtTo",value:function(e,t,n){return 0}},{key:"imageBrowserSelectionDidChange",value:function(e){}},{key:"imageRepresentation",value:function(){return null}},{key:"imageRepresentationType",value:function(){return null}},{key:"imageSubtitle",value:function(){return null}},{key:"imageTitle",value:function(){return null}},{key:"imageUID",value:function(){return null}},{key:"imageVersion",value:function(){return 0}},{key:"indicesOfObjectsByEvaluatingObjectSpecifier",value:function(e){return null}},{key:"infoForBinding",value:function(e){return null}},{key:"inputTextClient",value:function(e,t){return!1}},{key:"inputTextKeyModifiersClient",value:function(e,t,n,r){return!1}},{key:"insertValueAtInPropertyWithKey",value:function(e,t,n){}},{key:"insertValueInPropertyWithKey",value:function(e,t){}},{key:"invokeDefaultMethodWithArguments",value:function(e){return null}},{key:"invokeUndefinedMethodFromWebScriptWithArguments",value:function(e,t){return null}},{key:"isCaseInsensitiveLike",value:function(e){return!1}},{key:"isEqualTo",value:function(e){return!1}},{key:"isGreaterThan",value:function(e){return!1}},{key:"isGreaterThanOrEqualTo",value:function(e){return!1}},{key:"isLessThan",value:function(e){return!1}},{key:"isLessThanOrEqualTo",value:function(e){return!1}},{key:"isLike",value:function(e){return!1}},{key:"isNotEqualTo",value:function(e){return!1}},{key:"layerShouldInheritContentsScaleFrom",value:function(e,t,n){return!1}},{key:"namesOfPromisedFilesDroppedAtDestination",value:function(e){return null}},{key:"numberOfGroupsInImageBrowser",value:function(e){return 0}},{key:"numberOfItemsInImageBrowser",value:function(e){return 0}},{key:"objectDidBeginEditing",value:function(e){}},{key:"objectDidEndEditing",value:function(e){}},{key:"optionDescriptionsForBinding",value:function(e){return null}},{key:"originalString",value:function(e){return null}},{key:"pasteboardProvideDataForType",value:function(e,t){}},{key:"pasteboardChangedOwner",value:function(e){}},{key:"performActionFor",value:function(e,t){}},{key:"prepareForInterfaceBuilder",value:function(){}},{key:"provideImageDataBytesPerRowOriginSizeUserInfo",value:function(e,t,n,r,i,o,a){}},{key:"quartzFilterManagerDidAdd",value:function(e,t){}},{key:"quartzFilterManagerDidModifyFilter",value:function(e,t){}},{key:"quartzFilterManagerDidRemove",value:function(e,t){}},{key:"quartzFilterManagerDidSelect",value:function(e,t){}},{key:"readLinkQualityForDeviceComplete",value:function(e,t,n,r){}},{key:"readRSSIForDeviceComplete",value:function(e,t,n,r){}},{key:"removeValueAtFromPropertyWithKey",value:function(e,t){}},{key:"replaceValueAtInPropertyWithKeyWithValue",value:function(e,t,n){}},{key:"saveOptionsShouldShowUTType",value:function(e,t){return!1}},{key:"scriptingBeginsWith",value:function(e){return!1}},{key:"scriptingContains",value:function(e){return!1}},{key:"scriptingEndsWith",value:function(e){return!1}},{key:"scriptingIsEqualTo",value:function(e){return!1}},{key:"scriptingIsGreaterThan",value:function(e){return!1}},{key:"scriptingIsGreaterThanOrEqualTo",value:function(e){return!1}},{key:"scriptingIsLessThan",value:function(e){return!1}},{key:"scriptingIsLessThanOrEqualTo",value:function(e){return!1}},{key:"shouldEnableActionFor",value:function(e,t){return!1}},{key:"textStorageDidProcessEditing",value:function(e){}},{key:"textStorageWillProcessEditing",value:function(e){}},{key:"titleFor",value:function(e,t){return null}},{key:"unbind",value:function(e){}},{key:"validModesForFontPanel",value:function(e){return 0}},{key:"validateMenuItem",value:function(e){return!1}},{key:"validateToolbarItem",value:function(e){return!1}},{key:"valueAtInPropertyWithKey",value:function(e,t){return null}},{key:"valueClassForBinding",value:function(e){return null}},{key:"valueWithNameInPropertyWithKey",value:function(e,t){return null}},{key:"valueWithUniqueIDInPropertyWithKey",value:function(e,t){return null}},{key:"viewStringForToolTipUserData",value:function(e,t,n,r){return""}},{key:"webPlugInContainerLoadInFrame",value:function(e,t){}},{key:"webPlugInContainerShowStatus",value:function(e){}},{key:"webPlugInDestroy",value:function(){}},{key:"webPlugInInitialize",value:function(){}},{key:"webPlugInMainResourceDidFailWithError",value:function(e){}},{key:"webPlugInMainResourceDidFinishLoading",value:function(){}},{key:"webPlugInMainResourceDidReceive",value:function(e){}},{key:"webPlugInSetIsSelected",value:function(e){}},{key:"webPlugInStart",value:function(){}},{key:"webPlugInStop",value:function(){}},{key:"workflowControllerDidError",value:function(e,t){}},{key:"workflowControllerDidRun",value:function(e,t){}},{key:"workflowControllerWillRun",value:function(e,t){}},{key:"workflowControllerDidStop",value:function(e){}},{key:"workflowControllerWillStop",value:function(e){}},{key:"accessibilityActivate",value:function(){return!1}},{key:"accessibilityAssistiveTechnologyFocusedIdentifiers",value:function(){return null}},{key:"accessibilityDecrement",value:function(){}},{key:"accessibilityElementAt",value:function(e){return null}},{key:"accessibilityElementCount",value:function(){return 0}},{key:"accessibilityElementDidBecomeFocused",value:function(){}},{key:"accessibilityElementDidLoseFocus",value:function(){}},{key:"accessibilityElementIsFocused",value:function(){return!1}},{key:"accessibilityIncrement",value:function(){}},{key:"accessibilityPerformEscape",value:function(){return!1}},{key:"accessibilityPerformMagicTap",value:function(){return!1}},{key:"accessibilityScroll",value:function(e){return!1}},{key:"indexOfAccessibilityElement",value:function(e){return 0}},{key:"_destroy",value:function(){if(this._destroyed)throw new Error("_destroy() called twice");this._destroyed=!0,this._execDestroy()}},{key:"_execDestroy",value:function(){}},{key:"autoContentAccessingProxy",get:function(){return this._autoContentAccessingProxy}},{key:"classForArchiver",get:function(){return this._classForArchiver}},{key:"classForCoder",get:function(){return this._classForCoder}},{key:"classForKeyedArchiver",get:function(){return this._classForKeyedArchiver}},{key:"attributeKeys",get:function(){return this._attributeKeys}},{key:"classDescription",get:function(){return this._classDescription}},{key:"toManyRelationshipKeys",get:function(){return this._toManyRelationshipKeys}},{key:"toOneRelationshipKeys",get:function(){return this._toOneRelationshipKeys}},{key:"classCode",get:function(){return this._classCode}},{key:"className",get:function(){return this.constructor._className}},{key:"hashValue",get:function(){return this._hashValue}},{key:"accessibilityFocusedUIElement",get:function(){return this._accessibilityFocusedUIElement}},{key:"accessibilityNotifiesWhenDestroyed",get:function(){return this._accessibilityNotifiesWhenDestroyed}},{key:"exposedBindings",get:function(){return this._exposedBindings}},{key:"objectForWebScript",get:function(){return this._objectForWebScript}},{key:"objectSpecifier",get:function(){return this._objectSpecifier}},{key:"webFrame",get:function(){return this._webFrame}},{key:"webPlugInContainerSelectionColor",get:function(){return this._webPlugInContainerSelectionColor}},{key:"isSelectable",get:function(){return this._isSelectable}}],[{key:"superclass",value:function(){var e=Object.getPrototypeOf(this);return e===Object.getPrototypeOf(Object)?null:e}},{key:"isSubclassOf",value:function(e){if(this.className===e.className)return!0;var t=this.superclass();return null!==t&&(t.className===e.className||!!t.isSubclassOf(e))}},{key:"instancesRespondTo",value:function(e){return"function"==typeof this.prototype[e]}},{key:"conformsTo",value:function(e){return!1}},{key:"instanceMethodFor",value:function(e){return null}},{key:"description",value:function(){return this.className}},{key:"cancelPreviousPerformRequestsWithTarget",value:function(e){}},{key:"cancelPreviousPerformRequestsWithTargetSelectorObject",value:function(e,t,n){}},{key:"resolveClassMethod",value:function(e){return!1}},{key:"resolveInstanceMethod",value:function(e){return!1}},{key:"classFallbacksForKeyedArchiver",value:function(){return null}},{key:"classForKeyedUnarchiver",value:function(){return null}},{key:"setVersion",value:function(e){}},{key:"version",value:function(){return 0}},{key:"automaticallyNotifiesObserversForKey",value:function(e){return!1}},{key:"debugDescription",value:function(){return""}},{key:"hash",value:function(){return 0}},{key:"keyPathsForValuesAffectingValueForKey",value:function(e){return null}},{key:"defaultPlaceholderForMarkerWithBinding",value:function(e,t){return null}},{key:"exposeBinding",value:function(e){}},{key:"isKeyExcludedFromWebScript",value:function(e){return!1}},{key:"isSelectorExcludedFromWebScript",value:function(e){return!1}},{key:"setDefaultPlaceholderForMarkerWithBinding",value:function(e,t,n){}},{key:"webScriptNameForKey",value:function(e){return null}},{key:"webScriptNameFor",value:function(e){return null}},{key:"initWithCoder",value:function(e){var t={},n=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(e._refObj)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if("$"!==u.charAt(0))if(void 0===this._propTypes[u]){if(!this._propTypes.$unknownKey||null===this._propTypes.$unknownKey(u))throw console.error(this.className+": property "+u+" not registered"),new Error(this.className+": property "+u+" not registered");t[u]=this._propTypes.$unknownKey(u)}else t[u]=this._propTypes[u]}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}var l=this._loadProperties(e,t),s=l.names,c=l.values,f=null;return f="function"==typeof this._propTypes.$constructor?this._propTypes.$constructor(s,c,e):new this,this._setProperties(f,s,c,e),f}},{key:"_loadProperties",value:function(t,n){var r={},i={},o=!0,u=!1,l=void 0;try{for(var s,c=Object.keys(n)[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var f=s.value;if(t.containsValueForKey(f)){var h=n[f],d="",_=f;"string"==typeof h?d=h:Array.isArray(h)&&(d=h[0],h.length>=2&&(_=h[1]));var p=null;switch(d){case"boolean":p=t.decodeBoolForKey(f);break;case"bytes":p=t.decodeBytesForKeyReturnedLength(f,null);break;case"double":p=t.decodeDoubleForKey(f);break;case"float":p=t.decodeFloatForKey(f);break;case"integer":p=t.decodeCIntForKey(f);break;case"int32":p=t.decodeInt32ForKey(f);break;case"int64":p=t.decodeInt64ForKey(f);break;case"point":p=t.decodePointForKey(f);break;case"rect":p=t.decodeRectForKey(f);break;case"size":p=t.decodeSizeForKey(f);break;case"plist":p=t.decodePropertyListForKey(f);break;case"string":if("string"!=typeof(p=t.decodeObjectForKey(f)))throw new Error(f+": value is not String type");break;default:var y=a.default.get(d);if(void 0===y)throw new Error("unknown class name: "+d);if(t._refObj[f]instanceof e){if(!((p=t.decodeObjectOfTypeForKey(y,f))instanceof y))throw new Error(f+": value is not an instance of "+d)}else if("$null"===(p=t.decodeObjectForKey(f)))p=null;else if(p instanceof Promise);else if(!(p instanceof y)){var m=["NSData","NSMutableData","NSArray","NSMutableArray","NSDictionary","NSMutableDictionary","NSColor","NSURL"];if(m.indexOf(y.className)<0)throw new Error(f+": value is not an instance of "+d)}}i[f]=p,r[f]=_}else console.log("!coder.containsValueForKey "+f)}}catch(e){u=!0,l=e}finally{try{!o&&c.return&&c.return()}finally{if(u)throw l}}return{names:r,values:i}}},{key:"_setProperties",value:function(e,t,n,r){var i=!0,o=!1,a=void 0;try{for(var u,l=Object.keys(n)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var s=u.value;this._setProperty(e,t[s],n[s],s,r)}}catch(e){o=!0,a=e}finally{try{!i&&l.return&&l.return()}finally{if(o)throw a}}}},{key:"_setProperty",value:function(e,t,n,r,i){var o=this;n instanceof Promise?n.then(function(n){o._setProperty(e,t,n,r,i)}):"function"==typeof t?t(e,n,r,i):null!==t&&(e[t]=n)}},{key:"className",get:function(){return this.prototype.constructor._className}},{key:"accessInstanceVariablesDirectly",get:function(){return!0}},{key:"supportsSecureCoding",get:function(){return!0}}]),t}();t.default=u}).call(t,n(17).Buffer)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(13),a=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;r(this,e),this.x=t,this.y=n,this.z=i}return i(e,[{key:"_copy",value:function(){return new e(this.x,this.y,this.z)}},{key:"_copyFrom",value:function(e){this.x=e.x,this.y=e.y,this.z=e.z}},{key:"zero",value:function(){return new e}},{key:"add",value:function(t){var n=new e;return n.x=this.x+t.x,n.y=this.y+t.y,n.z=this.z+t.z,n}},{key:"sub",value:function(t){var n=new e;return n.x=this.x-t.x,n.y=this.y-t.y,n.z=this.z-t.z,n}},{key:"mul",value:function(t){var n=new e;return n.x=this.x*t,n.y=this.y*t,n.z=this.z*t,n}},{key:"mulv",value:function(t){var n=new e;return n.x=this.x*t.x,n.y=this.y*t.y,n.z=this.z*t.z,n}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z}},{key:"cross",value:function(t){var n=new e;return n.x=this.y*t.z-this.z*t.y,n.y=this.z*t.x-this.x*t.z,n.z=this.x*t.y-this.y*t.x,n}},{key:"lerp",value:function(t,n){var r=new e;return r.x=this.x+n*(t.x-this.x),r.y=this.y+n*(t.y-this.y),r.z=this.z+n*(t.z-this.z),r}},{key:"normalize",value:function(){var t=this.length(),n=new e;if(0===t)return n;var r=1/t;return n.x=this.x*r,n.y=this.y*r,n.z=this.z*r,n}},{key:"length2",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"transform",value:function(t){var n=new e,r=this.x*t.m14+this.y*t.m24+this.z*t.m34+t.m44;if(0===r)return n;var i=1/r;return n.x=(this.x*t.m11+this.y*t.m21+this.z*t.m31+t.m41)*i,n.y=(this.x*t.m12+this.y*t.m22+this.z*t.m32+t.m42)*i,n.z=(this.x*t.m13+this.y*t.m23+this.z*t.m33+t.m43)*i,n}},{key:"rotate",value:function(t){var n=new e;return n.x=this.x*t.m11+this.y*t.m21+this.z*t.m31,n.y=this.x*t.m12+this.y*t.m22+this.z*t.m32,n.z=this.x*t.m13+this.y*t.m23+this.z*t.m33,n}},{key:"rotateWithQuaternion",value:function(e){return this.rotate(e.rotMatrix())}},{key:"eulerAnglesToRotation",value:function(){var e=new a.default,t=.5*this.x,n=.5*this.y,r=.5*this.z,i=Math.cos(t),o=Math.sin(t),u=Math.cos(n),l=Math.sin(n),s=Math.cos(r),c=Math.sin(r),f=(new a.default,o*u*s-i*l*c),h=i*l*s+o*u*c,d=i*u*c-o*l*s,_=f*f+h*h+d*d;if(0===_)e.x=0,e.y=0,e.z=0,e.w=0;else{var p=1/Math.sqrt(_);e.x=f*p,e.y=h*p,e.z=d*p,e.w=2*Math.acos(i*u*s+o*l*c)}return e}},{key:"eulerAnglesToQuat",value:function(){return this.eulerAnglesToRotation().rotationToQuat()}},{key:"floatArray",value:function(){return[this.x,this.y,this.z]}},{key:"float32Array",value:function(){return new Float32Array([this.x,this.y,this.z])}},{key:"_createBtVector3",value:function(){}}],[{key:"_initWithData",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new e;return r?(i.x=t.readFloatBE(n+0),i.y=t.readFloatBE(n+4),i.z=t.readFloatBE(n+8)):(i.x=t.readFloatLE(n+0),i.y=t.readFloatLE(n+4),i.z=t.readFloatLE(n+8)),i}}]),e}();t.default=u},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e,n,o,a){r(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u.red=e,u.green=n,u.blue=o,u.alpha=a,u}return o(t,e),a(t,null,[{key:"_initWithData",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new t;return r?(i.red=e.readFloatBE(n+0),i.green=e.readFloatBE(n+4),i.blue=e.readFloatBE(n+8),i.alpha=e.readFloatBE(n+12)):(i.red=e.readFloatLE(n+0),i.green=e.readFloatLE(n+4),i.blue=e.readFloatLE(n+8),i.alpha=e.readFloatLE(n+12)),i}},{key:"_propTypes",get:function(){return{$constructor:function(e,n){if(void 0!==n.NSColorSpace){if(void 0!==n.NSRGB){var r=n.NSRGB.toString("ascii"),i=r.split(" ");return new t(parseFloat(i[0]),parseFloat(i[1]),parseFloat(i[2]),1)}if(void 0!==n.NSWhite){var o=n.NSWhite.toString("ascii"),a=o.split(" "),u=parseFloat(a[0]);return new t(u,u,u,1)}throw console.error("unknown color space"),new Error("unknown color space")}return new t},NSRGB:["bytes",null],NSWhite:["bytes",null],NSComponents:["bytes",null],NSColorSpace:["integer",null],NSCustomColorSpace:["NSColorSpace",null]}}}]),a(t,[{key:"withAlphaComponent",value:function(e){return new t(this.red,this.green,this.blue,e)}},{key:"initPatternImage",value:function(e){}},{key:"set",value:function(){}},{key:"setFill",value:function(){}},{key:"setStroke",value:function(){}},{key:"getHSBA",value:function(){return{hue:0,saturation:0,brightness:0,alpha:0}}},{key:"getRGBA",value:function(e,t,n,r){return{red:this.red,green:this.green,blue:this.blue,alpha:this.alpha}}},{key:"_copy",value:function(){return new t(this.red,this.green,this.blue,this.alpha)}},{key:"_lerp",value:function(e,n){var r=new t;return r.red=this.red+n*(e.red-this.red),r.green=this.green+n*(e.green-this.green),r.blue=this.blue+n*(e.blue-this.blue),r.alpha=this.alpha+n*(e.alpha-this.alpha),r}},{key:"zero",value:function(){return new t(0,0,0,0)}},{key:"add",value:function(e){var n=new t;return n.red=this.red+e.red,n.green=this.green+e.green,n.blue=this.blue+e.blue,n.alpha=this.alpha+e.alpha,n}},{key:"sub",value:function(e){var n=new t;return n.red=this.red-e.red,n.green=this.green-e.green,n.blue=this.blue-e.blue,n.alpha=this.alpha-e.alpha,n}},{key:"_srgbToLinear",value:function(e){return e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}},{key:"_linearToSrgb",value:function(e){return e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)}},{key:"srgbToLinear",value:function(){var e=new t;return e.red=this._srgbToLinear(this.red),e.green=this._srgbToLinear(this.green),e.blue=this._srgbToLinear(this.blue),e.alpha=this.alpha,e}},{key:"linearToSrgb",value:function(){var e=new t;return e.red=this._linearToSrgb(this.red),e.green=this._linearToSrgb(this.green),e.blue=this._linearToSrgb(this.blue),e.alpha=this.alpha,e}},{key:"floatArray",value:function(){return[this.red,this.green,this.blue,this.alpha]}},{key:"float32Array",value:function(){return new Float32Array([this.red,this.green,this.blue,this.alpha])}},{key:"htmlColor",get:function(){return"rgba("+Math.round(255*this.red)+", "+Math.round(255*this.green)+", "+Math.round(255*this.blue)+", "+this.alpha+")"}},{key:"hexColor",get:function(){return"#"+Math.round(255*this.red).toString(16)+Math.round(255*this.green).toString(16)+Math.round(255*this.blue).toString(16)}}],[{key:"black",get:function(){return new t(0,0,0,1)}},{key:"blue",get:function(){return new t(0,0,1,1)}},{key:"brown",get:function(){return new t(.6,.4,.2,1)}},{key:"clear",get:function(){return new t(0,0,0,0)}},{key:"cyan",get:function(){return new t(0,1,1,1)}},{key:"darkGray",get:function(){return new t(1/3,1/3,1/3,1)}},{key:"gray",get:function(){return new t(.5,.5,.5,1)}},{key:"green",get:function(){return new t(0,1,0,1)}},{key:"lightGray",get:function(){return new t(2/3,2/3,2/3,1)}},{key:"magenta",get:function(){return new t(1,0,1,1)}},{key:"orange",get:function(){return new t(1,.5,0,1)}},{key:"purple",get:function(){return new t(.5,0,.5,1)}},{key:"red",get:function(){return new t(1,0,0,1)}},{key:"white",get:function(){return new t(1,1,1,1)}},{key:"yellow",get:function(){return new t(1,1,0,1)}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return e&&e.isInstanceOf&&e.isInstanceOf(t)};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(0),c=r(s),f=n(43),h=r(f),d=n(10),_=r(d),p=n(16),y=r(p),m=n(11),v=r(m),g=n(1),b=r(g),S=n(13),w=r(S),T=n(5),k=r(T),C=n(2),O=r(C),E=n(3),P=r(E),A=n(27),x=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(A),M=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._duration=0,e._speed=1,e._timingMode=k.default.linear,e._timingFunction=null,e._finished=!1,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e._completionHandler=null,e.__actionStartTime=null,e}return a(t,e),u(t,[{key:"reversed",value:function(){return null}},{key:"copy",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._beginTime=this._beginTime,e._duration=this._duration,e._speed=this.speed,e._timingMode=this.timingMode,e._timingFunction=this.timingFunction,e._finished=this._finished,e}},{key:"_applyAction",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._getTime(t,n)}},{key:"_getTime",value:function(e,t){var n=this.__getTime(e,t);return this._timingMode===k.default.easeIn?h.default.functionWithName(x.kCAMediaTimingFunctionEaseIn)._getValueAtTime(n):this._timingMode===k.default.easeOut?h.default.functionWithName(x.kCAMediaTimingFunctionEaseOut)._getValueAtTime(n):this._timingMode===k.default.easeInEaseOut?h.default.functionWithName(x.kCAMediaTimingFunctionEaseInEaseOut)._getValueAtTime(n):n}},{key:"__getTime",value:function(e,t){if(!t)return e>=1&&!this._finished&&(this._finished=!0),e;var n=this._basetimeFromTime(e);return null===this.timingFunction?n:this.timingFunction._getValueAtTime(n)}},{key:"_basetimeFromTime",value:function(e){var t=e-this._actionStartTime;return this._basetimeFromActivetime(t)}},{key:"_activetimeFromTime",value:function(e){return e-this._actionStartTime}},{key:"_basetimeFromActivetime",value:function(e){var t=e-this._beginTime;if(0===this.speed)return 0;if(0===this._duration)return t/Math.abs(this.speed);var n=this._duration/Math.abs(this.speed);return 0===n&&(n=.25),t>=n&&(this._finished||(this._finished=!0)),t/n}},{key:"_lerp",value:function(e,t,n){return null===n?t:(0,P.default)(e,w.default)?e.lerp(t,n):(0,P.default)(e,b.default)?e.lerp(t,n):(0,P.default)(e,v.default)?e.lerp(t,n):(0,P.default)(e,_.default)?e.lerp(t,n):(0,P.default)(e,y.default)?e.lerp(t,n):(0,P.default)(e,O.default)?e._lerp(t,n):e+(t-e)*n}},{key:"_slerp",value:function(e,t,n){if(!(0,P.default)(e,w.default))throw new Error("SCNAction._slerp: object is not SCNVector4");return e.slerp(t,n)}},{key:"_resetFinished",value:function(){this._finished=!1}},{key:"_actionStartTime",get:function(){return this.__actionStartTime},set:function(e){this.__actionStartTime=e}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e}},{key:"speed",get:function(){return this._speed},set:function(e){this._speed=e}},{key:"timingMode",get:function(){return this._timingMode},set:function(e){this._timingMode=e}},{key:"timingFunction",get:function(){return this._timingFunction},set:function(e){this._timingFunction=e}}],[{key:"moveByXYZ",value:function(e,t,n,r){throw new Error("not implemented")}},{key:"moveBy",value:function(e,t){throw new Error("not implemented")}},{key:"moveTo",value:function(e,t){throw new Error("not implemented")}},{key:"rotateByXYZ",value:function(e,t,n,r){throw new Error("not implemented")}},{key:"rotateToXYZ",value:function(e,t,n,r){throw new Error("not implemented")}},{key:"rotateToXYZUsesShortestUnitArc",value:function(e,t,n,r,i){throw new Error("not implemented")}},{key:"rotateByAround",value:function(e,t,n){throw new Error("not implemented")}},{key:"rotateToAxisAngle",value:function(e,t){throw new Error("not implemented")}},{key:"scaleByDuration",value:function(e,t){throw new Error("not implemented")}},{key:"scaleToDuration",value:function(e,t){throw new Error("not implemented")}},{key:"fadeInDuration",value:function(e){throw new Error("not implemented")}},{key:"fadeOutDuration",value:function(e){throw new Error("not implemented")}},{key:"fadeOpacityByDuration",value:function(e,t){throw new Error("not implemented")}},{key:"fadeOpacityToDuration",value:function(e,t){throw new Error("not implemented")}},{key:"hide",value:function(){throw new Error("not implemented")}},{key:"unhide",value:function(){throw new Error("not implemented")}},{key:"removeFromParentNode",value:function(){throw new Error("not implemented")}},{key:"playAudioWaitForCompletion",value:function(e,t){throw new Error("not implemented")}},{key:"group",value:function(e){throw new Error("not implemented")}},{key:"sequence",value:function(e){throw new Error("not implemented")}},{key:"repeat",value:function(e,t){throw new Error("not implemented")}},{key:"repeatForever",value:function(e){throw new Error("not implemented")}},{key:"waitDuration",value:function(e){throw new Error("not implemented")}},{key:"waitDurationWithRange",value:function(e,t){throw new Error("not implemented")}},{key:"run",value:function(e){throw new Error("not implemented")}},{key:"customActionDurationAction",value:function(e,t){throw new Error("not implemented")}},{key:"javaScriptActionWithScriptDuration",value:function(e,t){throw new Error("not implemented")}}]),t}(c.default);t.default=M},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={linear:0,easeIn:1,easeOut:2,easeInEaseOut:3};t.default=r},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(1),f=r(c),h=n(13),d=r(h),_=n(18),p=r(_),y=n(10),m=r(y),v=n(3),g=r(v),b={boneIndices:"kGeometrySourceSemanticBoneIndices",boneWeights:"kGeometrySourceSemanticBoneWeights",color:"kGeometrySourceSemanticColor",edgeCrease:"kGeometrySourceSemanticEdgeCrease",normal:"kGeometrySourceSemanticNormal",tangent:"kGeometrySourceSemanticTangent",texcoord:"kGeometrySourceSemanticTexcoord",vertex:"kGeometrySourceSemanticVertex",vertexCrease:"kGeometrySourceSemanticVertexCrease"},S=function(t){function n(t,r,a,u,l,s,c,f){i(this,n);var h=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(h._data=t,h._semantic=r,h._vectorCount=a,h._usesFloatComponents=u,h._componentsPerVector=l,h._bytesPerComponent=s,h._dataOffset=c,h._dataStride=f,t instanceof e){var d=null;if(u)switch(s){case 4:d=function(e){return t.readFloatLE(e)};break;case 8:d=function(e){return t.readDoubleLE(e)};break;case 1:d=function(e){return t.readIntLE(e,1)/255};break;default:throw new Error("unknown float data size: "+s)}else d=function(e){return t.readIntLE(e,s)};for(var _=[],p=t.length/s,y=0,m=0;m<p;m++)_.push(d(y)),y+=s;h._data=_}return h._buffer=null,h}return a(n,t),u(n,null,[{key:"_propTypes",get:function(){return{$constructor:function(e,t){return new n(t.data,t.semantic,t.vectorCount,t.floatComponents,t.componentsPerVector,t.bytesPerComponent,t.dataOffset,t.dataStride)},data:["NSMutableData",null],semantic:["string",null],vectorCount:["integer",null],floatComponents:["boolean",null],componentsPerVector:["integer",null],bytesPerComponent:["integer",null],dataOffset:["integer",null],dataStride:["integer",null],mkSemantic:["boolean",null]}}}]),u(n,[{key:"_createBuffer",value:function(e){var t=e;return this._buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this._buffer),t.bufferData(t.ARRAY_BUFFER,this._glData,t.STATIC_DRAW),this._buffer}},{key:"_hasTypedArrayData",value:function(){if(this._usesFloatComponents){if(4===this._bytesPerComponent)return this._data instanceof Float32Array;if(8===this._bytesPerComponent)return this._data instanceof Float64Array}else{if(1===this._bytesPerComponent)return this._data instanceof Uint8Array;if(2===this._bytesPerComponent)return this._data instanceof Uint16Array;if(4===this._bytesPerComponent)return this._data instanceof Uint32Array}return!1}},{key:"_vectorAt",value:function(e){if(e<0||e>=this.vectorCount)throw new Error("index out of range: "+e+" (0 - "+(this.vectorCount-1)+")");for(var t=this._dataStride/this._bytesPerComponent,n=e*t+this._dataOffset/this._bytesPerComponent,r=[],i=0;i<this._componentsPerVector;i++)r.push(this._data[n+i]);return r}},{key:"_scnVectorAt",value:function(e){var t=this._vectorAt(e);return 2===t.length?new m.default(t[0],t[1]):3===t.length?new f.default(t[0],t[1],t[2]):4===t.length?new d.default(t[0],t[1],t[2],t[3]):t}},{key:"_setVectorAt",value:function(e,t){if(t<0||t>=this.vectorCount)throw new Error("index out of range: "+t+" (0 - "+(this.vectorCount-1)+")");var n=e;if((0,g.default)(e,f.default)?n=[e.x,e.y,e.z]:(0,g.default)(e,d.default)&&(n=[e.x,e.y,e.z,e.w]),n.length!==this._componentsPerVector)throw new Error("vector size inconsistent: "+n.length+" != "+this._componentsPerVector);for(var r=this._dataStride/this._bytesPerComponent,i=t*r+this._dataOffset/this._bytesPerComponent,o=0;o<this._componentsPerVector;o++)this._data[i+o]=n[o]}},{key:"_createBoundingBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=e||(0,p.default)(0,0,0),n=new f.default(1/0,1/0,1/0),r=new f.default(-1/0,-1/0,-1/0);if(3!==this._componentsPerVector)throw new Error("componentsPerVector !== 3");for(var i=this._dataStride/this._bytesPerComponent,o=this._dataOffset/this._bytesPerComponent,a=this._vectorCount,u=0;u<a;u++){var l=new f.default(this._data[o+0],this._data[o+1],this._data[o+2]).transform(t);l.x<n.x&&(n.x=l.x),l.x>r.x&&(r.x=l.x),l.y<n.y&&(n.y=l.y),l.y>r.y&&(r.y=l.y),l.z<n.z&&(n.z=l.z),l.z>r.z&&(r.z=l.z),o+=i}return{min:n,max:r}}},{key:"fill",value:function(e){for(var t=this._dataOffset/this._bytesPerComponent,n=this._dataStride/this._bytesPerComponent,r=0;r<this._vectorCount;r++){for(var i=0;i<this._componentsPerVector;i++)this._data[t+i]=e;t+=n}}},{key:"copy",value:function(){return new n(this._data.slice(0),this._semantic,this._vectorCount,this._usesFloatComponents,this._componentsPerVector,this._bytesPerComponent,this._dataOffset,this._dataStride)}},{key:"data",get:function(){return this._data.slice(0)}},{key:"semantic",get:function(){return this._semantic}},{key:"vectorCount",get:function(){return this._vectorCount}},{key:"usesFloatComponents",get:function(){return this._usesFloatComponents}},{key:"componentsPerVector",get:function(){return this._componentsPerVector}},{key:"bytesPerComponent",get:function(){return this._bytesPerComponent}},{key:"dataOffset",get:function(){return this._dataOffset}},{key:"dataStride",get:function(){return this._dataStride}}],[{key:"geometrySourceWithDataSemanticVectorCountFloatComponentsComponentsPerVectorBytesPerComponentDataOffsetDataStride",value:function(e,t,r,i,o,a,u,l){return new n(e,t,r,i,o,a,u,l)}},{key:"geometrySourceWithVerticesCount",value:function(e,t){for(var r=[],i=0;i<t;i++)r.push(e[i].x,e[i].y,e[i].z);return new n(r,n.Semantic.vertex,t,!0,3,4,0,12)}},{key:"geometrySourceWithTextureCoordinatesCount",value:function(e,t){for(var r=[],i=0;i<t;i++)r.push(e[i].x,e[i].y);return new n(r,n.Semantic.texcoord,t,!0,2,4,0,8)}},{key:"geometrySourceWithNormalsCount",value:function(e,t){for(var r=[],i=0;i<t;i++)r.push(e[i].x,e[i].y,e[i].z);return new n(r,n.Semantic.normal,t,!0,3,4,0,12)}},{key:"initBufferDataOffsetDataStride",value:function(e,t,n,r,i,o){}},{key:"Semantic",get:function(){return b}}]),n}(s.default);t.default=S}).call(t,n(17).Buffer)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(1),u=r(a),l=n(13),s=r(l),c=n(3),f=r(c),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i(this,e),this.m11=0,this.m12=0,this.m13=0,this.m14=0,this.m21=0,this.m22=0,this.m23=0,this.m24=0,this.m31=0,this.m32=0,this.m33=0,this.m34=0,this.m41=0,this.m42=0,this.m43=0,this.m44=0,(0,f.default)(t,e)?(this.m11=t.m11,this.m12=t.m12,this.m13=t.m13,this.m14=t.m14,this.m21=t.m21,this.m22=t.m22,this.m23=t.m23,this.m24=t.m24,this.m31=t.m31,this.m32=t.m32,this.m33=t.m33,this.m34=t.m34,this.m41=t.m41,this.m42=t.m42,this.m43=t.m43,this.m44=t.m44):arguments.length>=16?(this.m11=arguments[0],this.m12=arguments[1],this.m13=arguments[2],this.m14=arguments[3],this.m21=arguments[4],this.m22=arguments[5],this.m23=arguments[6],this.m24=arguments[7],this.m31=arguments[8],this.m32=arguments[9],this.m33=arguments[10],this.m34=arguments[11],this.m41=arguments[12],this.m42=arguments[13],this.m43=arguments[14],this.m44=arguments[15]):null!==t&&(this.m11=t[0][0],this.m12=t[0][1],this.m13=t[0][2],this.m14=t[0][3],this.m21=t[1][0],this.m22=t[1][1],this.m23=t[1][2],this.m24=t[1][3],this.m31=t[2][0],this.m32=t[2][1],this.m33=t[2][2],this.m34=t[2][3],this.m41=t[3][0],this.m42=t[3][1],this.m43=t[3][2],this.m44=t[3][3])}return o(e,[{key:"_copy",value:function(){return new e(this)}},{key:"add",value:function(t){var n=new e;return n.m11=this.m11+t.m11,n.m12=this.m12+t.m12,n.m13=this.m13+t.m13,n.m14=this.m14+t.m14,n.m21=this.m21+t.m21,n.m22=this.m22+t.m22,n.m23=this.m23+t.m23,n.m24=this.m24+t.m24,n.m31=this.m31+t.m31,n.m32=this.m32+t.m32,n.m33=this.m33+t.m33,n.m34=this.m34+t.m34,n.m41=this.m41+t.m41,n.m42=this.m42+t.m42,n.m43=this.m43+t.m43,n.m44=this.m44+t.m44,n}},{key:"mul",value:function(t){var n=new e;return n.m11=this.m11*t,n.m12=this.mj2*t,n.m13=this.m13*t,n.m14=this.m14*t,n.m21=this.m21*t,n.m22=this.m22*t,n.m23=this.m23*t,n.m24=this.m24*t,n.m31=this.m31*t,n.m32=this.m32*t,n.m33=this.m33*t,n.m34=this.m34*t,n.m41=this.m41*t,n.m42=this.m42*t,n.m43=this.m43*t,n.m44=this.m44*t,n}},{key:"mult",value:function(t){var n=new e;return n.m11=this.m11*t.m11+this.m12*t.m21+this.m13*t.m31+this.m14*t.m41,n.m12=this.m11*t.m12+this.m12*t.m22+this.m13*t.m32+this.m14*t.m42,n.m13=this.m11*t.m13+this.m12*t.m23+this.m13*t.m33+this.m14*t.m43,n.m14=this.m11*t.m14+this.m12*t.m24+this.m13*t.m34+this.m14*t.m44,n.m21=this.m21*t.m11+this.m22*t.m21+this.m23*t.m31+this.m24*t.m41,n.m22=this.m21*t.m12+this.m22*t.m22+this.m23*t.m32+this.m24*t.m42,n.m23=this.m21*t.m13+this.m22*t.m23+this.m23*t.m33+this.m24*t.m43,n.m24=this.m21*t.m14+this.m22*t.m24+this.m23*t.m34+this.m24*t.m44,n.m31=this.m31*t.m11+this.m32*t.m21+this.m33*t.m31+this.m34*t.m41,n.m32=this.m31*t.m12+this.m32*t.m22+this.m33*t.m32+this.m34*t.m42,n.m33=this.m31*t.m13+this.m32*t.m23+this.m33*t.m33+this.m34*t.m43,n.m34=this.m31*t.m14+this.m32*t.m24+this.m33*t.m34+this.m34*t.m44,n.m41=this.m41*t.m11+this.m42*t.m21+this.m43*t.m31+this.m44*t.m41,n.m42=this.m41*t.m12+this.m42*t.m22+this.m43*t.m32+this.m44*t.m42,n.m43=this.m41*t.m13+this.m42*t.m23+this.m43*t.m33+this.m44*t.m43,n.m44=this.m41*t.m14+this.m42*t.m24+this.m43*t.m34+this.m44*t.m44,n}},{key:"lerp",value:function(t,n){var r=new e;return r.m11=this.m11+n*(this.m11-t.m11),r.m12=this.m12+n*(this.m12-t.m12),r.m13=this.m13+n*(this.m13-t.m13),r.m14=this.m14+n*(this.m14-t.m14),r.m21=this.m21+n*(this.m21-t.m21),r.m22=this.m22+n*(this.m22-t.m22),r.m23=this.m23+n*(this.m23-t.m23),r.m24=this.m24+n*(this.m24-t.m24),r.m31=this.m31+n*(this.m31-t.m31),r.m32=this.m32+n*(this.m32-t.m32),r.m33=this.m33+n*(this.m33-t.m33),r.m34=this.m34+n*(this.m34-t.m34),r.m41=this.m41+n*(this.m41-t.m41),r.m42=this.m42+n*(this.m42-t.m42),r.m43=this.m43+n*(this.m43-t.m43),r.m44=this.m44+n*(this.m44-t.m44),r}},{key:"quaternion",value:function(){var e=new s.default;return e.x=this.m32-this.m23,e.y=this.m13-this.m31,e.z=this.m21-this.m12,e.w=Math.acos(.5*(this.m11+this.m22+this.m33-1)),e}},{key:"invert",value:function(){var t=e._identity(),n=new e(this),r=0,i=Math.abs(n.m11),o=Math.abs(n.m21),a=Math.abs(n.m31),u=Math.abs(n.m41),l=i>o?i:o;return l<a&&(l=a),l<u?(r=1/n.m41,i=n.m11,o=n.m12,a=n.m13,u=n.m14,n.m12=n.m42*r,n.m13=n.m43*r,n.m14=n.m44*r,n.m41=i,n.m42=o,n.m43=a,n.m44=u,t.m11=0,t.m14=r,t.m41=1,t.m44=0):l===i?(r=1/n.m11,n.m12*=r,n.m13*=r,n.m14*=r,t.m11=r):l===o?(r=1/n.m21,i=n.m11,o=n.m12,a=n.m13,u=n.m14,n.m12=n.m22*r,n.m13=n.m23*r,n.m14=n.m24*r,n.m21=i,n.m22=o,n.m23=a,n.m24=u,t.m11=0,t.m12=r,t.m21=1,t.m22=0):(r=1/n.m31,i=n.m11,o=n.m12,a=n.m13,u=n.m14,n.m12=n.m32*r,n.m13=n.m33*r,n.m14=n.m34*r,n.m31=i,n.m32=o,n.m33=a,n.m34=u,t.m11=0,t.m13=r,t.m31=1,t.m33=0),r=n.m21,n.m22-=n.m12*r,n.m23-=n.m13*r,n.m24-=n.m14*r,t.m21-=t.m11*r,t.m22-=t.m12*r,t.m23-=t.m13*r,t.m24-=t.m14*r,r=n.m31,n.m32-=n.m12*r,n.m33-=n.m13*r,n.m34-=n.m14*r,t.m31-=t.m11*r,t.m32-=t.m12*r,t.m33-=t.m13*r,t.m34-=t.m14*r,r=n.m41,n.m42-=n.m12*r,n.m43-=n.m13*r,n.m44-=n.m14*r,t.m41-=t.m11*r,t.m42-=t.m12*r,t.m43-=t.m13*r,t.m44-=t.m14*r,o=Math.abs(n.m22),a=Math.abs(n.m32),u=Math.abs(n.m42),l=o>a?o:a,l<u?(r=1/n.m42,o=n.m22,a=n.m23,u=n.m24,n.m23=n.m43*r,n.m24=n.m44*r,n.m42=o,n.m43=a,n.m44=u,i=t.m21,o=t.m22,a=t.m23,u=t.m24,t.m21=t.m41*r,t.m22=t.m42*r,t.m23=t.m43*r,t.m24=t.m44*r,t.m41=i,t.m42=o,t.m43=a,t.m44=u):o>a?(r=1/n.m22,n.m23*=r,n.m24*=r,t.m21*=r,t.m22*=r,t.m23*=r,t.m24*=r):(r=1/n.m32,o=n.m22,a=n.m23,u=n.m24,n.m23=n.m33*r,n.m24=n.m34*r,n.m32=o,n.m33=a,n.m34=u,i=t.m21,o=t.m22,a=t.m23,u=t.m24,t.m21=t.m31*r,t.m22=t.m32*r,t.m23=t.m33*r,t.m24=t.m34*r,t.m31=i,t.m32=o,t.m33=a,t.m34=u),r=n.m12,n.m13-=n.m23*r,n.m14-=n.m24*r,t.m11-=t.m21*r,t.m12-=t.m22*r,t.m13-=t.m23*r,t.m14-=t.m24*r,r=n.m32,n.m33-=n.m23*r,n.m34-=n.m24*r,t.m31-=t.m21*r,t.m32-=t.m22*r,t.m33-=t.m23*r,t.m34-=t.m24*r,r=n.m42,n.m43-=n.m23*r,n.m44-=n.m24*r,t.m41-=t.m21*r,t.m42-=t.m22*r,t.m43-=t.m23*r,t.m44-=t.m24*r,Math.abs(n.m33)>Math.abs(n.m43)?(r=1/n.m33,n.m34*=r,t.m31*=r,t.m32*=r,t.m33*=r,t.m34*=r):(r=1/n.m43,a=n.m33,u=n.m34,n.m34=n.m44*r,n.m43=a,n.m44=u,i=t.m31,o=t.m32,a=t.m33,u=t.m34,t.m31=t.m41*r,t.m32=t.m42*r,t.m33=t.m43*r,t.m34=t.m44*r,t.m41=i,t.m42=o,t.m43=a,t.m44=u),r=n.m13,n.m14-=n.m34*r,t.m11-=t.m31*r,t.m12-=t.m32*r,t.m13-=t.m33*r,t.m14-=t.m34*r,r=n.m23,n.m24-=n.m34*r,t.m21-=t.m31*r,t.m22-=t.m32*r,t.m23-=t.m33*r,t.m24-=t.m34*r,r=n.m43,n.m44-=n.m34*r,t.m41-=t.m31*r,t.m42-=t.m32*r,t.m43-=t.m33*r,t.m44-=t.m34*r,r=1/n.m44,t.m41*=r,t.m42*=r,t.m43*=r,t.m44*=r,r=n.m14,t.m11-=t.m41*r,t.m12-=t.m42*r,t.m13-=t.m43*r,t.m14-=t.m44*r,r=n.m24,t.m21-=t.m41*r,t.m22-=t.m42*r,t.m23-=t.m43*r,t.m24-=t.m44*r,r=n.m34,t.m31-=t.m41*r,t.m32-=t.m42*r,t.m33-=t.m43*r,t.m34-=t.m44*r,t}},{key:"transpose",value:function(){var t=new e;return t.m11=this.m11,t.m12=this.m21,t.m13=this.m31,t.m14=this.m41,t.m21=this.m12,t.m22=this.m22,t.m23=this.m32,t.m24=this.m42,t.m31=this.m13,t.m32=this.m23,t.m33=this.m33,t.m34=this.m43,t.m41=this.m14,t.m42=this.m24,t.m43=this.m34,t.m44=this.m44,t}},{key:"scale",value:function(t,n,r){var i=e.matrixWithScale(t,n,r);return this.mult(i)}},{key:"rotation",value:function(t,n,r,i){if((0,f.default)(t,s.default)){var o=t;t=o.x,n=o.y,r=o.z,i=o.w}var a=e.matrixWithRotation(t,n,r,i);return this.mult(a)}},{key:"translation",value:function(t,n,r){var i=e.matrixWithTranslation(t,n,r);return this.mult(i)}},{key:"equalTo",value:function(t){return!!(0,f.default)(t,e)&&(Math.abs(this.m11-t.m11)<1e-7&&Math.abs(this.m12-t.m12)<1e-7&&Math.abs(this.m13-t.m13)<1e-7&&Math.abs(this.m14-t.m14)<1e-7&&Math.abs(this.m21-t.m21)<1e-7&&Math.abs(this.m22-t.m22)<1e-7&&Math.abs(this.m23-t.m23)<1e-7&&Math.abs(this.m24-t.m24)<1e-7&&Math.abs(this.m31-t.m31)<1e-7&&Math.abs(this.m32-t.m32)<1e-7&&Math.abs(this.m33-t.m33)<1e-7&&Math.abs(this.m34-t.m34)<1e-7&&Math.abs(this.m41-t.m41)<1e-7&&Math.abs(this.m42-t.m42)<1e-7&&Math.abs(this.m43-t.m43)<1e-7&&Math.abs(this.m44-t.m44)<1e-7)}},{key:"isIdentity",value:function(){return this.equalTo(e._identity())}},{key:"getScale",value:function(){var e=this.m11*this.m22*this.m33+this.m12*this.m23*this.m31+this.m13*this.m21*this.m32-this.m11*this.m23*this.m32-this.m12*this.m21*this.m33-this.m13*this.m22*this.m31,t=e>0?1:-1,n=t/this.m44,r=new u.default(this.m11,this.m12,this.m13),i=new u.default(this.m21,this.m22,this.m23),o=new u.default(this.m31,this.m32,this.m33);return new u.default(r.length()*n,i.length()*n,o.length()*n)}},{key:"getTranslation",value:function(){return new u.default(this.m41/this.m44,this.m42/this.m44,this.m43/this.m44)}},{key:"getRotation",value:function(){var e=[],t=this.getScale().mul(this.m44),n=new s.default,r=new u.default(this.m11,this.m12,this.m13).mul(1/t.x),i=new u.default(this.m21,this.m22,this.m23).mul(1/t.y),o=new u.default(this.m31,this.m32,this.m33).mul(1/t.z);e[0]=r.x-i.y-o.z+1,e[1]=-r.x+i.y-o.z+1,e[2]=-r.x-i.y+o.z+1,e[3]=r.x+i.y+o.z+1;for(var a=0,l=1;l<4;l++)e[l]>e[a]&&(a=l);if(e[a]<0)throw new Error("something is wrong...");var c=.5*Math.sqrt(e[a]),f=.25/c;switch(a){case 0:n.x=c,n.y=(r.y+i.x)*f,n.z=(o.x+r.z)*f,n.w=(i.z-o.y)*f;break;case 1:n.x=(r.y+i.x)*f,n.y=c,n.z=(i.z+o.y)*f,n.w=(o.x-r.z)*f;break;case 2:n.x=(o.x+r.z)*f,n.y=(i.z+o.y)*f,n.z=c,n.w=(r.y-i.x)*f;break;case 3:n.x=(i.z-o.y)*f,n.y=(o.x-r.z)*f,n.z=(r.y-i.x)*f,n.w=c}if(0===n.x&&0===n.y&&0===n.z)n.w=0;else{var h=Math.acos(n.w);isNaN(h)?n.w=0:n.w=2*h}return n}},{key:"getOrientation",value:function(){return this.getRotation().rotationToQuat()}},{key:"floatArray",value:function(){return[this.m11,this.m12,this.m13,this.m14,this.m21,this.m22,this.m23,this.m24,this.m31,this.m32,this.m33,this.m34,this.m41,this.m42,this.m43,this.m44]}},{key:"float32Array",value:function(){return new Float32Array([this.m11,this.m12,this.m13,this.m14,this.m21,this.m22,this.m23,this.m24,this.m31,this.m32,this.m33,this.m34,this.m41,this.m42,this.m43,this.m44])}},{key:"floatArray3x4f",value:function(){return[this.m11,this.m21,this.m31,this.m41,this.m12,this.m22,this.m32,this.m42,this.m13,this.m23,this.m33,this.m43]}},{key:"float32Array3x4f",value:function(){return new Float32Array([this.m11,this.m21,this.m31,this.m41,this.m12,this.m22,this.m32,this.m42,this.m13,this.m23,this.m33,this.m43])}}],[{key:"_initWithData",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new e;return r?(i.m11=t.readFloatBE(n+0),i.m12=t.readFloatBE(n+4),i.m13=t.readFloatBE(n+8),i.m14=t.readFloatBE(n+12),i.m21=t.readFloatBE(n+16),i.m22=t.readFloatBE(n+20),i.m23=t.readFloatBE(n+24),i.m24=t.readFloatBE(n+28),i.m31=t.readFloatBE(n+32),i.m32=t.readFloatBE(n+36),i.m33=t.readFloatBE(n+40),i.m34=t.readFloatBE(n+44),i.m41=t.readFloatBE(n+48),i.m42=t.readFloatBE(n+52),i.m43=t.readFloatBE(n+56),i.m44=t.readFloatBE(n+60)):(i.m11=t.readFloatLE(n+0),i.m12=t.readFloatLE(n+4),i.m13=t.readFloatLE(n+8),i.m14=t.readFloatLE(n+12),i.m21=t.readFloatLE(n+16),i.m22=t.readFloatLE(n+20),i.m23=t.readFloatLE(n+24),i.m24=t.readFloatLE(n+28),i.m31=t.readFloatLE(n+32),i.m32=t.readFloatLE(n+36),i.m33=t.readFloatLE(n+40),i.m34=t.readFloatLE(n+44),i.m41=t.readFloatLE(n+48),i.m42=t.readFloatLE(n+52),i.m43=t.readFloatLE(n+56),i.m44=t.readFloatLE(n+60)),i}},{key:"matrixWithScale",value:function(t,n,r){var i=t,o=n,a=r;if((0,f.default)(t,u.default)){var l=t;i=l.x,o=l.y,a=l.z}var s=e._identity();return s.m11=i,s.m22=o,s.m33=a,s}},{key:"matrixWithRotation",value:function(t,n,r,i){if((0,f.default)(t,s.default)){var o=t;t=o.x,n=o.y,r=o.z,i=o.w}var a=Math.cos(i),l=Math.sin(i),c=new u.default(t,n,r).normalize(),h=e._identity(),d=c.x,_=c.y,p=c.z;return h.m11=d*d*(1-a)+a,h.m12=_*d*(1-a)+p*l,h.m13=p*d*(1-a)-_*l,h.m14=0,h.m21=d*_*(1-a)-p*l,h.m22=_*_*(1-a)+a,h.m23=p*_*(1-a)+d*l,h.m24=0,h.m31=d*p*(1-a)+_*l,h.m32=_*p*(1-a)-d*l,h.m33=p*p*(1-a)+a,h.m34=0,h.m41=0,h.m42=0,h.m43=0,h.m44=1,h}},{key:"matrixWithOrientation",value:function(t){return e.matrixWithRotation(t.quatToRotation())}},{key:"matrixWithTranslation",value:function(t,n,r){var i=t,o=n,a=r;if((0,f.default)(t,u.default)){var l=t;i=l.x,o=l.y,a=l.z}var s=e._identity();return s.m41=i,s.m42=o,s.m43=a,s}},{key:"_identity",value:function(){return new e(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}}]),e}();t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),f=n(69),h=r(f),d=n(70),_=r(d),p=n(46),y=r(p),m=n(71),v=r(m),g=n(30),b=r(g),S=n(22),w=r(S),T=n(74),k=r(T),C=n(2),O=r(C),E={blinn:"SCNLightingModelBlinn",constant:"SCNLightingModelConstant",lambert:"SCNLightingModelLambert",phong:"SCNLightingModelPhong",physicallyBased:"SCNLightingModelPhysicallyBased"},P=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._diffuse=new b.default(O.default.white),n._ambient=new b.default(new O.default(.485,.485,.485,1)),n._specular=new b.default(O.default.black),n._normal=new b.default(O.default.white),n._reflective=new b.default(O.default.black),n._emission=new b.default(O.default.black),n._transparent=new b.default(O.default.white),n._multiply=new b.default(O.default.white),n._ambientOcclusion=new b.default(O.default.white),n._selfIllumination=new b.default(O.default.black),n._metalness=new b.default(O.default.black),n._roughness=new b.default(new O.default(.485,.485,.485,1)),n._displacement=new b.default(O.default.black),n.name=null,n.shininess=1,n.fresnelExponent=0,n.transparency=1,n.transparencyMode=k.default.aOne,n.lightingModel=E.blinn,n.isLitPerPixel=!0,n.isDoubleSided=!1,n.cullMode=y.default.back,n.blendMode=h.default.alpha,n.locksAmbientWithDiffuse=!0,n.writesToDepthBuffer=!0,n.readsFromDepthBuffer=!0,n.colorBufferWriteMask=_.default.all,n.fillMode=v.default.fill,n.program=null,n.shaderModifiers=null,n._bindingHandler={},n._unbindingHandler={},n._valuesForUndefinedKeys={},n._animations=new w.default,n._entityID=null,n._createPresentationProperties(),n._shadableHelper=null,n._loadedPromise=null,n}return a(t,e),l(t,null,[{key:"_propTypes",get:function(){return{diffuse:["SCNMaterialProperty",function(e,t){e._diffuse=t,t._createPresentation()}],ambient:["SCNMaterialProperty",function(e,t){e._ambient=t,t._createPresentation()}],specular:["SCNMaterialProperty",function(e,t){e._specular=t,t._createPresentation()}],normal:["SCNMaterialProperty",function(e,t){e._normal=t,t._createPresentation()}],reflective:["SCNMaterialProperty",function(e,t){e._reflective=t,t._createPresentation()}],emission:["SCNMaterialProperty",function(e,t){e._emission=t,t._createPresentation()}],transparent:["SCNMaterialProperty",function(e,t){e._transparent=t,t._createPresentation()}],multiply:["SCNMaterialProperty",function(e,t){e._multiply=t,t._createPresentation()}],ambientOcclusion:["SCNMaterialProperty",function(e,t){e._ambientOcclusion=t,t._createPresentation()}],selfIllumination:["SCNMaterialProperty",function(e,t){e._selfIllumination=t,t._createPresentation()}],metalness:["SCNMaterialProperty",function(e,t){e._metalness=t,t._createPresentation()}],roughness:["SCNMaterialProperty",function(e,t){e._roughness=t,t._createPresentation()}],displacement:["SCNMaterialProperty",function(e,t){e._displacement=t,t._createPresentation()}],name:"string",shininess:"float",fresnelExponent:"float",transparency:"integer",transparencyMode:"integer",lightingModelName:["string","lightingModel"],litPerPixel:["boolean","isLitPerPixel"],doubleSided:["boolean","isDoubleSided"],cullMode:"integer",blendMode:"integer",locksAmbientWithDiffuse:"boolean",writesToDepthBuffer:"boolean",readsFromDepthBuffer:"boolean",colorBufferWriteMask:"integer",fillMode:"integer",valuesForUndefinedKeys:["NSMutableDictionary","_valuesForUndefinedKeys"],shadableHelper:["SCNShadableHelper","_shadableHelper"],avoidsOverLighting:["boolean",null],entityID:["string","_entityID"],indexOfRefraction:["integer",null],selfIlluminationOcclusion:["integer",null]}}}]),l(t,[{key:"_createPresentationProperties",value:function(){this._diffuse._createPresentation(),this._ambient._createPresentation(),this._specular._createPresentation(),this._normal._createPresentation(),this._reflective._createPresentation(),this._emission._createPresentation(),this._transparent._createPresentation(),this._multiply._createPresentation(),this._ambientOcclusion._createPresentation(),this._selfIllumination._createPresentation(),this._metalness._createPresentation(),this._roughness._createPresentation()}},{key:"_copyPresentationProperties",value:function(){this._diffuse._copyPresentation(),this._ambient._copyPresentation(),this._specular._copyPresentation(),this._normal._copyPresentation(),this._reflective._copyPresentation(),this._emission._copyPresentation(),this._transparent._copyPresentation(),this._multiply._copyPresentation(),this._ambientOcclusion._copyPresentation(),this._selfIllumination._copyPresentation(),this._metalness._copyPresentation(),this._roughness._copyPresentation()}},{key:"handleBindingOfSymbolHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._bindingHandler[e]=t}},{key:"handleUnbindingOfSymbolHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._unbindingHandler[e]=t}},{key:"_callBindingHandlerForNodeProgramContextRenderer",value:function(e,t,n,r){var i=Object.keys(this._bindingHandler),o=!0,a=!1,u=void 0;try{for(var l,s=i[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value;(0,this._bindingHandler[c])(t,n.getUniformBlockIndex(t,c),e,r)}}catch(e){a=!0,u=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw u}}}},{key:"_callUnindingHandlerForNodeProgramContextRenderer",value:function(e,t,n,r){var i=Object.keys(this._unbindingHandler),o=!0,a=!1,u=void 0;try{for(var l,s=i[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value;(0,this._unbindingHandler[c])(t,n.getUniformBlockIndex(t,c),e,r)}}catch(e){a=!0,u=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw u}}}},{key:"addAnimationForKey",value:function(e,t){void 0!==t&&null!==t||(t=Symbol());var n=e.copy();n._animationStartTime=.001*Date.now(),n._prevTime=n._animationStartTime-1e-7,this._animations.set(t,n)}},{key:"animationForKey",value:function(e){return this._animations.get(e)}},{key:"removeAllAnimations",value:function(){this._animations.clear()}},{key:"removeAnimationForKey",value:function(e){this._animations.delete(e)}},{key:"removeAnimationForKeyFadeOutDuration",value:function(e,t){}},{key:"pauseAnimationForKey",value:function(e){}},{key:"resumeAnimationForKey",value:function(e){}},{key:"isAnimationPausedForKey",value:function(e){return!1}},{key:"setAnimationSpeedForKey",value:function(e,t){}},{key:"_getLoadedPromise",value:function(){if(this._loadedPromise)return this._loadedPromise;var e=[this._ambient,this._specular,this._normal,this._reflective,this._emission,this._transparent,this._multiply,this._ambientOcclusion,this._metalness,this._roughness],t=[],n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;u&&t.push(u.didLoad)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return Promise.all(t)}},{key:"setValueForUndefinedKey",value:function(e,t){this._valuesForUndefinedKeys[t]=e}},{key:"valueForUndefinedKey",value:function(e){return void 0!==this._valuesForUndefinedKeys[e]?this._valuesForUndefinedKeys[e]:u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"valueForUndefinedKey",this).call(this,e)}},{key:"diffuse",get:function(){return this._diffuse}},{key:"ambient",get:function(){return this._ambient}},{key:"specular",get:function(){return this._specular}},{key:"normal",get:function(){return this._normal}},{key:"reflective",get:function(){return this._reflective}},{key:"emission",get:function(){return this._emission}},{key:"transparent",get:function(){return this._transparent}},{key:"multiply",get:function(){return this._multiply}},{key:"ambientOcclusion",get:function(){return this._ambientOcclusion}},{key:"selfIllumination",get:function(){return this._selfIllumination}},{key:"metalness",get:function(){return this._metalness}},{key:"roughness",get:function(){return this._roughness}},{key:"displacement",get:function(){return this._displacement}},{key:"animationKeys",get:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this._animations.keys()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return e}},{key:"didLoad",get:function(){return this._getLoadedPromise()}}],[{key:"LightingModel",get:function(){return E}}]),t}(c.default);t.default=P},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(0),f=r(c),h=n(46),d=r(h),_=n(6),p=r(_),y=n(8),m=r(y),v=n(22),g=r(v),b=n(1),S=r(b),w=n(2),T=r(w),k=n(3),C=r(k),O=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(!Array.isArray(e))throw new Error("SCNGeometry(sources, elements): sources must be Array");if(!Array.isArray(n))throw new Error("SCNGeometry(sources, elements): elements must be Array");return r.name=null,r.levelsOfDetail=null,r.materials=[],r._geometryElements=n,r._geometrySources=e,r._vertexArrayObjects=null,r._materialBuffer=null,r._shadowVAO=null,r._hitTestVAO=null,r.subdivisionLevel=0,r.edgeCreasesElement=null,r.edgeCreasesSource=null,r.program=null,r.shaderModifiers=null,r._bindingHandler={},r._unbindingHandler={},r._valuesForUndefinedKeys={},r._animations=new g.default,r.boundingBox=null,r.tessellator=null,r.wantsAdaptiveSubdivision=!1,r._vertexBuffer=null,r._indexBuffer=null,r._isPresentationInstance=!1,r._presentation=null,r._entityID=null,r._shadableHelper=null,r._btVertices=null,r._btMesh=null,r._btShape=null,r._loadedPromise=null,r}return u(t,e),s(t,null,[{key:"_propTypes",get:function(){var e=function(e,t,n,r){var o;(o=e._geometrySources).push.apply(o,i(t))};return{name:"string",levelsOfDetail:"NSArray",materials:"NSArray",tessellator:"SCNGeometryTessellator",subdivisionLevel:"integer",elements:["NSArray","_geometryElements"],kGeometrySourceSemanticColor:["NSArray",e],kGeometrySourceSemanticEdgeCrease:["NSArray",e],kGeometrySourceSemanticNormal:["NSArray",e],kGeometrySourceSemanticTangent:["NSArray",e],kGeometrySourceSemanticTexcoord:["NSArray",e],kGeometrySourceSemanticVertex:["NSArray",function(t,n){e(t,n),t._updateBoundingBox()}],kGeometrySourceSemanticVertexCrease:["NSArray",e],wantsAdaptiveSubdivision:"boolean",adaptiveSubdivision:["boolean",null],entityID:["string","_entityID"],subdivisionSettings:["bytes",null],shadableHelper:["SCNShadableHelper","_shadableHelper"]}}}]),s(t,[{key:"materialNamed",value:function(e){return null}},{key:"insertMaterialAt",value:function(e,t){}},{key:"removeMaterialAt",value:function(e){}},{key:"replaceMaterialAtIndexWith",value:function(e,t){}},{key:"geometryElementAtIndex",value:function(e){return this._geometryElements[e]}},{key:"getGeometrySourcesForSemantic",value:function(e){return this._geometrySources.filter(function(t){return t.semantic===e})}},{key:"getBoundingSphere",value:function(){if(null===this.boundingBox)return{center:new S.default(0,0,0),radius:0};var e=this.boundingBox.max,t=this.boundingBox.min,n=.5*(e.x-t.x),r=.5*(e.y-t.y),i=.5*(e.z-t.z),o=Math.sqrt(n*n+r*r+i*i);return{center:new S.default(t.x+n,t.y+r,t.z+i),radius:o}}},{key:"handleBindingOfSymbolHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._bindingHandler[e]=t}},{key:"handleUnbindingOfSymbolHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._unbindingHandler[e]=t}},{key:"_callBindingHandlerForNodeProgramContextRenderer",value:function(e,t,n,r){var i=Object.keys(this._bindingHandler),o=!0,a=!1,u=void 0;try{for(var l,s=i[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value;(0,this._bindingHandler[c])(t,n.getUniformBlockIndex(t,c),e,r)}}catch(e){a=!0,u=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw u}}}},{key:"_callUnindingHandlerForNodeProgramContextRenderer",value:function(e,t,n,r){var i=Object.keys(this._unbindingHandler),o=!0,a=!1,u=void 0;try{for(var l,s=i[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value;(0,this._unbindingHandler[c])(t,n.getUniformBlockIndex(t,c),e,r)}}catch(e){a=!0,u=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw u}}}},{key:"addAnimationForKey",value:function(e,t){void 0!==t&&null!==t||(t=Symbol());var n=e.copy();n._animationStartTime=.001*Date.now(),n._prevTime=n._animationStartTime-1e-7,this._animations.set(t,n)}},{key:"animationForKey",value:function(e){return this._animations.get(e)}},{key:"removeAllAnimations",value:function(){this._animations.clear()}},{key:"removeAnimationForKey",value:function(e){this._animations.delete(e)}},{key:"removeAnimationForKeyFadeOutDuration",value:function(e,t){}},{key:"pauseAnimationForKey",value:function(e){}},{key:"resumeAnimationForKey",value:function(e){}},{key:"isAnimationPausedForKey",value:function(e){return!1}},{key:"setAnimationSpeedForKey",value:function(e,t){}},{key:"_createVertexBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=null===r?t.geometry:r,a=t.skinner,u=t.presentation.skinner;if(null===this._vertexBuffer)this._vertexBuffer=e.createBuffer();else if(!n)return this._vertexBuffer;e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer);var l=[],s=o.getGeometrySourcesForSemantic(p.default.Semantic.vertex)[0],c=o.getGeometrySourcesForSemantic(p.default.Semantic.normal)[0],f=o.getGeometrySourcesForSemantic(p.default.Semantic.tangent)[0],h=o.getGeometrySourcesForSemantic(p.default.Semantic.color)[0],d=o.getGeometrySourcesForSemantic(p.default.Semantic.texcoord)[0],_=o.getGeometrySourcesForSemantic(p.default.Semantic.texcoord)[1],y=a?a._boneIndices:null,m=a?a._boneWeights:null,v=s.vectorCount,g=this.getGeometrySourcesForSemantic(p.default.Semantic.vertex)[0],b=this.getGeometrySourcesForSemantic(p.default.Semantic.normal)[0],S=this.getGeometrySourcesForSemantic(p.default.Semantic.tangent)[0],w=this.getGeometrySourcesForSemantic(p.default.Semantic.color)[0],k=this.getGeometrySourcesForSemantic(p.default.Semantic.texcoord)[0],O=this.getGeometrySourcesForSemantic(p.default.Semantic.texcoord)[1],E=u?u._boneIndices:null,P=u?u._boneWeights:null;if(void 0===s)throw new Error("vertexSource is undefined");if(void 0!==c&&c.vectorCount!==v)throw new Error("normalSource.vectorCount !== vertexSource.vectorCount");if(void 0!==f&&f.vectorCount!==v)throw new Error("tangentSource.vectorCount !== vertexSource.vectorCount");if(void 0!==h&&h.vectorCount!==v)throw new Error("colorSource.vectorCount !== vertexSource.vectorCount");if(void 0!==d&&d.vectorCount!==v)throw new Error("texcoordSource0.vectorCount !== vertexSource.vectorCount");if(void 0!==_&&_.vectorCount!==v)throw new Error("texcoordSource1.vectorCount !== vertexSource.vectorCount");void 0===f&&this.materials.find(function(e){return!(0,C.default)(e._normal._contents,T.default)})&&(f=this._createTangentSource(),S=f,this._geometrySources.push(f),o!==this&&o._geometrySources.push(f));for(var A=s?s.componentsPerVector:0,x=c?c.componentsPerVector:0,M=f?f.componentsPerVector:0,N=h?h.componentsPerVector:0,F=d?d.componentsPerVector:0,R=_?_.componentsPerVector:0,D=0;D<v;D++)s&&l.push.apply(l,i(s._vectorAt(D))),c&&l.push.apply(l,i(c._vectorAt(D))),f&&l.push.apply(l,i(f._vectorAt(D))),h&&l.push.apply(l,i(h._vectorAt(D))),d&&l.push.apply(l,i(d._vectorAt(D))),_&&l.push.apply(l,i(_._vectorAt(D)));var I=0,j=4*(A+x+M+N+F+R);g._bytesPerComponent=4,g._dataOffset=I,g._dataStride=j,I+=4*A,b&&(b._bytesPerComponent=4,b._dataOffset=I,b._dataStride=j,I+=4*x),S&&(S._bytesPerComponent=4,S._dataOffset=I,S._dataStride=j,I+=4*M),w&&(w._bytesPerComponent=4,w._dataOffset=I,w._dataStride=j,I+=4*N),k&&(k._bytesPerComponent=4,k._dataOffset=I,k._dataStride=j,I+=4*F),O&&(O._bytesPerComponent=4,O._dataOffset=I,O._dataStride=j,I+=4*R),I*=v;for(var B=(y&&y.data,y?y.componentsPerVector:0),U=(m&&m.data,m?m.componentsPerVector:0),L=4*(B+U),V=0;V<v;V++)y&&l.push.apply(l,i(y._vectorAt(V))),m&&l.push.apply(l,i(m._vectorAt(V)));E&&(E._bytesPerComponent=4,E._dataOffset=I,E._dataStride=L,I+=4*B),P&&(P._bytesPerComponent=4,P._dataOffset=I,P._dataStride=L,I+=4*U);var z=new Float32Array(l);return e.bufferData(e.ARRAY_BUFFER,z,e.DYNAMIC_DRAW),g._data=l,b&&(b._data=l),S&&(S._data=l),w&&(w._data=l),k&&(k._data=l),O&&(O._data=l),E&&(E._data=l),P&&(P._data=l),this._vertexBuffer}},{key:"_createIndexBuffer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._indexBuffer&&!t?this._indexBuffer:(this._indexBuffer=this._geometryElements[0]._createBuffer(e),this._indexBuffer)}},{key:"_updateVertexBuffer",value:function(e,t){var n=this.getGeometrySourcesForSemantic(p.default.Semantic.vertex)[0],r=new Float32Array(n._data);e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,r,e.DYNAMIC_DRAW)}},{key:"_bufferMaterialData",value:function(e,t,n,r){var o=this.materials.length,a=this.materials[n%o];if(a||(a=new m.default),a.lightingModel===m.default.LightingModel.constant)return void this._bindMaterialDataForConstantLighting(a,e,t,r);var u=a.diffuse.float32Array();u[3]*=r;var l=null;a.locksAmbientWithDiffuse?l=u:(l=a.ambient.float32Array(),l[3]*=r);var s=new Float32Array([].concat(i(l),i(u),i(a.specular.float32Array()),i(a.normal.float32Array()),i(a.reflective.float32Array()),i(a.emission.float32Array()),i(a.transparent.float32Array()),i(a.multiply.float32Array()),i(a.ambientOcclusion.float32Array()),i(a.selfIllumination.float32Array()),i(a.metalness.float32Array()),i(a.roughness.float32Array()),[100*a.shininess,a.fresnelExponent,0,0]));e.bindBuffer(e.UNIFORM_BUFFER,this._materialBuffer),e.bufferData(e.UNIFORM_BUFFER,s,e.DYNAMIC_DRAW),e.bindBuffer(e.UNIFORM_BUFFER,null);var c=[],f=0;a._selfIllumination._contents instanceof Image||a._selfIllumination._contents instanceof WebGLTexture?(this._setTextureToName(e,a._selfIllumination,"TEXTURE0",c),f=1):a._emission._contents instanceof Image||a._emission._contents instanceof WebGLTexture?this._setTextureToName(e,a._emission,"TEXTURE0",c):c.push(0),e.uniform1i(e.getUniformLocation(t,"selfIllumination"),f),this._setTextureToName(e,a._ambient,"TEXTURE1",c),this._setTextureToName(e,a._diffuse,"TEXTURE2",c),this._setTextureToName(e,a._specular,"TEXTURE3",c),this._setCubeTextureToName(e,a._reflective,"TEXTURE4",c),this._setTextureToName(e,a._transparent,"TEXTURE5",c),this._setTextureToName(e,a._multiply,"TEXTURE6",c),this._setTextureToName(e,a._normal,"TEXTURE7",c),this._setTextureToName(e,a._ambientOcclusion,"TEXTURE8",c),this._setTextureToName(e,a._selfIllumination,"TEXTURE9",c),this._setTextureToName(e,a._metalness,"TEXTURE10",c),this._setTextureToName(e,a._roughness,"TEXTURE11",c),e.uniform1iv(e.getUniformLocation(t,"textureFlags"),new Int32Array(c)),a.isDoubleSided?e.disable(e.CULL_FACE):(e.enable(e.CULL_FACE),a.cullMode===d.default.back?e.cullFace(e.BACK):e.cullFace(e.FRONT));var h=[e.SRC_ALPHA,e.ONE,e.ZERO,e.ZERO,e.SRC_ALPHA,e.ONE],_=[e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_COLOR,e.SRC_COLOR,e.ONE,e.ZERO];e.blendFunc(h[a.blendMode],_[a.blendMode])}},{key:"_bindMaterialDataForConstantLighting",value:function(e,t,n,r){var o=e.ambient.float32Array();o[3]*=r;var a=new Float32Array([].concat(i(o),[0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,1,1,1,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0]));t.bindBuffer(t.UNIFORM_BUFFER,this._materialBuffer),t.bufferData(t.UNIFORM_BUFFER,a,t.DYNAMIC_DRAW),t.bindBuffer(t.UNIFORM_BUFFER,null);var u=[];u.push(0),t.uniform1i(t.getUniformLocation(n,"selfIllumination"),0),this._setTextureToName(t,e._ambient,"TEXTURE1",u),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),u.push(0),t.uniform1iv(t.getUniformLocation(n,"textureFlags"),new Int32Array(u)),e.isDoubleSided?t.disable(t.CULL_FACE):(t.enable(t.CULL_FACE),e.cullMode===d.default.back?t.cullFace(t.BACK):t.cullFace(t.FRONT));var l=[t.SRC_ALPHA,t.ONE,t.ZERO,t.ZERO,t.SRC_ALPHA,t.ONE],s=[t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_COLOR,t.SRC_COLOR,t.ONE,t.ZERO];t.blendFunc(l[e.blendMode],s[e.blendMode])}},{key:"_setCubeTextureToName",value:function(e,t,n,r){t._contents instanceof Image&&(t._contents=this._createCubeTexture(e,t._contents)),t._contents instanceof WebGLTexture?(r.push(1),e.activeTexture(e[n]),e.bindTexture(e.TEXTURE_CUBE_MAP,t._contents),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,t._magnificationFilterFor(e)),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,t._minificationFilterFor(e)),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_S,t._wrapSFor(e)),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_T,t._wrapTFor(e))):r.push(0)}},{key:"_setTextureToName",value:function(e,t,n,r){t._contents instanceof Image&&(t._contents=this._createTexture(e,t._contents)),t._contents instanceof WebGLTexture?(r.push(1),e.activeTexture(e[n]),e.bindTexture(e.TEXTURE_2D,t._contents),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t._magnificationFilterFor(e)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t._minificationFilterFor(e)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,t._wrapSFor(e)),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,t._wrapTFor(e))):r.push(0)}},{key:"_createTangentSource",value:function(){for(var e=this._geometryElements,t=this.getGeometrySourcesForSemantic(p.default.Semantic.vertex)[0],n=this.getGeometrySourcesForSemantic(p.default.Semantic.texcoord)[0],r=[],o=p.default.Semantic.tangent,a=t.vectorCount,u=[],l=0;l<a;l++)u.push(new S.default(0,0,0));var s=!0,c=!1,f=void 0;try{for(var h,d=e[Symbol.iterator]();!(s=(h=d.next()).done);s=!0)for(var _=h.value,y=_.primitiveCount,m=0;m<y;m++){var v=_._indexAt(m),g=t._scnVectorAt(v[0]),b=t._scnVectorAt(v[1]),w=t._scnVectorAt(v[2]),T=n._scnVectorAt(v[0]),k=n._scnVectorAt(v[1]),C=n._scnVectorAt(v[2]),O=b.sub(g),E=w.sub(g),P=k.sub(T),A=C.sub(T),x=O.mul(A.y).sub(E.mul(P.y));u[v[0]]=u[v[0]].add(x),u[v[1]]=u[v[1]].add(x),u[v[2]]=u[v[2]].add(x)}}catch(e){c=!0,f=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw f}}for(var M=0;M<a;M++)r.push.apply(r,i(u[M].normalize().floatArray()));return new p.default(r,o,a,!0,3,4,0,12)}},{key:"copy",value:function(){var e=new t;return e.name=this.name,e.levelsOfDetail=this.levelsOfDetail,e.materials=this.materials,e._geometryElements=this._geometryElements.slice(0),e._geometrySources=this._geometrySources.slice(0),e._vertexArrayObjects=this._vertexArrayObjects?this._vertexArrayObjects.slice(0):null,e.subdivisonLevel=this.subdivisionLevel,e.edgeCreasesElement=this.edgeCreasesElement,e.edgeCreasesSource=this.edgeCreasesSource,e.program=this.program,e.shaderModifiers=this.shaderModifiers,e.boundingBox=this.boundingBox,e._vertexBuffer=this._vertexBuffer,e._indexBuffer=this._indexBuffer,e._animations=this._animations.copy(),e._shadableHelper=this._shadableHelper,e}},{key:"_createCubeTexture",value:function(e,t){var n=e.createTexture();e.bindTexture(e.TEXTURE_CUBE_MAP,n);for(var r=[e.TEXTURE_CUBE_MAP_POSITIVE_Z,e.TEXTURE_CUBE_MAP_POSITIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_Z,e.TEXTURE_CUBE_MAP_NEGATIVE_X,e.TEXTURE_CUBE_MAP_NEGATIVE_Y,e.TEXTURE_CUBE_MAP_POSITIVE_Y],i=[4/6+.001,1/6+.001,5/6+.001,.001,2/6+.001,.501],o=(t.naturalWidth,t.naturalHeight),a=o-.002,u=0;u<6;u++){var l=document.createElement("canvas");l.width=o,l.height=o,l.getContext("2d").drawImage(t,i[u],0,a,o,0,0,o,o),e.texImage2D(r[u],0,e.RGBA,o,o,0,e.RGBA,e.UNSIGNED_BYTE,l)}return e.generateMipmap(e.TEXTURE_CUBE_MAP),n}},{key:"_createTexture",value:function(e,t){var n=e.createTexture(),r=document.createElement("canvas");return r.width=t.naturalWidth,r.height=t.naturalHeight,r.getContext("2d").drawImage(t,0,0),e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width,t.height,0,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D),n}},{key:"_createBtCollisionShape",value:function(){return this._createBtConvexTriangleMeshShape()}},{key:"_createBtConvexTriangleMeshShape",value:function(){}},{key:"_destroyShape",value:function(){}},{key:"_execDestory",value:function(){this._destroyShape()}},{key:"_updateBoundingBox",value:function(){return this._updateBoundingBoxForSkinner()}},{key:"_updateBoundingBoxForSkinner",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=null;e&&(t=e.baseGeometryBindTransform);var n=this.getGeometrySourcesForSemantic(p.default.Semantic.vertex),r=new S.default(1/0,1/0,1/0),i=new S.default(-1/0,-1/0,-1/0),o=!0,a=!1,u=void 0;try{for(var l,s=n[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value,f=c._createBoundingBox(t);f.min.x<r.x&&(r.x=f.min.x),f.max.x>i.x&&(i.x=f.max.x),f.min.y<r.y&&(r.y=f.min.y),f.max.y>i.y&&(i.y=f.max.y),f.min.z<r.z&&(r.z=f.min.z),f.max.z>i.z&&(i.z=f.max.z)}}catch(e){a=!0,u=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw u}}return this.boundingBox={min:r,max:i},this.boundingBox}},{key:"_intersectsBoundingBox",value:function(e){var t=this.boundingBox,n=e.boundingBox;return!(t.min.x>n.max.x||t.max.x<n.min.x)&&(!(t.min.y>n.max.y||t.max.y<n.min.y)&&!(t.min.z>n.max.z||t.max.z<n.min.z))}},{key:"_getLoadedPromise",value:function(){if(this._loadedPromise)return this._loadedPromise;var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.materials[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push(a.didLoad)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return Promise.all(e)}},{key:"setValueForUndefinedKey",value:function(e,t){this._valuesForUndefinedKeys[t]=e}},{key:"valueForUndefinedKey",value:function(e){return void 0!==this._valuesForUndefinedKeys[e]?this._valuesForUndefinedKeys[e]:l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"valueForUndefinedKey",this).call(this,e)}},{key:"firstMaterial",get:function(){return this.materials[0]},set:function(e){this.materials[0]=e}},{key:"geometryElements",get:function(){return this._geometryElements.slice(0)}},{key:"geometrySources",get:function(){return this._geometrySources.slice(0)}},{key:"geometryGLSource",get:function(){return new Float32Array(this._geometrySources[0])}},{key:"geometryElementCount",get:function(){return this._geometryElements.length}},{key:"animationKeys",get:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this._animations.keys()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return e}},{key:"didLoad",get:function(){return this._getLoadedPromise()}}]),t}(f.default);t.default=O},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,e),this.x=t,this.y=n}return i(e,[{key:"applying",value:function(e){return null}},{key:"equalTo",value:function(e){return Math.abs(this.x-e.x)<1e-5&&Math.abs(this.y-e.y)<1e-5}},{key:"copy",value:function(){return new e(this.x,this.y)}},{key:"zero",value:function(){return new e(0,0)}},{key:"add",value:function(t){var n=new e;return n.x=this.x+t.x,n.y=this.y+t.y,n}},{key:"sub",value:function(t){var n=new e;return n.x=this.x-t.x,n.y=this.y-t.y,n}},{key:"mul",value:function(t){var n=new e;return n.x=this.x*t,n.y=this.y*t,n}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y}},{key:"lerp",value:function(t,n){var r=new e;return r.x=this.x+n*(t.x-this.x),r.y=this.y+n*(t.y-this.y),r}},{key:"normalize",value:function(){var t=this.length(),n=new e;if(0===t)return n;var r=1/t;return n.x=this.x*r,n.y=this.y*r,n}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"floatArray",value:function(){return[this.x,this.y]}},{key:"float32Array",value:function(){return new Float32Array([this.x,this.y])}},{key:"dictionaryRepresentation",get:function(){var e=new Map;return e.set("x",this.x),e.set("y",this.y),e}},{key:"debugDescription",get:function(){return"{x: "+this.x+", y: "+this.y+"}"}},{key:"customMirror",get:function(){return null}},{key:"customPlaygroundQuickLook",get:function(){return null}}],[{key:"pointWithDictionaryRepresentation",value:function(t){return new e(t.get("x"),t.get("y"))}},{key:"zero",get:function(){return new e(0,0)}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this.width=t,this.height=n}return i(e,null,[{key:"_initWithData",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2];throw new Error("not implemented")}}]),i(e,[{key:"applying",value:function(e){return null}},{key:"equalTo",value:function(e){return Math.abs(this.width-e.width)<1e-5&&Math.abs(this.height-e.height)<1e-5}},{key:"zero",value:function(){return new e(0,0)}},{key:"add",value:function(t){return new e(this.width+t.width,this.height+t.height)}},{key:"sub",value:function(t){return new e(this.width-t.width,this.height-t.height)}},{key:"lerp",value:function(t,n){return new e(this.width+n*(t.width-this.width),this.height+n*(t.height-this.height))}},{key:"copy",value:function(){return new e(this.width,this.height)}},{key:"dictionaryRepresentation",get:function(){var e=new Map;return e.set("width",this.width),e.set("height",this.height),e}},{key:"debugDescription",get:function(){return"{width: "+this.width+", height: "+this.height+"}"}},{key:"customMirror",get:function(){return null}},{key:"customPlaygroundQuickLook",get:function(){return null}}],[{key:"sizeWithDictionaryRepresentation",value:function(t){return new e(t.get("width"),t.get("height"))}},{key:"zero",get:function(){return new e(0,0)}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={triangles:0,triangleStrip:1,line:2,point:3,polygon:4};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(7),u=r(a),l=n(1),s=r(l),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,e),this.x=t,this.y=n,this.z=r,this.w=o}return o(e,[{key:"_copy",value:function(){return new e(this.x,this.y,this.z,this.w)}},{key:"_copyFrom",value:function(e){this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.z}},{key:"zero",value:function(){return new e}},{key:"add",value:function(t){var n=new e;return n.x=this.x+t.x,n.y=this.y+t.y,n.z=this.z+t.z,n.w=this.w+t.w,n}},{key:"sub",value:function(t){var n=new e;return n.x=this.x-t.x,n.y=this.y-t.y,n.z=this.z-t.z,n.w=this.w-t.w,n}},{key:"mul",value:function(t){var n=new e;return n.x=this.x*t,n.y=this.y*t,n.z=this.z*t,n.w=this.w*t,n}},{key:"mulv",value:function(t){var n=new e;return n.x=this.x*t.x,n.y=this.y*t.y,n.z=this.z*t.z,n.z=this.w*t.w,n}},{key:"dot",value:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}},{key:"cross",value:function(t){var n=new e;return n.x=this.w*t.x+this.x*t.w+this.y*t.z-this.z*t.y,n.y=this.w*t.y-this.x*t.z+this.y*t.w+this.z*t.x,n.z=this.w*t.z+this.x*t.y-this.y*t.x+this.z*t.w,n.w=this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z,n}},{key:"lerp",value:function(t,n){var r=new e;return r.x=this.x+n*(t.x-this.x),r.y=this.y+n*(t.y-this.y),r.z=this.z+n*(t.z-this.z),r.w=this.w+n*(t.w-this.w),r}},{key:"slerp",value:function(t,n){var r=new e;return this.dot(t)<0?(r.x=this.x-(this.x+t.x)*n,r.y=this.y-(this.y+t.y)*n,r.z=this.z-(this.z+t.z)*n,r.w=this.w-(this.w+t.w)*n):(r.x=this.x+(t.x-this.x)*n,r.y=this.y+(t.y-this.y)*n,r.z=this.z+(t.z-this.z)*n,r.w=this.w+(t.w-this.w)*n),r.normalize()}},{key:"normalize",value:function(){var t=new e,n=1/this.length();return t.x=this.x*n,t.y=this.y*n,t.z=this.z*n,t.w=this.w*n,t}},{key:"length2",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"transform",value:function(t){var n=new e;return n.x=this.x*t.m11+this.y*t.m21+this.z*t.m31+this.w*t.m41,n.y=this.x*t.m12+this.y*t.m22+this.z*t.m32+this.w*t.m42,n.z=this.x*t.m13+this.y*t.m23+this.z*t.m33+this.w*t.m43,n.w=this.x*t.m14+this.y*t.m24+this.z*t.m34+this.w*t.m44,n}},{key:"ln",value:function(){var t=new e,n=this.normalize(),r=Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z);if(0===r)return t.x=0,t.y=0,t.z=0,t.w=0,t;var i=Math.atan2(r,n.w)/r;return t.x=i*n.x,t.y=i*n.y,t.z=i*n.z,t.w=0,t}},{key:"exp",value:function(){var t=new e,n=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);if(n>0){var r=Math.sin(n);t.x=r*this.x/n,t.y=r*this.y/n,t.z=r*this.z/n,t.w=Math.cos(n)}else t.x=0,t.y=0,t.z=0,t.w=1;return t}},{key:"rotMatrix",value:function(){var e=new u.default,t=this.x*this.x*2,n=this.y*this.y*2,r=this.z*this.z*2,i=this.x*this.y*2,o=this.y*this.z*2,a=this.z*this.x*2,l=this.x*this.w*2,s=this.y*this.w*2,c=this.z*this.w*2;return e.m11=1-n-r,e.m12=i+c,e.m13=a-s,e.m14=0,e.m21=i-c,e.m22=1-r-t,e.m23=o+l,e.m24=0,e.m31=a+s,e.m32=o-l,e.m33=1-t-n,e.m34=0,e.m41=0,e.m42=0,e.m43=0,e.m44=1,e}},{key:"rotationToQuat",value:function(){var t=new e;if(0===this.x&&0===this.y&&0===this.z)t.x=0,t.y=0,t.z=0,t.w=1;else{var n=1/Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z),r=Math.cos(.5*this.w),i=Math.sin(.5*this.w)*n;t.x=this.x*i,t.y=this.y*i,t.z=this.z*i,t.w=r}return t}},{key:"quatToRotation",value:function(){var t=new e;if(0===this.x&&0===this.y&&0===this.z)t.x=0,t.y=0,t.z=0,Math.abs(this.w)>1?t.w=0:t.w=2*Math.acos(this.w);else{var n=this.normalize(),r=1/Math.sqrt(n.x*n.x+n.y*n.y+n.z*n.z);t.x=n.x*r,t.y=n.y*r,t.z=n.z*r;var i=Math.acos(n.w);isNaN(i)?t.w=0:t.w=2*i}return t}},{key:"rotationToEulerAngles",value:function(){var e=new s.default,t=Math.sin(this.w),n=Math.cos(this.w),r=1-n,i=this.x*this.x+this.y*this.y+this.z*this.z;if(0===i)return e;var o=1/Math.sqrt(i),a=this.x*o,u=this.y*o,l=this.z*o,c=u*t-a*l*r;if(c>.999999)e.x=0,e.y=.5*-Math.PI,e.z=-2*Math.atan2(l*Math.sin(.5*this.w),Math.cos(.5*this.w));else if(c<-.999999)e.x=0,e.y=.5*Math.PI,e.z=2*Math.atan2(l*Math.sin(.5*this.w),Math.cos(.5*this.w));else{var f=a*t+u*l*r,h=n+l*l*r,d=l*t+a*u*r,_=n+a*a*r;e.x=Math.atan2(f,h),e.y=Math.asin(c),e.z=Math.atan2(d,_)}return e}},{key:"quatToEulerAngles",value:function(){return this.quatToRotation().rotationToEulerAngles()}},{key:"floatArray",value:function(){return[this.x,this.y,this.z,this.w]}},{key:"float32Array",value:function(){return new Float32Array([this.x,this.y,this.z,this.w])}},{key:"_createBtVector4",value:function(){}},{key:"_createBtQuaternion",value:function(){}},{key:"angle",get:function(){return this.quatToRotation().w}}],[{key:"_initWithData",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=new e;return r?(i.x=t.readFloatBE(n+0),i.y=t.readFloatBE(n+4),i.z=t.readFloatBE(n+8),i.w=t.readFloatBE(n+12)):(i.x=t.readFloatLE(n+0),i.y=t.readFloatLE(n+4),i.z=t.readFloatLE(n+8),i.w=t.readFloatLE(n+12)),i}}]),e}();t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(66),f=r(c),h=n(44),d=r(h),_=n(43),p=r(_),y=n(67),m=r(y),v=n(0),g=r(v),b=n(7),S=r(b),w=n(18),T=r(w),k=n(1),C=r(k),O=n(13),E=r(O),P=n(68),A=r(P),x=n(22),M=r(x),N=n(32),F=r(N),R=n(34),D=r(R),I=n(2),j=r(I),B=n(27),U=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(B),L=n(3),V=r(L),z=new C.default(0,0,1),G=new C.default(1,0,0),Y=new C.default(0,1,0),X=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.name=null,n.light=null,n.camera=null,n._geometry=e,n.morpher=null,n.skinner=null,n.categoryBitMask=0,n.isPaused=!1,n._presentation=null,n._isPresentationInstance=!1,n._transform=new S.default,n._worldTransform=new S.default,n._transformUpToDate=!1,n._position=new C.default(0,0,0),n._rotation=new E.default(1,0,0,0),n._scale=new C.default(1,1,1),n.pivot=null,n.constraints=null,n.isHidden=!1,n._opacity=1,n._worldOpacity=1,n.renderingOrder=0,n.castsShadow=!1,n.movabilityHint=A.default.fixed,n._parent=null,n._childNodes=[],n.filters=null,n.rendererDelegate=null,n._physicsBody=null,n.physicsField=null,n._particleSystems=null,n._audioPlayers=[],n.entity=null,n.focusBehavior=null,n._actions=new Map,n._animations=new M.default,n._animationPlayers=new M.default,n._boundingBox=null,n._fixedBoundingBox=null,n._entityID=null,n._nodeID=null,n._updateBoundingBox(),n._loadedPromise=null,n}return u(t,e),s(t,null,[{key:"_propTypes",get:function(){var e=this;return{name:"string",light:"SCNLight",camera:"SCNCamera",geometry:["SCNGeometry",function(e,t){e.geometry=t,e.boundingBox=t.boundingBox}],morpher:"SCNMorpher",skinner:"SCNSkinner",categoryBitMask:"integer",paused:["boolean","isPaused"],position:["SCNVector3","_position"],rotation:["SCNVector4","_rotation"],orientation:["SCNVector4",function(e,t){e.orientation=t}],scale:["SCNVector3","_scale"],hidden:["boolean","isHidden"],opacity:["float","_opacity"],renderingOrder:"integer",castsShadow:"boolean",childNodes:["NSArray",function(e,t){t.forEach(function(t){e.addChildNode(t)})}],physicsBody:["SCNPhysicsBody",function(e,t){e.physicsBody=t}],physicsField:"SCNPhysicsField",particleSystem:["NSArray","_particleSystems"],animations:["NSMutableDictionary",function(t,n){e._loadAnimationArray(t,n),t._setAnimationsToPlayers()}],"animation-keys":["NSMutableArray",function(e,t){e._animationPlayers._keys=t}],"animation-players":["NSMutableArray",function(e,t){e._animationPlayers._values=t,e._setAnimationsToPlayers()}],"action-keys":["NSArray",null],actions:["NSMutableDictionary",function(t,n){e._loadActionArray(t,n)}],eulerAngles:["SCNVector3",function(e,t){e.eulerAngles=t}],movabilityHint:"integer",clientAttributes:["NSMutableDictionary",null],nodeID:["string","_nodeID"],entityID:["string","_entityID"]}}}]),s(t,[{key:"_createPresentation",value:function(){if(!this._isPresentationInstance&&!this._presentation){var e=this.copy();if(e._isPresentationInstance=!0,null!==this.geometry&&(e.geometry=this.geometry.copy(),e.geometry._isPresentationInstance=!0,e.geometry._geometryElements=[],this.geometry._geometryElements.forEach(function(t){e.geometry._geometryElements.push(t.copy())}),e.geometry._geometrySources=[],this.geometry._geometrySources.forEach(function(t){e.geometry._geometrySources.push(t.copy())}),this.geometry._presentation=e.geometry),this._particleSystems){e._particleSystems=[];var t=!0,n=!1,r=void 0;try{for(var i,o=this._particleSystems[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,u=a._createPresentation();e._particleSystems.push(u)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}this._presentation=e}}},{key:"_updateWorldTransform",value:function(){var e=null;if(e=null===this._parent?(0,T.default)(0,0,0):this._parent._worldTransform,this._worldTransform=this.transform.mult(e),this._presentation){var t=null,n=1;null===this._parent?t=(0,T.default)(0,0,0):null===this._parent._presentation?(t=this._parent._worldTransform,n=this._parent._worldOpacity):(t=this._parent._presentation._worldTransform,n=this._parent._presentation._worldOpacity),this._presentation._updateTransform(),this._presentation._worldTransform=this._presentation.transform.mult(t),this._presentation._worldOpacity=this._presentation._opacity*n}this._childNodes.forEach(function(e){e._updateWorldTransform()})}},{key:"addChildNode",value:function(e){this._childNodes.indexOf(e)>=0||(e.removeFromParentNode(),this._childNodes.push(e),e._parent=this,e._resetPhysicsTransformRecursively(!0))}},{key:"insertChildNodeAt",value:function(e,t){this._childNodes.indexOf(e)>=0||(e.removeFromParentNode(),this._insertObjectInChildNodesAtIndex(e,t),this._parent=this)}},{key:"removeFromParentNode",value:function(){var e=this._parent;if(null!==e){var t=e._childNodes.indexOf(this);t<0||e._removeObjectFromChildNodesAtIndex(t)}}},{key:"replaceChildNodeWith",value:function(e,t){var n=this._childNodes.indexOf(e);n<0||(this._removeObjectFromChildNodesAtIndex(n),this._insertObjectInChildNodesAtIndex(t,n))}},{key:"_removeObjectFromChildNodesAtIndex",value:function(e){var t=this._childNodes.splice(e,1);if(0!==t.length){var n=t[0];n._parent=null,n._transformUpToDate=!1}}},{key:"_insertObjectInChildNodesAtIndex",value:function(e,t){var n=this._childNodes.length;if(t>n)throw new Error("SCNNode.childNodes out of index: "+t+" > "+n);this._childNodes.splice(t,0,e)}},{key:"childNodesPassingTest",value:function(e){return[]}},{key:"childNodeWithNameRecursively",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0;n<this._childNodes.length;n++){if(this._childNodes[n].name===e)return this._childNodes[n];if(t){var r=this._childNodes[n].childNodeWithNameRecursively(e,t);if(null!==r)return r}}return null}},{key:"childNodeWithName",value:function(e){return this.childNodeWithNameRecursively(e,!1)}},{key:"_childNodeWithNodeIDRecursively",value:function(e){for(var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=0;n<this._childNodes.length;n++){if(this._childNodes[n]._nodeID===e)return this._childNodes[n];if(t){var r=this._childNodes[n]._childNodeWithNodeIDRecursively(e,t);if(null!==r)return r}}return null}},{key:"_childNodeWithNodeID",value:function(e){return this._childNodeWithNodeIDRecursively(name,!1)}},{key:"enumerateChildNodes",value:function(e){var t=this;this.childNodes.some(function(n){return t._enumerateChildNodesRecursive(n,e)})}},{key:"enumerateHierarchy",value:function(e){this._enumerateChildNodesRecursive(this,e)}},{key:"_enumerateChildNodesRecursive",value:function(e,t){var n=this,r=t(e);return!0===r||(r=e._childNodes.some(function(e){return n._enumerateChildNodesRecursive(e,t)}))}},{key:"_resetPhysicsTransformRecursively",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._physicsBody&&this._physicsBody._resetTransform(e);var t=!0,n=!1,r=void 0;try{for(var i,o=this._childNodes[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value._resetPhysicsTransformRecursively(e)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"addParticleSystem",value:function(e){null===this._particleSystems&&(this._particleSystems=[]),e.reset(),this._particleSystems.push(e)}},{key:"removeParticleSystem",value:function(e){if(null!==this._particleSystems){var t=this._particleSystems.indexOf(e);this._particleSystems.splice(t,1)}}},{key:"removeAllParticleSystems",value:function(){this._particleSystems=[]}},{key:"addAudioPlayer",value:function(e){this._audioPlayers.indexOf(e)<0&&(this._audioPlayers.push(e),e._play())}},{key:"removeAudioPlayer",value:function(e){var t=this._audioPlayers.indexOf(e);t>=0&&(e._stop(),delete this._audioPlayers[t])}},{key:"removeAllAudioPlayers",value:function(){this._audioPlayers.forEach(function(e){e._stop()}),this._audioPlayers=[]}},{key:"clone",value:function(){var e=this.copy();return this._childNodes.forEach(function(t){e.addChildNode(t.clone())}),e}},{key:"flattenedClone",value:function(){return null}},{key:"hitTestWithSegmentFromTo",value:function(e,t){var n=this,r=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],this.convertPositionTo(e,null)),o=this.convertPositionTo(t,null),a=[];return this.enumerateChildNodes(function(e){if(e.presentation.geometry){var t=F.default._hitTestWithSegmentNode(r,o,e.presentation);if(t.length>0){var u=!0,l=!1,s=void 0;try{for(var c,f=t[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var h=c.value;h._node=e,h._worldCoordinates=e.convertPositionTo(h._localCoordinates,null),h._worldNormal=e.convertPositionTo(h._localNormal,null),h._localCoordinates=n.convertPositionFrom(h._localCoordinates,e),h._localNormal=n.convertPositionFrom(h._localNormal,e)}}catch(e){l=!0,s=e}finally{try{!u&&f.return&&f.return()}finally{if(l)throw s}}a.push.apply(a,i(t))}}}),a.length>0&&console.error("hitTestWithSegmentFromTo: "+a.length),a}},{key:"convertPositionFrom",value:function(e,t){return null===t?e.transform(this._worldTransform.invert()):e.transform(t._worldTransform).transform(this._worldTransform.invert())}},{key:"convertPositionTo",value:function(e,t){return null===t?e.transform(this._worldTransform):e.transform(this._worldTransform).transform(t._worldTransform.invert())}},{key:"convertTransformFrom",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===t?e.mult(this._worldTransform.invert()):e.mult(t._worldTransform).mult(this._worldTransform.invert())}},{key:"convertTransformTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===t?e.mult(this._worldTransform):e.mult(this._worldTransform).mult(t._worldTransform.invert())}},{key:"convertVectorFrom",value:function(e,t){}},{key:"convertVectorTo",value:function(e,t){}},{key:"localRotateBy",value:function(e){}},{key:"localTranslateBy",value:function(e){}},{key:"lookAt",value:function(e){}},{key:"lookAtUp",value:function(e,t,n){}},{key:"rotateByAroundTarget",value:function(e,t){}},{key:"setWorldTransform",value:function(e){}},{key:"runAction",value:function(e){this.runActionForKey(e,Symbol())}},{key:"runActionCompletionHandler",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.runActionForKeyCompletionHandler(e,Symbol(),t)}},{key:"runActionForKey",value:function(e,t){this.runActionForKeyCompletionHandler(e,t,null)}},{key:"runActionForKeyCompletionHandler",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;void 0!==t&&null!==t||(t=Symbol());var r=e.copy();r._actionStartTime=.001*Date.now(),r._completionHandler=n,this._actions.set(t,r)}},{key:"actionForKey",value:function(e){return this._actions.get(e)}},{key:"removeActionForKey",value:function(e){this._actions.delete(e)}},{key:"removeAllActions",value:function(){this._actions.clear()}},{key:"addAnimationForKey",value:function(e,t){void 0!==t&&null!==t||(t=Symbol());var n=e;n._animationStartTime=.001*Date.now(),this._animations.set(t,n),this._copyTransformToPresentationRecursive()}},{key:"animationForKey",value:function(e){return this._animations.get(e)}},{key:"removeAllAnimations",value:function(){this._animations.clear()}},{key:"removeAnimationForKey",value:function(e){this.removeAnimationForKeyBlendOutDuration(e,0)}},{key:"removeAnimationForKeyBlendOutDuration",value:function(e,t){this._animations.delete(e),this._copyTransformToPresentationRecursive()}},{key:"removeAnimationForKeyFadeOutDuration",value:function(e,t){this.removeAnimationForKey(e)}},{key:"pauseAnimationForKey",value:function(e){}},{key:"resumeAnimationForKey",value:function(e){}},{key:"isAnimationPausedForKey",value:function(e){return!1}},{key:"setAnimationSpeedForKey",value:function(e,t){}},{key:"_setAnimationsToPlayers",value:function(){var e=this._animationPlayers._values.length;if(e>0&&this._animations._values.length>0)for(var t=0;t<e;t++)this._animationPlayers._values[t]._animation=this._animations._values[t]}},{key:"addAnimationPlayerForKey",value:function(e,t){void 0!==t&&null!==t||(t=Symbol()),this._animationPlayers.set(t,e),this._copyTransformToPresentationRecursive()}},{key:"animationPlayerForKey",value:function(e){return this._animationPlayers.get(e)}},{key:"_geometryBoundingBox",value:function(){if(null===this._geometry)return{min:new C.default(1/0,1/0,1/0),max:new C.default(-1/0,-1/0,-1/0)};var e=this._geometry.boundingBox;if(this.skinner&&this.skinner.baseGeometryBindTransform){var t=this.skinner.baseGeometryBindTransform.m41,n=this.skinner.baseGeometryBindTransform.m42,r=this.skinner.baseGeometryBindTransform.m43;e.min.x+=t,e.min.y+=n,e.min.z+=r,e.max.x+=t,e.max.y+=n,e.max.z+=r}return e}},{key:"_updateBoundingBox",value:function(){var e=this._geometryBoundingBox(),t=this._presentation?this._presentation:this;null!==t.geometry&&(null===e&&(e=t.geometry._updateBoundingBox()),e=this._unionBoundingBox(e,t.geometry.boundingBox));var n=t._scale;if(n.x<0){var r=e.max.x*n.x,i=e.min.x*n.x;e.min.x=r,e.max.x=i}else e.min.x*=n.x,e.max.x*=n.x;if(n.y<0){var o=e.max.y*n.y,a=e.min.y*n.y;e.min.y=o,e.max.y=a}else e.min.y*=n.y,e.max.y*=n.y;if(n.z<0){var u=e.max.z*n.z,l=e.min.z*n.z;e.min.z=u,e.max.z=l}else e.min.z*=n.z,e.max.z*=n.z;var s=!0,c=!1,f=void 0;try{for(var h,d=this._childNodes[Symbol.iterator]();!(s=(h=d.next()).done);s=!0){var _=h.value,p=_._updateBoundingBox();e=this._unionChildBoundingBox(e,p)}}catch(e){c=!0,f=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw f}}return this._boundingBox=e,e}},{key:"_unionBoundingBox",value:function(e,t){if(null===e)return t;if(null===t)return e;var n=new C.default,r=new C.default;return n.x=Math.min(e.min.x,t.min.x),n.y=Math.min(e.min.y,t.min.y),n.z=Math.min(e.min.z,t.min.z),r.x=Math.max(e.max.x,t.max.x),r.y=Math.max(e.max.y,t.max.y),r.z=Math.max(e.max.z,t.max.z),{min:n,max:r}}},{key:"_unionChildBoundingBox",value:function(e,t){var n=this._presentation?this._presentation:this,r=n._position,i=n._scale,o=new C.default((t.min.x+r.x)*i.x,(t.min.y+r.y)*i.y,(t.min.z+r.z)*i.z),a=new C.default((t.max.x+r.x)*i.x,(t.max.y+r.y)*i.y,(t.max.z+r.z)*i.z);return this._unionBoundingBox(e,{min:o,max:a})}},{key:"_updateTransform",value:function(){var e=S.default.matrixWithScale(this._scale),t=e.rotation(this._rotation),n=t.translation(this._position);this._transform=n,this._transformUpToDate=!0}},{key:"copy",value:function(){var e=new t;return e.name=this.name,e.light=this.light,e.camera=this.camera,e._geometry=this._geometry,e.morpher=this.morpher?this.morpher._copy():null,e.skinner=this.skinner,e.categoryBitMask=this.categoryBitMask,e.isPaused=this.isPaused,e._presentation=this._presentation?this._presentation.copy():null,e._isPresentationInstance=this._isPresentationInstance,e.constraints=this.constraints?this.constraints.slice(0):null,e.isHidden=this.isHidden,e._opacity=this._opacity,e.renderingOrder=this.renderingOrder,e.castsShadow=this.castsShadow,e.movabilityHint=this.movabilityHint,e.filters=this.filters?this.filters.slice(0):null,e.rendererDelegate=this.rendererDelegate,e._physicsBody=this._physicsBody,e.physicsField=this.physicsField,e._particleSystems=this._particleSystems?this._particleSystems.slice(0):null,e._audioPlayers=this._audioPlayers,e._actions=new Map(this._actions),e._animations=this._animations.copy(),e._boundingBox=this._boundingBox,e._position=new C.default(this._position.x,this._position.y,this._position.z),e._rotation=new E.default(this._rotation.x,this._rotation.y,this._rotation.z,this._rotation.w),e._scale=new C.default(this._scale.x,this._scale.y,this._scale.z),e._transformUpToDate=!1,e}},{key:"_copyTransformToPresentation",value:function(){if(null!==this._presentation){var e=this._presentation;e._position=this._position._copy(),e._rotation=this._rotation._copy(),e._scale=this._scale._copy()}}},{key:"_copyTransformToPresentationRecursive",value:function(){for(var e=[this];e.length>0;){var t=e.shift();t._copyTransformToPresentation(),e.push.apply(e,i(t._childNodes))}}},{key:"_copyMaterialPropertiesToPresentation",value:function(){var e=this._presentation;if(this._geometry){var t=!0,n=!1,r=void 0;try{for(var i,o=this._geometry.materials[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value._copyPresentationProperties()}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}e.opacity=this.opacity}},{key:"_copyMorpherToPresentation",value:function(){var e=this._presentation;this.morpher&&(e.morpher.targets=this.morpher.targets.slice(0),e.morpher._weights=this.morpher._weights.slice(0),e.morpher.calculationMode=this.morpher.calculationMode)}},{key:"valueForUndefinedKey",value:function(e){if("/"===e.charAt(0)){var n=e.substr(1);if(this._nodeID===n)return this;var r=this._childNodeWithNodeIDRecursively(n);if(r)return r;if(r=this.childNodeWithNameRecursively(n))return r;var i=this._rootNode;if(i!==this){if(r=i._childNodeWithNodeIDRecursively(n))return r;if(r=i.childNodeWithNameRecursively(n))return r}}return l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"valueForUndefinedKey",this).call(this,e)}},{key:"valueForKeyPath",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n&&this._presentation?this._presentation:this,i=e.split("."),o=i[0],a=i[1];return"position"===o?a?r.position[a]:r.position:"rotation"===o?a?r.rotation[a]:r.rotation:"scale"===o?a?r.scale[a]:r.scale:"eulerAngles"===o?a?r.eulerAngles[a]:r.eulerAngles:"orientation"===o?a?r.orientation[a]:r.orientation:"transform"===o?a?r.transform[a]:r.transform:l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"valueForKeyPath",this).call(this,e,n)}},{key:"setValueForKey",value:function(e,n){var r=this._presentation?this._presentation:this;"position"===n?r.position=e:"rotation"===n?r.rotation=e:"scale"===n?r.scale=e:"eulerAngles"===n?r.eulerAngles=e:"orientation"===n?r.orientation=e:"transform"===n?r.transform=e:l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValueForKey",this).call(this,e,n)}},{key:"setValueForKeyPath",value:function(e,n){var r=this._presentation?this._presentation:this,i=n.split("."),o=i.shift(),a=i.join(".");if("transform"===o)switch(a){case"rotation.x":return r._rotation.x=e,void(r._transformUpToDate=!1);case"rotation.y":return r._rotation.y=e,void(r._transformUpToDate=!1);case"rotation.z":case"rotation":return r._rotation.z=e,void(r._transformUpToDate=!1);case"quaternion":return r.orientation=e,void(r._transformUpToDate=!1);case"scale.x":return r._scale.x=e,void(r._transformUpToDate=!1);case"scale.y":return r._scale.y=e,void(r._transformUpToDate=!1);case"scale.z":return r._scale.z=e,void(r._transformUpToDate=!1);case"scale":return r._scale.x=e.x,r._scale.y=e.y,r._scale.z=e.z,void(r._transformUpToDate=!1);case"translation.x":return r._position.x=e,void(r._transformUpToDate=!1);case"translation.y":return r._position.y=e,void(r._transformUpToDate=!1);case"translation.z":return r._position.z=e,void(r._transformUpToDate=!1);case"translation":return r._position.x=e.x,r._position.y=e.y,void(r._transformUpToDate=!1)}else{if("position"===o)return void(""!==a?r._position[a]=e:r._position=e);if("rotation"===o)return void(""!==a?r._rotation[a]=e:r._rotation=e);if("orientation"===o){if(""!==a){var u=r.orientation;u[a]=e,r.orientation=u}else r.orientation=e;return}if("eulerAngles"===o){if(""!==a){var s=r.eulerAngles;s[a]=e,r.eulerAngles=s}else r.eulerAngles=e;return}if("scale"===o)return void(""!==a?r._scale[a]=e:r._scale=e);if("morpher"===o){if(null===r.morpher)throw new Error("target morpher === null");return void r.morpher.setValueForKeyPath(e,a)}}l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValueForKeyPath",this).call(this,e,n)}},{key:"_createBtTransform",value:function(){}},{key:"_createBtCollisionShape",value:function(){}},{key:"destory",value:function(){}},{key:"_resetPromise",value:function(){this._loadedPromise=null}},{key:"_resetPromiseRecursively",value:function(){this._resetPromise();var e=!0,t=!1,n=void 0;try{for(var r,i=this._childNodes[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value._resetPromiseRecursively()}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"_getLoadedPromise",value:function(){if(this._loadedPromise)return this._loadedPromise;var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this._childNodes[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push(a.didLoad)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}if(this._particleSystems){var u=!0,l=!1,s=void 0;try{for(var c,f=this._particleSystems[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var h=c.value;e.push(h.didLoad)}}catch(e){l=!0,s=e}finally{try{!u&&f.return&&f.return()}finally{if(l)throw s}}}this._geometry&&e.push(this._geometry.didLoad);var d=!0,_=!1,p=void 0;try{for(var y,m=this._audioPlayers[Symbol.iterator]();!(d=(y=m.next()).done);d=!0){var v=y.value;e.push(v.didLoad)}}catch(e){_=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(_)throw p}}return Promise.all(e)}},{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry=e,this._updateBoundingBox()}},{key:"presentation",get:function(){return null!==this._presentation||this._isPresentationInstance||this._createPresentation(),this._presentation}},{key:"transform",get:function(){return this._transformUpToDate||this._updateTransform(),this._transform},set:function(e){this._transform=e,this._position=this._transform.getTranslation(),this._rotation=this._transform.getRotation(),this._scale=this._transform.getScale(),this._transformUpToDate=!0}},{key:"worldTransform",get:function(){return this._worldTransform}},{key:"position",get:function(){return this._position},set:function(e){if("number"!=typeof e.x||"number"!=typeof e.y||"number"!=typeof e.z)throw new Error("error: SCNNode.position must have x, y, z values");this._position.x=e.x,this._position.y=e.y,this._position.z=e.z,this._transformUpToDate=!1,this._updateWorldTransform()}},{key:"rotation",get:function(){return this._rotation},set:function(e){if("number"!=typeof e.x||"number"!=typeof e.y||"number"!=typeof e.z||"number"!=typeof e.w)throw new Error("error: SCNNode.rotation must have x, y, z, w values");var t=this._rotation._copy();this._rotation.x=e.x,this._rotation.y=e.y,this._rotation.z=e.z,this._rotation.w=e.w,this._transformUpToDate=!1,this._updateWorldTransform(),D.default._addChange(this,"rotation",t,e)}},{key:"scale",get:function(){return this._scale},set:function(e){if("number"!=typeof e.x||"number"!=typeof e.y||"number"!=typeof e.z)throw new Error("error: SCNNode.scale must have x, y, z values");this._scale.x=e.x,this._scale.y=e.y,this._scale.z=e.z,this._transformUpToDate=!1,this._updateWorldTransform()}},{key:"eulerAngles",get:function(){return this._rotation.rotationToEulerAngles()},set:function(e){this._rotation=e.eulerAnglesToRotation(),this._transformUpToDate=!1}},{key:"orientation",get:function(){return this._rotation.rotationToQuat()},set:function(e){if(!(0,V.default)(e,E.default))throw new Error("orientation must be SCNVector4");this._rotation=e.quatToRotation(),this._transformUpToDate=!1}},{key:"_presentationWorldOrientation",get:function(){return null===this._parent?this.presentation.orientation:this._parent._presentationWorldOrientation.cross(this.presentation.orientation)}},{key:"_worldOrientation",get:function(){return null===this._parent?this.orientation:this._parent._worldOrientation.cross(this.orientation)}},{key:"_worldRotation",get:function(){return this._worldOrientation.quatToRotation()}},{key:"_presentationWorldTranslation",get:function(){return this.presentation.worldTransform.getTranslation()}},{key:"_worldTranslation",get:function(){return this.worldTransform.getTranslation()}},{key:"worldPosition",get:function(){return this.worldTransform.getTranslation()},set:function(e){var t=null;t=null===this._parent?(0,T.default)(0,0,0):this._parent.worldTransform;var n=(0,T.default)(e.x,e.y,e.z),r=t.invert(),i=n.mult(r);this._transform.m41=i.m41,this._transform.m42=i.m42,this._transform.m43=i.m43,this.transform=this._transform}},{key:"_worldScale",get:function(){}},{key:"opacity",get:function(){return this._opacity},set:function(e){var t=this._opacity;this._opacity=e,D.default._addChange(this,"_opacity",t,e)}},{key:"_rootNode",get:function(){return null===this._parent?this:this._parent._rootNode}},{key:"parent",get:function(){return this._parent}},{key:"childNodes",get:function(){return this._childNodes.slice(0)}},{key:"physicsBody",get:function(){return this._physicsBody},set:function(e){this._physicsBody&&(this._physicsBody._node=null),this._physicsBody=e,this._physicsBody&&(this._physicsBody._node=this,this._physicsBody.resetTransform())}},{key:"particleSystems",get:function(){return this._particleSystems}},{key:"audioPlayers",get:function(){return this._audioPlayers.slice(0)}},{key:"worldFront",get:function(){return z.rotate(this.worldTransform)}},{key:"worldRight",get:function(){return G.rotate(this.worldTransform)}},{key:"worldUp",get:function(){return Y.rotate(this.worldTransform)}},{key:"hasActions",get:function(){return this._actions.size>0}},{key:"actionKeys",get:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this._actions.keys()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return e}},{key:"animationKeys",get:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this._animations.keys()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return e}},{key:"boundingBox",get:function(){return this._fixedBoundingBox?this._fixedBoundingBox:(this._updateBoundingBox(),this._boundingBox)},set:function(e){this._fixedBoundingBox=e}},{key:"boundingSphere",get:function(){return{center:new C.default,radius:0}}},{key:"viewTransform",get:function(){return this.worldTransform.invert()}},{key:"inverseViewTransform",get:function(){return this.worldTransform}},{key:"projectionTransform",get:function(){return null===this.camera?null:this.camera.projectionTransform}},{key:"viewProjectionTransform",get:function(){if(null===this.camera)return null;var e=this.camera.projectionTransform;return this.viewTransform.mult(e)}},{key:"lightViewProjectionTransform",get:function(){if(null===this.light)return null;this.light._updateProjectionTransform();var e=this.light._projectionTransform;return this.viewTransform.mult(e)}},{key:"shadowProjectionTransform",get:function(){if(null===this.light)return null;var e=this.lightViewProjectionTransform,t=(0,T.default)(1,1,0).scale(.5,.5,1);return e.mult(t)}},{key:"didLoad",get:function(){return this._getLoadedPromise()}}],[{key:"_loadAnimationArray",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(t)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,l=t[u],s=this._loadAnimationData(l,u);e.addAnimationForKey(s,u)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"_loadAnimationData",value:function(e,t){if("group"===e.class)return this._loadAnimationGroup(e);if("keyframe"===e.class)return this._loadKeyframeAnimation(e.animation,t);if("basic"===e.class){var n=e.keyPath||t;return this._loadBasicAnimation(e.animation,n)}if("keyframedAnimation"===e.type)return this._loadKeyframeAnimation(e,t);throw new Error("unknown animation class: "+e.class+", type: "+e.type+", key: "+t)}},{key:"_loadAnimationGroup",value:function(e){var t=this,n=new f.default,r=e.animation;n.isRemovedOnCompletion=Boolean(e.removeOnCompletion),n.usesSceneTimeBase=Boolean(e.usesSceneTimeBase),n.fadeInDuration=r.fadeInDuration,n.fadeOutDuration=r.fadeOutDuration,n.beginTime=r.beginTime,n.timeOffset=r.timeOffset,n.repeatCount=r.repeatCount,n.duration=r.duration,n.speed=r.speed,n.autoreverses=r.autoreverses;var i=[U.kCAFillModeRemoved,U.kCAFillModeForwards,U.kCAFillModeBackwards,U.kCAFillModeBoth];return n.fillMode=i[r.fillModeMask],r.channels.forEach(function(e){var r=e.targetPath.join("."),i=t._loadAnimationData(e.animation,r);n.animations.push(i)}),n}},{key:"_loadKeyframeAnimation",value:function(e,t){var n=new m.default(t);n.isRemovedOnCompletion=Boolean(e.removeOnCompletion),n.usesSceneTimeBase=Boolean(e.sceneTimeBased),n.fadeInDuration=e.fadeInDuration,n.fadeOutDuration=e.fadeOutDuration,n.beginTime=e.beginTime,n.timeOffset=e.timeOffset,n.repeatCount=e.repeatCount,n.duration=e.duration,n.speed=e.speed,n.autoreverses=e.autoreverses;var r=[U.kCAFillModeRemoved,U.kCAFillModeForwards,U.kCAFillModeBackwards,U.kCAFillModeBoth];n.fillMode=r[e.fillModeMask],n.isCumulative=Boolean(e.cumulative),n.isAdditive=Boolean(e.additive);var i=e.keyframeController;n.values=this._loadData(i,"values"),n.keyTimes=this._loadData(i,"keytimes"),i.interpolationMode,n.keyTimes=n.keyTimes.map(function(e){return e/n.duration});var o=[U.kCAAnimationLinear,U.kCAAnimationDiscrete,U.kCAAnimationPaced,U.kCAAnimationCubic,U.kCAAnimationCubicPaced];return n.calculationMode=o[i.calculationMode],n}},{key:"_loadBasicAnimation",value:function(e,t){var n=new d.default(t);n.isRemovedOnCompletion=Boolean(e.removeOnCompletion),n.timingFunction=new p.default(e.timingFunction.c0,e.timingFunction.c1,e.timingFunction.c2,e.timingFunction.c3),n.usesSceneTimeBase=Boolean(e.sceneTimeBased),n.fadeInDuration=e.fadeInDuration,n.fadeOutDuration=e.fadeOutDuration,n.beginTime=e.beginTime,n.timeOffset=e.timeOffset,n.repeatCount=e.repeatCount,n.duration=e.duration,n.speed=e.speed,n.autoreverses=e.autoreverses;var r=[U.kCAFillModeRemoved,U.kCAFillModeForwards,U.kCAFillModeBackwards,U.kCAFillModeBoth];return n.fillMode=r[e.fillModeMask],n.isCumulative=Boolean(e.cumulative),n.isAdditive=Boolean(e.additive),n}},{key:"_loadActionArray",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(t)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value,l=t[u];e.runActionForKey(l,u)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}},{key:"_loadData",value:function(e,t){var n=e[t].accessor,r=(n.componentsPerValue,n.stride),i=n.offset,o=(n.sourceTypeID,n.padding,n.valuesCount),a=t+"-data",u=e[a],l=[],s=i;if(1===n.componentsType)for(var c=0;c<o;c++)l.push(u.readFloatBE(s)),s+=r;else if(6===n.componentsType)for(var f=0;f<o;f++)l.push(u.readDoubleBE(s)),s+=r;else if(9===n.componentsType)for(var h=0;h<o;h++)l.push(C.default._initWithData(u,s,!0)),s+=r;else if(10===n.componentsType)for(var d=0;d<o;d++)l.push(E.default._initWithData(u,s,!0)),s+=r;else if(11===n.componentsType)for(var _=0;_<o;_++)l.push(S.default._initWithData(u,s,!0)),s+=r;else if(13===n.componentsType)for(var p=0;p<o;p++)l.push(j.default._initWithData(u,s,!0)),s+=r;else console.error("unknown accessor componentsType: "+n.componentsType);return l}},{key:"node",value:function(){return new t}},{key:"nodeWithGeometry",value:function(e){return new t(e)}},{key:"localFront",get:function(){return z}},{key:"localRight",get:function(){return G}},{key:"localUp",get:function(){return Y}}]),t}(g.default);t.default=X},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(12),f=r(c),h=function(t){function n(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;i(this,n);var l=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));if(l._data=t,t instanceof e){for(var s=[],c=t.length/u,h=0,d=0;d<c;d++)s.push(t.readUIntLE(h,u)),h+=u;l._data=s}if(l._primitiveType=r,null!==a)l._primitiveCount=a;else switch(r){case f.default.triangles:l._primitiveCount=l._data.length/3;break;case f.default.triangleStrip:l._primitiveCount=l._data.length-2;break;case f.default.line:l._primitiveCount=l._data.length/2;break;case f.default.point:l._primitiveCount=l._data.length;break;case f.default.polygon:l._primitiveCount=l._data.length/2;break;default:throw new Error("unknown primitive type: "+r)}if(l._bytesPerIndex=u,l._glData=null,1===u)l._glData=new Uint8Array(l._data);else if(2===u)l._glData=new Uint16Array(l._data);else{if(4!==u)throw new Error("unknown data size: "+u);l._glData=new Uint32Array(l._data)}return l.maximumPointScreenSpaceRadius=0,l.minimumPointScreenSpaceRadius=0,l.pointSize=0,l.primitiveRange=null,l}return a(n,t),u(n,null,[{key:"_propTypes",get:function(){return{$constructor:function(e,t){var r=new n(t.elementData,t.primitiveType,t.primitiveCount,t.bytesPerIndex);return void 0!==t.maximumPointScreenSpaceRadius&&(r.maximumPointScreenSpaceRadius=t.maximumPointScreenSpaceRadius),void 0!==t.minimumPointScreenSpaceRadius&&(r.minimumPointScreenSpaceRadius=t.minimumPointScreenSpaceRadius),void 0!==t.ptSize&&(r.pointSize=t.ptSize),r},primitiveType:["integer",null],primitiveCount:["integer",null],elementData:["NSMutableData",null],bytesPerIndex:["integer",null],primitiveRangeLocation:["integer",null],primitiveRangeLength:["integer",null],ptSize:["float",null],indicesChannelCount:["integer",null],interleavedIndicesChannels:["integer",null],minimumPointScreenSpaceRadius:["float",null],maximumPointScreenSpaceRadius:["float",null]}}}]),u(n,[{key:"initMdlSubmesh",value:function(e){}},{key:"_createBuffer",value:function(e){var t=e;return this._buffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this._buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._glData,t.STATIC_DRAW),this._buffer}},{key:"copy",value:function(){return new n(this._data.slice(0),this._primitiveType,this._primitiveCount,this._bytesPerIndex)}},{key:"_indexAt",value:function(e){if(e<0||e>=this.primitiveCount)throw new Error("index out of range: "+e+" (0 - "+(this.primitiveCount-1)+")");this._primitiveCount;if(this._primitiveType===f.default.triangles){var t=3*e;return[this._data[t+0],this._data[t+1],this._data[t+2]]}if(this._primitiveType===f.default.triangleStrip)return[this._data[e+0],this._data[e+1],this._data[e+2]];if(this._primitiveType===f.default.line){var n=2*e;return[this._data[n+0],this._data[n+1]]}if(this._primitiveType===f.default.point)return[this._data[e]];if(this._primitiveType===f.default.polygon)return[this._data[0],this._data[e+1],this._data[e+2]];throw new Error("unknown primitive type: "+this._primitiveType)}},{key:"primitiveType",get:function(){return this._primitiveType}},{key:"primitiveCount",get:function(){return this._primitiveCount}},{key:"data",get:function(){return this._data}},{key:"bytesPerIndex",get:function(){return this._bytesPerIndex}}]),n}(s.default);t.default=h}).call(t,n(17).Buffer)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(10),u=r(a),l=n(11),s=r(l),c=function(){function e(t,n){i(this,e),this.origin=t.copy(),this.size=n.copy()}return o(e,[{key:"applying",value:function(e){return null}},{key:"insetBy",value:function(t,n){var r=this.minX+t,i=this.minY+n,o=this.size.width-2*t,a=this.size.height-2*n;return new e(new u.default(r,i),new s.default(o,a))}},{key:"offsetBy",value:function(t,n){return new e(new u.default(this.origin.x+t,this.origin.y+n),this.size)}},{key:"union",value:function(t){if(this.isNull&&t.isNull)return new e(new u.default(0,0),null);if(this.isNull)return t.copy();if(t.isNull)return this.copy();var n=this.minX<t.minX?this.minX:t.minX,r=this.maxX>t.maxX?this.maxX:t.maxX,i=this.minY<t.minY?this.minY:t.minY,o=this.maxY>t.maxY?this.maxY:t.maxY,a=r-n,l=o-i;return new e(new u.default(n,i),new s.default(a,l))}},{key:"intersection",value:function(t){if(this.isNull||t.isNull)return new e(new u.default(0,0),null);var n=this.minX>t.minX?this.minX:t.minX,r=this.maxX<t.maxX?this.maxX:t.maxX,i=this.minY>t.minY?this.minY:t.minY,o=this.maxY<t.maxY?this.maxY:t.maxY,a=r-n,l=o-i;return a<0||l<0?new e(new u.default(0,0),null):new e(new u.default(n,i),new s.default(a,l))}},{key:"dividedFrom",value:function(e,t){return null}},{key:"intersects",value:function(e){this.intersection(e);return this.width>0&&this.height>0}},{key:"contains",value:function(e){return e.x>=this.minX&&e.x<=this.maxX&&e.y>=this.minY&&e.y<=this.maxY}},{key:"initDictionaryRepresentation",value:function(e){this.origin=e.get("origin"),this.size=e.get("size")}},{key:"equalTo",value:function(e){return null!==this.origin&&null!==e.origin&&(null!==this.size&&null!==e.size&&(this.origin.equalTo(e.origin)&&this.size.equalTo(e.size)))}},{key:"zero",value:function(){return new e(new u.default(0,0),new e(0,0))}},{key:"add",value:function(t){return new e(this.origin.add(t.origin),this.size.add(t.size))}},{key:"sub",value:function(t){return new e(this.origin.sub(t.origin),this.size.sub(t.size))}},{key:"lerp",value:function(t,n){return new e(this.origin.lerp(t.origin,n),this.size.lerp(t.size,n))}},{key:"copy",value:function(){return new e(this.origin,this.size)}},{key:"height",get:function(){return this.isNull?0:Math.abs(this.size.height)}},{key:"width",get:function(){return this.isNull?0:Math.abs(this.size.width)}},{key:"minX",get:function(){return this.size.width<0?this.origin.x+this.size.width:this.origin.x}},{key:"midX",get:function(){return this.origin.x+.5*this.size.width}},{key:"maxX",get:function(){return this.size.width>0?this.origin.x+this.size.width:this.origin.x}},{key:"minY",get:function(){return this.size.height<0?this.origin.y+this.size.height:this.origin.y}},{key:"midY",get:function(){return this.origin.y+.5*this.size.height}},{key:"maxY",get:function(){return this.size.height>0?this.origin.y+this.size.height:this.origin.y}},{key:"standardized",get:function(){var t=this.copy();return this.isNull?e.zero:(this.width<0&&(t.origin.x=this.origin.x+this.width,t.size.width=-this.width),this.height<0&&(t.origin.y=this.origin.y+this.height,t.size.height=-this.height),t)}},{key:"integral",get:function(){return null}},{key:"isEmpty",get:function(){return this.isNull||0===this.size.height||0===this.size.width}},{key:"isInfinite",get:function(){return this.size.width===1/0&&this.size.height===1/0}},{key:"isNull",get:function(){return null===this.size}},{key:"dictionaryRepresentation",get:function(){var e=new Map;return e.set("origin",this.origin),e.set("size",this.size),e}},{key:"debugDescription",get:function(){return null===this.size?"{null}":"{origin:"+(this.origin?this.origin.debugDescription():"{null}")+", size:"+(this.size?this.size.debugDescription():"{null}")+"}"}},{key:"customMirror",get:function(){return null}},{key:"customPlaygroundQuickLook",get:function(){return null}}],[{key:"rectWithXYWidthHeight",value:function(t,n,r,i){return new e(new u.default(t,n),new s.default(r,i))}},{key:"zero",get:function(){return new e(new u.default(0,0),new s.default(0,0))}}]),e}();t.default=c},function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return s(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):"string"==typeof t?c(e,t,n):d(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,n,r){return u(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function s(e,t){if(u(t),e=i(e,t<0?0:0|_(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function c(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n);e=i(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function f(e,t){var n=t.length<0?0:0|_(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=f(e,t),e}function d(e,t){if(o.isBuffer(t)){var n=0|_(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Z(t.length)?i(e,0):f(e,t);if("Buffer"===t.type&&Q(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function _(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function p(e){return+e!=e&&(e=0),o.alloc(+e)}function y(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(r)return Y(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,u=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,u/=2,l/=2,n/=2}var s;if(i){var c=-1;for(s=n;s<u;s++)if(o(e,s)===o(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===l)return c*a}else-1!==c&&(s-=s-c),c=-1}else for(n+l>u&&(n=u-l),s=n;s>=0;s--){for(var f=!0,h=0;h<l;h++)if(o(e,s+h)!==o(t,h)){f=!1;break}if(f)return s}return-1}function S(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var u=parseInt(t.substr(2*a,2),16);if(isNaN(u))return a;e[n+a]=u}return a}function w(e,t,n,r){return K(Y(t,e.length-n),e,n,r)}function T(e,t,n,r){return K(X(t),e,n,r)}function k(e,t,n,r){return T(e,t,n,r)}function C(e,t,n,r){return K(W(t),e,n,r)}function O(e,t,n,r){return K(H(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?q.fromByteArray(e):q.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=n){var l,s,c,f;switch(u){case 1:o<128&&(a=o);break;case 2:l=e[i+1],128==(192&l)&&(f=(31&o)<<6|63&l)>127&&(a=f);break;case 3:l=e[i+1],s=e[i+2],128==(192&l)&&128==(192&s)&&(f=(15&o)<<12|(63&l)<<6|63&s)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:l=e[i+1],s=e[i+2],c=e[i+3],128==(192&l)&&128==(192&s)&&128==(192&c)&&(f=(15&o)<<18|(63&l)<<12|(63&s)<<6|63&c)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,u=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=u}return A(r)}function A(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=$));return n}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=G(e[o]);return i}function F(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function B(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,i){return i||B(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,i){return i||B(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,r,52,8),n+8}function V(e){if(e=z(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function G(e){return e<16?"0"+e.toString(16):e.toString(16)}function Y(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function X(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function H(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function W(e){return q.toByteArray(V(e))}function K(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Z(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var q=n(136),J=n(137),Q=n(138);t.Buffer=o,t.SlowBuffer=p,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return l(null,e,t,n)},o.allocUnsafe=function(e){return s(null,e)},o.allocUnsafeSlow=function(e){return s(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):m.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,u=n-t,l=Math.min(a,u),s=this.slice(r,i),c=e.slice(t,n),f=0;f<l;++f)if(s[f]!==c[f]){a=s[f],u=c[f];break}return a<u?-1:u<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return S(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){D(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){D(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,a=1,u=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===u&&0!==this[t+o-1]&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,a=1,u=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===u&&0!==this[t+o+1]&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var u=o.isBuffer(e)?e:Y(new o(e,r).toString()),l=u.length;for(a=0;a<n-t;++a)this[a+t]=u[a%l]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(135))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e,t,n){return new i.default(1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1)};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.influenceFactor=0,e}return o(t,e),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(0),c=r(s),f=n(10),h=r(f),d=n(16),_=r(d),p=n(11),y=r(p),m=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.position=new h.default(0,0),e.zPosition=0,e._frame=new _.default(new h.default(0,0),new y.default(0,0)),e.xScale=1,e.yScale=1,e.zRotation=0,e.alpha=1,e.isHidden=!1,e.isUserInteractionEnabled=!1,e._children=[],e._parent=null,e._scene=null,e.name=null,e.speed=1,e.isPaused=!1,e._actions=new Map,e.physicsBody=null,e.userData=null,e.constraints=null,e.reachConstraints=null,e.accessibilityChildren=[],e.accessibilityFrame=new _.default(new h.default(0,0),new y.default(0,0)),e.accessibilityHelp=null,e.accessibilityLabel=null,e.accessibilityParent=null,e.accessibilityRole="AXImage",e.accessibilityRoleDescription="SKNode",e.accessibilitySubrole=null,e.attributeValues=new Map,e.isAccessibilityElement=!1,e.isAccessibilityEnabled=!1,e.__presentation=null,e._isPresentationInstance=!1,e._worldPosition=new h.default(0,0),e._worldZPosition=0,e._worldXScale=1,e._worldYScale=1,e._worldZRotation=0,e}return a(t,e),u(t,[{key:"calculateAccumulatedFrame",value:function(){var e=this._frame.copy(),t=!0,n=!1,r=void 0;try{for(var i,o=this._children[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e=e.union(a.calculateAccumulatedFrame())}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return e}},{key:"setScale",value:function(e){this.xScale=e,this.yScale=e}},{key:"addChild",value:function(e){this._children.indexOf(e)>=0||(e.removeFromParent(),this._children.push(e),e._parent=this)}},{key:"insertChildAt",value:function(e,t){this._children.indexOf(e)>=0||(e.removeFromParent(),this._insertObjectInChildrenAtIndex(e,t),this._parent=this)}},{key:"isEqualTo",value:function(e){return!1}},{key:"moveToParent",value:function(e){e.addChild(this)}},{key:"removeFromParent",value:function(){var e=this._parent;if(null!==e){var t=e._children.indexOf(this);t<0||e._removeObjectFromChildrenAtIndex(t)}}},{key:"removeAllChildren",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this._children[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.removeFromParent()}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"removeChildrenIn",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this._children.indexOf(a)>=0&&a.removeFromParent()}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"_removeObjectFromChildrenAtIndex",value:function(e){var t=this._children.splice(e,1);if(0!==t.length){t[0]._parent=null}}},{key:"_insertObjectInChildrenAtIndex",value:function(e,t){var n=this._children.length;if(t>n)throw new Error("SKNode.children out of index: "+t+" > "+n);this._children.splice(t,0,e)}},{key:"inParentHierarchy",value:function(e){return!1}},{key:"childNodeWithName",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this._children[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.name===e)return a}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return null}},{key:"enumerateChildNodesWithNameUsing",value:function(e,t){}},{key:"run",value:function(e){this.runWithKey(e,Symbol())}},{key:"runCompletion",value:function(e,t){this._runActionForKeyCompletionHandler(e,Symbol(),t)}},{key:"runWithKey",value:function(e,t){this._runActionForKeyCompletionHandler(e,t,null)}},{key:"_runActionForKeyCompletionHandler",value:function(e,t,n){var r=t;void 0!==t&&null!==t||(r=Symbol());var i=e.copy();i._actionStartTime=.001*Date.now(),i._completionHandler=n,this._actions.set(r,i)}},{key:"actionForKey",value:function(e){return this._actions.get(e)}},{key:"hasActions",value:function(){return this._actions.size>0}},{key:"removeAllActions",value:function(){this._actions.clear()}},{key:"removeActionForKey",value:function(e){this._actions.delete(e)}},{key:"convertFrom",value:function(e,t){return null}},{key:"convertTo",value:function(e,t){return null}},{key:"contains",value:function(e){return!1}},{key:"atPoint",value:function(e){return null}},{key:"nodesAt",value:function(e){return null}},{key:"intersects",value:function(e){return!1}},{key:"accessibilityHitTest",value:function(e){return null}},{key:"setValueForAttribute",value:function(e,t){this.attributeValues.set(t,e)}},{key:"valueForAttributeNamed",value:function(e){return this.attributeValues.get(e)}},{key:"copy",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._copyValue(this),e}},{key:"_copyValue",value:function(e){this.position=e.position.copy(),this.zPosition=e.zPosition,this._frame=e._frame,this.xScale=e.xScale,this.yScale=e.yScale,this.zRotation=e.zRotation,this.alpha=e.alpha,this.isHidden=e.isHidden,this.isUserInteractionEnabled=e.isUserInteractionEnabled,this.name=e.name,this.speed=e.speed,this.isPaused=e.isPaused,this._actions=new Map(e._actions),this.physicsBody=e.physicsBody,this.userData=e.userData,this.constraints=e.constraints,this.reachConstraints=e.reachConstraints,this.accessibilityChildren=e.accessibilityChildren,this.accessibilityFrame=e.accessibilityFrame.copy(),this.accessibilityHelp=e.accessibilityHelp,this.accessibilityLabel=e.accessibilityLabel,this.accessibilityParent=e.accessibilityParent,this.accessibilityRole=e.accessibilityRole,this.accessibilityRoleDescription=e.accessibilityRoleDescription,this.accessibilitySubrole=e.accessibilitySubrole,this.attributeValues=new Map(e.attributeValues),this.isAccessibilityElement=e.isAccessibilityElement,this.isAccessibilityEnabled=e.isAccessibilityEnabled}},{key:"_render",value:function(e){}},{key:"_copyTransformToPresentation",value:function(){if(null!==this.__presentation){var e=this.__presentation;e.position=this.position,e.zPosition=this.zPosition,e.xScale=this.xScale,e.yScale=this.yScale,e.zRotation=this.zRotation}}},{key:"_updateWorldTransform",value:function(){var e=null,t=0;if(null===this._parent?e=new h.default(0,0):(e=this._parent._worldPosition,t=this._parent._worldZPosition),this._worldPosition=this.position.add(e),this._worldZPosition=this.zPosition+t,this._presentation){var n=null,r=0,i=1,o=1;null===this._parent?n=new h.default(0,0):null===this._parent._presentation?(n=this._parent._worldPosition,r=this._parent._worldZPosition,i=this._parent._worldXScale,o=this._parent._worldYScale):(n=this._parent._presentation._worldPosition,r=this._parent._presentation._worldZPosition,i=this._parent._presentation._worldXScale,o=this._parent._presentation._worldYScale),this._presentation._worldPosition.x=n.x+this._presentation.position.x*i,this._presentation._worldPosition.y=n.y+this._presentation.position.y*o,this._presentation._worldZPosition=this._presentation.zPosition+r,this._presentation._worldXScale=this._presentation.xScale*i,this._presentation._worldYScale=this._presentation.yScale*o}var a=!0,u=!1,l=void 0;try{for(var s,c=this._children[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){s.value._updateWorldTransform()}}catch(e){u=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(u)throw l}}}},{key:"frame",get:function(){return this._frame}},{key:"children",get:function(){return this._children.slice(0)}},{key:"parent",get:function(){return this._parent}},{key:"scene",get:function(){return this._scene}},{key:"_presentation",get:function(){return this.__presentation}}],[{key:"nodeWithFileNamed",value:function(e){return new t}},{key:"obstaclesFromNodeBounds",value:function(e){return null}},{key:"obstaclesFromNodePhysicsBodies",value:function(e){return null}},{key:"obstaclesFromSpriteTextures",value:function(e,t){return null}}]),t}(c.default);t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(0),c=r(s),f=n(23),h=r(f),d=n(10),_=r(d),p=n(11),y=r(p),m=n(16),v=r(m),g=n(2),b=r(g),S=n(3),w=r(S),T=function(e){function t(e,n,r){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a._speed=1,a._timingMode=h.default.linear,a._timingFunction=null,a._duration=0,a._finished=!1,a._beginTime=0,a._isRunning=!1,a._pausedTime=0,a._completionHandler=null,a.__actionStartTime=null,a}return a(t,e),u(t,[{key:"copy",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._beginTime=this._beginTime,e._duration=this._duration,e._speed=this.speed,e._timingMode=this.timingMode,e._timingFunction=this.timingFunction,e._finished=this._finished,e}},{key:"_applyAction",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._getTime(t,n)}},{key:"_getTime",value:function(e,t){if(!t)return e>=1&&!this._finished&&(this._finished=!0),e;var n=this._basetimeFromTime(e);return null===this.timingFunction?n:this.timingFunction._getValueAtTime(n)}},{key:"_basetimeFromTime",value:function(e){var t=e-this._actionStartTime;return this._basetimeFromActivetime(t)}},{key:"_activetimeFromTime",value:function(e){return e-this._actionStartTime}},{key:"_basetimeFromActivetime",value:function(e){var t=e-this._beginTime;if(0===this.speed)return 0;if(0===this._duration)return t/Math.abs(this.speed);var n=this._duration/Math.abs(this.speed);return 0===n&&(n=.25),t>=n&&(this._finished||(this._finished=!0)),t/n}},{key:"_lerp",value:function(e,t,n){return null===n?t:(0,w.default)(e,y.default)?e._lerp(t,n):(0,w.default)(e,_.default)?e._lerp(t,n):(0,w.default)(e,v.default)?e._lerp(t,n):(0,w.default)(e,b.default)?e._lerp(t,n):e+(t-e)*n}},{key:"_resetFinished",value:function(){this._finished=!1}},{key:"reversed",value:function(){return null}},{key:"speed",get:function(){return this._speed},set:function(e){this._speed=e}},{key:"timingMode",get:function(){return this._timingMode},set:function(e){this._timingMode=e}},{key:"timingFunction",get:function(){return this._timingFunction},set:function(e){this._timingFunction=e}},{key:"duration",get:function(){return this._duration},set:function(e){this._duration=e}},{key:"_actionStartTime",get:function(){return this.__actionStartTime},set:function(e){this.__actionStartTime=e}}],[{key:"actionWithName",value:function(e){return new t(e,null,.25)}},{key:"actionWithNamedDuration",value:function(e,n){return new t(e,null,n)}},{key:"actionWithNamedFrom",value:function(e,n){return new t(e,n)}},{key:"moveByXYDuration",value:function(e,t,n){return null}},{key:"moveByDuration",value:function(e,t){return null}},{key:"moveToDuration",value:function(e,t){return null}},{key:"followDuration",value:function(e,t){return null}},{key:"follow",value:function(e,t){return null}},{key:"followAsOffsetOrientToPathDuration",value:function(e,t,n,r){return null}},{key:"followAsOffsetOrientToPath",value:function(e,t,n,r){return null}},{key:"rotateByAngleDuration",value:function(e,t){return null}},{key:"rotateToAngleDuration",value:function(e,t){return null}},{key:"speedByDuration",value:function(e,t){return null}},{key:"speedToDuration",value:function(e,t){return null}},{key:"scaleByDuration",value:function(e,t){return null}},{key:"scaleToDuration",value:function(e,t){return null}},{key:"scaleXByYDuration",value:function(e,t,n){return null}},{key:"scaleXToYDuration",value:function(e,t,n){return null}},{key:"scaleXToDuration",value:function(e,t){return null}},{key:"scaleYToDuration",value:function(e,t){return null}},{key:"unhide",value:function(){return null}},{key:"hide",value:function(){return null}},{key:"fadeInWithDuration",value:function(e){return null}},{key:"fadeOutWithDuration",value:function(e){return null}},{key:"fadeAlphaByDuration",value:function(e,t){return null}},{key:"fadeAlphaToDuration",value:function(e,t){return null}},{key:"resizeByWidth",value:function(e,t,n){return null}},{key:"resizeToHeight",value:function(e,t){return null}},{key:"resizeToWidth",value:function(e,t){return null}},{key:"setTexture",value:function(e){return null}},{key:"animateWithTimePerFrame",value:function(e,t){return null}},{key:"setNormalTexture",value:function(e){return null}},{key:"animateWithNormalTexturesTimePerFrame",value:function(e,t){return null}},{key:"colorizeWithDuration",value:function(e,t,n){return null}},{key:"applyForceDuration",value:function(e,t){return null}},{key:"applyTorqueDuration",value:function(e,t){return null}},{key:"applyForceAtDuration",value:function(e,t,n){return null}},{key:"applyImpulseDuration",value:function(e,t){return null}},{key:"applyAngularImpulseDuration",value:function(e,t){return null}},{key:"applyImpulseAtDuration",value:function(e,t,n){return null}},{key:"changeChargeTo",value:function(e,t){return null}},{key:"changeChargeBy",value:function(e,t){return null}},{key:"changeMassTo",value:function(e,t){return null}},{key:"changeMassBy",value:function(e,t){return null}},{key:"strengthToDuration",value:function(e,t){return null}},{key:"strengthByDuration",value:function(e,t){return null}},{key:"falloffToDuration",value:function(e,t){return null}},{key:"falloffByDuration",value:function(e,t){return null}},{key:"animateWithWarps",value:function(e,t){return null}},{key:"warpTo",value:function(e,t){return null}},{key:"playSoundFileNamedWaitForCompletion",value:function(e,t){return null}},{key:"play",value:function(){return null}},{key:"pause",value:function(){return null}},{key:"stop",value:function(){return null}},{key:"changePlaybackRateTo",value:function(e,t){return null}},{key:"changePlaybackRateBy",value:function(e,t){return null}},{key:"changeVolumeTo",value:function(e,t){return null}},{key:"changeVolumeBy",value:function(e,t){return null}},{key:"changeObstructionTo",value:function(e,t){return null}},{key:"changeObstructionBy",value:function(e,t){return null}},{key:"changeOcclusionTo",value:function(e,t){return null}},{key:"changeOcclusionBy",value:function(e,t){return null}},{key:"changeReverbTo",value:function(e,t){return null}},{key:"changeReverbBy",value:function(e,t){return null}},{key:"stereoPanTo",value:function(e,t){return null}},{key:"stereoPanBy",value:function(e,t){return null}},{key:"removeFromParent",value:function(){return null}},{key:"runOnChildWithName",value:function(e,t){return null}},{key:"group",value:function(e){return null}},{key:"sequence",value:function(e){return null}},{key:"repeat",value:function(e,t){return null}},{key:"repeatForever",value:function(e){return null}},{key:"waitForDuration",value:function(e){return null}},{key:"waitForDurationWithRange",value:function(e,t){return null}},{key:"reachToRootNodeDuration",value:function(e,t,n){return null}},{key:"reachToRootNode",value:function(e,t,n){return null}},{key:"customActionWithDurationActionBlock",value:function(e,t){return null}},{key:"performOnTarget",value:function(e,t){return null}},{key:"run",value:function(e){return null}}]),t}(c.default);t.default=T},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this._keys=[],this._values=[]}return i(e,null,[{key:"initWithCoder",value:function(t){var n=new e;if(void 0!==t._refObj["NS.objects"]){var r=t._refObj["NS.keys"],i=t._refObj["NS.objects"];if(!Array.isArray(r))throw new Error("NS.keys must be Array");if(!Array.isArray(i))throw new Error("NS.objects must be Array");if(r.length!==i.length)throw new Error("NS.keys.length !== NS.objects.length");var o=t.copy();o._refObj=r;var a=t.copy();a._refObj=i;for(var u=0;u<r.length;u++){var l=o.decodeObjectForKey(u),s=a.decodeObjectForKey(u);n._keys.push(l),n._values.push(s)}}else for(var c=0;;c++){var f="NS.object."+c,h="NS.key."+c;if(void 0===t._refObj[f])break;var d=t.decodeObjectForKey(h),_=t.decodeObjectForKey(f);n._keys.push(d),n._values.push(_)}return n}}]),i(e,[{key:"copy",value:function(){var t=new e;return t._keys=this._keys.slice(0),t._values=this._values.slice(0),t}},{key:"keys",value:function(){return this._keys.slice(0)}},{key:"dictionary",value:function(){for(var e={},t=this._keys.length,n=0;n<t;n++)e[this._keys[n]]=this._values[n];return e}},{key:"allValues",value:function(){return this._values.slice(0)}},{key:"allKeys",value:function(){return this.keys()}},{key:"count",value:function(){return this._keys.length}},{key:"removeAllObjects",value:function(){this._keys=[],this._values=[]}},{key:"removeObjectForKey",value:function(e){var t=this._keys.indexOf(e);t<0||(this._keys.splice(t,1),this._values.splice(t,1))}},{key:"objectForKey",value:function(e){var t=this._keys.indexOf(e);return t<0?null:this._values[t]}},{key:"setObjectForKey",value:function(e,t){var n=this._keys.indexOf(t);n<0&&(n=this._keys.length,this._keys[n]=t),this._values[n]=e}},{key:"valueForKey",value:function(e){return this.objectForKey(e)}},{key:"setValueForKey",value:function(e,t){this.setObjectForKey(e,t)}},{key:"set",value:function(e,t){this.setObjectForKey(t,e)}},{key:"get",value:function(e){return this.objectForKey(e)}},{key:"clear",value:function(){this.removeAllObjects()}},{key:"delete",value:function(e){this.removeObjectForKey(e)}},{key:"forEach",value:function(e){for(var t=this._keys.length,n=0;n<t;n++)e(this._values[n],this._keys[n])}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={linear:0,easeIn:1,easeOut:2,easeInEaseOut:3};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=File},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.BinaryRequest=void 0;var a=n(42),u=t.BinaryRequest=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.defaultOptions.mimeType="text/plain; charset=x-user-defined",e}return o(t,e),t}(a.AjaxRequest);t.default=new u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=FileReader},function(e,t,n){"use strict";t.kCAFillModeRemoved="removed",t.kCAFillModeForwards="forwards",t.kCAFillModeBackwards="backwards",t.kCAFillModeBoth="both",t.kCAMediaTimingFunctionLinear="linear",t.kCAMediaTimingFunctionEaseIn="easeIn",t.kCAMediaTimingFunctionEaseOut="easeOut",t.kCAMediaTimingFunctionEaseInEaseOut="easeInEaseOut",t.kCAMediaTimingFunctionDefault="default",t.kCAAnimationLinear="linear",t.kCAAnimationDiscrete="discrete",t.kCAAnimationPaced="paced",t.kCAAnimationCubic="cubic",t.kCAAnimationCubicPaced="cubicPaced",t.kCAAnimationRotateAuto="auto",t.kCAAnimationRotateAutoReverse="autoReverse"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(27),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(l),c=n(0),f=function(e){return e&&e.__esModule?e:{default:e}}(c),h=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.isRemovedOnCompletion=!0,e.timingFunction=null,e.delegate=null,e.usesSceneTimeBase=!1,e.fadeInDuration=0,e.fadeOutDuration=0,e.animationEvents=null,e.beginTime=0,e.timeOffset=0,e.repeatCount=0,e.repeatDuration=0,e.duration=0,e.speed=1,e.autoreverses=!1,e.fillMode=s.kCAFillModeRemoved,e._isFinished=!1,e._prevTime=null,e._animationStartTime=null,e}return o(t,e),a(t,[{key:"shouldArchiveValueForKey",value:function(e){return!1}},{key:"copy",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e.isRemovedOnCompletion=this.isRemovedOnCompletion,e.timingFunction=this.timingFunction,e.delegate=this.delegate,e.usesSceneTimeBase=this.usesSceneTimeBase,e.fadeInDuration=this.fadeInDuration,e.fadeOutDuration=this.fadeOutDuration,e.animationEvents=this.animationEvents?this.animationEvents.slice(0):null,e.beginTime=this.beginTime,e.timeOffset=this.timeOffset,e.repeatCount=this.repeatCount,e.repeatDuration=this.repeatDuration,e.duration=this.duration,e.speed=this.speed,e.autoreverses=this.autoreverses,e.fillMode=this.fillMode,e}},{key:"_applyAnimation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t;if(n){var i=this._basetimeFromTime(t);r=i,null!==this.timingFunction&&(r=this.timingFunction._getValueAtTime(i))}this._handleEvents(e,r)}},{key:"_handleEvents",value:function(e,t){var n=this;if(null!==this.animationEvents){var r=this._prevTime;null===r&&(this.delegate&&this.delegate.animationDidStart&&this.delegate.animationDidStart(this),r=t-1e-7),this.animationEvents.forEach(function(i){r<i._time&&i._time<=t&&i._eventBlock&&i._eventBlock(n,e,!1)}),this._prevTime=t}}},{key:"_basetimeFromTime",value:function(e){var t=e-this._animationStartTime;return this._basetimeFromActivetime(t)}},{key:"_basetimeFromActivetime",value:function(e){var t=0;this.beginTime>0&&(t=this.beginTime-this._animationStartTime);var n=e-t;if(n<0){if(this.fillMode!==s.kCAFillModeBackwards&&this.fillMode!==s.kCAFillModeBoth)return null;n=0}if(0===this.speed)return 0;var r=this.duration/Math.abs(this.speed),i=r;0===i&&(i=.25);var o=this.repeatCount;if(this.usesSceneTimeBase&&(o=1/0),this.repeatDuration>0?i=this.repeatDuration:(o>0&&(i*=o),this.autoreverses&&(r*=2,i*=2)),n>i){if(this._isFinished||(this._isFinished=!0,this.delegate&&this.delegate.animationDidStop&&this.delegate.animationDidStop(this,!0)),this.fillMode!==s.kCAFillModeForwards&&this.fillMode!==s.kCAFillModeBoth)return null;n=i}var a=(n+this.timeOffset)/r;return Math.abs(a)>1&&(a-=Math.floor(a)),a<0&&(a=1+a),this.autoreverses?a<=.5?2*a:2*(1-a):a}}],[{key:"defaultValueForKey",value:function(e){return null}}]),t}(f.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),f=n(72),h=r(f),d=n(18),_=r(d),p=n(22),y=r(p),m=n(34),v=r(m),g=n(73),b=r(g),S=n(2),w=r(S),T=n(3),k=r(T),C=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._contents=e,n.intensity=0,n.contentsTransform=(0,_.default)(0,0,0),n.wrapS=b.default.clamp,n.wrapT=b.default.clamp,n.minificationFilter=h.default.linear,n.magnificationFilter=h.default.linear,n.mipFilter=h.default.nearest,n.maxAnisotropy=0,n.mappingChannel=0,n.borderColor=null,n._parent=null,n._animations=new y.default,n.__presentation=null,n._loadedPromise=null,n}return a(t,e),l(t,null,[{key:"_propTypes",get:function(){return{color:["NSColor","_contents"],image:["NSMutableDictionary",function(e,t,n,r){var i="";void 0!==t.path?i=t.path:void 0!==t.URL&&(i=t.URL),e._loadContentsImage(i,r._directoryPath)}],float:["float",function(e,t){e._contents=new w.default(t,t,t,1)}],intensity:"float",wrapS:"integer",wrapT:"integer",minificationFilter:"integer",magnificationFilter:"integer",mipFilter:"integer",maxAnisotropy:"float",mappingChannel:"integer",borderColor:"plist",propertyType:["integer",null],parent:["SCNMaterial","_parent"],isCommonProfileProperty:["boolean",null],sRGB:["boolean",null],customSlotName:["string",null]}}}]),l(t,[{key:"_createPresentation",value:function(){null===this.__presentation&&(this.__presentation=this.copy())}},{key:"_copyPresentation",value:function(){this.__presentation._contents=this._contents}},{key:"copy",value:function(){var e=new t;return e._contents=this._contents,e.intensity=this.intensity,e.contentsTransform=this.contentsTransform,e.wrapS=this.wrapS,e.wrapT=this.wrapT,e.minificationFilter=this.minificationFilter,e.magnicifactionFilter=this.maginicifactionFilter,e.mipFilter=this.mipFilter,e.maxAnisotropy=this.maxAnisotropy,e.mappingChannel=this.mappingChannel,e.borderColor=this.borderColor,e}},{key:"valueForKeyPath",value:function(e){var n=this.__presentation?this.__presentation:this;return"contents"===e?n._contents:u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"valueForKeyPath",this).call(this,e)}},{key:"setValueForKeyPath",value:function(e,n){var r=this.__presentation?this.__presentation:this;"contents"===n?r._contents=e:u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValueForKeyPath",this).call(this,e,n)}},{key:"addAnimationForKey",value:function(e,t){void 0!==t&&null!==t||(t=Symbol());var n=e.copy();n._animationStartTime=.001*Date.now(),n._prevTime=n._animationStartTime-1e-7,this._animations.set(t,n)}},{key:"animationForKey",value:function(e){return this._animations.get(e)}},{key:"removeAllAnimations",value:function(){this._animations.clear()}},{key:"removeAnimationForKey",value:function(e){this._animations.delete(e)}},{key:"removeAnimationForKeyFadeOutDuration",value:function(e,t){}},{key:"pauseAnimationForKey",value:function(e){}},{key:"resumeAnimationForKey",value:function(e){}},{key:"isAnimationPausedForKey",value:function(e){return!1}},{key:"setAnimationSpeedForKey",value:function(e,t){}},{key:"_wrapSFor",value:function(e){switch(this.wrapS){case b.default.clamp:return e.CLAMP_TO_EDGE;case b.default.repeat:return e.REPEAT;case b.default.clampToBorder:return e.CLAMP_TO_EDGE;case b.default.mirror:return e.MIRRORED_REPEAT;default:throw new Error("unknown wrapS: "+this.wrapS)}}},{key:"_wrapTFor",value:function(e){switch(this.wrapT){case b.default.clamp:return e.CLAMP_TO_EDGE;case b.default.repeat:return e.REPEAT;case b.default.clampToBorder:return e.CLAMP_TO_EDGE;case b.default.mirror:return e.MIRRORED_REPEAT;default:throw new Error("unknown wrapT: "+this.wrapT)}}},{key:"_minificationFilterFor",value:function(e){switch(this.minificationFilter){case h.default.none:case h.default.linear:switch(this.mipFilter){case h.default.none:return e.LINEAR;case h.default.nearest:return e.LINEAR_MIPMAP_NEAREST;case h.default.linear:return e.LINEAR_MIPMAP_LINEAR;default:throw new Error("unknown mipmapFilter: "+this.mipmapFilter)}case h.default.nearest:switch(this.mipFilter){case h.default.none:return e.NEAREST;case h.default.nearest:return e.NEAREST_MIPMAP_NEAREST;case h.default.linear:return e.NEAREST_MIPMAP_LINEAR;default:throw new Error("unknown mipmapFilter: "+this.mipmapFilter)}default:throw new Error("unknown minificationFilter: "+this.minificationFilter)}}},{key:"_magnificationFilterFor",value:function(e){switch(this.magnificationFilter){case h.default.none:return e.LINEAR;case h.default.nearest:return e.NEAREST;case h.default.linear:return e.LINEAR;default:throw new Error("unknown magnificationFilter: "+this.magnificationFilter)}}},{key:"_loadContentsImage",value:function(e,t){var n=this,r=new Image;r.crossOrigin="anonymous";var i=e;return 0===i.indexOf("file:///")&&(i=i.slice(8)),i=i.replace(/\.exr$/,".png"),this._loadedPromise=new Promise(function(o,a){var u=i.split("/"),l=1,s=t+u.slice(-l).join("/");r.onload=function(){n._contents=r,o()},r.onerror=function(){l+=1,l>u.length?(r.onerror=function(){throw a(),new Error("image "+e+" load error.")},r.src=i):(s=t+u.slice(-l).join("/"),r.src=s)},r.src=s}),r}},{key:"float32Array",value:function(){var e=this.__presentation?this.__presentation:this;return(0,k.default)(e._contents,w.default)?e._contents.float32Array():new Float32Array([1,1,1,1])}},{key:"_getLoadedPromise",value:function(){return this._loadedPromise?this._loadedPromise:Promise.resolve()}},{key:"_presentation",get:function(){return null===this.__presentation?null:this.__presentation}},{key:"contents",get:function(){return this._contents},set:function(e){var t=this._contents;this._contents=e,v.default._addChange(this,"contents",t,e)}},{key:"animationKeys",get:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this._animations.keys()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return e}},{key:"didLoad",get:function(){return this._getLoadedPromise()}}]),t}(c.default);t.default=C},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={alpha:0,add:1,subtract:2,multiply:3,multiplyX2:4,screen:5,replace:6};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),f=n(33),h=r(f),d=n(47),_=r(d),p=n(12),y=r(p),m=n(6),v=r(m),g=n(48),b=r(g),S=n(7),w=(r(S),n(49)),T=r(w),k=n(75),C=r(k),O=n(50),E=r(O),P=n(51),A=r(P),x=n(1),M=r(x),N={backfaceCulling:"backfaceCulling",collisionBitMask:"collisionBitMask",searchMode:"results"},F={all:"all",any:"any",closest:"closest"},R=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.gravity=new M.default(0,0,0),e.speed=0,e.timeStep=0,e._scale=1,e._allBehaviors=[],e.contactDelegate=null,e._prevTime=null,e._scene=null,e._renderer=null,e}return u(t,e),l(t,null,[{key:"_propTypes",get:function(){return{gravity:"SCNVector3",speed:"double",timeStep:"double",scale:["double","_scale"],scene:["SCNScene","_scene"]}}}]),l(t,[{key:"updateCollisionPairs",value:function(){}},{key:"addBehavior",value:function(e){this._allBehaviors.indexOf(e)>=0||this._allBehaviors.push(e)}},{key:"removeBehavior",value:function(e){var t=this._allBehaviors.indexOf(e);t<0||this._allBehaviors.splice(t,1)}},{key:"removeAllBehaviors",value:function(){this._allBehaviors=[]}},{key:"contactTestBetween",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(0==(e.categoryBitMask&n.contactTestBitMask))return[];if(!e.physicsShape||!n.physicsShape)return[];if(e.type===T.default.static&&n.type===T.default.static)return[];if(e._position.sub(n._position).length()>e._radius+n._radius)return[];var i=e.physicsShape._shape,o=n.physicsShape._shape;return i instanceof h.default&&o instanceof h.default?t._contactTestBetweenBoxes(e,n,r):i instanceof h.default&&o instanceof A.default?t._contactTestBetweenBoxAndSphere(e,n,r):o instanceof h.default&&i instanceof A.default?t._contactTestBetweenBoxAndSphere(n,e,r,!0):i instanceof A.default&&o instanceof A.default?t._contactTestBetweenSpheres(e,n,r):[]}},{key:"contactTestWith",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[]}},{key:"rayTestWithSegmentFromTo",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=r;Array.isArray(r)?o=new Map(r):null===r&&(o=new Map);var a=[],u=-1,l=F.any;if(o.has(N.backfaceCulling)&&o.get(N.backfaceCulling),o.has(N.collisionBitMask)&&(u=o.get(N.collisionBitMask)),o.has(N.searchMode)&&(l=o.get(N.searchMode)),this._scene.rootNode.enumerateChildNodes(function(r){if(r.presentation&&r.presentation.physicsBody&&r.presentation.physicsBody.categoryBitMask&u){var o=t._hitTestWithSegmentPhysicsNode(e,n,r.presentation);if(o.length>0){var s=!0,c=!1,f=void 0;try{for(var h,d=o[Symbol.iterator]();!(s=(h=d.next()).done);s=!0){var _=h.value;_._node=r,_._worldCoordinates=r.convertPositionTo(_._localCoordinates,null),_._worldNormal=r.convertPositionTo(_._localNormal,null),_._localCoordinates=r.convertPositionFrom(_._localCoordinates,r),_._localNormal=r.convertPositionFrom(_._localNormal,r)}}catch(e){c=!0,f=e}finally{try{!s&&d.return&&d.return()}finally{if(c)throw f}}if(a.push.apply(a,i(o)),l===F.any)return!0}}return!1}),0===a.length)return a;var s=a.sort(function(e,t){return e._distance-t._distance});return l===F.closest&&(s=[s[0]]),s}},{key:"convexSweepTestWith",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3];return[]}},{key:"_simulate",value:function(e){if(this._renderer){var n=this._renderer._createRenderingPhysicsNodeArray(),r=[],o=!0,a=!1,u=void 0;try{for(var l,s=n[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value,f=c.physicsBody;f._prevPosition=f._position,f.type===T.default.kinematic?f._resetTransform():(f.type,T.default.dynamic),f._positionDiff=f._position.sub(f._prevPosition)}}catch(e){a=!0,u=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw u}}for(var h=(T.default.static,0);h<n.length;h++){var d=n[h].presentation.physicsBody;d.physicsShape._sourceGeometry instanceof _.default&&r.push.apply(r,i(t._capsuleTestWithObjects(d,n)));for(var p=0;p<n.length;p++)if(h!==p){var y=n[p].presentation.physicsBody;r.push.apply(r,i(this.contactTestBetween(d,y)))}}if(this.contactDelegate){var m=!0,v=!1,g=void 0;try{for(var b,S=r[Symbol.iterator]();!(m=(b=S.next()).done);m=!0){var w=b.value;this.contactDelegate.physicsWorldDidBegin&&this.contactDelegate.physicsWorldDidBegin(this,w)}}catch(e){v=!0,g=e}finally{try{!m&&S.return&&S.return()}finally{if(v)throw g}}}var k=!0,C=!1,O=void 0;try{for(var E,P=n[Symbol.iterator]();!(k=(E=P.next()).done);k=!0){var A=E.value,f=A.physicsBody;f._prevPosition=f._position}}catch(e){C=!0,O=e}finally{try{!k&&P.return&&P.return()}finally{if(C)throw O}}}}},{key:"allBehaviors",get:function(){return this._allBehaviors.slice(0)}}],[{key:"_contactTestBetweenBoxes",value:function(e,t,n){var r=e.physicsShape._shape,i=t.physicsShape._shape,o=t._transform.mult(e._invTransform),a=new M.default(o.m11,o.m12,o.m13).normalize(),u=new M.default(o.m21,o.m22,o.m23).normalize(),l=new M.default(o.m31,o.m32,o.m33).normalize(),s=a.mul(.5*i.width),c=u.mul(.5*i.height),f=l.mul(.5*i.length),h=o.getTranslation(),d=.5*r.width,_=.5*r.height,p=.5*r.length,y=d,m=Math.abs(s.x)+Math.abs(c.x)+Math.abs(f.x),v=Math.abs(h.x);if(v>y+m)return[];if(y=_,m=Math.abs(s.y)+Math.abs(c.y)+Math.abs(f.y),(v=Math.abs(h.y))>y+m)return[];if(y=p,m=Math.abs(s.z)+Math.abs(c.z)+Math.abs(f.z),(v=Math.abs(h.z))>y+m)return[];if(y=Math.abs(a.x*d)+Math.abs(a.y*_)+Math.abs(a.z*p),m=s.length(),(v=Math.abs(h.dot(a)))>y+m)return[];if(y=Math.abs(u.x*d)+Math.abs(u.y*_)+Math.abs(u.z*p),m=c.length(),(v=Math.abs(h.dot(u)))>y+m)return[];if(y=Math.abs(l.x*d)+Math.abs(l.y*_)+Math.abs(l.z*p),m=f.length(),(v=Math.abs(h.dot(l)))>y+m)return[];var g=new M.default(0,-a.z,a.y);if(y=Math.abs(g.y*_)+Math.abs(g.z*p),m=Math.abs(g.dot(c))+Math.abs(g.dot(f)),(v=Math.abs(h.dot(g)))>y+m)return[];if(g=new M.default(0,-u.z,u.y),y=Math.abs(g.y*_)+Math.abs(g.z*p),m=Math.abs(g.dot(f))+Math.abs(g.dot(s)),(v=Math.abs(h.dot(g)))>y+m)return[];if(g=new M.default(0,-l.z,l.y),y=Math.abs(g.y*_)+Math.abs(g.z*p),m=Math.abs(g.dot(s))+Math.abs(g.dot(c)),(v=Math.abs(h.dot(g)))>y+m)return[];if(g=new M.default(a.z,0,-a.x),y=Math.abs(g.x*d)+Math.abs(g.z*p),m=Math.abs(g.dot(c))+Math.abs(g.dot(f)),(v=Math.abs(h.dot(g)))>y+m)return[];if(g=new M.default(u.z,0,-u.x),y=Math.abs(g.x*d)+Math.abs(g.z*p),m=Math.abs(g.dot(f))+Math.abs(g.dot(s)),(v=Math.abs(h.dot(g)))>y+m)return[];if(g=new M.default(l.z,0,-l.x),y=Math.abs(g.x*d)+Math.abs(g.z*p),m=Math.abs(g.dot(s))+Math.abs(g.dot(c)),(v=Math.abs(h.dot(g)))>y+m)return[];if(g=new M.default(-a.y,a.x,0),y=Math.abs(g.x*d)+Math.abs(g.y*_),m=Math.abs(g.dot(c))+Math.abs(g.dot(f)),(v=Math.abs(h.dot(g)))>y+m)return[];if(g=new M.default(-u.y,u.x,0),y=Math.abs(g.x*d)+Math.abs(g.y*_),m=Math.abs(g.dot(f))+Math.abs(g.dot(s)),(v=Math.abs(h.dot(g)))>y+m)return[];if(g=new M.default(-l.y,l.x,0),y=Math.abs(g.x*d)+Math.abs(g.y*_),m=Math.abs(g.dot(s))+Math.abs(g.dot(c)),(v=Math.abs(h.dot(g)))>y+m)return[];var b=new C.default;return b._nodeA=e._node,b._nodeB=t._node,b._contactPoint=e._position.add(h.mul(.5)),b._contactNormal=h.normalize(),b._penetrationDistance=0,[b]}},{key:"_contactTestBetweenSpheres",value:function(e,t,n){var r=e.physicsShape._shape,i=t.physicsShape._shape,o=e._position,a=t._position,u=r.radius,l=i.radius,s=o.sub(a),c=s.length();if(c>u+l)return[];var f=new C.default;return f._nodeA=e._node,f._nodeB=t._node,f._contactPoint=o.add(s.mul(.5*(u-l+c))),f._contactNormal=s.mul(-1).normalize(),f._penetrationDistance=u+l-c,[f]}},{key:"_contactTestBetweenBoxAndSphere",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.physicsShape._shape,i=t.physicsShape._shape,o=(new M.default,t._position.transform(e._invTransform)),a=new M.default,u=.5*r.width,l=.5*r.height,s=.5*r.length;Math.abs(o.x)-u<=0?a.x=0:a.x=o.x-u,Math.abs(o.y)-l<=0?a.y=0:a.y=o.y-l,Math.abs(o.z)-s<=0?a.z=0:a.z=o.z-s;var c=a.length();if(c>i.radius)return[];var f=new C.default;return n?(f._nodeA=t._node,f._nodeB=e._node):(f._nodeA=e._node,f._nodeB=t._node),f._contactPoint=a.transform(e._transform),f._contactNormal=a.rotate(e._transform).normalize(),n&&(f._contactNormal=f._contactNormal.mul(-1)),f._penetrationDistance=c-i.radius,[f]}},{key:"_capsuleTestWithObjects",value:function(e,t){var n=[],r=t.filter(function(t){var n=t.presentation.physicsBody;return n!==e&&(n.physicsShape._type===E.default.ShapeType.concavePolyhedron&&(0!=(e.categoryBitMask&n.contactTestBitMask)||0!=(n.categoryBitMask&e.contactTestBitMask)))});if(0===r.length)return n;var o=(e._node._worldTransform,e.physicsShape._sourceGeometry,!0),a=!1,u=void 0;try{for(var l,s=r[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value;if(this._intersectsBoundingBox(e._node,c)){var f=this._contactTestCapsuleAndConcave(e._node,c);n.push.apply(n,i(f))}}}catch(e){a=!0,u=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw u}}return n}},{key:"_intersectsBoundingBox",value:function(e,t){var n=e._worldTranslation,r=t._worldTranslation,i=e.physicsBody.physicsShape._sourceGeometry,o=t.physicsBody.physicsShape._sourceGeometry;if(!i||!o)return!1;var a=i.boundingBox,u=o.boundingBox;return!(a.min.x+n.x>u.max.x+r.x||a.max.x+n.x<u.min.x+r.x)&&(!(a.min.y+n.y>u.max.y+r.y||a.max.y+n.y<u.min.y+r.y)&&!(a.min.z+n.z>u.max.z+r.z||a.max.z+n.z<u.min.z+r.z))}},{key:"_contactTestCapsuleAndConcave",value:function(e,t){var n=[],r=e.physicsBody,i=t.physicsBody,o=r.physicsShape._sourceGeometry,a=i.physicsShape._sourceGeometry,u=r._transform.mult(i._invTransform),l=o.capRadius,s=.5*o.height-l,c=(r._positionDiff.rotate(u).normalize(),new M.default(0,s,0).transform(u)),f=new M.default(0,-s,0).transform(u),h=a.geometryElements,d=a.getGeometrySourcesForSemantic(v.default.Semantic.vertex)[0],_=!0,p=!1,m=void 0;try{for(var g,b=h[Symbol.iterator]();!(_=(g=b.next()).done);_=!0){var S=g.value;if(S._primitiveType===y.default.triangles)for(var w=S._data,T=S._primitiveCount,k=0,O=0;O<T;O++){var E=d._scnVectorAt(w[k]),P=d._scnVectorAt(w[k+1]),A=d._scnVectorAt(w[k+2]);k+=3;var x=this._capsuleTriangleContact(c,f,l,E,P,A);if(x){var N=new C.default;N._nodeA=e,N._nodeB=t,N._contactPoint=x.point,N._contactNormal=x.normal,N._penetrationDistance=x.penetration,n.push(N)}}}}catch(e){p=!0,m=e}finally{try{!_&&b.return&&b.return()}finally{if(p)throw m}}return n}},{key:"_capsuleTriangleContact",value:function(e,t,n,r,i,o){var a=(t.sub(e),this._segmentTriangleIntersection(e,t,r,i,o));if(a.intersection){var u=0;return u=a.d0<0?n-a.d0:n-a.d1,{point:a.intersection,normal:a.normal,distance:0,penetration:u}}var l=this._segmentSegmentDist(e,t,r,i),s=l,c=this._segmentSegmentDist(e,t,i,o);c.distance<s.distance&&(s=c);var f=this._segmentSegmentDist(e,t,o,r);f.distance<s.distance&&(s=f);var h=e.add(a.normal.mul(-a.d0));this._pointIsInsideTriangle(h,r,i,o)&&Math.abs(a.d0)<s.distance&&(s.distance=Math.abs(a.d0),s.nearestPos1=h);var d=t.add(a.normal.mul(-a.d1));return this._pointIsInsideTriangle(d,r,i,o)&&Math.abs(a.d1)<s.distance&&(s.distance=Math.abs(a.d1),s.nearestPos1=d),s.distance<n?{point:s.nearestPos1,normal:a.normal,distance:0,penetration:n-s.distance}:null}},{key:"_segmentTriangleIntersection",value:function(e,t,n,r,i){var o=e.sub(n),a=t.sub(n),u=this._normalOfTriangle(n,r,i),l=o.dot(u),s=a.dot(u),c={normal:u,d0:l,d1:s,intersection:null};if(l*s>0)return c;var f=l/(l-s),h=o.mul(1-f).add(a.mul(f)).add(n);return this._pointIsInsideTriangle(h,n,r,i)?(c.intersection=h,c):c}},{key:"_normalOfTriangle",value:function(e,t,n){var r=t.sub(e),i=n.sub(e);return r.cross(i).normalize()}},{key:"_pointIsInsideTriangle",value:function(e,t,n,r){var i=this._normalOfTriangle(t,n,r),o=n.sub(t).cross(i).dot(e.sub(t)),a=r.sub(n).cross(i).dot(e.sub(n)),u=t.sub(r).cross(i).dot(e.sub(r));return o<0&&a<0&&u<0||o>0&&a>0&&u>0}},{key:"_pointLineDist",value:function(e,t,n){var r=n.length2(),i=0;r>0&&(i=n.dot(e.sub(t))/r);var o=t.add(n.mul(i));return{coeff:i,nearestPos:o,distance:o.sub(e).length()}}},{key:"_pointSegmentDist",value:function(e,t,n){var r=n.sub(t),i=this._pointLineDist(e,t,r);if(i.coeff<0){var o=t.sub(e).length();return{coeff:i.coeff,nearestPos:t,distance:o}}if(i.coeff>1){var a=n.sub(e).length();return{coeff:i.coeff,nearestPos:n,distance:a}}return i}},{key:"_lineLineDist",value:function(e,t,n,r){if(this._isParallel(t,r)){var i=this._pointLineDist(e,n,r);return{coeff0:0,nearestPos0:e,coeff1:i.coeff,nearestPos1:i.nearestPos,distance:i.distance}}var o=t.dot(r),a=t.dot(t),u=r.dot(r),l=e.sub(n),s=(o*r.dot(l)-u*t.dot(l))/(a*u-o*o),c=e.add(t.mul(s)),f=r.dot(c.sub(n))/u,h=n.add(r.mul(f));return{coeff0:s,nearestPos0:c,coeff1:f,nearestPos1:h,distance:h.sub(c).length()}}},{key:"_isParallel",value:function(e,t){return e.cross(t).length2()<1e-13}},{key:"_clamp",value:function(e){return e<0?0:e>1?1:e}},{key:"_segmentSegmentDist",value:function(e,t,n,r){var i=t.sub(e),o=r.sub(n),a=null;if(this._isParallel(i,o)){if(a=this._pointSegmentDist(e,n,r),0<=a.coeff&&a.coeff<=1)return{coeff0:0,nearestPos0:e,coeff1:a.coeff,nearestPos1:a.nearestPos,distance:a.distance};a.coeff0=0,a.coeff1=a.coeff}else if(a=this._lineLineDist(e,i,n,o),0<=a.coeff0&&a.coeff0<=1&&0<=a.coeff1&&a.coeff1<=1)return a;var u=a,l=this._clamp(a.coeff0);if(l!==a.coeff0){var s=e.add(i.mul(l));if(u=this._pointSegmentDist(s,n,r),0<=u.coeff&&u.coeff<=1)return{coeff0:l,nearestPos0:s,coeff1:u.coeff,nearestPos1:u.nearestPos,distance:u.distance};u.coeff1=u.coeff}var c=this._clamp(u.coeff1),f=n.add(o.mul(c)),h=this._pointSegmentDist(f,e,t);if(0<=h.coeff&&h.coeff<=1)return{coeff0:h.coeff,nearestPos0:h.nearestPos,coeff1:c,nearestPos1:f,distance:h.distance};var d=this._clamp(h.coeff),_=e.add(i.mul(d));return{coeff0:d,nearestPos0:_,coeff1:c,nearestPos1:f,distance:f.sub(_).length()}}},{key:"_hitTestWithSegmentNode",value:function(e,t,n){var r=n;n.presentation&&n.presentation.geometry&&(r=n.presentation);var i=r.geometry;if(!i)return[];var o=r.convertPositionFrom(e,null),a=r.convertPositionFrom(t,null),u=this._segmentBoundingBoxIntersects(o,a,i.boundingBox);return null!==u?(console.error("segmentBoundingBoxIntersects: "+u.near+", "+u.far),this._hitTestWithSegmentGeometry(o,a,i)):[]}},{key:"_hitTestWithSegmentPhysicsNode",value:function(e,t,n){var r=n;n.presentation&&n.presentation.physicsBody&&(r=n.presentation);var i=r.physicsBody;if(null===i)return[];var o=i.physicsShape;if(null===o)return[];var a=o._sourceGeometry;if(null===a)return[];var u=e.transform(i._invTransform),l=t.transform(i._invTransform);return null!==this._segmentBoundingBoxIntersects(u,l,a.boundingBox)?this._hitTestWithSegmentGeometry(u,l,a):[]}},{key:"_segmentBoundingBoxIntersects",value:function(e,t,n){var r=t.sub(e),i=this._lineBoundingBoxIntersects(e,r,n);return null===i?null:i.near>1||i.far<0?null:i}},{key:"_lineBoundingBoxIntersects",value:function(e,t,n){var r=new M.default(1/t.x,1/t.y,1/t.z),i=n.min,o=n.max,a=i.sub(e).mulv(r),u=o.sub(e).mulv(r),l=-1/0,s=1/0;if(Math.abs(t.x)<1e-6){if(e.x<i.x||o.x<e.x)return null}else a.x<u.x?(l=Math.max(l,a.x),s=Math.min(s,u.x)):(l=Math.max(l,u.x),s=Math.min(s,a.x));if(Math.abs(t.y)<1e-6){if(e.y<i.y||o.y<e.y)return null}else a.y<u.y?(l=Math.max(l,a.y),s=Math.min(s,u.y)):(l=Math.max(l,u.y),s=Math.min(s,a.y));if(Math.abs(t.z)<1e-6){if(e.z<i.z||o.z<e.z)return null}else a.z<u.z?(l=Math.max(l,a.z),s=Math.min(s,u.z)):(l=Math.max(l,u.z),s=Math.min(s,a.z));return l>s?null:{near:l,far:s}}},{key:"_hitTestWithSegmentGeometry",value:function(e,t,n){for(var r=[],i=n.geometryElements,o=i.length,a=n.getGeometrySourcesForSemantic(v.default.Semantic.vertex)[0],u=0;u<o;u++){var l=i[u];if(l._primitiveType===y.default.triangles)for(var s=l._data,c=l._primitiveCount,f=0,h=0;h<c;h++){var d=a._scnVectorAt(s[f]),_=a._scnVectorAt(s[f+1]),p=a._scnVectorAt(s[f+2]);f+=3;var m=this._segmentTriangleIntersection(e,t,d,_,p);if(m.intersection){var g=new b.default;g._geometryIndex=u,g._faceIndex=h,g._localCoordinates=m.intersection,g._localNormal=m.normal,g._distance=m.intersection.sub(e).length(),r.push(g)}}}return r}},{key:"TestOption",get:function(){return N}},{key:"TestSearchMode",get:function(){return F}}]),t}(c.default);t.default=R},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),c=r(s),f=n(9),h=r(f),d=n(6),_=r(d),p=n(15),y=r(p),m=n(12),v=r(m),g=n(1),b=r(g),S=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,[],[]));return u.width=e,u.height=n,u.length=r,u.widthSegmentCount=1,u.heightSegmentCount=1,u.lengthSegmentCount=1,u.chamferRadius=a,u.chamferSegmentCount=10,u._createGeometry(),u.materials.push(new c.default),u}return a(t,e),l(t,null,[{key:"_propTypes",get:function(){return{$constructor:function(e,n){var r=new t(n.boxwidth,n.boxheight,n.boxlength,n.boxchamferRadius);return r.widthSegmentCount=n.boxwidthSegmentCount,r.heightSegmentCount=n.boxheightSegmentCount,r.lengthSegmentCount=n.boxlengthSegmentCount,r.chamferSegmentCount=n.boxchamferSegmentCount,r.name=n.name,r.materials=n.materials,r.tessellator=n.tessellator,r.wantsAdaptiveSubdivision=n.wantsAdaptiveSubdivision,r.subdivisionLevel=n.subdivisionLevel,r},name:["string",null],boxwidth:["float",null],boxheight:["float",null],boxlength:["float",null],boxwidthSegmentCount:["integer",null],boxheightSegmentCount:["integer",null],boxlengthSegmentCount:["integer",null],boxchamferRadius:["float",null],boxchamferSegmentCount:["integer",null],boxprimitiveType:["integer",null],materials:["NSArray",null],tessellator:["SCNGeometryTessellator",null],wantsAdaptiveSubdivision:["boolean",null],subdivisionLevel:["integer",null],subdivisionSettings:["bytes",null]}}}]),l(t,[{key:"_createGeometry",value:function(){var e=[],t=[],n=.5*-this.width,r=.5*this.width,i=.5*this.height,o=.5*-this.height,a=.5*this.length,u=.5*-this.length;e.push(n,o,a),e.push(0,0,1),e.push(0,1),e.push(n,i,a),e.push(0,0,1),e.push(0,0),e.push(r,o,a),e.push(0,0,1),e.push(1,1),e.push(r,i,a),e.push(0,0,1),e.push(1,0),t.push(0,3,1),t.push(0,2,3),e.push(r,o,a),e.push(1,0,0),e.push(0,1),e.push(r,i,a),e.push(1,0,0),e.push(0,0),e.push(r,o,u),e.push(1,0,0),e.push(1,1),e.push(r,i,u),e.push(1,0,0),e.push(1,0),t.push(4,7,5),t.push(4,6,7),e.push(r,o,u),e.push(0,0,-1),e.push(0,1),e.push(r,i,u),e.push(0,0,-1),e.push(0,0),e.push(n,o,u),e.push(0,0,-1),e.push(1,1),e.push(n,i,u),e.push(0,0,-1),e.push(1,0),t.push(8,11,9),t.push(8,10,11),e.push(n,o,u),e.push(-1,0,0),e.push(0,1),e.push(n,i,u),e.push(-1,0,0),e.push(0,0),e.push(n,o,a),e.push(-1,0,0),e.push(1,1),e.push(n,i,a),e.push(-1,0,0),e.push(1,0),t.push(12,15,13),t.push(12,14,15),e.push(n,i,a),e.push(0,1,0),e.push(0,1),e.push(n,i,u),e.push(0,1,0),e.push(0,0),e.push(r,i,a),e.push(0,1,0),e.push(1,1),e.push(r,i,u),e.push(0,1,0),e.push(1,0),t.push(16,19,17),t.push(16,18,19),e.push(n,o,u),e.push(0,-1,0),e.push(0,1),e.push(n,o,a),e.push(0,-1,0),e.push(0,0),e.push(r,o,u),e.push(0,-1,0),e.push(1,1),e.push(r,o,a),e.push(0,-1,0),e.push(1,0),t.push(20,23,21),t.push(20,22,23);var l=new _.default(e,_.default.Semantic.vertex,24,!0,3,4,0,32),s=new _.default(e,_.default.Semantic.normal,24,!0,3,4,12,32),c=new _.default(e,_.default.Semantic.texcoord,24,!0,2,4,24,32),f=new y.default(t,v.default.triangles);this._geometryElements=[f],this._geometrySources=[l,s,c],this.boundingBox={min:new b.default(n,o,u),max:new b.default(r,i,a)}}},{key:"_updateBoundingBoxForSkinner",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?this.boundingBox:u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_updateBoundingBoxForSkinner",this).call(this,e)}},{key:"_createFace",value:function(e,t,n,r,i,o,a,u){}},{key:"_createBtCollisionShape",value:function(){}}]),t}(h.default);t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(44),f=r(c),h=[],d=!0,_=function e(){a(this,e),this._animations=[],this._animationDuration=0,this._animationTimingFunction=null,this._disableActions=!1,this._completionBlock=null,this._values=new Map},p=new _,y=function(e){function t(){a(this,t);i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));throw new Error("do not create an instance of SCNTransaction")}return o(t,e),u(t,null,[{key:"begin",value:function(){var e=new _;e._disableActions=this._currentTransaction._disabledActions,h.push(e)}},{key:"commit",value:function(){var e=h.pop();e&&this._apply(e)}},{key:"flush",value:function(){this._apply(p)}},{key:"_apply",value:function(e){if(e._disableActions||0===e._animationDuration)e._animations.forEach(function(e){e.target.setValueForKeyPath(e.newValue,e.keyPath)}),e._completionBlock&&e._completionBlock();else{var t=[];e._animations.forEach(function(n){var r=new Promise(function(t,r){var i=new f.default(n.keyPath);i.fromValue=n.diff,i.timingFunction=e._animationTimingFunction,i.duration=e._animationDuration,i.isAdditive=!0,i.isRemovedOnCompletion=!0,i.delegate={animationDidStop:function(e,r){r&&(n.target.setValueForKeyPath(n.newValue,n.keyPath),t(n,i))}},n.target.addAnimationForKey(i,null)});t.push(r)}),Promise.all(t).then(function(){e._completionBlock&&e._completionBlock()})}}},{key:"lock",value:function(){throw new Error("lock() is not implemented")}},{key:"unlock",value:function(){throw new Error("unlock() is not implemented")}},{key:"setValueForKey",value:function(e,t){this._currentTransaction._values.set(t,e)}},{key:"valueForKey",value:function(e){for(var t=h.length-1;t>=0;t--){var n=h[t]._values.get(e);if(void 0!==n)return n}return p._values.get(e)}},{key:"_addChange",value:function(e,t,n,r){if(this.immediateMode)e.setValueForKeyPath(r,t);else{var i=null;if("number"==typeof r)i=n-r;else{if(void 0===r.sub)throw new Error("keyPath "+t+" does not have sub function");i=n.sub(r)}this._currentTransaction._animations.push({target:e,keyPath:t,diff:i,oldValue:n,newValue:r})}}},{key:"animationDuration",get:function(){return this._currentTransaction._animationDuration},set:function(e){this._currentTransaction._animationDuration=e}},{key:"animationTimingFunction",get:function(){return this._currentTransaction._animationTimingFunction},set:function(e){this._currentTransaction._animationTimingFunction=e}},{key:"disableActions",get:function(){return this._currentTransaction._disableActions},set:function(e){this._currentTransaction._disableActions=e}},{key:"completionBlock",get:function(){return this._currentTransaction._completionBlock},set:function(e){this._currentTransaction._completionBlock=e}},{key:"_currentTransaction",get:function(){return h.length>0?h[h.length-1]:p}},{key:"immediateMode",get:function(){return!(h.length>0)&&d},set:function(e){d=e}}]),t}(s.default);t.default=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(113),f=r(c),h=n(115),d=r(h),_=n(116),p=(r(_),{getGamepads:function(){return[]}});"undefined"!=typeof window&&void 0!==window.navigator&&(p=window.navigator);var y=new Map,m=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._gamepad=null,e._extendedGamepad=null,e._microGamepad=null,e._motion=null,e.controllerPausedHandler=null,e._isAttachedToDevice=!1,e._vendorName=null,e.playerIndex=null,e.handlerQueue=null,e._gamepadIndex=-1,e._gamepadId=-1,e._state={buttons:[],pressed:[],axes:[]},e._updated={buttons:[],pressed:[],axes:[]},e}return a(t,e),u(t,null,[{key:"getController",value:function(e){var n=e;if(""===e.id&&null===(n=t._gamepadObjByIndex(e.index)))return null;var r=y.get(n.id);return r||(r=new t,n?(y.set(n.id,r),r._gamepadIndex=n.index,r._gamepadId=n.id,r._gamepad=new f.default,r._gamepad._controller=r,"standard"===e.mapping&&(r._extendedGamepad=new d.default,r._extendedGamepad._controller=r),r):r)}}]),u(t,[{key:"gamepad",get:function(){return this._gamepad}},{key:"extendedGamepad",get:function(){return this._extendedGamepad}},{key:"microGamepad",get:function(){return this._microGamepad}},{key:"motion",get:function(){return this._motion}},{key:"isAttachedToDevice",get:function(){return this._isAttachedToDevice}},{key:"vendorName",get:function(){return this._vendorName}},{key:"gamepadObj",get:function(){return t._gamepadObjById(this._gamepadId)}}],[{key:"_update",value:function(){y.forEach(function(e,n){var r=t._gamepadObjById(n);if(!r)return void y.delete(n);for(var i=r.buttons.length,o=0;o<i;o++){var a=r.buttons[o];e._updated.buttons[o]=!1,e._state.buttons[o]!==a.value&&(e._state.buttons[o]=a.value,e._updated.buttons[o]=!0),e._updated.pressed[o]=!1,e._state.pressed[o]!==a.pressed&&(e._state.pressed[o]=a.pressed,e._updated.pressed[o]=!0)}for(var u=r.axes.length,l=0;l<u;l++){var s=r.axes[l];e._updated.axes[l]=!1,e._state.axes[l]!==s&&(e._state.axes[l]=s,e._updated.axes[l]=!0)}}),y.forEach(function(e,t){e._gamepad&&e._gamepad._update(),e._extendedGamepad&&e._extendedGamepad._update(),e._microGamepad&&e._microGamepad._update()})}},{key:"startWirelessControllerDiscovery",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]}},{key:"stopWirelessControllerDiscovery",value:function(){}},{key:"controllers",value:function(){return Array.from(y.values())}},{key:"_gamepadObjByIndexId",value:function(e,n){var r=t._gamepadObjByIndex(e);return r&&r.id===n?r:null}},{key:"_gamepadObjByIndex",value:function(e){return p.getGamepads()[e]}},{key:"_gamepadObjById",value:function(e){var t=p.getGamepads(),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(u&&u.id===e)return u}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}return null}}]),t}(s.default);t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(37),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._isPressed=!1,e._value=0,e.pressedChangedHandler=null,e.valueChangedHandler=null,e}return o(t,e),a(t,[{key:"isPressed",get:function(){return this._isPressed}},{key:"value",get:function(){return this._value}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._isAnalog=!1,e._collection=null,e}return o(t,e),a(t,[{key:"isAnalog",get:function(){return this._isAnalog}},{key:"collection",get:function(){return this._collection}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(120),f=(r(c),function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._entity=null,e}return a(t,e),u(t,[{key:"updateDeltaTime",value:function(e){}},{key:"didAddToEntity",value:function(){}},{key:"willRemoveFromEntity",value:function(){}},{key:"entity",get:function(){return this._entity}}]),t}(s.default));t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e.replace(/[^*+.-9A-Z_a-z-]/g,function(e){var t,n=e.charCodeAt(0);return n<128?(n<16?"%0":"%")+n.toString(16).toUpperCase():65376<n&&n<65440?"%"+(n-65216).toString(16).toUpperCase():(n=b.indexOf(e))<0?"%81E":"%"+((t=((n<8272?n:n=b.lastIndexOf(e))-(n%=188))/188)<31?t+129:t+193).toString(16).toUpperCase()+(64<(n+=n<63?64:65)&&n<91||95==n||96<n&&n<123?String.fromCharCode(n):"%"+n.toString(16).toUpperCase())})},i=function(e){return e.replace(/%(8[1-9A-F]|[9E][0-9A-F]|F[0-9A-C])(%[4-689A-F][0-9A-F]|%7[0-9A-E]|[@-~])|%([0-7][0-9A-F]|A[1-9A-F]|[B-D][0-9A-F])/gi,function(e){var t=parseInt(e.substring(1,3),16),n=e.length;return 3==n?String.fromCharCode(t<160?t:t+65216):b.charAt(188*(t<160?t-129:t-193)+(4==n?e.charCodeAt(3)-64:(t=parseInt(e.substring(4),16))<127?t-64:t-65))})},o=function(e){return e.replace(/[^*+.-9A-Z_a-z-]/g,function(e){var t=e.charCodeAt(0);return(t<128?(t<16?"%0":"%")+t.toString(16):65376<t&&t<65440?"%8E%"+(t-65216).toString(16):(t=S.indexOf(e))<0?"%A1%A6":"%"+((t-(t%=94))/94+161).toString(16)+"%"+(t+161).toString(16)).toUpperCase()})},a=function(e){return e.replace(/(%A[1-9A-F]|%[B-E][0-9A-F]|%F[0-9A-E]){2}|%8E%(A[1-9A-F]|[B-D][0-9A-F])|%[0-7][0-9A-F]/gi,function(e){var t=parseInt(e.substring(1),16);return t<161?String.fromCharCode(t<128?t:parseInt(e.substring(4),16)+65216):S.charAt(94*(t-161)+parseInt(e.substring(4),16)-161)})},u=function(e){var t=String.fromCharCode,n=t(92,120,48,48,45,92,120,55,70),r=t(65377,45,65439,93,43),i=function(e){return 41<e&&e<58&&44!=e||64<e&&e<91||95==e||96<e&&e<123?t(e):"%"+e.toString(16).toUpperCase()},o=function(e){var t=e.charCodeAt(0);return(t<16?"%0":"%")+t.toString(16).toUpperCase()},a=new RegExp;return a.compile("[^*+.-9A-Z_a-z-]","g"),("g"+e+"g").replace(RegExp("["+n+"]+","g"),function(e){return"%1B%28B"+e.replace(a,o)}).replace(RegExp("["+r,"g"),function(e){for(var t,n=0,r="%1B%28I";t=e.charCodeAt(n++);)r+=i(t-65344);return r}).replace(RegExp("[^"+n+r,"g"),function(e){for(var t,n,r=0,o="%1B%24B";t=e.charAt(r++);)o+=(n=S.indexOf(t))<0?"%21%26":i((n-(n%=94))/94+33)+i(n+33);return o}).slice(8,-1)},l=function(e){var t,n,r=0,i="",o=String.fromCharCode,a=("%28B"+e.replace(/%49/g,"I").replace(/%1B%24%4[02]|%1B%24@/gi,"%1B%24B")).split(/%1B/i),u=function(e){return o(parseInt(e.substring(1),16))},l=function(e){return o((3==e.length?parseInt(e.substring(1),16):e.charCodeAt(0))+65344)},s=function(e){var t=e.length;return S.charAt(4<t?94*(parseInt(e.substring(1),16)-33)+parseInt(e.substring(4),16)-33:2<t?(37==(t=e.charCodeAt(0))?94*(parseInt(e.substring(1,3),16)-33)+e.charCodeAt(3):94*(t-33)+parseInt(e.substring(2),16))-33:94*(e.charCodeAt(0)-33)+e.charCodeAt(1)-33)},c=new RegExp,f=new RegExp,h=new RegExp;for(c.compile("%[0-7][0-9A-F]","ig"),f.compile("(%2[1-9A-F]|%[3-5][0-9A-F])|[!-_]","ig"),h.compile("(%2[1-9A-F]|%[3-6][0-9A-F]|%7[0-9A-E]){2}|(%2[1-9A-F]|%[3-6][0-9A-F]|%7[0-9A-E])[!-~]|[!-~](%2[1-9A-F]|%[3-6][0-9A-F]|%7[0-9A-E])|[!-~]{2}","ig");t=a[r++];)i+="%24B"==(n=t.substring(0,4))?t.substring(4).replace(h,s):"%28I"==n?t.substring(4).replace(f,l):t.replace(c,u).substring(2);return i},s=function(e){var t=String.fromCharCode,n=t(92,120,48,48,45,92,120,55,70,65377,45,65439,93,43),r=function(e){return 41<e&&e<58&&44!=e||64<e&&e<91||95==e||96<e&&e<123?t(e):"%"+e.toString(16).toUpperCase()},i=function(e){var t=e.charCodeAt(0);return(t<16?"%0":"%")+(t<128?t:t-65216).toString(16).toUpperCase()},o=new RegExp;return o.compile("[^*+.-9A-Z_a-z-]","g"),("g"+e+"g").replace(RegExp("["+n,"g"),function(e){return"%1B%28B"+e.replace(o,i)}).replace(RegExp("[^"+n,"g"),function(e){for(var t,n,i=0,o="%1B%24B";t=e.charAt(i++);)o+=(n=S.indexOf(t))<0?"%21%26":r((n-(n%=94))/94+33)+r(n+33);return o}).slice(8,-1)},c=function(e){var t,n=0,r="",i=("%28B"+e.replace(/%1B%24%4[02]|%1B%24@/gi,"%1B%24B")).split(/%1B/i),o=function(e){var t=parseInt(e.substring(1),16);return String.fromCharCode(t<128?t:t+65216)},a=function(e){var t=e.length;return S.charAt(4<t?94*(parseInt(e.substring(1),16)-33)+parseInt(e.substring(4),16)-33:2<t?(37==(t=e.charCodeAt(0))?94*(parseInt(e.substring(1,3),16)-33)+e.charCodeAt(3):94*(t-33)+parseInt(e.substring(2),16))-33:94*(e.charCodeAt(0)-33)+e.charCodeAt(1)-33)},u=new RegExp,l=new RegExp;for(u.compile("%([0-7][0-9A-F]|A[1-9A-F]|[B-D][0-9A-F])","ig"),l.compile("(%2[1-9A-F]|%[3-6][0-9A-F]|%7[0-9A-E]){2}|(%2[1-9A-F]|%[3-6][0-9A-F]|%7[0-9A-E])[!-~]|[!-~](%2[1-9A-F]|%[3-6][0-9A-F]|%7[0-9A-E])|[!-~]{2}","ig");t=i[n++];)r+="%24B"==t.substring(0,4)?t.substring(4).replace(l,a):t.replace(u,o).substring(2);return r},f=function(e){return e.replace(/[^*+.-9A-Z_a-z-]/g,function(e){var t=e.charCodeAt(0);return(t<16?"%0":t<256?"%":t<4096?"%u0":"%u")+t.toString(16).toUpperCase()})},h=function(e){return e.replace(/%u[0-9A-F]{4}|%[0-9A-F]{2}/gi,function(e){return String.fromCharCode("0x"+e.substring(e.length/3))})},d=function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),n=function(e){var n=e.charCodeAt(0);return t[n>>10]+t[n>>4&63]+t[(15&n)<<2|(n=e.charCodeAt(1))>>14]+(0<=n?t[n>>8&63]+t[n>>2&63]+t[(3&n)<<4|(n=e.charCodeAt(2))>>12]+(0<=n?t[n>>6&63]+t[63&n]:""):"")},r=new RegExp;return r.compile("[^+]{1,3}","g"),(e+"g").replace(/[^*+.-9A-Z_a-z-]+[*+.-9A-Z_a-z-]|[+]/g,function(e){if("+"==e)return"+-";var t=e.length-1,i=e.charAt(t);return"+"+e.substring(0,t).replace(r,n)+("+"==i?"-+-":"*"==i||"."==i||"_"==i?i:"-"+i)}).slice(0,-1)},_=function(e){for(var t=0,n={};t<64;)n["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t)]=t++;return e.replace(RegExp("[+][+/-9A-Za-z]*-?","g"),function(e){if("+-"==e)return"+";for(var t,r=n[e.charAt(1)],i=1,o="";0<=r;)(t=7&i)<6?t=t<3?r<<10|n[e.charAt(++i)]<<4|(r=n[e.charAt(++i)])>>2:(3&r)<<14|n[e.charAt(++i)]<<8|n[e.charAt(++i)]<<2|(r=n[e.charAt(++i)])>>4:(t=(15&r)<<12|n[e.charAt(++i)]<<6|n[e.charAt(++i)],r=n[e.charAt(++i)]),t&&(o+=String.fromCharCode(t));return o})},p=function(e){return e.replace(/[^*+.-9A-Z_a-z-]/g,function(e){var t=e.charCodeAt(0);return(t<16?"%0"+t.toString(16):t<128?"%"+t.toString(16):t<2048?"%"+(t>>6|192).toString(16)+"%"+(63&t|128).toString(16):"%"+(t>>12|224).toString(16)+"%"+(t>>6&63|128).toString(16)+"%"+(63&t|128).toString(16)).toUpperCase()})},y=function(e){return e.replace(/%(E(0%[AB]|[1-CEF]%[89AB]|D%[89])[0-9A-F]|C[2-9A-F]|D[0-9A-F])%[89AB][0-9A-F]|%[0-7][0-9A-F]/gi,function(e){var t=parseInt(e.substring(1),16);return String.fromCharCode(t<128?t:t<224?(31&t)<<6|63&parseInt(e.substring(4),16):((15&t)<<6|63&parseInt(e.substring(4),16))<<6|63&parseInt(e.substring(7),16))})},m=function(e){var t=function(e){return 41<e&&e<58&&44!=e||64<e&&e<91||95==e||96<e&&e<123?String.fromCharCode(e):(e<16?"%0":"%")+e.toString(16).toUpperCase()};return e.replace(/[^ ]| /g,function(e){var n=e.charCodeAt(0);return t(255&n)+t(n>>8)})},v=function(e){var t=String.fromCharCode,n=t(92,120,48,48,45,92,120,70,70);return e.replace(/^%FF%FE/i,"").replace(RegExp("%[0-9A-F]{2}%[0-9A-F]{2}|%[0-9A-F]{2}["+n+"]|["+n+"]%[0-9A-F]{2}|["+n+"]{2}","ig"),function(e){var n=e.length;return t(4<n?"0x"+e.substring(4,6)+e.substring(1,3):2<n?37==(n=e.charCodeAt(0))?parseInt(e.substring(1,3),16)|e.charCodeAt(3)<<8:n|parseInt(e.substring(2),16)<<8:e.charCodeAt(0)|e.charCodeAt(1)<<8)})},g=function(e){if(/%u[0-9A-F]{4}/i.test(e))return"Unicode";if(/%([0-9A-DF][0-9A-F]%[8A]0%|E0%80|[0-7][0-9A-F]|C[01])%[8A]0|%00|%[7F]F/i.test(e))return"UTF16LE";if(/%E[0-9A-F]%[8A]0%[8A]0|%[CD][0-9A-F]%[8A]0/i.test(e))return"UTF8";if(/%F[DE]/i.test(e))return/%8[0-9A-D]|%9[0-9A-F]|%A0/i.test(e)?"UTF16LE":"EUCJP";if(/%1B/i.test(e))return/%[A-D][0-9A-F]/i.test(e)?"JIS8":"JIS7";for(var t,n,r,i=e.substring(0,6143).replace(/%[0-9A-F]{2}|[^ ]| /gi,function(e){return e.length<3?"40":e.substring(1)}),o=0;0<=(t=parseInt(i.substring(o,o+=2),16))&&o<4092;)if(128<=t){if((n=parseInt(i.substring(o,o+2),16))<128)o+=2;else if(194<=t&&t<240&&n<192){if(t<224){r="UTF8",o+=2;continue}if(2==parseInt(i.charAt(o+2),16)>>2){r="UTF8",o+=4;continue}}if(142==t&&161<=n&&n<224&&(r||(r="EUCJP"),"EUCJP"==r))continue;if(t<161)return"SJIS";t<224&&!r?(164==t&&n<244||165==t&&n<247)&&161<=n?o+=2:r=224<=n?"EUCJP":"SJIS":r="EUCJP"}return r||"EUCJP"},b=Function('var a="zKV33~jZ4zN=~ji36XazM93y!{~k2y!o~k0ZlW6zN?3Wz3W?{EKzK[33[`y|;-~j^YOTz$!~kNy|L1$353~jV3zKk3~k-4P4zK_2+~jY4y!xYHR~jlz$_~jk4z$e3X5He<0y!wy|X3[:~l|VU[F3VZ056Hy!nz/m1XD61+1XY1E1=1y|bzKiz!H034zKj~mEz#c5ZA3-3X$1~mBz$$3~lyz#,4YN5~mEz#{ZKZ3V%7Y}!J3X-YEX_J(3~mAz =V;kE0/y|F3y!}~m>z/U~mI~j_2+~mA~jp2;~m@~k32;~m>V}2u~mEX#2x~mBy+x2242(~mBy,;2242(~may->2&XkG2;~mIy-_2&NXd2;~mGz,{4<6:.:B*B:XC4>6:.>B*BBXSA+A:X]E&E<~r#z+625z s2+zN=`HXI@YMXIAXZYUM8X4K/:Q!Z&33 3YWX[~mB`{zKt4z (zV/z 3zRw2%Wd39]S11z$PAXH5Xb;ZQWU1ZgWP%3~o@{Dgl#gd}T){Uo{y5_d{e@}C(} WU9|cB{w}bzvV|)[} H|zT}d||0~{]Q|(l{|x{iv{dw}(5}[Z|kuZ }cq{{y|ij}.I{idbof%cu^d}Rj^y|-M{ESYGYfYsZslS`?ZdYO__gLYRZ&fvb4oKfhSf^d<Yeasc1f&a=hnYG{QY{D`Bsa|u,}Dl|_Q{C%xK|Aq}C>|c#ryW=}eY{L+`)][YF_Ub^h4}[X|?r|u_ex}TL@YR]j{SrXgo*|Gv|rK}B#mu{R1}hs|dP{C7|^Qt3|@P{YVV |8&}#D}ef{e/{Rl|>Hni}R1{Z#{D[}CQlQ||E}[s{SG_+i8eplY[=[|ec[$YXn#`hcm}YR|{Ci(_[ql|?8p3]-}^t{wy}4la&pc|3e{Rp{LqiJ],] `kc(]@chYnrM`O^,ZLYhZB]ywyfGY~aex!_Qww{a!|)*lHrM{N+n&YYj~Z b c#e_[hZSon|rOt`}hBXa^i{lh|<0||r{KJ{kni)|x,|0auY{D!^Sce{w;|@S|cA}Xn{C1h${E]Z-XgZ*XPbp]^_qbH^e[`YM|a||+=]!Lc}]vdBc=j-YSZD]YmyYLYKZ9Z>Xcczc2{Yh}9Fc#Z.l{}(D{G{{mRhC|L3b#|xK[Bepj#ut`H[,{E9Yr}1b{[e]{ZFk7[ZYbZ0XL]}Ye[(`d}c!|*y`Dg=b;gR]Hm=hJho}R-[n}9;{N![7k_{UbmN]rf#pTe[x8}!Qcs_rs[m`|>N}^V})7{^r|/E}),}HH{OYe2{Skx)e<_.cj.cjoMhc^d}0uYZd!^J_@g,[[[?{i@][|3S}Yl3|!1|eZ|5IYw|1D}e7|Cv{OHbnx-`wvb[6[4} =g+k:{C:}ed{S]|2M]-}WZ|/q{LF|dYu^}Gs^c{Z=}h>|/i|{W]:|ip{N:|zt|S<{DH[p_tvD{N<[8Axo{X4a.^o^X>Yfa59`#ZBYgY~_t^9`jZHZn`>G[oajZ;X,i)Z.^~YJe ZiZF^{][[#Zt^|]Fjx]&_5dddW]P0C[-]}]d|y {C_jUql] |OpaA[Z{lp|rz}:Mu#]_Yf6{Ep?f5`$[6^D][^u[$[6^.Z8]]ePc2U/=]K^_+^M{q*|9tYuZ,s(dS{i=|bNbB{uG}0jZOa:[-]dYtu3]:]<{DJ_SZIqr_`l=Yt`gkTnXb3d@kiq0a`Z{|!B|}e}Ww{Sp,^Z|0>_Z}36|]A|-t}lt{R6pi|v8hPu#{C>YOZHYmg/Z4nicK[}hF_Bg|YRZ7c|crkzYZY}_iXcZ.|)U|L5{R~qi^Uga@Y[xb}&qdbd6h5|Btw[}c<{Ds53[Y7]?Z<|e0{L[ZK]mXKZ#Z2^tavf0`PE[OSOaP`4gi`qjdYMgys/?[nc,}EEb,eL]g[n{E_b/vcvgb.{kcwi`~v%|0:|iK{Jh_vf5lb}KL|(oi=LrzhhY_^@`zgf[~g)[J_0fk_V{T)}I_{D&_/d9W/|MU[)f$xW}?$xr4<{Lb{y4}&u{XJ|cm{Iu{jQ}CMkD{CX|7A}G~{kt)nB|d5|<-}WJ}@||d@|Iy}Ts|iL|/^|no|0;}L6{Pm]7}$zf:|r2}?C_k{R(}-w|`G{Gy[g]bVje=_0|PT{^Y^yjtT[[[l!Ye_`ZN]@[n_)j3nEgMa]YtYpZy].d-Y_cjb~Y~[nc~sCi3|zg}B0}do{O^{|$`_|D{}U&|0+{J3|8*]iayx{a{xJ_9|,c{Ee]QXlYb]$[%YMc*]w[aafe]aVYi[fZEii[xq2YQZHg]Y~h#|Y:thre^@^|_F^CbTbG_1^qf7{L-`VFx Zr|@EZ;gkZ@slgko`[e}T:{Cu^pddZ_`yav^Ea+[#ZBbSbO`elQfLui}.F|txYcbQ`XehcGe~fc^RlV{D_0ZAej[l&jShxG[ipB_=u:eU}3e8[=j|{D(}dO{Do[BYUZ0/]AYE]ALYhZcYlYP/^-^{Yt_1_-;YT`P4BZG=IOZ&]H[e]YYd[9^F[1YdZxZ?Z{Z<]Ba2[5Yb[0Z4l?]d_;_)a?YGEYiYv`_XmZs4ZjY^Zb]6gqGaX^9Y}dXZr[g|]Y}K aFZp^k^F]M`^{O1Ys]ZCgCv4|E>}8eb7}l`{L5[Z_faQ|c2}Fj}hw^#|Ng|B||w2|Sh{v+[G}aB|MY}A{|8o}X~{E8paZ:]i^Njq]new)`-Z>haounWhN}c#{DfZ|fK]KqGZ=:u|fqoqcv}2ssm}.r{]{nIfV{JW)[K|,Z{Uxc|]l_KdCb%]cfobya3`p}G^|LZiSC]U|(X|kBlVg[kNo({O:g:|-N|qT}9?{MBiL}Sq{`P|3a|u.{Uaq:{_o|^S}jX{Fob0`;|#y_@[V[K|cw[<_ }KU|0F}d3|et{Q7{LuZttsmf^kYZ`Af`}$x}U`|Ww}d]| >}K,r&|XI|*e{C/a-bmr1fId4[;b>tQ_:]hk{b-pMge]gfpo.|(w[jgV{EC1Z,YhaY^q,_G[c_g[J0YX]`[h^hYK^_Yib,` {i6vf@YM^hdOKZZn(jgZ>bzSDc^Z%[[o9[2=/YHZ(_/Gu_`*|8z{DUZxYt^vuvZjhi^lc&gUd4|<UiA`z]$b/Z?l}YI^jaHxe|;F}l${sQ}5g}hA|e4}?o{ih}Uz{C)jPe4]H^J[Eg[|AMZMlc}:,{iz}#*|gc{Iq|/:|zK{l&}#u|myd{{M&v~nV};L|(g|I]ogddb0xsd7^V})$uQ{HzazsgxtsO^l}F>ZB]r|{7{j@cU^{{CbiYoHlng]f+nQ[bkTn/}<-d9q {KXadZYo+n|l[|lc}V2{[a{S4Zam~Za^`{HH{xx_SvF|ak=c^[v^7_rYT`ld@]:_ub%[$[m](Shu}G2{E.ZU_L_R{tz`vj(f?^}hswz}GdZ}{S:h`aD|?W|`dgG|if{a8|J1{N,}-Ao3{H#{mfsP|[ bzn+}_Q{MT{u4kHcj_q`eZj[8o0jy{p7}C|[}l){MuYY{|Ff!Ykn3{rT|m,^R|,R}$~Ykgx{P!]>iXh6[l[/}Jgcg{JYZ.^qYfYIZl[gZ#Xj[Pc7YyZD^+Yt;4;`e8YyZVbQ7YzZxXja.7SYl[s]2^/Ha$[6ZGYrb%XiYdf2]H]kZkZ*ZQ[ZYS^HZXcCc%Z|[(bVZ]]:OJQ_DZCg<[,]%Zaa [g{C00HY[c%[ChyZ,Z_`PbXa+eh`^&jPi0a[ggvhlekL]w{Yp^v}[e{~;k%a&k^|nR_z_Qng}[E}*Wq:{k^{FJZpXRhmh3^p>de^=_7`|ZbaAZtdhZ?n4ZL]u`9ZNc3g%[6b=e.ZVfC[ZZ^^^hD{E(9c(kyZ=bb|Sq{k`|vmr>izlH[u|e`}49}Y%}FT{[z{Rk}Bz{TCc/lMiAqkf(m$hDc;qooi[}^o:c^|Qm}a_{mrZ(pA`,}<2sY| adf_%|}`}Y5U;}/4|D>|$X{jw{C<|F.hK|*A{MRZ8Zsm?imZm_?brYWZrYx`yVZc3a@f?aK^ojEd {bN}/3ZH]/$YZhm^&j 9|(S|b]mF}UI{q&aM]LcrZ5^.|[j`T_V_Gak}9J[ ZCZD|^h{N9{~&[6Zd{}B}2O|cv]K}3s}Uy|l,fihW{EG`j_QOp~Z$F^zexS`dcISfhZBXP|.vn|_HYQ|)9|cr]<`&Z6]m_(ZhPcSg>`Z]5`~1`0Xcb4k1{O!bz|CN_T{LR|a/gFcD|j<{Z._[f)mPc:1`WtIaT1cgYkZOaVZOYFrEe[}T$}Ch}mk{K-^@]fH{Hdi`c*Z&|Kt{if[C{Q;{xYB`dYIX:ZB[}]*[{{p9|4GYRh2ao{DS|V+[zd$`F[ZXKadb*A] Ys]Maif~a/Z2bmclb8{Jro_rz|x9cHojbZ{GzZx_)]:{wAayeDlx}<=`g{H1{l#}9i|)=|lP{Qq}.({La|!Y{i2EZfp=c*}Cc{EDvVB|;g}2t{W4av^Bn=]ri,|y?|3+}T*ckZ*{Ffr5e%|sB{lx^0]eZb]9[SgAjS_D|uHZx]dive[c.YPkcq/}db{EQh&hQ|eg}G!ljil|BO]X{Qr_GkGl~YiYWu=c3eb}29v3|D|}4i||.{Mv})V{SP1{FX}CZW6{cm|vO{pS|e#}A~|1i}81|Mw}es|5[}3w{C`h9aL]o{}p[G`>i%a1Z@`Ln2bD[$_h`}ZOjhdTrH{[j_:k~kv[Sdu]CtL}41{I |[[{]Zp$]XjxjHt_eThoa#h>sSt8|gK|TVi[Y{t=}Bs|b7Zpr%{gt|Yo{CS[/{iteva|cf^hgn}($_c^wmb^Wm+|55jrbF|{9^ q6{C&c+ZKdJkq_xOYqZYSYXYl`8]-cxZAq/b%b*_Vsa[/Ybjac/OaGZ4fza|a)gY{P?| I|Y |,pi1n7}9bm9ad|=d{aV|2@[(}B`d&|Uz}B}{`q|/H|!JkM{FU|CB|.{}Az}#P|lk}K{|2rk7{^8^?`/|k>|Ka{Sq}Gz}io{DxZh[yK_#}9<{TRdgc]`~Z>JYmYJ]|`!ZKZ]gUcx|^E[rZCd`f9oQ[NcD_$ZlZ;Zr}mX|=!|$6ZPZYtIo%fj}CpcN|B,{VDw~gb}@hZg`Q{LcmA[(bo`<|@$|o1|Ss}9Z_}tC|G`{F/|9nd}i=}V-{L8aaeST]daRbujh^xlpq8|}zs4bj[S`J|]?G{P#{rD{]I`OlH{Hm]VYuSYUbRc*6[j`8]pZ[bt_/^Jc*[<Z?YE|Xb|?_Z^Vcas]h{t9|Uwd)_(=0^6Zb{Nc} E[qZAeX[a]P^|_J>e8`W^j_Y}R{{Jp__]Ee#e:iWb9q_wKbujrbR}CY`,{mJ}gz{Q^{t~N|? gSga`V_||:#mi}3t|/I`X{N*|ct|2g{km}gi|{={jC}F;|E}{ZZjYf*frmu}8Tdroi{T[|+~}HG{cJ}DM{Lp{Ctd&}$hi3|FZ| m}Kr|38}^c|m_|Tr{Qv|36}?Up>|;S{DV{k_as}BK{P}}9p|t`jR{sAm4{D=b4pWa[}Xi{EjwEkI}3S|E?u=X0{jf} S|NM|JC{qo^3cm]-|JUx/{Cj{s>{Crt[UXuv|D~|j|d{YXZR}Aq}0r}(_{pJfi_z}0b|-vi)Z mFe,{f4|q`b{}^Z{HM{rbeHZ|^x_o|XM|L%|uFXm}@C_{{Hhp%a7|0p[Xp+^K}9U{bP}: tT}B|}+$|b2|[^|~h{FAby[`{}xgygrt~h1[li`c4vz|,7p~b(|mviN}^pg[{N/|g3|^0c,gE|f%|7N{q[|tc|TKA{LU}I@|AZp(}G-sz{F |qZ{}F|f-}RGn6{Z]_5})B}UJ{FFb2]4ZI@v=k,]t_Dg5Bj]Z-]L]vrpdvdGlk|gF}G]|IW}Y0[G| /bo|Te^,_B}#n^^{QHYI[?hxg{[`]D^IYRYTb&kJ[cri[g_9]Ud~^_]<p@_e_XdNm-^/|5)|h_{J;{kacVopf!q;asqd}n)|.m|bf{QW|U)}b+{tL|w``N|to{t ZO|T]jF}CB|0Q{e5Zw|k |We}5:{HO{tPwf_uajjBfX}-V_C_{{r~gg|Ude;s+}KNXH}! `K}eW{Upwbk%ogaW}9EYN}YY|&v|SL{C3[5s.]Y]I]u{M6{pYZ`^,`ZbCYR[1mNg>rsk0Ym[jrE]RYiZTr*YJ{Ge|%-lf|y(`=[t}E6{k!|3)}Zk} ][G{E~cF{u3U.rJ|a9p#o#ZE|?|{sYc#vv{E=|LC}cu{N8`/`3`9rt[4|He{cq|iSYxY`}V |(Q|t4{C?]k_Vlvk)BZ^r<{CL}#h}R+[<|i=}X|{KAo]|W<`K{NW|Zx}#;|fe{IMr<|K~tJ_x}AyLZ?{GvbLnRgN}X&{H7|x~}Jm{]-| GpNu0}.ok>|c4{PYisrDZ|fwh9|hfo@{H~XSbO]Odv]%`N]b1Y]]|eIZ}_-ZA]aj,>eFn+j[aQ_+]h[J_m_g]%_wf.`%k1e#Z?{CvYu_B^|gk`Xfh^M3`afGZ-Z|[m{L}|k3cp[it ^>YUi~d>{T*}YJ{Q5{Jxa$hg|%4`}|LAgvb }G}{P=|<;Ux{_skR{cV|-*|s-{Mp|XP|$G|_J}c6cM{_=_D|*9^$ec{V;|4S{qO|w_|.7}d0|/D}e}|0G{Dq]Kdp{}dfDi>}B%{Gd|nl}lf{C-{y}|ANZr}#={T~|-(}c&{pI|ft{lsVP}){|@u}!W|bcmB{d?|iW|:dxj{PSkO|Hl]Li:}VYk@|2={fnWt{M3`cZ6|)}|Xj}BYa?vo{e4|L7|B7{L7|1W|lvYO}W8nJ|$Vih|{T{d*_1|:-n2dblk``fT{Ky|-%}m!|Xy|-a{Pz}[l{kFjz|iH}9N{WE{x,|jz}R {P|{D)c=nX|Kq|si}Ge{sh|[X{RF{t`|jsr*fYf,rK|/9}$}}Nf{y!1|<Std}4Wez{W${Fd_/^O[ooqaw_z[L`Nbv[;l7V[ii3_PeM}.h^viqYjZ*j1}+3{bt{DR[;UG}3Og,rS{JO{qw{d<_zbAh<R[1_r`iZTbv^^a}c{iEgQZ<exZFg.^Rb+`Uj{a+{z<[~r!]`[[|rZYR|?F|qppp]L|-d|}K}YZUM|=Y|ktm*}F]{D;g{uI|7kg^}%?Z%ca{N[_<q4xC]i|PqZC]n}.bDrnh0Wq{tr|OMn6tM|!6|T`{O`|>!]ji+]_bTeU}Tq|ds}n|{Gm{z,f)}&s{DPYJ`%{CGd5v4tvb*hUh~bf]z`jajiFqAii]bfy^U{Or|m+{I)cS|.9k:e3`^|xN}@Dnlis`B|Qo{`W|>||kA}Y}{ERYuYx`%[exd`]|OyiHtb}HofUYbFo![5|+]gD{NIZR|Go}.T{rh^4]S|C9_}xO^i`vfQ}C)bK{TL}cQ|79iu}9a];sj{P.o!f[Y]pM``Jda^Wc9ZarteBZClxtM{LW}l9|a.mU}KX}4@{I+f1}37|8u}9c|v${xGlz}jP{Dd1}e:}31}%3X$|22i<v+r@~mf{sN{C67G97855F4YL5}8f{DT|xy{sO{DXB334@55J1)4.G9A#JDYtXTYM4, YQD9;XbXm9SX]IB^4UN=Xn<5(;(F3YW@XkH-X_VM[DYM:5XP!T&Y`6|,^{IS-*D.H>:LXjYQ0I3XhAF:9:(==.F*3F1189K/7163D,:@|e2{LS36D4hq{Lw/84443@4.933:0307::6D7}&l{Mx657;89;,K5678H&93D(H<&<>0B90X^I;}Ag1{P%3A+>><975}[S{PZE453?4|T2{Q+5187;>447:81{C=hL6{Me^:=7ii{R=.=F<81;48?|h8}Uh{SE|,VxL{ST,7?9Y_5Xk3A#:$%YSYdXeKXOD8+TXh7(@>(YdXYHXl9J6X_5IXaL0N?3YK7Xh!1?XgYz9YEXhXaYPXhC3X`-YLY_XfVf[EGXZ5L8BXL9YHX]SYTXjLXdJ: YcXbQXg1PX]Yx4|Jr{Ys4.8YU+XIY`0N,<H%-H;:0@,74/:8546I=9177154870UC]d<C3HXl7ALYzXFXWP<<?E!88E5@03YYXJ?YJ@6YxX-YdXhYG|9o{`iXjY_>YVXe>AYFX[/(I@0841?):-B=14337:8=|14{c&93788|di{cW-0>0<097/A;N{FqYpugAFT%X/Yo3Yn,#=XlCYHYNX[Xk3YN:YRT4?)-YH%A5XlYF3C1=NWyY}>:74-C673<69545v {iT85YED=64=.F4..9878/D4378?48B3:7:7/1VX[f4{D,{l<5E75{dAbRB-8-@+;DBF/$ZfW8S<4YhXA.(5@*11YV8./S95C/0R-A4AXQYI7?68167B95HA1*<M3?1/@;/=54XbYP36}lc{qzSS38:19?,/39193574/66878Yw1X-87E6=;964X`T734:>86>1/=0;(I-1::7ALYGXhF+Xk[@W%TYbX7)KXdYEXi,H-XhYMRXfYK?XgXj.9HX_SX]YL1XmYJ>Y}WwIXiI-3-GXcYyXUYJ$X`Vs[7;XnYEZ;XF! 3;%8;PXX(N3Y[)Xi1YE&/ :;74YQ6X`33C;-(>Xm0(TYF/!YGXg8 9L5P01YPXO-5%C|qd{{/K/E6,=0144:361:955;6443@?B7*7:F89&F35YaX-CYf,XiFYRXE_e{}sF 0*7XRYPYfXa5YXXY8Xf8Y~XmA[9VjYj*#YMXIYOXk,HHX40YxYMXU8OXe;YFXLYuPXP?EB[QV0CXfY{:9XV[FWE0D6X^YVP*$4%OXiYQ(|xp|%c3{}V`1>Y`XH00:8/M6XhQ1:;3414|TE|&o@1*=81G8<3}6<|(f6>>>5-5:8;093B^3U*+*^*UT30XgYU&7*O1953)5@E78--F7YF*B&0:%P68W9Zn5974J9::3}Vk|-,C)=)1AJ4+<3YGXfY[XQXmT1M-XcYTYZXCYZXEYXXMYN,17>XIG*SaS|/eYJXbI?XdNZ+WRYP<F:R PXf;0Xg`$|1GX9YdXjLYxWX!ZIXGYaXNYm6X9YMX?9EXmZ&XZ#XQ>YeXRXfAY[4 ;0X!Zz0XdN$XhYL XIY^XGNXUYS/1YFXhYk.TXn4DXjB{jg|4DEX]:XcZMW=A.+QYL<LKXc[vV$+&PX*Z3XMYIXUQ:ZvW< YSXFZ,XBYeXMM)?Xa XiZ4/EXcP3%}&-|6~:1(-+YT$@XIYRBC<}&,|7aJ6}bp|8)K1|Xg|8C}[T|8Q.89;-964I38361<=/;883651467<7:>?1:.}le|:Z=39;1Y^)?:J=?XfLXbXi=Q0YVYOXaXiLXmJXO5?.SFXiCYW}-;|=u&D-X`N0X^,YzYRXO(QX_YW9`I|>hZ:N&X)DQXP@YH#XmNXi$YWX^=!G6YbYdX>XjY|XlX^XdYkX>YnXUXPYF)FXT[EVTMYmYJXmYSXmNXi#GXmT3X8HOX[ZiXN]IU2>8YdX1YbX<YfWuZ8XSXcZU%0;1XnXkZ_WTG,XZYX5YSX Yp 05G?XcYW(IXg6K/XlYP4XnI @XnO1W4Zp-9C@%QDYX+OYeX9>--YSXkD.YR%Q/Yo YUX].Xi<HYEZ2WdCE6YMXa7F)=,D>-@9/8@5=?7164;35387?N<618=6>7D+C50<6B03J0{Hj|N9$D,9I-,.KB3}m |NzE0::/81YqXjMXl7YG; [.W=Z0X4XQY]:MXiR,XgM?9$9>:?E;YE77VS[Y564760391?14941:0=:8B:;/1DXjFA-564=0B3XlH1+D85:0Q!B#:-6&N/:9<-R3/7Xn<*3J4.H:+334B.=>30H.;3833/76464665755:/83H6633:=;.>5645}&E|Y)?1/YG-,93&N3AE@5 <L1-G/8A0D858/30>8<549=@B8] V0[uVQYlXeD(P#ID&7T&7;Xi0;7T-$YE)E=1:E1GR):--0YI7=E<}n9|aT6783A>D7&4YG7=391W;Zx<5+>F#J39}o/|cc;6=A050EQXg8A1-}D-|d^5548083563695D?-.YOXd37I$@LYLWeYlX<Yd+YR A$;3-4YQ-9XmA0!9/XLY_YT(=5XdDI>YJ5XP1ZAW{9>X_6R(XhYO65&J%DA)C-!B:97#A9;@?F;&;(9=11/=657/H,<8}bz|j^5446>.L+&Y^8Xb6?(CYOXb*YF(8X`FYR(XPYVXmPQ%&DD(XmZXW??YOXZXfCYJ79,O)XnYF7K0!QXmXi4IYFRXS,6<%-:YO(+:-3Q!1E1:W,Zo}Am|n~;3580534*?3Zc4=9334361693:30C<6/717:<1/;>59&:4}6!|rS36=1?75<8}[B|s809983579I.A.>84758=108564741H*9E{L{|u%YQ<%6XfH.YUXe4YL@,>N}Tv|ve*G0X)Z;/)3@A74(4P&A1X:YVH97;,754*A66:1 D739E3553545558E4?-?K17/770843XAYf838A7K%N!YW4.$T19Z`WJ*0XdYJXTYOXNZ 1XaN1A+I&Xi.Xk3Z3GB&5%WhZ1+5#Y[X<4YMXhQYoQXVXbYQ8XSYUX4YXBXWDMG0WxZA[8V+Z8X;D],Va$%YeX?FXfX[XeYf<X:Z[WsYz8X_Y]%XmQ(!7BXIZFX]&YE3F$(1XgYgYE& +[+W!<YMYFXc;+PXCYI9YrWxGXY9DY[!GXiI7::)OC;*$.>N*HA@{C|}&k=:<TB83X`3YL+G4XiK]i}(fYK<=5$.FYE%4*5*H*6XkCYL=*6Xi6!Yi1KXR4YHXbC8Xj,B9ZbWx/XbYON#5B}Ue}+QKXnF1&YV5XmYQ0!*3IXBYb71?1B75XmF;0B976;H/RXU:YZX;BG-NXj;XjI>A#D3B636N;,*%<D:0;YRXY973H5)-4FXOYf0:0;/7759774;7;:/855:543L43<?6=E,.A4:C=L)%4YV!1(YE/4YF+ F3%;S;&JC:%/?YEXJ4GXf/YS-EXEYW,9;E}X$}547EXiK=51-?71C%?57;5>463553Zg90;6447?<>4:9.7538XgN{|!}9K/E&3-:D+YE1)YE/3;37/:05}n<}:UX8Yj4Yt864@JYK..G=.(A Q3%6K>3(P3#AYE$-6H/456*C=.XHY[#S.<780191;057C)=6HXj?955B:K1 E>-B/9,;5.!L?:0>/.@//:;7833YZ56<4:YE=/:7Z_WGC%3I6>XkC*&NA16X=Yz2$X:Y^&J48<99k8}CyB-61<18K946YO4{|N}E)YIB9K0L>4=46<1K0+R;6-=1883:478;4,S+3YJX`GJXh.Yp+Xm6MXcYpX(>7Yo,/:X=Z;Xi0YTYHXjYmXiXj;*;I-8S6N#XgY}.3XfYGO3C/$XjL$*NYX,1 6;YH&<XkK9C#I74.>}Hd`A748X[T450[n75<4439:18A107>|ET}Rf<1;14876/Yb983E<5.YNXd4149>,S=/4E/<306443G/06}0&}UkYSXFYF=44=-5095=88;63844,9E6644{PL}WA8:>)7+>763>>0/B3A545CCnT}Xm|dv}Xq1L/YNXk/H8;;.R63351YY747@15YE4J8;46;.38.>4A369.=-83,;Ye3?:3@YE.4-+N353;/;@(X[YYD>@/05-I*@.:551741Yf5>6A443<3535;.58/86=D4753442$635D1>0359NQ @73:3:>><Xn?;43C14 ?Y|X611YG1&<+,4<*,YLXl<1/AIXjF*N89A4Z576K1XbJ5YF.ZOWN.YGXO/YQ01:4G38Xl1;KI0YFXB=R<7;D/,/4>;$I,YGXm94@O35Yz66695385.>:6A#5}W7n^4336:4157597434433<3|XA}m`>=D>:4A.337370?-6Q96{`E|4A}C`|Qs{Mk|J+~r>|o,wHv>Vw}!c{H!|Gb|*Ca5}J||,U{t+{CN[!M65YXOY_*B,Y[Z9XaX[QYJYLXPYuZ%XcZ8LY[SYPYKZM<LMYG9OYqSQYM~[e{UJXmQYyZM_)>YjN1~[f3{aXFY|Yk:48YdH^NZ0|T){jVFYTZNFY^YTYN~[h{nPYMYn3I]`EYUYsYIZEYJ7Yw)YnXPQYH+Z.ZAZY]^Z1Y`YSZFZyGYHXLYG 8Yd#4~[i|+)YH9D?Y^F~Y7|-eYxZ^WHYdYfZQ~[j|3>~[k|3oYmYqY^XYYO=Z*4[]Z/OYLXhZ1YLZIXgYIHYEYK,<Y`YEXIGZI[3YOYcB4SZ!YHZ*&Y{Xi3~[l|JSY`Zz?Z,~[m|O=Yi>??XnYWXmYS617YVYIHZ(Z4[~L4/=~[n|Yu{P)|];YOHHZ}~[o33|a>~[r|aE]DH~[s|e$Zz~[t|kZFY~XhYXZB[`Y}~[u|{SZ&OYkYQYuZ2Zf8D~[v}% ~[w3},Q[X]+YGYeYPIS~[y}4aZ!YN^!6PZ*~[z}?E~[{3}CnZ=~[}}EdDZz/9A3(3S<,YR8.D=*XgYPYcXN3Z5 4)~[~}JW=$Yu.XX~] }KDX`PXdZ4XfYpTJLY[F5]X~[2Yp}U+DZJ::<446[m@~]#3}]1~]%}^LZwZQ5Z`/OT<Yh^ -~]&}jx[ ~m<z!%2+~ly4VY-~o>}p62yz!%2+Xf2+~ly4VY-zQ`z (=] 2z~o2",C={" ":0,"!":1},c=34,i=2,p,s="",u=String.fromCharCode,t=u(12539);while(++c<127)C[u(c)]=c^39&&c^92?i++:0;i=0;while(0<=(c=C[a.charAt(i++)]))if(16==c)if((c=C[a.charAt(i++)])<87){if(86==c)c=1879;while(c--)s+=u(++p)}else s+=s.substr(8272,360);else if(c<86)s+=u(p+=c<51?c-16:(c-55)*92+C[a.charAt(i++)]);else if((c=((c-86)*92+C[a.charAt(i++)])*92+C[a.charAt(i++)])<49152)s+=u(p=c<40960?c:c|57344);else{c&=511;while(c--)s+=t;p=12539}return s')(),S=b.substring(0,8836);t.EscapeSJIS=r,t.UnescapeSJIS=i,t.EscapeEUCJP=o,t.UnescapeEUCJP=a,t.EscapeJIS7=u,t.UnescapeJIS7=l,t.EscapeJIS8=s,t.UnescapeJIS8=c,t.EscapeUnicode=f,t.UnescapeUnicode=h,t.EscapeUTF7=d,t.UnescapeUTF7=_,t.EscapeUTF8=p,t.UnescapeUTF8=y,t.EscapeUTF16LE=m,t.UnescapeUTF16LE=v,t.GetEscapeCodeType=g,t.JCT11280=b,t.JCT8836=S},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(39),a=new RegExp(/^(-|\+)?\d+;?/),u=new RegExp(/^(-|\+)?(\d)*\.(\d)*;?/),l=new RegExp(/^\w+/),s=new RegExp(/^.*\n/),c=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";r(this,t),this._pos=0,this._partialText="",this._partialOffset=0,this._partialStep=200,this._partialMinLength=100,this._eof=!0,this.buffer=null,this.buffer=n instanceof e?n:e.from(n),this.encoding=i,this._addPartialText()}return i(t,[{key:"skip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._moveIndex(e),t||this._check()}},{key:"readString",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],this._partialText.substring(0,e));this._moveIndex(t.length)}},{key:"readInteger",value:function(e,t){var n=this._getString(a);return parseInt(n[0],10)}},{key:"readUnsignedByte",value:function(){return this.readInteger(1,!1)}},{key:"readUnsignedShort",value:function(){return this.readInteger(2,!1)}},{key:"readUnsignedInt",value:function(){return this.readInteger(4,!1)}},{key:"readInt",value:function(){return this.readInteger(4,!0)}},{key:"readFloat",value:function(){var e=this._getString(u);return parseFloat(e[0])}},{key:"readDouble",value:function(){return this.readFloat()}},{key:"readData",value:function(e){var t=this._pos;return this._pos+=e,this.buffer.slice(t,this._pos)}},{key:"readWord",value:function(){var e=this._getString(l);return null!==e?e[0]:null}},{key:"readLine",value:function(){var e=this._getString(s);return null!==e?e[0]:null}},{key:"readPattern",value:function(e){return this._getString(e)}},{key:"_check",value:function(){}},{key:"_convert",value:function(e,t){for(var n=e.length,r="",i=0;i<n;i++){var a=e.charCodeAt(i);if(0===a)break;r+=a<16?"%0"+a.toString(16):"%"+a.toString(16)}if("sjis"===t)return(0,o.UnescapeSJIS)(r);if("euc-jp"===t)return(0,o.UnescapeEUCJP)(r);if("jis-7"===t)return(0,o.UnescapeJIS7)(r);if("jis-8"===t)return(0,o.UnescapeJIS8)(r);if("unicode"===t)return(0,o.UnescapeUnicode)(r);if("utf7"===t)return(0,o.UnescapeUTF7)(r);if("utf-8"===t)return(0,o.UnescapeUTF8)(r);if("utf-16"===t)return(0,o.UnescapeUTF16LE)(r);throw new Error("unsupported encoding: "+t)}},{key:"getAvailableDataLength",value:function(){return this.buffer.length-this._pos}},{key:"_moveIndex",value:function(e){this._partialText=this._partialText.substring(e),this._partialText.length<this._partialMinLength&&this._addPartialText()}},{key:"_skipSpace",value:function(){for(var e=0,t=this._partialText.charCodeAt(e);32===t||9<=t&&t<=13;)e++,t=this._partialText.charCodeAt(e),e>=this._partialText.length&&this._addPartialText();e>0&&this._moveIndex(e)}},{key:"_addPartialText",value:function(){if(!(this._partialOffset>=this.buffer.length)){var t=this._partialOffset+this._partialStep;if(t>this.buffer.length&&(t=this.buffer.length),e.isEncoding(this.encoding))this._partialText+=this.buffer.toString(this.encoding,this._partialOffset,t);else{var n=this.buffer.toString("binary",this._partialOffset,t);this._partialText+=this._convert(n,this.encoding)}this._partialOffset=t}}},{key:"_getString",value:function(e){this._skipSpace();var t=this._partialText.match(e);return null===t?null:(this._moveIndex(t[0].length),t)}}]),t}();t.default=c}).call(t,n(17).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=new Map,a=["superclass","isSubclassOf","className"],u=["isInstanceOf","className"];o.registerClass=function(e,t){if(!t.startsWith("_")){if(e._className=t,void 0===e.superclass&&void 0!==e.prototype){var n=!0,r=!1,l=void 0;try{for(var s,c=a[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var f=s.value,h=Object.getOwnPropertyDescriptor(i.default,f);Object.defineProperty(e,f,h)}}catch(e){r=!0,l=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw l}}var d=!0,_=!1,p=void 0;try{for(var y,m=u[Symbol.iterator]();!(d=(y=m.next()).done);d=!0){var v=y.value,h=Object.getOwnPropertyDescriptor(i.default.prototype,v);Object.defineProperty(e.prototype,v,h)}}catch(e){_=!0,p=e}finally{try{!d&&m.return&&m.return()}finally{if(_)throw p}}}o.set(t,e)}},t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=t.AjaxRequest=function(){function e(){r(this,e),this.defaultOptions={method:"POST",async:!0,data:null,user:null,password:null,mimeType:null,isJSONP:!1,responseType:null,requestHeader:{}},this.jsonpScripts=[],this.jsonpCallbackPrefix="jsonpCallback_"}return i(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.method="GET",this.request(e,t)}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.method="POST",this.request(e,t)}},{key:"jsonp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"callback",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e,i=document.createElement("script"),o=this._getNewFuncName(this.jsonpCallbackPrefix);n.data||(n.data={}),n.data[t]=o;var a=[];n.data.forEach(function(e,t){a.push(encodeURI(e)+"="+encodeURI(t))}),r+="?"+a.join("&");var u=new Promise(function(e,t){window[o]=e,i.addEventListener("error",t)}).catch(function(e){return delete window[o],document.head.removeChild(i),Promise.reject(e)}).then(function(e){return delete window[o],document.head.removeChild(i),Promise.resolve(e)});return i.src=r,document.head.appendChild(i),u}},{key:"_getNewFuncName",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";;){var t=e+Math.random().toString(16).slice(2);if(void 0===window[t])return t}}},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e,r=void 0===t.method?this.defaultOptions.method:t.method,i=void 0===t.async?this.defaultOptions.async:t.async,o=this.defaultOptions.data,a=void 0===t.user?this.defaultOptions.user:t.user,u=void 0===t.password?this.defaultOptions.password:t.password,l=void 0===t.mimeType?this.defaultOptions.mimeType:t.mimeType,s=void 0===t.requestHeader?this.defaultOptions.requestHeader:t.requestHeader,c=(void 0===t.isJSONP?this.defaultOptions.isJSONP:t.isJSONP,void 0===t.responseType?this.defaultOptions.responseType:t.responseType);if("POST"!==r&&"GET"!==r&&(r="POST"),t.data){var f=[];t.data instanceof Map?t.data.forEach(function(e,t){f.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):Object.keys(t.data).forEach(function(e){var n=t.data[e];f.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),"POST"===r?o=f.join("&").replace(/%20/g,"+"):n+="?"+f.join("&").replace(/%20/g,"+")}return"POST"===r&&void 0===s["Content-Type"]&&(s["Content-Type"]="application/x-www-form-urlencoded"),new Promise(function(e,t){var f=new XMLHttpRequest;if(l&&f.overrideMimeType(l),c&&(f.responseType=c),a?f.open(r,n,i,a,u):f.open(r,n,i),s)for(var h in s)({}).hasOwnProperty.call(s,h)&&f.setRequestHeader(h,s[h]);f.onload=function(){4===f.readyState&&200===f.status?e(f.response):t(new Error(f.statusText))},f.onerror=function(){t(new Error(f.statusText))},f.send(o)})}}]),e}();t.default=new o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=n(27),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(s),f=function(e){function t(e,n,o,a){r(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u._c1x=e,u._c1y=n,u._c2x=o,u._c2y=a,u}return o(t,e),a(t,[{key:"getControlPointAtValues",value:function(e,t){}},{key:"_getValueAtTime",value:function(e){var t=0,n=1,r=.5,i=0;if(e<=0)return 0;if(e>=1)return 1;for(var o=0;o<8;o++){i=1-r;e>3*r*i*(this._c1x*i+this._c2x*r)+r*r*r?t=r:n=r,r=.5*(t+n)}return i=1-r,3*r*i*(this._c1y*i+this._c2y*r)+r*r*r}}],[{key:"functionWithName",value:function(e){switch(e){case c.kCAMediaTimingFunctionLinear:return new t(0,0,1,1);case c.kCAMediaTimingFunctionEaseIn:return new t(.42,0,1,1);case c.kCAMediaTimingFunctionEaseOut:return new t(0,0,.58,1);case c.kCAMediaTimingFunctionEaseInEaseOut:return new t(.42,0,.58,1);case c.kCAMediaTimingFunctionDefault:return new t(.25,.1,.25,1);default:throw new Error("CAMediaTimingFunction: unknown name: "+e)}}},{key:"functionWithControlPoints",value:function(e,n,r,i){return new t(e,n,r,i)}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(45),s=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.fromValue=null,n.toValue=null,n.byValue=null,n._baseValue=null,n}return o(t,e),a(t,[{key:"copy",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e.fromValue=this.fromValue,e.toValue=this.toValue,e.byValue=this.byValue,e}},{key:"_applyAnimation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t;if(n){var i=this._basetimeFromTime(t);if(null===i)return;r=i,null!==this.timingFunction&&(r=this.timingFunction._getValueAtTime(i)),r<0&&(r=0),r>1&&(r=1)}var o=!1;(null===this._baseValue||this.isAdditive)&&(this._baseValue=e.valueForKeyPath(this.keyPath,!1)),"number"!=typeof this._baseValue&&null!==this._baseValue&&(o=!0);var a=0,u=0;null!==this.fromValue&&null!==this.toValue?(a=this.fromValue,u=this.toValue):null!==this.fromValue&&null!==this.byValue?(a=this.fromValue,u=o?this.fromValue.add(this.byValue):this.fromValue+this.byValue):null!==this.byValue&&null!==this.toValue?(a=o?this.toValue.sub(this.byValue):this.toValue-this.byValue,u=u):null!==this.fromValue?(a=this.fromValue,u=this.isAdditive?o?this._baseValue.zero():0:this._baseValue):null!==this.toValue?(a=this.isAdditive?o?this._baseValue.zero():0:this._baseValue,u=this.toValue):null!==this.byValue&&(this.isAdditive?(a=o?this._baseValue.zero():0,u=this.byValue):(a=this._baseValue,u=o?this._baseValue.add(this.byValue):this._baseValue+this.byValue));var l=this._lerp(a,u,r);this.isAdditive&&(o?l=l.add(this._baseValue):l+=this._baseValue),this._applyValue(e,l),this._handleEvents(e,r)}}]),t}(s.default);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(29),c=r(s),f=n(10),h=r(f),d=n(11),_=r(d),p=n(16),y=r(p),m=n(7),v=r(m),g=n(13),b=r(g),S=n(1),w=r(S),T=n(2),k=r(T),C=n(3),O=r(C),E=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.keyPath=e,n.isCumulative=!1,n.isAdditive=!1,n.valueFunction=null,n._isMultiplicative=!1,n}return a(t,e),u(t,[{key:"copy",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e.keyPath=this.keyPath,e.isCumulative=this.isCumulative,e.isAdditive=this.isAdditive,e.valueFunction=this.valueFunction,e._isMultiplicative=this._isMultiplicative,e}},{key:"_applyAnimation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t;if(n){var i=this._basetimeFromTime(t);r=i,null!==this.timingFunction&&(r=this.timingFunction._getValueAtTime(i))}var o=r;null!==this.valueFunction&&(o=this.valueFunction._getValueAtTime(r)),o=this._calculateWithBaseValue(e,o),this._applyValue(e,o),this._handleEvents(e,r)}},{key:"_calculateWithBaseValue",value:function(e,t){if(this.isAdditive){var n=e.valueForKeyPath(this.keyPath);return this._addValues(n,t)}if(this._isMultiplicative){var r=e.valueForKeyPath(this.keyPath);return this._mulValues(r,t)}return t}},{key:"_applyValue",value:function(e,t){e.setValueForKeyPath(t,this.keyPath)}},{key:"_addValues",value:function(e,t){return e instanceof Object?e.add(t):e+t}},{key:"_mulValues",value:function(e,t){return e instanceof Object?e.mul(t):e*t}},{key:"_lerp",value:function(e,t,n){if(null===n)return t;if((0,O.default)(e,b.default))return e.lerp(t,n);if((0,O.default)(e,w.default))return e.lerp(t,n);if((0,O.default)(e,v.default))return e.lerp(t,n);if((0,O.default)(e,_.default));else if((0,O.default)(e,h.default));else if((0,O.default)(e,y.default));else if((0,O.default)(e,k.default))return e._lerp(t,n);return e+(t-e)*n}},{key:"_slerp",value:function(e,t,n){if(!(0,O.default)(e,b.default))throw new Error("CABasicAnimation._slerp: object is not SCNVector4");return e.slerp(t,n)}}]),t}(c.default);t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={back:0,front:1};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(9),c=r(s),f=n(15),h=r(f),d=n(12),_=r(d),p=n(6),y=r(p),m=n(8),v=r(m),g=n(1),b=r(g),S=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,[],[]));return r.capRadius=e,r.height=n,r.radialSegmentCount=24,r.capSegmentCount=48,r.heightSegmentCount=1,r._createGeometry(),r.materials.push(new v.default),r}return a(t,e),u(t,[{key:"_createGeometry",value:function(){for(var e=[],t=[],n=(2*this.radialSegmentCount+1)*(this.capSegmentCount+4),r=[],i=[],o=0;o<=this.capSegmentCount;o++)r.push(-Math.cos(Math.PI*o/this.capSegmentCount)),i.push(Math.sin(Math.PI*o/this.capSegmentCount));for(var a=this.height-2*this.capRadius,u=this.capSegmentCount/2,l=2*this.radialSegmentCount,s=0;s<=l;s++){for(var c=-Math.sin(2*Math.PI*s/l),f=-Math.cos(2*Math.PI*s/l),d=s/l,p=.5*-a,m=0;m<=u;m++){var v=c*i[m],g=f*i[m];e.push(v*this.capRadius,p+r[m]*this.capRadius,g*this.capRadius),e.push(v,r[m],g),e.push(d,1-.25*m/u),m===u&&(e.push(v*this.capRadius,p+r[m]*this.capRadius,g*this.capRadius),e.push(v,r[m],g),e.push(d,1-.25*m/u))}p=.5*a;for(var S=u;S<=this.capSegmentCount;S++){var w=c*i[S],T=f*i[S];e.push(w*this.capRadius,p+r[S]*this.capRadius,T*this.capRadius),e.push(w,r[S],T),e.push(d,.5-.25*S/u),S===u&&(e.push(w*this.capRadius,p+r[S]*this.capRadius,T*this.capRadius),e.push(w,r[S],T),e.push(d,.5-.25*S/u))}}for(var k=this.capSegmentCount,C=2*this.radialSegmentCount+1,O=0;O<k;O++){var E=O*(this.capSegmentCount+4),P=E+this.capSegmentCount+5;t.push(E,P,E+1),E+=1;for(var A=0;A<C;A++)1!==Math.abs(A-this.radialSegmentCount)&&(t.push(E,P+1,E+1),t.push(E,P,P+1)),E+=1,P+=1;t.push(E,P,P+1)}var x=new y.default(e,y.default.Semantic.vertex,n,!0,3,4,0,32),M=new y.default(e,y.default.Semantic.normal,n,!0,3,4,12,32),N=new y.default(e,y.default.Semantic.texcoord,n,!0,2,4,24,32),F=new h.default(t,_.default.triangles);this._geometryElements=[F],this._geometrySources=[x,M,N],this.boundingBox={min:new b.default(-this.capRadius,.5*-this.height,-this.capRadius),max:new b.default(this.capRadius,.5*this.height,this.capRadius)}}},{key:"_createBtCollisionShape",value:function(){}},{key:"getBoundingSphere",value:function(){return{center:new b.default(0,0,0),radius:.5*this.height}}},{key:"_updateBoundingBoxForSkinner",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?this.boundingBox:l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_updateBoundingBoxForSkinner",this).call(this,e)}}]),t}(c.default);t.default=S},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._node=null,e._geometryIndex=0,e._faceIndex=0,e._localCoordinates=null,e._worldCoordinates=null,e._localNormal=null,e._worldNormal=null,e._modelTransform=null,e._distance=null,e._boneNode=null,e}return o(t,e),a(t,[{key:"textureCoordinatesWithMappingChannel",value:function(e){return null}},{key:"node",get:function(){return this._node}},{key:"geometryIndex",get:function(){return this._geometryIndex}},{key:"faceIndex",get:function(){return this._faceIndex}},{key:"localCoordinates",get:function(){return this._localCoordinates}},{key:"worldCoordinates",get:function(){return this._worldCoordinates}},{key:"localNormal",get:function(){return this._localNormal}},{key:"worldNormal",get:function(){return this._worldNormal}},{key:"modelTransform",get:function(){return this._modelTransform}},{key:"boneNode",get:function(){return this._boneNode}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={static:0,dynamic:1,kinematic:2};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(33),f=r(c),h=n(47),d=r(h),_=n(9),p=r(_),y=n(14),m=r(y),v=n(51),g=r(v),b=n(1),S=r(b),w=n(3),T=r(w),k={collisionMargin:"SCNPhysicsShapeCollisionMarginKey",keepAsCompound:"SCNPhysicsShapeKeepAsCompoundKey",scale:"SCNPhysicsShapeScaleKey",type:"SCNPhysicsShapeTypeKey"},C={boundingBox:"boundingBox",concavePolyhedron:"concaveMesh",convexHull:"convexHull"},O=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),a=n;if(Array.isArray(n)){a={};var u=!0,l=!1,s=void 0;try{for(var c,f=n[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var h=c.value;a[h[0]]=h[1]}}catch(e){l=!0,s=e}finally{try{!u&&f.return&&f.return()}finally{if(l)throw s}}}return r._sourceGeometry=null,r._options=a,r._transforms=null,r._shape=null,r._center=new S.default(0,0,0),r._sourceObject=null,r._setSourceObject(e),r._createShape(),r}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{$constructor:function(e,n){return new t(n.referenceObject,n.options)},options:["NSArray",null],referenceObject:["NSObject",null]}}}]),u(t,[{key:"_setSourceObject",value:function(e){this._sourceObject=e,(0,T.default)(this._sourceObject,p.default)?this._sourceGeometry=this._sourceObject:(0,T.default)(this._sourceObject,m.default)&&this._sourceObject.geometry&&(this._sourceGeometry=this._sourceObject.geometry),this._sourceGeometry}},{key:"_createShape",value:function(){this._sourceGeometry&&(this._options&&this._options[k.type]===C.boundingBox?this._createShapeAsBoundingBox():(0,T.default)(this._sourceGeometry,d.default)?this._createShapeAsBoundingBox():(0,T.default)(this._sourceGeometry,f.default)?this._createShapeAsBox():(0,T.default)(this._sourceGeometry,g.default)?this._createShapeAsSphere():this._options&&this._options[k.type]===C.concavePolyhedron?this._shape=this._sourceGeometry:this._createShapeAsSphere())}},{key:"_createShapeAsBoundingBox",value:function(){var e=this._sourceGeometry._updateBoundingBox(),t=e.max.x-e.min.x,n=e.max.y-e.min.y,r=e.max.z-e.min.z,i=new f.default(t,n,r,0);this._shape=i,this._center=new S.default(e.min.x+.5*t,e.min.y+.5*n,e.min.z+.5*r)}},{key:"_createShapeAsBox",value:function(){this._shape=this._sourceGeometry,this._center=new S.default(0,0,0)}},{key:"_createShapeAsSphere",value:function(){if((0,T.default)(this._sourceGeometry,g.default))return this._shape=this._sourceGeometry,void(this._center=new S.default(0,0,0));var e=this._sourceGeometry.getBoundingSphere(),t=new g.default(e.radius);this._shape=t,this._center=e.center}},{key:"_createBtCollisionShape",value:function(){if(null===this._sourceObject)throw new Error("_sourceObject is null");return this._sourceObject._createBtCollisionShape()}},{key:"sourceObject",get:function(){return this._sourceObject}},{key:"options",get:function(){return this._options}},{key:"_type",get:function(){return this._options?this._options[k.type]:null}},{key:"transforms",get:function(){return this._transforms}}],[{key:"Option",get:function(){return k}},{key:"ShapeType",get:function(){return C}}]),t}(s.default);t.default=O},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(8),c=r(s),f=n(9),h=r(f),d=n(15),_=r(d),p=n(12),y=r(p),m=n(6),v=r(m),g=n(1),b=r(g),S=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,[],[]));return n.radius=e,n.isGeodesic=!1,n.segmentCount=24,n._sphereRadialSpan=0,n._spherePrimitiveType=0,n._isHemispheric=!1,n._createGeometry(),n.materials.push(new c.default),n}return a(t,e),l(t,null,[{key:"_propTypes",get:function(){return{$constructor:function(e,n){var r=new t(n.sphereradius);return r.isGeodesic=n.spheregeodesic,r.segmentCount=n.spheresegmentCount,r.name=n.name,r._sphereRadialSpan=n.sphereRadialSpan,r._isHemispheric=n.spherehemispheric,r._spherePrimitiveType=n.sphereprimitiveType,r.materials=n.materials,r.tessellator=n.tessellator,r.subdivisionLevel=n.subdivisionLevel,r.wantsAdaptiveSubdivision=n.wantsAdaptiveSubdivision,r._createGeometry(),r},sphereradius:["float",null],spheregeodesic:["boolean",null],spheresegmentCount:["integer",null],materials:["NSArray",null],tessellator:["SCNGeometryTessellator",null],wantsAdaptiveSubdivision:["boolean",null],adaptiveSubdivision:["boolean",null],name:["string",null],sphereradialSpan:["float",null],spherehemispheric:["boolean",null],sphereprimitiveType:["integer",null],subdivisionLevel:["integer",null],subdivisionSettings:["bytes",null]}}}]),l(t,[{key:"_createGeometry",value:function(){for(var e=[],t=[],n=(this.segmentCount+1)*(this.segmentCount+1),r=(this.segmentCount,this.segmentCount,[]),i=[],o=0;o<=this.segmentCount;o++)r.push(-Math.cos(Math.PI*o/this.segmentCount)),i.push(Math.sin(Math.PI*o/this.segmentCount));for(var a=0;a<=this.segmentCount;a++)for(var u=-Math.sin(2*Math.PI*a/this.segmentCount),l=-Math.cos(2*Math.PI*a/this.segmentCount),s=0;s<=this.segmentCount;s++){var c=u*i[s],f=l*i[s];e.push(c*this.radius,r[s]*this.radius,f*this.radius),e.push(c,r[s],f),e.push(a/this.segmentCount,1-s/this.segmentCount)}for(var h=0;h<this.segmentCount;h++){var d=h*(this.segmentCount+1),p=d+this.segmentCount+2;t.push(d,p,d+1),d+=1;for(var m=0;m<this.segmentCount-2;m++)t.push(d,p+1,d+1),t.push(d,p,p+1),d+=1,p+=1;t.push(d,p,p+1)}var g=new v.default(e,v.default.Semantic.vertex,n,!0,3,4,0,32),S=new v.default(e,v.default.Semantic.normal,n,!0,3,4,12,32),w=new v.default(e,v.default.Semantic.texcoord,n,!0,2,4,24,32),T=new _.default(t,y.default.triangles);this._geometryElements=[T],this._geometrySources=[g,S,w],this.boundingBox={min:new b.default(-this.radius,-this.radius,-this.radius),max:new b.default(this.radius,this.radius,this.radius)}}},{key:"_updateBoundingBoxForSkinner",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?this.boundingBox:u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_updateBoundingBoxForSkinner",this).call(this,e)}}]),t}(h.default);t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(2),f=r(c),h=n(14),d=r(h),_=n(8),p=r(_),y=n(33),m=r(y),v=n(6),g=r(v),b=n(84),S=r(b),w=n(32),T=r(w),k=n(25),C=r(k),O=n(24),E=r(O),P=n(26),A=r(P),x={endTime:"kSceneEndTimeAttributeKey",frameRate:"kSceneFrameRateAttributeKey",startTime:"kSceneStartTimeAttributeKey",upAxis:"kSceneUpAxisAttributeKey"},M=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;i(this,t);var u=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(u.isPaused=!1,u._rootNode=new d.default,u._lightingEnvironment=null,u.fogStartDistance=0,u.fogEndDistance=0,u.fogDensityExponent=0,u.fogColor=null,u._physicsWorld=new T.default,u._physicsWorld._scene=u,u._particleSystems=null,u._particleSystemsTransform=null,u._dataLoadedPromise=null,e){var l=u._loadSceneWithURL(e,n).then(function(e){u._copyValue(e),r&&r(u)}).catch(function(e){a&&a(e)});u._dataLoadedPromise=l}return u._createSkyBox(),u._loadedPromise=null,u}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{paused:["boolean","isPaused"],rootNode:["SCNNode","_rootNode"],upAxis:["SCNVector3",null],physicsWorld:["SCNPhysicsWorld",function(e,t){e._physicsWorld=t,e._physicsWorld._scene=e}],background:["SCNMaterialProperty",function(e,t){e._skyBox.geometry.firstMaterial._emission=t,e._skyBox.geometry.firstMaterial._emission._createPresentation()}],startTime:["double",null],endTime:["double",null],frameRate:["double",null],fogDensityExponent:"double",fogStartDistance:"double",fogEndDistance:"double",fogColor:"plist",environment:["SCNMaterialProperty","_lightingEnvironment"],version:["float",null],userAttributes:["NSMutableDictionary",null],sourceURL:["NSURL",null]}}}]),u(t,[{key:"_copyValue",value:function(e){this.isPaused=e.isPaused,this._rootNode=e._rootNode,this._skyBox.geometry=e._skyBox.geometry.copy(),this._lightingEnvironment=e._lightingEnvironment,this.fogStartDistance=e.fogStartDistance,this.fogEndDistance=e.fogEndDistance,this.fogDensityExponent=e.fogDensityExponent,this.fogColor=e.fogColor,this._physicsWorld=e._physicsWorld,this._particleSystems=e._particleSystems?e._particleSystems.slice(0):null,this._particleSystemsTransform=e._particleSystemsTransform?e._particleSystemsTransform.slice(0):null}},{key:"_loadSceneWithURL",value:function(e,t){var n=this,r=t;if(null===r&&(r=new Map),void 0===r.get(S.default.LoadingOption.assetDirectoryURLs)){var i=e.split("/"),o=(i.pop(),i.join("/"));r.set(S.default.LoadingOption.assetDirectoryURLs,o)}return e instanceof E.default?Promise(function(t,i){var o=new A.default;o.onload=function(){var e=n._loadSceneWithData(o.result,r);t(e)},o.onerror=function(){i(o.error)},o.readAsBinaryString(e)}):C.default.get(e).then(function(e){return n._loadSceneWithData(e,r)})}},{key:"_loadSceneWithData",value:function(e,t){return new S.default(e,t).scene()}},{key:"_createSkyBox",value:function(){var e=new m.default,t=new p.default;t._diffuse._contents=f.default.black,t._ambient._contents=f.default.black,t._emission._contents=null,t.isDoubleSided=!0,e.firstMaterial=t;for(var n=e.getGeometrySourcesForSemantic(g.default.Semantic.texcoord)[0],r=[5/6-.001,1,5/6-.001,0,4/6+.001,1,4/6+.001,0,2/6-.001,1,2/6-.001,0,1/6+.001,1,1/6+.001,0,.999,1,.999,0,5/6+.001,1,5/6+.001,0,1/6-.001,1,1/6-.001,0,.001,1,.001,0,.499,1,.499,0,2/6+.001,1,2/6+.001,0,4/6-.001,1,4/6-.001,0,.501,1,.501,0],i=0,o=6,a=0;a<24;a++)n._data[o+0]=r[i+0],n._data[o+1]=r[i+1],o+=8,i+=2;this._skyBox=new d.default(e),this._skyBox._presentation=this._skyBox}},{key:"attributeForKey",value:function(e){return null}},{key:"setAttributeForKey",value:function(e,t){}},{key:"writeTo",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments[2],arguments.length>3&&void 0!==arguments[3]&&arguments[3];return!1}},{key:"addParticleSystem",value:function(e,t){if(null===this._particleSystems&&(this._particleSystems=[],this._particleSystemsTransform=[]),e.reset(),this._particleSystems.push(e),this._particleSystemsTransform.push(t),this._particleSystems.length!==this._particleSystemsTransform.length)throw new Error("particleSystems array length inconsistency")}},{key:"removeParticleSystem",value:function(e){if(null!==this._particleSystems){var t=this._particleSystems.indexOf(e);t<0||(this._particleSystems.splice(t,1),this._particleSystemsTransform.splice(t,1))}}},{key:"removeAllParticleSystems",value:function(){this._particleSystems=[],this._particleSystemsTransform=[]}},{key:"_getLoadedPromise",value:function(){var e=this;return this._loadedPromise?this._loadedPromise:this._dataLoadedPromise?(this._loadedPromise=this._dataLoadedPromise.then(function(){var t=[];return t.push(e._rootNode.didLoad),t.push(e._skyBox.didLoad),e._lightingEnvironment&&t.push(e._lightingEnvironment.didLoad),Promise.all(t)}),this._loadedPromise):Promise.resolve()}},{key:"rootNode",get:function(){return this._rootNode}},{key:"background",get:function(){return this._skyBox.geometry.firstMaterial._emission}},{key:"lightingEnvironment",get:function(){return this._lightingEnvironment}},{key:"physicsWorld",get:function(){return this._physicsWorld}},{key:"particleSystems",get:function(){return this._particleSystems.slice(0)}},{key:"didLoad",get:function(){return this._getLoadedPromise()}}],[{key:"sceneNamed",value:function(e){return this.sceneNamedInDirectory(e)}},{key:"sceneNamedInDirectory",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=e;return n&&(i=n+"/"+e),new t(i,r)}},{key:"scene",value:function(e){return new t(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}},{key:"Attribute",get:function(){return x}}]),t}(s.default);t.default=M},function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(54),s=r(l),c=n(55),f=(r(c),n(24)),h=r(f),d=n(26),_=r(d),p=n(62),y=r(p),m=n(41),v=r(m),g=new Map,b=Symbol("loading"),S=function(){function e(t,n){a(this,e),this._unarchiver=t,this._value=n}return u(e,[{key:"value",get:function(){return this._value}},{key:"obj",get:function(){return this._unarchiver._parsedObj.$objects[this._value]}}]),e}(),w=function(t){function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;a(this,n);var t=i(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t._requiresSecureCoding=!1,t.delegate=null,t._decodingFailurePolicy=null,t._reader=null,t._offsetSize=0,t._objCount=0,t._offsetArray=[],t._parsedObj={},t._dataObj=[],t._resolveFunctions=[],t._filePath=null,t._refObj=null,t._decodingFinished=!1,t._promises=[],null!==e&&(t._reader=new y.default(e,!0,"utf8"),t._checkHeader(),t._parsedObj=t._parseBPlist()),t}return o(n,t),u(n,[{key:"copy",value:function(){var e=new n;return e._requiresSecureCoding=this._requiresSecureCoding,e.delegate=this.delegate,e._decodingFailurePolicy=this._decodingFailurePolicy,e._reader=this._reader,e._offsetSize=this._offsetSize,e._objCount=this._objCount,e._offsetArray=this._offsetArray,e._parsedObj=this._parsedObj,e._dataObj=this._dataObj,e._resolveFunctions=this._resolveFunctions,e._filePath=this._filePath,e._refObj=this._refObj,e._decodingFinished=this._decodingFinished,e}},{key:"_checkHeader",value:function(){this._reader.seek(0);var e=this._reader.readString(8);if("bplist00"!==e)throw new Error("unsupported file format: "+e)}},{key:"_parseBPlist",value:function(){var e=this._reader;e.seek(-26);var t=(e.length,e.readUnsignedByte());this._offsetSize=e.readUnsignedByte(),this._objCount=e.readUnsignedLongLong();var n=e.readUnsignedLongLong(),r=e.readUnsignedLongLong();this._offsetArray=[];var i=r;e.seek(i);for(var o=this._objCount,a=0;a<o;a++){var u=e.readInteger(t);this._offsetArray.push(u)}return this._parseObjAtIndex(n)}},{key:"_parseObjAtIndex",value:function(e){return this._parseObj(this._offsetArray[e])}},{key:"_parseObj",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this._reader;null!==t&&r.seek(t);var i=r.readUnsignedByte(),o=240&i,a=15&i;if(0===o){if(0===a)return null;if(8===a)return!1;if(9===a)return!0}else{if(16===o){var u=Math.pow(2,a);return r.readInteger(u,n)}if(32===o){var l=Math.pow(2,a);if(4===l)return r.readFloat();if(8===l)return r.readDouble();throw new Error("unsupported float size: "+l)}if(48===o);else{if(64===o){var s=this._getDataSize(a);return r.readData(s)}if(80===o){var c=this._getDataSize(a);return r.readString(c,"ascii")}if(96===o){var f=this._getDataSize(a);return r.readString(f,"utf16be")}if(128===o){var h=r.readInteger(a+1,!1);return new S(this,h)}if(160===o){for(var d=this._getDataSize(a),_=[],p=0;p<d;p++)_.push(r.readInteger(this._offsetSize,!1));return _.map(function(t){return e._parseObjAtIndex(t)})}if(192===o){for(var y=this._getDataSize(a),m=[],v=0;v<y;v++)m.push(r.readInteger(this._offsetSize,!1));var g=m.map(function(t){return e._parseObjAtIndex(t)});return new Set(g)}if(208===o){for(var b=this._getDataSize(a),w=[],T=[],k=0;k<b;k++)w.push(r.readInteger(this._offsetSize,!1));for(var C=0;C<b;C++)T.push(r.readInteger(this._offsetSize,!1));for(var O={},E=0;E<b;E++){var P=this._parseObjAtIndex(w[E]),A=this._parseObjAtIndex(T[E]);O[P]=A}return O}}}throw new Error("unknown data type: "+i)}},{key:"_getDataSize",value:function(e){var t=0;if(15!==e)t=e;else if("number"!=typeof(t=this._parseObj(null,!1)))throw new Error("data size must be int type");return t}},{key:"_parseClassAt",value:function(e){var t=this,n=this._parsedObj.$objects[e];if(this._dataObj[e]===b)return new Promise(function(n,r){void 0===t._resolveFunctions[e]&&(t._resolveFunctions[e]=[]),t._resolveFunctions[e].push(n)});if(void 0!==this._dataObj[e])return this._dataObj[e];this._dataObj[e]=b;var r=this._parseClass(n);return this._dataObj[e]=r,Array.isArray(this._resolveFunctions[e])&&(this._resolveFunctions[e].forEach(function(e){e(r)}),delete this._resolveFunctions[e]),r}},{key:"_parseClass",value:function(e){var t=e.$class.obj.$classname,r=n.classForClassName(t);if(r){var i=this.copy();return i._refObj=e,r.initWithCoder(i)}return null}},{key:"_parseStruct",value:function(e,t){if("function"!=typeof t._initWithData)throw new Error(t.prototype.constructor.name+" class doesn't have _initWithData function");return t._initWithData(e)}},{key:"containsValueForKey",value:function(e){return void 0!==this._refObj[e]}},{key:"decodeBoolForKey",value:function(e){if(this._decodingFinished)throw new Error("can't decode '"+e+"' after finishDecoding() is called");var t=this._getValueForKey(e);return Boolean(t)}},{key:"decodeBytesForKeyReturnedLength",value:function(e,t){if(this._decodingFinished)throw new Error("can't decode '"+e+"' after finishDecoding() is called");return this._getValueForKey(e)}},{key:"decodeDoubleForKey",value:function(e){if(this._decodingFinished)throw new Error("can't decode '"+e+"' after finishDecoding() is called");return this._getValueForKey(e)}},{key:"decodeFloatForKey",value:function(e){if(this._decodingFinished)throw new Error("can't decode '"+e+"' after finishDecoding() is called");return this._getValueForKey(e)}},{key:"decodeCIntForKey",value:function(e){if(this._decodingFinished)throw new Error("can't decode '"+e+"' after finishDecoding() is called");return this._getValueForKey(e)}},{key:"decodeInt32ForKey",value:function(e){if(this._decodingFinished)throw new Error("can't decode '"+e+"' after finishDecoding() is called");return this._getValueForKey(e)}},{key:"decodeInt64ForKey",value:function(e){if(this._decodingFinished)throw new Error("can't decode '"+e+"' after finishDecoding() is called");return this._getValueForKey(e)}},{key:"decodeObjectForKey",value:function(e){if(this._decodingFinished)throw new Error("can't decode '"+e+"' after finishDecoding() is called");var t=this._refObj[e];if("string"==typeof t)return t;if(t instanceof S){var n=t.obj;return void 0!==n.$class?this._parseClassAt(t.value):n}throw new Error("unknown data type for key "+e+": "+t)}},{key:"decodePropertyListForKey",value:function(t){if(this._decodingFinished)throw new Error("can't decode '"+t+"' after finishDecoding() is called");var r=this.decodeObjectForKey(t);if(!(r instanceof e))throw new Error("propertylist of key "+t+" is not Buffer data");return n.unarchiveObjectWithData(r,this._filePath)}},{key:"decodeObjectOfTypeForKey",value:function(t,n){if(this._decodingFinished)throw new Error("can't decode '"+n+"' after finishDecoding() is called");var r=this._refObj[n];if(!(r instanceof e))throw new Error("value is not Buffer data for key: "+n);return this._parseStruct(r,t)}},{key:"finishDecoding",value:function(){this._decodingFinished=!0}},{key:"_getValueForKey",value:function(e){var t=this._refObj[e];return t instanceof S?t.obj:t}},{key:"_fileName",get:function(){return null===this._filePath?null:this._filePath.split("/").pop()}},{key:"_directoryPath",get:function(){if(null===this._filePath)return null;var e=this._filePath.split("/");e.pop();return e.join("/")+"/"}}],[{key:"unarchiveObjectWithData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=new n(e);r._filePath=t;var i=r._parsedObj.$top.root.value;return r._parseClassAt(i)}},{key:"_getBufferOfFile",value:function(e){return new Promise(function(t,n){var r=new h.default([],e),i=new _.default;i.onload=function(){var e=i.result;t(e)},i.onerror=function(){n(i.error)},i.readAsBinaryString(r)})}},{key:"unarchiveObjectWithFile",value:function(e){return n._getBufferOfFile(e).then(function(t){return n.unarchiveObjectWithData(t,e)})}},{key:"setClassForClassName",value:function(e,t){g.set(t,e)}},{key:"classForClassName",value:function(e){var t=g.get(e);return t||v.default.get(e)}},{key:"unarchiveTopLevelObjectWithData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n.unarchiveObjectWithData(e,t)}}]),n}(s.default);t.default=w}).call(t,n(17).Buffer)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(10),f=(r(c),n(16)),h=(r(f),n(11)),d=(r(h),n(61)),_=(r(d),{raiseException:Symbol("raiseException"),setErrorAndReturn:Symbol("setErrorAndReturn")}),p=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._allowsKeyedCoding=!1,e._requiresSecureCoding=!1,e._allowedClasses=null,e._systemVersion=0,e._decodingFailurePolicy=null,e._error=null,e}return a(t,e),u(t,[{key:"containsValueForKey",value:function(e){return!1}},{key:"encodeArrayOfObjCTypeAt",value:function(e,t,n){}},{key:"encodeForKey",value:function(e,t){}},{key:"encodeBycopyObject",value:function(e){}},{key:"encodeByrefObject",value:function(e){}},{key:"encodeBytes",value:function(e,t){}},{key:"encodeBytesLengthForKey",value:function(e,t,n){}},{key:"encodeConditionalObject",value:function(e){}},{key:"encodeConditionalObjectForKey",value:function(e,t){}},{key:"encode",value:function(e){}},{key:"encodeCIntForKey",value:function(e,t){}},{key:"encodePropertyList",value:function(e){}},{key:"encodeRootObject",value:function(e){}},{key:"encodeValueOfObjCTypeAt",value:function(e,t){}},{key:"decodeArrayOfObjCTypeAt",value:function(e,t,n){}},{key:"decodeBoolForKey",value:function(e){return!1}},{key:"decodeBytesForKeyReturnedLength",value:function(e,t){return null}},{key:"decodeBytesWithReturnedLength",value:function(e){return null}},{key:"decodeData",value:function(){return null}},{key:"decodeDoubleForKey",value:function(e){return 0}},{key:"decodeFloatForKey",value:function(e){return 0}},{key:"decodeCIntForKey",value:function(e){return 0}},{key:"decodeIntegerForKey",value:function(e){return 0}},{key:"decodeInt32ForKey",value:function(e){return 0}},{key:"decodeInt64ForKey",value:function(e){return null}},{key:"decodeObject",value:function(){return null}},{key:"decodeObjectForKey",value:function(e){return null}},{key:"decodePoint",value:function(){return null}},{key:"decodePointForKey",value:function(e){return null}},{key:"decodePropertyList",value:function(){return null}},{key:"decodeRect",value:function(){return null}},{key:"decodeRectForKey",value:function(e){return null}},{key:"decodeSize",value:function(){return null}},{key:"decodeSizeForKey",value:function(e){return null}},{key:"decodeValueOfObjCTypeAt",value:function(e,t){}},{key:"decodePropertyListForKey",value:function(e){return null}},{key:"decodeCGPointForKey",value:function(e){return null}},{key:"decodeCGRectForKey",value:function(e){return null}},{key:"decodeCGSizeForKey",value:function(e){return null}},{key:"decodeCGAffineTransformForKey",value:function(e){return null}},{key:"decodeUIEdgeInsetsForKey",value:function(e){return null}},{key:"decodeUIOffsetForKey",value:function(e){return null}},{key:"decodeCGVectorForKey",value:function(e){return null}},{key:"decodeTimeForKey",value:function(e){return null}},{key:"decodeTimeRangeForKey",value:function(e){return null}},{key:"decodeTimeMappingForKey",value:function(e){return null}},{key:"versionForClassName",value:function(e){return 0}},{key:"decodeObjectOfClassForKey",value:function(e,t){return null}},{key:"decodeTopLevelObject",value:function(){}},{key:"decodeTopLevelObjectForKey",value:function(e){}},{key:"decodeTopLevelObjectOfForKey",value:function(e,t){}},{key:"failWithError",value:function(e){}},{key:"allowsKeyedCoding",get:function(){return this._allowsKeyedCoding}},{key:"requiresSecureCoding",get:function(){return this._requiresSecureCoding}},{key:"allowedClasses",get:function(){return this._allowedClasses}},{key:"systemVersion",get:function(){return this._systemVersion}},{key:"decodingFailurePolicy",get:function(){return this._decodingFailurePolicy}},{key:"error",get:function(){return this._error}}],[{key:"DecodingFailurePolicy",get:function(){return _}}]),t}(s.default);t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,null,[{key:"initWithCoder",value:function(e){var t=e.decodeBytesForKeyReturnedLength("NS.data",null);if(void 0!==t)return t;var n=e.decodeBytesForKeyReturnedLength("NS.bytes",null);return void 0!==n?n:null}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(11),f=r(c),h=n(93),d=r(h),_=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.filteringMode=d.default.linear,e.usesMipmaps=!1,e._customPlaygroundQuickLook=null,e._image=null,e._glTexture=null,e._loadingImagePromise=null,e}return a(t,e),u(t,[{key:"applying",value:function(e){return null}},{key:"cgImage",value:function(){return this._image}},{key:"generatingNormalMap",value:function(){return null}},{key:"generatingNormalMapWithSmoothness",value:function(e,t){return null}},{key:"size",value:function(){return null===this._image?new f.default(0,0):new f.default(this._image.naturalWidth,this._image.naturalHeight)}},{key:"textureRect",value:function(){return null}},{key:"preload",value:function(e){}},{key:"_loadImage",value:function(e){var t=this,n=new Image;n.crossOrigin="anonymous",this._loadingImagePromise=new Promise(function(r,i){if(0===e.indexOf("file:///")){var o=e.slice(8).split("/"),a=1,u=o.slice(-a).join("/");n.onload=function(){console.info("image "+u+" onload"),t._image=n,r(t)},n.onerror=function(){a+=1,a>o.length?(console.error("image "+e+" load error."),i(t)):(console.info("image "+u+" load error."),u=o.slice(-a).join("/"),console.info("try "+u),n.src=u)}}else n.onload=function(){t._image=n,r(t)},n.onerror=function(){console.info("image "+e+" load error."),i(t)},n.src=e})}},{key:"_createTexture",value:function(e){if(null!==this._image){var t=e.createTexture(),n=document.createElement("canvas");n.width=this._image.naturalWidth,n.height=this._image.naturalHeight,n.getContext("2d").drawImage(this._image,0,0),e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this._image.width,this._image.height,0,e.RGBA,e.UNSIGNED_BYTE,n),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),this._glTexture=t}}},{key:"customPlaygroundQuickLook",get:function(){return this._customPlaygroundQuickLook}}],[{key:"textureWithImageNamed",value:function(e){var n=new t;return n._loadImage(e),n}},{key:"textureWithImage",value:function(e){var n=new t;return n._image=e,this._loadingImagePromise=Promise.resolve(this),n}},{key:"textureWithCgImage",value:function(e){var n=new t;return n._image=e,this._loadingImagePromise=Promise.resolve(this),n}},{key:"textureWithRectIn",value:function(e,n){new t;return n}},{key:"textureWithDataSize",value:function(e,t){}},{key:"textureWithVectorNoiseWithSmoothness",value:function(e,t){}},{key:"textureWithNoiseWithSmoothness",value:function(e,t,n){}},{key:"preloadWithCompletionHandler",value:function(e,t){}}]),t}(s.default);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(37),s=r(l),c=n(114),f=r(c),h=n(36),d=r(h),_=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._xAxis=new f.default,e._yAxis=new f.default,e._up=new d.default,e._down=new d.default,e._left=new d.default,e._right=new d.default,e.valueChangedHandler=null,e}return a(t,e),u(t,[{key:"xAxis",get:function(){return this._xAxis}},{key:"yAxis",get:function(){return this._yAxis}},{key:"up",get:function(){return this._up}},{key:"down",get:function(){return this._down}},{key:"left",get:function(){return this._left}},{key:"right",get:function(){return this._right}}]),t}(s.default);t.default=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(38),s=r(l),c=n(121),f=(r(c),n(123)),h=(r(f),function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.behavior=null,e.mass=0,e.maxAcceleration=0,e.maxSpeed=0,e.radius=0,e.delegate=null,e.speed=0,e}return a(t,e),u(t,[{key:"agentWillUpdate",value:function(e){}},{key:"agentDidUpdate",value:function(e){}}]),t}(s.default));t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={butt:0,round:1,square:2};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={miter:0,round:1,bevel:2};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,e),this._dx=t,this._dy=n}return i(e,[{key:"zero",get:function(){return new e}}]),e}();t.default=o},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(39),a=function(){function t(n){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";r(this,t),this._pos=0,this._eof=!0,this.buffer=null,this.buffer=n instanceof e?n:"string"==typeof n?e.from(n,"binary"):e.from(n),this.bigEndian=i,this.encoding=o}return i(t,[{key:"skip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._pos+=e,t||this._check()}},{key:"seek",value:function(e){this._pos=e<0?this.buffer.length+e:e,this._pos<0?this._pos=0:this._pos>this.buffer.length&&(this._pos=this.buffer.length)}},{key:"readString",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this._pos;this._pos+=t;var i=n||this.encoding||"sjis";if(e.isEncoding(i))return this.buffer.toString(i,r,this._pos);var o=this.buffer.toString("binary",r,this._pos);return this._convert(o,i)}},{key:"readInteger",value:function(e,t){var n=this._pos;return this._pos+=e,this.bigEndian?t?this.buffer.readIntBE(n,e):this.buffer.readUIntBE(n,e):t?this.buffer.readIntLE(n,e):this.buffer.readUIntLE(n,e)}},{key:"readUnsignedByte",value:function(){return this.readInteger(1,!1)}},{key:"readUnsignedShort",value:function(){return this.readInteger(2,!1)}},{key:"readUnsignedInt",value:function(){return this.readInteger(4,!1)}},{key:"readUnsignedLongLong",value:function(){return this.readInteger(8,!1)}},{key:"readByte",value:function(){return this.readInteger(1,!0)}},{key:"readShort",value:function(){return this.readInteger(2,!0)}},{key:"readInt",value:function(){return this.readInteger(4,!0)}},{key:"readLongLong",value:function(){return this.readInteger(8,!0)}},{key:"readFloat",value:function(){var e=this._pos;return this._pos+=4,this.bigEndian?this.buffer.readFloatBE(e):this.buffer.readFloatLE(e)}},{key:"readDouble",value:function(){var e=this._pos;return this._pos+=8,this.bigEndian?this.buffer.readDoubleBE(e):this.buffer.readDoubleLE(e)}},{key:"readData",value:function(e){var t=this._pos;return this._pos+=e,this.buffer.slice(t,this._pos)}},{key:"_check",value:function(){if(this._pos>=this.buffer.length)throw new Error("_BinaryReader: buffer out of range ("+this._pos+" >= "+this.buffer.length+")")}},{key:"_convert",value:function(e,t){for(var n=e.length,r="",i=0;i<n;i++){var a=e.charCodeAt(i);if(0===a)break;r+=a<16?"%0"+a.toString(16):"%"+a.toString(16)}if("sjis"===t)return(0,o.UnescapeSJIS)(r);if("euc-jp"===t)return(0,o.UnescapeEUCJP)(r);if("jis-7"===t)return(0,o.UnescapeJIS7)(r);if("jis-8"===t)return(0,o.UnescapeJIS8)(r);if("unicode"===t)return(0,o.UnescapeUnicode)(r);if("utf7"===t)return(0,o.UnescapeUTF7)(r);if("utf-8"===t)return(0,o.UnescapeUTF8)(r);if("utf-16"===t)return(0,o.UnescapeUTF16LE)(r);throw new Error("unsupported encoding: "+t)}},{key:"getAvailableDataLength",value:function(){return this.buffer.length-this._pos}},{key:"length",get:function(){return this.buffer.length}}]),t}();t.default=a}).call(t,n(17).Buffer)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={pow2:0,integer:1,fractionalOdd:2,fractionalEven:3};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"activate",value:function(){}},{key:"resume",value:function(){}},{key:"setTarget",value:function(e){}},{key:"suspend",value:function(){}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.animationDidStart=null,n.animationDidStop=null,n.animationEvents=null,n.autoreverses=!1,n.blendInDuration=0,n.blendOutDuration=0,n.duration=0,n.fillsBackward=!1,n.fillsForward=!1,n.isAdditive=!1,n.isAppliedOnCompletion=!1,n.isCumulative=!1,n.isRemovedOnCompletion=!1,n.keyPath=null,n.repeatCount=0,n.startDelay=0,n.timeOffset=0,n.timingFunction=null,n.usesSceneTimeBase=!1,n._animation=e,n}return o(t,e),a(t,null,[{key:"animationWithContentsOf",value:function(e){}},{key:"animationNamed",value:function(e){}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(29),s=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.animations=[],e}return o(t,e),a(t,[{key:"_applyAnimation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t;if(n){var i=this._basetimeFromTime(t);r=i,null!==this.timingFunction&&(r=this.timingFunction._getValueAtTime(i))}this.animations.forEach(function(t){t._applyAnimation(e,r,!1)}),this._handleEvents(e,r)}},{key:"copy",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e.animations=this.animations.slice(),e}}]),t}(s.default);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(45),s=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n(27),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),h=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.values=null,n.path=null,n.keyTimes=null,n.timingFunctions=null,n.calculationMode=f.kCAAnimationLinear,n.rotationMode=null,n.tensionValues=null,n.continuityValues=null,n.biasValues=null,n._indexCache=0,n}return o(t,e),a(t,[{key:"copy",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e.values=this.values?this.values.slice():null,e.path=this.path,e.keyTimes=this.keyTimes?this.keyTimes.slice():null,e.timingFunctions=this.timingFunctions?this.timingFunctions.slice():null,e.calculationMode=this.calculationMode,e.rotationMode=this.rotationMode,e.tensionValues=this.tensionValues?this.tensionValues.slice():null,e.continuityValues=this.continuityValues?this.continuityValues.slice():null,e.biasValues=this.biasValues?this.biasValues.slice():null,e}},{key:"_applyAnimation",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t;if(n){r=this._basetimeFromTime(t)}var i=this._indexCache,o=0,a=0;if(r>1)throw new Error("CAKeyframeAnimation._applyAnimation: t "+r+" > 1");var u=this.keyTimes.length;if(i>=u&&(console.log("CAKeyframeAnimation index >= len  "+i+" >= "+u),i=u-1),this.keyTimes[i]<r){for(;i<u&&!(this.keyTimes[i]>=r);i++);o=i-1,a=i}else{for(;i>=0&&!(this.keyTimes[i]<r);i--);o=i,a=i+1}o<=0&&(o=0),a>=u&&(a=u-1),this._indexCache=o;var l=this.keyTimes[o],s=this.keyTimes[a],c=this.values[o],h=this.values[a],d=c;if(l!==s){var _=(r-l)/(s-l),p=_;switch(null!==this.timingFunctions&&(p=this.timingFunctions[o]._getValueAtTime(_)),this.calculationMode){case f.kCAAnimationLinear:d=this._lerp(c,h,p);break;case f.kCAAnimationDiscrete:throw new Error("kCAAnimationDiscrete not implemented");case f.kCAAnimationPaced:throw new Error("kCAAnimationPaced not implemented");case f.kCAAnimationCubic:throw new Error("kCAAnimationCubic not implemented");case f.kCAAnimationCubicPaced:throw new Error("kCAAnimationCubicPaced not implemented");default:throw new Error("unknown calculation mode: "+this.calculationMode)}}d=this._calculateWithBaseValue(e,d),this._applyValue(e,d),this._handleEvents(e,r)}}]),t}(s.default);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={fixed:0,movable:1};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={alpha:0,add:1,subtract:2,multiply:3,screen:4,replace:5};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={red:1,green:2,blue:4,alpha:8,all:15};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={fill:2,lines:1};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={none:0,nearest:1,linear:2};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={clamp:1,repeat:2,clampToBorder:3,mirror:4};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={aOne:0,rgbZero:1};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._nodeA=null,e._nodeB=null,e._contactPoint=null,e._contactNormal=null,e._collisionImpulse=0,e._penetrationDistance=0,e}return o(t,e),a(t,[{key:"nodeA",get:function(){return this._nodeA}},{key:"nodeB",get:function(){return this._nodeB}},{key:"contactPoint",get:function(){return this._contactPoint}},{key:"contactNormal",get:function(){return this._contactNormal}},{key:"collisionImpulse",get:function(){return this._collisionImpulse}},{key:"penetrationDistance",get:function(){return this._penetrationDistance}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default;t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={surface:0,volume:1,vertex:2};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={metal:0,openGLLegacy:1,openGLCore32:2,openGLCore41:3,openGLES2:999,webGL:998};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(80),f=r(c),h=n(30),d=r(h),_=n(7),p=r(_),y=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.name=null,e.zNear=1,e.zFar=100,e.yFov=0,e.xFov=0,e.automaticallyAdjustsZRange=!1,e.usesOrthographicProjection=!1,e.orthographicScale=1,e.projectionDirection=f.default.horizontal,e.categoryBitMask=-1,e.focalDistance=10,e.focalSize=0,e.focalBlurRadius=0,e.aperture=.125,e.motionBlurIntensity=0,e.wantsHDR=!1,e.exposureOffset=0,e.averageGray=.18,e.whitePoint=1,e.minimumExposure=-15,e.maximumExposure=15,e.wantsExposureAdaptation=!1,e.exposureAdaptationBrighteningSpeedFactor=.4,e.exposureAdaptationDarkeningSpeedFactor=.6,e.contrast=0,e.saturation=1,e._colorGrading=new d.default,e.bloomIntensity=0,e.bloomThreshold=.5,e.bloomBlurRadius=4,e.colorFringeIntensity=1,e.colorFringeStrength=0,e.vignettingIntensity=1,e.vignettingPower=0,e.projectionTransform=null,e._entityID=null,e.apertureBladeCount=0,e.fStop=0,e.fieldOfView=0,e.focalBlurSampleCount=0,e.focalLength=0,e.focalDistance=0,e.screenSpaceAmbientOcclusionBias=0,e.screenSpaceAmbientOcclusionDepthThreshold=0,e.screenSpaceAmbientOcclusionIntensity=0,e.screenSpaceAmbientOcclusionNormalThreshold=0,e.screenSpaceAmbientOcclusionRadius=0,e.sensorHeight=0,e.wantsDepthOfField=!1,e}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{name:"string",zNear:"float",zFar:"float",yFov:"float",xFov:"float",fov:["float",null],automaticallyAdjustsZRange:"boolean",usesOrthographicProjection:"boolean",orthographicScale:"float",projectionDirection:"integer",categoryBitMask:"integer",focalDistance:"float",focalSize:"float",focalBlurRadius:"float",aperture:"float",motionBlurIntensity:"float",wantsHDR:"boolean",exposureOffset:"float",averageGray:"float",whitePoint:"float",minimumExposure:"float",maximumExposure:"float",wantsExposureAdaptation:"boolean",exposureAdaptationDarkeningSpeedFactor:"float",exposureAdaptationBrighteningSpeedFactor:"float",exposureAdaptationDuration:["float",null],exposureAdaptationHistogramRangeHighProbability:["float",null],exposureAdaptationHistogramRangeLowProbability:["float",null],exposureAdaptationMode:["integer",null],contrast:"float",saturation:"float",bloomIntensity:"float",bloomThreshold:"float",bloomBlurRadius:"float",colorFringeIntensity:"float",colorFringeStrength:"float",vignettingIntensity:"float",vignettingPower:"float",bladeCount:["integer","apertureBladeCount"],fStop:"float",focalBlurSampleCount:"integer",focusDistance:"float",screenSpaceAmbientOcclusionBias:"float",screenSpaceAmbientOcclusionDepthThreshold:"float",screenSpaceAmbientOcclusionIntensity:"float",screenSpaceAmbientOcclusionNormalThreshold:"float",screenSpaceAmbientOcclusionRadius:"float",sensorSize:["float","sensorHeight"],entityID:["string","_entityID"],screenSpaceAmbientOcclusionSampleCount:["integer",null],screenSpaceAmbientOcclusionDownSample:["integer",null],dofIntensity:["float",null],fillMode:["integer",null]}}}]),u(t,[{key:"init",value:function(e){}},{key:"_updateProjectionTransform",value:function(e){var t=new p.default,n=e.minX,r=e.maxX,i=e.maxY,o=e.minY,a=e.size.width/e.size.height;if(this.usesOrthographicProjection)t.m11=2/(r-n),t.m12=0,t.m13=0,t.m14=0,t.m21=0,t.m22=2/(i-o),t.m23=0,t.m24=0,t.m31=0,t.m32=0,t.m33=-2/(this.zFar-this.zNear),t.m34=0,t.m41=-(r+n)/(r-n),t.m42=-(i+o)/(i-o),t.m43=-(this.zFar+this.zNear)/(this.zFar-this.zNear),t.m44=1;else{var u=1,l=1;if(this.yFov<=0&&this.xFov<=0){var s=1/Math.tan(Math.PI/6);u=s/a,l=s}else if(this.yFov<=0){var c=1/Math.tan(this.xFov*Math.PI/360);u=c,l=c*a}else if(this.xFov<=0){var f=1/Math.tan(this.yFov*Math.PI/360);u=f/a,l=f}else{var h=1/Math.tan(this.yFov*Math.PI/360);u=h/a,l=h}t.m11=u,t.m12=0,t.m13=0,t.m14=0,t.m21=0,t.m22=l,t.m23=0,t.m24=0,t.m31=0,t.m32=0,t.m33=-(this.zFar+this.zNear)/(this.zFar-this.zNear),t.m34=-1,t.m41=0,t.m42=0,t.m43=-2*this.zFar*this.zNear/(this.zFar-this.zNear),t.m44=0}this.projectionTransform=t}},{key:"colorGrading",get:function(){return this._colorGrading}}]),t}(s.default);t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={horizontal:0,vertical:1};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="#version 300 es\n  precision mediump float;\n\n  #define NUM_AMBIENT_LIGHTS __NUM_AMBIENT_LIGHTS__\n  #define NUM_DIRECTIONAL_LIGHTS __NUM_DIRECTIONAL_LIGHTS__\n  #define NUM_DIRECTIONAL_SHADOW_LIGHTS __NUM_DIRECTIONAL_SHADOW_LIGHTS__\n  #define NUM_OMNI_LIGHTS __NUM_OMNI_LIGHTS__\n  #define NUM_SPOT_LIGHTS __NUM_SPOT_LIGHTS__\n  #define NUM_IES_LIGHTS __NUM_IES_LIGHTS__\n  #define NUM_PROBE_LIGHTS __NUM_PROBE_LIGHTS__\n\n  #define NUM_SHADOW_LIGHTS (NUM_DIRECTIONAL_LIGHTS + NUM_DIRECTIONAL_SHADOW_LIGHTS + NUM_OMNI_LIGHTS + NUM_SPOT_LIGHTS)\n  #define NUM_LIGHTS (NUM_AMBIENT_LIGHTS + NUM_DIRECTIONAL_LIGHTS + NUM_DIRECTIONAL_SHADOW_LIGHTS + NUM_OMNI_LIGHTS + NUM_SPOT_LIGHTS + NUM_IES_LIGHTS + NUM_PROBE_LIGHTS)\n\n  #define USE_SHADER_MODIFIER_GEOMETRY __USE_SHADER_MODIFIER_GEOMETRY__\n\n  layout (std140) uniform cameraUniform {\n    vec4 position;\n    mat4 viewTransform;\n    mat4 inverseViewTransform;\n    mat4 viewProjectionTransform;\n  } camera;\n\n  layout (std140) uniform materialUniform {\n    vec4 ambient;\n    vec4 diffuse;\n    vec4 specular;\n    vec4 normal;\n    vec4 reflective;\n    vec4 emission;\n    vec4 transparent;\n    vec4 multiply;\n    vec4 ambientOcclusion;\n    vec4 selfIllumination;\n    vec4 metalness;\n    vec4 roughness;\n    float shininess;\n    float fresnelExponent;\n  } material;\n\n  struct AmbientLight {\n    vec4 color;\n  };\n\n  struct DirectionalLight {\n    vec4 color;\n    vec4 direction; // should use vec4; vec3 might cause problem for the layout\n  };\n\n  struct DirectionalShadowLight {\n    vec4 color;\n    vec4 direction; // should use vec4; vec3 might cause problem for the layout\n    vec4 shadowColor;\n    mat4 viewProjectionTransform;\n    mat4 shadowProjectionTransform;\n  };\n\n  struct OmniLight {\n    vec4 color;\n    vec4 position; // should use vec4; vec3 might cause problem for the layout\n  };\n\n  struct SpotLight {\n    // TODO: implement\n    vec4 color;\n  };\n\n  struct IESLight {\n    // TODO: implement\n    vec4 color;\n  };\n\n  struct ProbeLight {\n    // TODO: implement\n    vec4 color;\n  };\n\n  layout (std140) uniform lightUniform {\n    #if NUM_AMBIENT_LIGHTS > 0\n      AmbientLight ambient[NUM_AMBIENT_LIGHTS];\n    #endif\n    #if NUM_DIRECTIONAL_LIGHTS > 0\n      DirectionalLight directional[NUM_DIRECTIONAL_LIGHTS];\n    #endif\n    #if NUM_DIRECTIONAL_SHADOW_LIGHTS > 0\n      DirectionalShadowLight directionalShadow[NUM_DIRECTIONAL_SHADOW_LIGHTS];\n    #endif\n    #if NUM_OMNI_LIGHTS > 0\n      OmniLight omni[NUM_OMNI_LIGHTS];\n    #endif\n    #if NUM_SPOT_LIGHTS > 0\n      SpotLight spot[NUM_SPOT_LIGHTS];\n    #endif\n    #if NUM_IES_LIGHTS > 0\n      IESLight ies[NUM_IES_LIGHTS];\n    #endif\n    #if NUM_PROBE_LIGHTS > 0\n      ProbeLight probe[NUM_PROBE_LIGHTS];\n    #endif\n    #if NUM_LIGHTS == 0\n      vec4 dummy;\n    #endif\n  } light;\n\n  #if NUM_SHADOW_LIGHTS > 0\n    out vec3 v_light[NUM_SHADOW_LIGHTS];\n  #endif\n  #if NUM_DIRECTIONAL_SHADOW_LIGHTS > 0\n    out vec4 v_directionalShadowDepth[NUM_DIRECTIONAL_SHADOW_LIGHTS];\n    out vec4 v_directionalShadowTexcoord[NUM_DIRECTIONAL_SHADOW_LIGHTS];\n  #endif\n\n  layout (std140) uniform fogUniform {\n    vec4 color;\n    float startDistance;\n    float endDistance;\n    float densityExponent;\n  } fog;\n\n  #define kSCNTexcoordCount 2\n  struct SCNShaderGeometry {\n    vec3 position;\n    vec3 normal;\n    vec4 tangent;\n    vec4 color;\n    vec2 texcoords[kSCNTexcoordCount];\n  };\n  //struct _SCNShaderGeometry {\n  //  vec3 position;\n  //  vec3 normal;\n  //  vec4 tangent;\n  //  vec4 color;\n  //  vec2 texcoord0;\n  //  vec2 texcoord1;\n  //};\n\n  uniform float u_time;\n  //uniform mat3x4[255] skinningJoints;\n  uniform vec4[765] skinningJoints;\n  uniform int numSkinningJoints;\n  uniform mat4 modelTransform;\n\n  in vec3 position;\n  in vec3 normal;\n  in vec3 tangent;\n  in vec4 color;\n  in vec2 texcoord0;\n  in vec2 texcoord1;\n  in vec4 boneIndices;\n  in vec4 boneWeights;\n\n  out vec3 v_position;\n  out vec3 v_normal;\n  out vec3 v_tangent;\n  out vec3 v_bitangent;\n  out vec2 v_texcoord0;\n  out vec2 v_texcoord1;\n  //out vec4 v_color;\n  out vec3 v_eye;\n  out float v_fogFactor;\n\n  //out _SCNShaderGeometry __geometry;\n\n  __USER_CUSTOM_UNIFORM__\n\n  #if USE_SHADER_MODIFIER_GEOMETRY\n  void shaderModifierGeometry(inout SCNShaderGeometry _geometry) {\n    __SHADER_MODIFIER_GEOMETRY__\n  }\n  #endif\n\n  void main() {\n    SCNShaderGeometry _geometry;\n    _geometry.position = position;\n    _geometry.normal = normal;\n    _geometry.tangent = vec4(tangent, 1.0);\n    _geometry.color = color;\n    _geometry.texcoords[0] = texcoord0;\n    _geometry.texcoords[1] = texcoord1;\n    \n    #if USE_SHADER_MODIFIER_GEOMETRY\n      shaderModifierGeometry(_geometry);\n    #endif\n\n    vec3 pos = vec3(0, 0, 0);\n    vec3 nom = vec3(0, 0, 0);\n    vec3 tng = vec3(0, 0, 0);\n    vec4 col = _geometry.color;\n\n    if(numSkinningJoints > 0){\n      for(int i=0; i<numSkinningJoints; i++){\n        float weight = boneWeights[i];\n        if(int(boneIndices[i]) < 0){\n          continue;\n        }\n        int idx = int(boneIndices[i]) * 3;\n        mat4 jointMatrix = transpose(mat4(skinningJoints[idx],\n                                          skinningJoints[idx+1],\n                                          skinningJoints[idx+2],\n                                          vec4(0, 0, 0, 1)));\n        pos += (jointMatrix * vec4(_geometry.position, 1.0)).xyz * weight;\n        nom += (mat3(jointMatrix) * _geometry.normal) * weight;\n        tng += (mat3(jointMatrix) * _geometry.tangent.xyz) * weight;\n      }\n    }else{\n      mat4 jointMatrix = transpose(mat4(skinningJoints[0],\n                                        skinningJoints[1],\n                                        skinningJoints[2],\n                                        vec4(0, 0, 0, 1)));\n      pos = (jointMatrix * vec4(_geometry.position, 1.0)).xyz;\n      nom = mat3(jointMatrix) * _geometry.normal;\n      tng = mat3(jointMatrix) * _geometry.tangent.xyz;\n    }\n    //v_position = pos;\n    //v_normal = normalize(nom);\n    //v_tangent = normalize(tng);\n    v_position = (camera.viewTransform * vec4(pos, 1.0)).xyz;\n    v_normal = normalize((camera.viewTransform * vec4(nom, 0.0)).xyz);\n    v_tangent = normalize((camera.viewTransform * vec4(tng, 0.0)).xyz);\n    v_bitangent = cross(v_tangent, v_normal);\n\n    //vec3 viewVec = camera.position.xyz - pos;\n    vec3 viewVec = (camera.viewTransform * vec4(camera.position.xyz - pos, 0.0)).xyz;\n    v_eye = viewVec;\n\n    //v_color = material.emission;\n\n    // Lighting\n    int numLights = 0;\n\n    //#if NUM_AMBIENT_LIGHTS > 0\n    //  for(int i=0; i<NUM_AMBIENT_LIGHTS; i++){\n    //    v_color += light.ambient[i].color * material.ambient;\n    //    v_ambient += light.ambient[i].color;\n    //  }\n    //#endif\n\n    #if NUM_DIRECTIONAL_LIGHTS > 0\n      for(int i=0; i<NUM_DIRECTIONAL_LIGHTS; i++){\n        //v_light[numLights + i] = -light.directional[i].direction.xyz;\n        v_light[numLights + i] = (camera.viewTransform * (-light.directional[i].direction)).xyz;\n      }\n      numLights += NUM_DIRECTIONAL_LIGHTS;\n    #endif\n\n    #if NUM_DIRECTIONAL_SHADOW_LIGHTS > 0\n      for(int i=0; i<NUM_DIRECTIONAL_SHADOW_LIGHTS; i++){\n        //v_light[numLights + i] = -light.directionalShadow[i].direction.xyz;\n        v_light[numLights + i] = (camera.viewTransform * (-light.directionalShadow[i].direction)).xyz;\n        v_directionalShadowDepth[i] = light.directionalShadow[i].viewProjectionTransform * vec4(pos, 1.0);\n        v_directionalShadowTexcoord[i] = light.directionalShadow[i].shadowProjectionTransform * vec4(pos, 1.0);\n      }\n      numLights += NUM_DIRECTIONAL_SHADOW_LIGHTS;\n    #endif\n\n    #if NUM_OMNI_LIGHTS > 0\n      for(int i=0; i<NUM_OMNI_LIGHTS; i++){\n        //v_light[numLights + i] = light.omni[i].position.xyz - pos;\n        v_light[numLights + i] = (camera.viewTransform * vec4(light.omni[i].position.xyz - pos, 0.0)).xyz;\n      }\n      numLights += NUM_OMNI_LIGHTS;\n    #endif\n\n    #if NUM_SPOT_LIGHTS > 0\n      for(int i=0; i<NUM_SPOT_LIGHTS; i++){\n        //v_light[numLights + i] = light.spot[i].position.xyz - pos;\n        v_light[numLights + i] = (camera.viewTransform * vec4(light.spot[i].position.xyz - pos, 0.0)).xyz;\n      }\n      numLights += NUM_SPOT_LIGHTS;\n    #endif\n\n    #if NUM_IES_LIGHTS > 0\n      // TODO: implement\n    #endif\n\n    #if NUM_PROBE_LIGHTS > 0\n      // TODO: implement\n    #endif\n\n\n    float distance = length(viewVec);\n    v_fogFactor = clamp((distance - fog.startDistance) / (fog.endDistance - fog.startDistance), 0.0, 1.0);\n\n    v_texcoord0 = _geometry.texcoords[0];\n    v_texcoord1 = _geometry.texcoords[1];\n    gl_Position = camera.viewProjectionTransform * vec4(pos, 1.0);\n  }\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="#version 300 es\n  precision mediump float;\n\n  uniform sampler2D particleTexture;\n\n  in vec2 v_texcoord;\n  in vec4 v_color;\n\n  out vec4 outColor;\n\n  void main() {\n    vec4 texColor = texture(particleTexture, v_texcoord);\n    if(texColor.a <= 0.0){\n      // avoid overwriting the depth buffer\n      discard;\n    }\n\n    texColor.rgb *= texColor.a;\n    outColor = v_color * texColor;\n  }\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={immediate:0,onDemand:1};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(85),s=r(l),c=n(53),f=r(c),h=n(0),d=r(h),_=n(25),p=r(_),y={doNotPlay:"keepSeparate",play:"playOnce",playRepeatedly:"playRepeatedly",playUsingSceneTimeBase:"playUsingSceneTime"},m={animationImportPolicy:"kSceneSourceAnimationLoadingMode",assetDirectoryURLs:"kSceneSourceAssetDirectoryURLs",checkConsistency:"kSceneSourceCheckConsistency",convertToYUp:"kSceneSourceConvertToYUpIfNeeded",convertUnitsToMeters:"kSceneSourceConvertToUnit",createNormalsIfAbsent:"kSceneSourceCreateNormalsIfAbsent",flattenScene:"kSceneSourceFlattenScene",overrideAssetURLs:"kSceneSourceOverrideAssetURLs",preserveOriginalTopology:"kSceneSourcePreserveOriginalTopology",strictConformance:"kSceneSourceStrictConformanceKey",useSafeMode:"kSceneSourceUseSafeMode"},v=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r._url=null,r._options=n,r._data=e,r._loadedPromise=new Promise(function(e,t){r._resolveFunction=e,r._rejectFunction=t}),e&&r._resolveFunction(),r}return a(t,e),u(t,[{key:"scene",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],e);t||this._options&&(t=this._options);var n=this._url,r=t.get(m.assetDirectoryURLs);if(r){var i=r;Array.isArray(i)&&(i=i[0]),n=i+"/",this._url&&(n+=this._url.split("/").pop())}return this._data.match(/\nv -?[0-9]+(\.[0-9]+)? -?[0-9]+(\.[0-9]+)? -?[0-9]+(\.[0-9]+)?\s*\n/)?s.default.unarchiveObjectWithData(this._data,n):f.default.unarchiveObjectWithData(this._data,n)}},{key:"identifiersOfEntriesWithClass",value:function(e){return null}},{key:"entriesPassingTest",value:function(e){return null}},{key:"propertyForKey",value:function(e){return null}},{key:"entryWithIdentifierWithClass",value:function(e,t){return null}},{key:"_getLoadedPromise",value:function(){return this._loadedPromise}},{key:"url",get:function(){return this._url}},{key:"data",get:function(){return this._data}},{key:"didLoad",get:function(){return this._getLoadedPromise()}}],[{key:"sceneSourceWithDataOptions",value:function(e,n){return new t(e,n)}},{key:"sceneSourceWithURLOptions",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=n;if(null===r&&(r=new Map),void 0===r.get(m.assetDirectoryURLs)){var i=e.split("/"),o=(i.pop(),i.join("/"));r.set(m.assetDirectoryURLs,o)}var a=new t;return a._url=e,p.default.get(e).then(function(e){a._data=e,a._options=r,a._resolveFunction()}),a}},{key:"AnimationImportPolicy",get:function(){return y}},{key:"LoadingOption",get:function(){return m}}]),t}(d.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(10),l=r(u),s=n(9),c=r(s),f=n(15),h=r(f),d=n(12),_=r(d),p=n(6),y=r(p),m=n(8),v=r(m),g=n(14),b=r(g),S=n(52),w=r(S),T=n(1),k=r(T),C=n(86),O=r(C),E=n(25),P=r(E),A=n(24),x=r(A),M=n(26),N=r(M),F=n(40),R=r(F),D=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,e),this._filePath=r,this._reader=null,null!==n&&(this._reader=new R.default(n,"utf-8")),this._node=null,this._currentNode=null;var i={"#":this._Comment,v:this._GeometricVertices,vt:this._TextureVertices,vn:this._VertexNormals,vp:this._ParameterSpaceVertices,cstype:this._CurveSurfaceType,deg:this._Degree,bmat:this._BasisMatrix,step:this._StepSize,p:this._Point,l:this._Line,f:this._Face,curv:this._Curve,curv2:this._2DCurve,surf:this._Surface,parm:this._ParameterValues,trim:this._OuterTrimmingLoop,hole:this._InnerTrimmingLoop,scrv:this._SpecialCurve,sp:this._SpecialPoint,end:this._EndStatement,con:this._Connect,g:this._GroupName,s:this._SmoothingGroup,mg:this._MergingGroup,o:this._ObjectName,bevel:this._BevelInterpolation,c_interp:this._ColorInterpolation,d_interp:this._DissolveInterpolation,lod:this._LevelOfDetail,usemtl:this._MaterialName,mtllib:this._MaterialLibrary,shadow_obj:this._ShadowCasting,trace_obj:this._RayTracing,ctech:this._CurveApproximationTechnique,stech:this._SurfaceApproximationTechnique};this._funcs={},Object.keys(i).forEach(function(e){t._funcs[e]=i[e].bind(t)})}return a(e,[{key:"_getTokens",value:function(e){return e.split(" ").filter(function(e){return""!==e}).map(function(e){return e.trim()})}},{key:"_loadObjFile",value:function(){var e=this;console.error("_loadObjFile");this._scene=new w.default,this._node=new b.default,this._currentNode=new b.default,this._scene.rootNode.addChildNode(this._node),this._vertexArray=[new k.default(0,0,0)],this._normalArray=[new k.default(0,0,0)],this._texcoordArray=[new l.default(0,0)],this._materialPromise=Promise.resolve(),this._materialMap={},this._skinArray=[],this._indexArrayMap=i({},"_SCNObjLoader.default",[]),this._currentMtlName="_SCNObjLoader.default",this._currentIndexArray=this._indexArrayMap["_SCNObjLoader.default"],this._currentGroupName="default",this._vertexSource=null,this._elementArray=[];var t=this._reader.readLine();for(this._break=!1;!this._break&&null!==t;){var n=this._getTokens(t);if(0!==n.length){var r=this._funcs[n[0]];if(void 0===r)throw new Error("_SCNObjLoader unknown type: "+n[0]);r(n),t=this._reader.readLine()}else t=this._reader.readLine()}var o=this._materialPromise.then(function(t){for(var n=t.length,r=n-1;r>=0;r--)!function(n){var r=t[n];Object.keys(r).forEach(function(t){e._materialMap[t]=r[t]})}(r);e._createGeometry()});return this._node._loadedPromise=o,this._scene}},{key:"_createGeometry",value:function(){for(var e=this,t=this._skinArray.length,n=[],r=[],i=[],o=0;o<t;o++){var a=this._skinArray[o],u=null,l=null,s=null;a&&(u=this._vertexArray[a.vertex],l=this._texcoordArray[a.texcoord],s=this._normalArray[a.normal]),u?n.push(u.x,u.y,u.z):n.push(0,0,0),l?r.push(l.x,l.y):r.push(0,0),s?i.push(s.x,s.y,s.z):i.push(0,0,0)}var f=new y.default(n,y.default.Semantic.vertex,t,!0,3,4,0,12),d=new y.default(i,y.default.Semantic.normal,t,!0,3,4,0,12),p=new y.default(r,y.default.Semantic.texcoord,t,!0,2,4,0,8),m=Object.keys(this._indexArrayMap),g=[];m.forEach(function(t){var n=e._indexArrayMap[t],r=n.length/3;if(0!==r){var i=e._materialMap[t]||new v.default,o=new h.default(n,_.default.triangles,r,4);g.push(i),e._elementArray.push(o)}});var S=new c.default([f,d,p],this._elementArray);S.materials=g,S.name="Geometry";var w=new b.default(S);w.name="Geometry",this._node.addChildNode(w)}},{key:"_Comment",value:function(e){}},{key:"_GeometricVertices",value:function(e){var t=new k.default;t.x=parseFloat(e[1]),t.y=parseFloat(e[2]),t.z=parseFloat(e[3]),this._vertexArray.push(t)}},{key:"_TextureVertices",value:function(e){var t=new l.default;t.x=parseFloat(e[1]),t.y=1-parseFloat(e[2]),this._texcoordArray.push(t)}},{key:"_VertexNormals",value:function(e){var t=new k.default;t.x=parseFloat(e[1]),t.y=parseFloat(e[2]),t.z=parseFloat(e[3]),this._normalArray.push(t)}},{key:"_ParameterSpaceVertices",value:function(e){}},{key:"_CurveSurfaceType",value:function(e){}},{key:"_Degree",value:function(e){}},{key:"_BasisMatrix",value:function(e){}},{key:"_StepSize",value:function(e){}},{key:"_Point",value:function(e){}},{key:"_Line",value:function(e){}},{key:"_Face",value:function(e){var t=e.length-3;if(t<=0)throw new Error("numFaces("+t+") <= 0");for(var n=this._getIndexForData(e[1].split("/")),r=null,i=this._getIndexForData(e[2].split("/")),o=0;o<t;o++)r=i,i=this._getIndexForData(e[o+3].split("/")),this._currentIndexArray.push(n,r,i)}},{key:"_getIndexForData",value:function(e){var t=parseInt(e[0]),n=parseInt(e[1])||0,r=parseInt(e[2])||0,i=this._skinArray[t];void 0===i&&(i={index:t,vertex:t,texcoord:n,normal:r,next:null},this._skinArray[t]=i);for(var o=i;i&&(i.texcoord!==n||i.normal!==r);)o=i,i=i.next;if(!i){var a=this._skinArray.length;i={index:a,vertex:t,texcoord:n,normal:r,next:null},this._skinArray[a]=i,o.next=i}return i.index}},{key:"_Curve",value:function(e){}},{key:"_2DCurve",value:function(e){}},{key:"_Surface",value:function(e){}},{key:"_ParameterValues",value:function(e){}},{key:"_OuterTrimmingLoop",value:function(e){}},{key:"_InnerTrimmingLoop",value:function(e){}},{key:"_SpecialCurve",value:function(e){}},{key:"_SpecialPoint",value:function(e){}},{key:"_EndStatement",value:function(e){this._break=!0}},{key:"_Connect",value:function(e){}},{key:"_GroupName",value:function(e){if(e.length<=1)throw new Error("group name format error");e.shift(),this._currentGroupName=e.join(" ")}},{key:"_SmoothingGroup",value:function(e){}},{key:"_MergingGroup",value:function(e){}},{key:"_ObjectName",value:function(e){}},{key:"_BevelInterpolation",value:function(e){}},{key:"_ColorInterpolation",value:function(e){}},{key:"_DissolveInterpolation",value:function(e){}},{key:"_LevelOfDetail",value:function(e){}},{key:"_MaterialName",value:function(e){e.shift(),this._currentMtlName=e.join(" "),this._currentIndexArray=this._indexArrayMap[this._currentMtlName],void 0===this._currentIndexArray&&(this._currentIndexArray=[],this._indexArrayMap[this._currentMtlName]=this._currentIndexArray)}},{key:"_MaterialLibrary",value:function(e){for(var t=this,n=[],r=1;r<e.length;r++)!function(r){var i=t._filePath+e[r],o=i.substring(0,i.lastIndexOf("/")+1),a=P.default.get(i).then(function(e){return console.log("mtl data: "+e),O.default.unarchiveObjectWithData(e,o)});n.push(a)}(r);this._materialPromise=Promise.all(n)}},{key:"_ShadowCasting",value:function(e){}},{key:"_RayTracing",value:function(e){}},{key:"_CurveApproximationTechnique",value:function(e){}},{key:"_SurfaceApproximationTechnique",value:function(e){}}],[{key:"unarchiveObjectWithData",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=new e(t);return r._filePath=n,r._loadObjFile()}},{key:"unarchiveObjectWithFile",value:function(t){return e._getBufferOfFile(t).then(function(n){return e.unarchiveObjectWithData(n,t)})}},{key:"_getBufferOfFile",value:function(e){return new Promise(function(t,n){var r=new x.default([],e),i=new N.default;i.onload=function(){var e=i.result;t(e)},i.onerror=function(){n(i.error)},i.readAsText(r)})}}]),e}();t.default=D},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(167),u=r(a),l=n(8),s=r(l),c=n(2),f=r(c),h=n(24),d=r(h),_=n(26),p=r(_),y=n(40),m=r(y),v=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,e),this._filePath=r,this._reader=null,null!==n&&(this._reader=new m.default(n,"utf-8")),this._node=null;var o={"#":this._Comment,newmtl:this._Material,Ka:this._Ambient,Kd:this._Diffuse,Ks:this._Specular,Tf:this._TransmissionFilter,illum:this._Illumination,d:this._Dissolve,Ns:this._Exponent,sharpness:this._Sharpness,Ni:this._Density,map_Ka:this._AmbientTexture,map_Kd:this._DiffuseTexture,map_Ks:this._SpecularTexture,map_Ns:this._ExponentTexture,map_d:this._DissolveTexture,map_aat:this._AntiAliasingTexture,decal:this._Decal,disp:this._Roughness,bump:this._Bump,refl:this._Reflection,Ke:this._Emission,map_Ke:this._EmissionTexture};this._funcs={},Object.keys(o).forEach(function(e){t._funcs[e]=o[e].bind(t)})}return o(e,[{key:"_getTokens",value:function(e){return e.split(" ").filter(function(e){return""!==e}).map(function(e){return e.trim()})}},{key:"_loadTexture",value:function(e){var t=this;return new Promise(function(n,r){var i=t._filePath+e;if(console.log("obj texture path: "+i),i.endsWith("tga")){var o=u.default.imageWithURL(i);o.didLoad.then(function(){n(o.image)})}else{var a=new Image;a.crossOrigin="anonymous",a.onload=function(){n(a)},a.onerror=function(){r(new Error("image "+i+" load error"))},a.src=i}})}},{key:"_loadMtlFile",value:function(){console.warn("_loadMtlFile"),this._materials={},this._workingMaterial=null,this._promises=[];var e=this._reader.readLine();for(this._break=!1;!this._break&&null!==e;){var t=this._getTokens(e);if(0!==t.lengt){var n=this._funcs[t[0]];if(void 0===n)throw new Error("_SCNMtlLoader unknown type: "+t[0]);n(t),e=this._reader.readLine()}else e=this._reader.readLine()}return this._materials}},{key:"_Material",value:function(e){e.shift();var t=e.join(" "),n=new s.default;this._materials[t]=n,this._workingMaterial=n}},{key:"_Comment",value:function(e){}},{key:"_Comment",value:function(e){}},{key:"_Ambient",value:function(e){if("spectral"===e[1]);else if("xyz"===e[1]);else{var t=parseFloat(e[1]),n=parseFloat(e[2]),r=parseFloat(e[3]);this._workingMaterial.ambient.contents=new f.default(t,n,r,1)}}},{key:"_Diffuse",value:function(e){var t=parseFloat(e[1]),n=parseFloat(e[2]),r=parseFloat(e[3]);this._workingMaterial.diffuse.contents=new f.default(t,n,r,1)}},{key:"_Specular",value:function(e){var t=parseFloat(e[1]),n=parseFloat(e[2]),r=parseFloat(e[3]);this._workingMaterial.specular.contents=new f.default(t,n,r,1)}},{key:"_TransmissionFilter",value:function(e){}},{key:"_Illumination",value:function(e){}},{key:"_Dissolve",value:function(e){var t=parseFloat(e[1]);this._workingMaterial.multiply.contents=new f.default(t,t,t,1)}},{key:"_Exponent",value:function(e){this._workingMaterial.shininess=parseFloat(e[1])}},{key:"_Sharpness",value:function(e){}},{key:"_Density",value:function(e){}},{key:"_AmbientTexture",value:function(e){}},{key:"_DiffuseTexture",value:function(e){var t=this._workingMaterial;this._loadTexture(e[1]).then(function(e){t.diffuse.contents=e})}},{key:"_SpecularTexture",value:function(e){}},{key:"_ExponentTexture",value:function(e){}},{key:"_DissolveTexture",value:function(e){}},{key:"_AntiAliasingTexture",value:function(e){}},{key:"_Decal",value:function(e){}},{key:"_Roughness",value:function(e){}},{key:"_Bump",value:function(e){}},{key:"_Reflection",value:function(e){}},{key:"_Emission",value:function(e){var t=parseFloat(e[1]),n=parseFloat(e[2]),r=parseFloat(e[3]);this._workingMaterial.emission.contents=new f.default(t,n,r,1)}},{key:"_EmissionTexture",value:function(e){}}],[{key:"unarchiveObjectWithData",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=new e(t);return r._filePath=n,r._loadMtlFile()}},{key:"unarchiveObjectWithFile",value:function(t){return e._getBufferOfFile(t).then(function(n){return e.unarchiveObjectWithData(n,t)})}},{key:"_getBufferOfFile",value:function(e){return new Promise(function(t,n){var r=new d.default([],e),i=new p.default;i.onload=function(){var e=i.result;t(e)},i.onerror=function(){n(i.error)},i.readAsText(r)})}}]),e}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="#version 300 es\n  precision mediump float;\n\n  in vec3 v_position;\n\n  layout(location = 0) out vec4 out_depth;\n  //layout(location = 0) out float out_depth;\n\n  void main() {\n    float r = (v_position.z + 1.0) * 0.5;\n    float g = fract(r * 255.0);\n    float b = fract(g * 255.0);\n    float a = fract(b * 255.0);\n    float coef = 1.0 / 255.0;\n\n    r -= g * coef;\n    g -= b * coef;\n    b -= a * coef;\n    out_depth = vec4(r, g, b, a);\n    //out_depth = v_position.z;\n  }\n"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(10),c=r(s),f=n(16),h=r(f),d=n(11),_=r(d),p=n(0),y=r(p),m=n(8),v=r(m),g=n(30),b=r(g),S=n(7),w=r(S),T=n(18),k=r(T),C=n(14),O=r(C),E=n(89),P=r(E),A=n(32),x=r(A),M=n(79),N=r(M),F=n(90),R=r(F),D=n(1),I=r(D),j=n(13),B=r(j),U=n(12),L=r(U),V=n(6),z=r(V),G=n(91),Y=r(G),X=n(48),H=r(X),W=n(2),K=r(W),Z=n(92),q=r(Z),J=n(56),Q=r(J),$=n(81),ee=r($),te=n(94),ne=r(te),re=n(95),ie=r(re),oe=n(96),ae=r(oe),ue=n(87),le=r(ue),se=n(97),ce=r(se),fe=n(82),he=r(fe),de=n(98),_e=r(de),pe=n(99),ye=r(pe),me=n(3),ve=r(me),ge="\n  //float shadow = convDepth(texture(u_shadowTexture__I__, v_directionalShadowTexcoord[__I__].xy / v_directionalShadowTexcoord[__I__].w));\n  //if(v_directionalShadowDepth[__I__].z / v_directionalShadowDepth[__I__].w - 0.0001 > shadow){\n  //  _output.color.rgb += material.diffuse.rgb * light.directionalShadow[__I__].shadowColor.rgb;\n  //}else{\n  //  // diffuse\n  //  vec3 lightVec = normalize(v_light[numLights]);\n  //  float diffuse = clamp(dot(lightVec, _surface.normal), 0.0f, 1.0f);\n  //  _output.color.rgb += light.directionalShadow[__I__].color.rgb * material.diffuse.rgb * diffuse;\n\n  //  // specular\n  //  if(diffuse > 0.0f){\n  //    vec3 halfVec = normalize(lightVec + _surface.view);\n  //    float specular = pow(dot(halfVec, _surface.normal), material.shininess);\n  //    _output.color.rgb += specularColor.rgb * specular;\n  //  }\n  //}\n\n  {\n    float shadow = 0.0;\n    for(int i=0; i<4; i++){\n      float d = convDepth(texture(u_shadowTexture__I__, (v_directionalShadowTexcoord[__I__].xy + poissonDisk[i]/700.0) / v_directionalShadowTexcoord[__I__].w));\n      if(v_directionalShadowDepth[__I__].z / v_directionalShadowDepth[__I__].w - 0.0001 > d){\n        shadow += 0.25;\n      }\n    }\n    //vec3 shadowColor = material.diffuse.rgb * light.directionalShadow[__I__].shadowColor.rgb;\n    vec3 shadowColor = light.directionalShadow[__I__].shadowColor.rgb;\n    // diffuse\n    vec3 lightVec = normalize(v_light[numLights]);\n    float diffuse = clamp(dot(lightVec, _surface.normal), 0.0f, 1.0f);\n    vec3 lightDiffuse = light.directionalShadow[__I__].color.rgb * diffuse;\n    _lightingContribution.diffuse += shadowColor * shadow + lightDiffuse * (1.0 - shadow);\n\n    // specular\n    if(diffuse > 0.0f){\n      vec3 halfVec = normalize(lightVec + _surface.view);\n      float specular = pow(dot(halfVec, _surface.normal), _surface.shininess);\n      // TODO: use intensity\n      _lightingContribution.specular += vec3(specular);\n    }\n    //_output.color.rgb += shadowColor * shadow + lightColor * (1.0 - shadow);\n  }\n\n  numLights += 1;\n",be=15,Se=function(e){function t(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.scene=null,n._nextFrameTime=0,n._context=null,n._backgroundColor=null,n._pointOfView=null,n.autoenablesDefaultLighting=!1,n.isJitteringEnabled=!1,n.showsStatistics=!1,n.debugOptions=null,n._renderingAPI=null,n.sceneTime=0,n._time=0,n.isPlaying=!1,n.loops=!1,n.delegate=null,n._currentRenderCommandEncoder=null,n._device=null,n._commandQueue=null,n._colorPixelFormat=null,n._depthPixelFormat=null,n._stencilPixelFormat=null,n.overlaySKScene=null,n.currentTime=0,n.__defaultProgram=null,n.__defaultPBRProgram=null,n.__defaultParticleProgram=null,n.__defaultHitTestProgram=null,n.__defaultShadowProgram=null,n._location=new Map,n._defaultCameraPosNode=new O.default,n._defaultCameraRotNode=new O.default,n._defaultCameraNode=new O.default,n._defaultCameraNode.name="kSCNFreeViewCameraName";var r=new N.default;r.name="kSCNFreeViewCameraNameCamera",n._defaultCameraNode.camera=r,n._defaultCameraNode.position=new I.default(0,0,be),n._defaultCameraNode._presentation=n._defaultCameraNode.copy(),n._defaultCameraPosNode.addChildNode(n._defaultCameraRotNode),n._defaultCameraPosNode._presentation=n._defaultCameraPosNode.copy(),n._defaultCameraRotNode.addChildNode(n._defaultCameraNode),n._defaultCameraRotNode._presentation=n._defaultCameraRotNode.copy(),n._defaultLightNode=new O.default;var i=new R.default;return i.color=K.default.white,i.type=R.default.LightType.omni,i.position=new I.default(0,10,10),n._defaultLightNode.light=i,n._defaultLightNode._presentation=n._defaultLightNode.copy(),n._viewRect=new h.default(new c.default(0,0),new _.default(0,0)),n._backgroundColor=K.default.white,n.__dummyTexture=null,n._lightNodes={},n._numLights={},n._cameraBuffer=null,n._lightBuffer=null,n._scnLightsBuffer=null,n._fogBuffer=null,n._hitFrameBuffer=null,n._hitDepthBuffer=null,n._hitObjectIDTexture=null,n._hitFaceIDTexture=null,n._hitPositionTexture=null,n._hitNormalTexture=null,n._currentProgram=null,n}return u(t,e),l(t,[{key:"renderAtTimePassDescriptor",value:function(e,t,n,r){}},{key:"render",value:function(){var e=this;if(null===this.context)return void console.error("SCNRenderer.render(): context is null");var t=this.context;if(null!==this.scene){this._lightNodes=this._createLightNodeArray();var n=this._defaultProgram,r=n._getGLProgramForContext(t);t.clearColor(this._backgroundColor.red,this._backgroundColor.green,this._backgroundColor.blue,this._backgroundColor.alpha),t.clearDepth(1),t.clearStencil(0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._useProgram(n),t.depthFunc(t.LEQUAL),t.depthMask(!0),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),null===this._cameraBuffer&&this._initializeCameraBuffer(r);var o=[],a=this._getCameraNode();a._updateWorldTransform();var u=a.presentation||a,l=u.camera;l._updateProjectionTransform(this._viewRect),o.push.apply(o,i(u.worldTransform.getTranslation().floatArray()).concat([0])),o.push.apply(o,i(u.viewTransform.floatArray())),o.push.apply(o,i(u.inverseViewTransform.floatArray())),o.push.apply(o,i(u.viewProjectionTransform.floatArray())),t.bindBuffer(t.UNIFORM_BUFFER,this._cameraBuffer),t.bufferData(t.UNIFORM_BUFFER,new Float32Array(o),t.DYNAMIC_DRAW),t.bindBuffer(t.UNIFORM_BUFFER,null),null===this._fogBuffer&&this._initializeFogBuffer(r);var s=[];null!==this.scene.fogColor&&0!==this.scene.fogEndDistance?s.push.apply(s,i(this.scene.fogColor.floatArray()).concat([this.scene.fogStartDistance,this.scene.fogEndDistance,this.scene.fogDensityExponent,0])):s.push(0,0,0,0,2*l.zFar,2*l.zFar+1,1,0),t.bindBuffer(t.UNIFORM_BUFFER,this._fogBuffer),t.bufferData(t.UNIFORM_BUFFER,new Float32Array(s),t.DYNAMIC_DRAW),t.bindBuffer(t.UNIFORM_BUFFER,null),null===this._lightBuffer&&this._initializeLightBuffer(r);var c=this._lightNodes,f=[];c.ambient.forEach(function(e){f.push.apply(f,i(e.presentation.light.color.float32Array()))}),c.directional.forEach(function(e){var t=new I.default(0,0,-1).rotateWithQuaternion(e.presentation._worldOrientation);f.push.apply(f,i(e.presentation.light.color.float32Array()).concat(i(t.float32Array()),[0]))}),c.directionalShadow.forEach(function(e){var t=new I.default(0,0,-1).rotateWithQuaternion(e.presentation._worldOrientation);e.presentation.light._updateProjectionTransform(),f.push.apply(f,i(e.presentation.light.color.float32Array()).concat(i(t.float32Array()),[0],i(e.presentation.light.shadowColor.float32Array()),i(e.presentation.lightViewProjectionTransform.float32Array()),i(e.presentation.shadowProjectionTransform.float32Array())))}),c.omni.forEach(function(e){f.push.apply(f,i(e.presentation.light.color.float32Array()).concat(i(e.presentation._worldTranslation.float32Array()),[0]))}),c.probe.forEach(function(e){f.push.apply(f,i(e.presentation.light.color.float32Array()))}),c.spot.forEach(function(e){f.push.apply(f,i(e.presentation.light.color.float32Array()))}),t.bindBuffer(t.UNIFORM_BUFFER,this._lightBuffer),t.bufferData(t.UNIFORM_BUFFER,new Float32Array(f),t.DYNAMIC_DRAW),t.bindBuffer(t.UNIFORM_BUFFER,null);var h=[];if(c.directionalShadow.length>0){var d=c.directionalShadow[0].presentation,_=new I.default(0,0,-1).rotateWithQuaternion(d._worldOrientation);h.push.apply(h,i(_.float32Array()).concat([0])),h.push.apply(h,i(d.shadowProjectionTransform.float32Array()))}else h.push(0,0,0,0),h.push(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);if(t.bindBuffer(t.UNIFORM_BUFFER,this._scnLightsBuffer),t.bufferData(t.UNIFORM_BUFFER,new Float32Array(h),t.DYNAMIC_DRAW),t.bindBuffer(t.UNIFORM_BUFFER,null),null!==this.scene.background._contents){var p=this.scene._skyBox;p.position=u._worldTranslation;var y=1.154*l.zFar;p.scale=new I.default(y,y,y),p._updateWorldTransform();var m=s.slice(0);m[4]=2*l.zFar,m[5]=2.1*l.zFar,m[6]=1,t.bindBuffer(t.UNIFORM_BUFFER,this._fogBuffer),t.bufferData(t.UNIFORM_BUFFER,new Float32Array(m),t.DYNAMIC_DRAW),t.bindBuffer(t.UNIFORM_BUFFER,null),this._renderNode(p),t.bindBuffer(t.UNIFORM_BUFFER,this._fogBuffer),t.bufferData(t.UNIFORM_BUFFER,new Float32Array(s),t.DYNAMIC_DRAW),t.bindBuffer(t.UNIFORM_BUFFER,null)}this._useProgram(this._defaultShadowProgram),t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL),t.clearDepth(1),t.clearColor(1,1,1,1),t.disable(t.BLEND);var v=this._createShadowNodeArray(),g=!0,b=!1,S=void 0;try{for(var w,T=Object.keys(c)[Symbol.iterator]();!(g=(w=T.next()).done);g=!0){var k=w.value,C=!0,O=!1,E=void 0;try{for(var P,A=c[k][Symbol.iterator]();!(C=(P=A.next()).done);C=!0){var x=P.value;this._renderNodesShadowOfLight(v,x)}}catch(e){O=!0,E=e}finally{try{!C&&A.return&&A.return()}finally{if(O)throw E}}}}catch(e){b=!0,S=e}finally{try{!g&&T.return&&T.return()}finally{if(b)throw S}}this._setViewPort(),this._useProgram(n);for(var M=0;M<c.directionalShadow.length;M++){var N=c.directionalShadow[M],F="TEXTURE"+(M+8);t.activeTexture(t[F]),t.bindTexture(t.TEXTURE_2D,N.presentation.light._shadowDepthTexture)}t.enable(t.BLEND);this._createRenderingNodeArray().forEach(function(t){e._renderNode(t)});var R=this._defaultParticleProgram._glProgram;if(this._useProgram(this._defaultParticleProgram),t.depthMask(!1),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE),t.uniformMatrix4fv(t.getUniformLocation(R,"viewTransform"),!1,u.viewTransform.float32Array()),t.uniformMatrix4fv(t.getUniformLocation(R,"projectionTransform"),!1,u.projectionTransform.float32Array()),null!==this.scene._particleSystems){var D=!0,j=!1,B=void 0;try{for(var U,L=this.scene._particleSystems[Symbol.iterator]();!(D=(U=L.next()).done);D=!0){var V=U.value;this._renderParticleSystem(V)}}catch(e){j=!0,B=e}finally{try{!D&&L.return&&L.return()}finally{if(j)throw B}}}this._createParticleNodeArray().forEach(function(t){e._renderParticle(t)}),this._renderOverlaySKScene(),t.flush()}else if(this.overlaySKScene){var z=this.overlaySKScene;t.clearColor(z.backgroundColor.red,z.backgroundColor.green,z.backgroundColor.blue,z.backgroundColor.alpha),t.clear(t.COLOR_BUFFER_BIT),this._renderOverlaySKScene()}}},{key:"_renderOverlaySKScene",value:function(){if(null!==this.overlaySKScene){var e=this.context;e.disable(e.CULL_FACE),e.enable(e.DEPTH_TEST),e.depthFunc(e.GEQUAL),e.enable(e.BLEND),e.depthMask(!0),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.clearStencil(0),e.clearDepth(-1),e.clear(e.DEPTH_BUFFER_BIT|e.STENCIL_BUFFER_BIT);var t=this._createSKNodeArray(),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;this._renderSKNode(u)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}}},{key:"_getCameraNode",value:function(){var e=this._pointOfView;return null===e&&(e=this._searchCameraNode(),this._pointOfView=e,null===e&&(e=this._defaultCameraNode)),e===this._defaultCameraNode&&this._defaultCameraPosNode._updateWorldTransform(),e}},{key:"_createShadowNodeArray",value:function(){for(var e=[this.scene._rootNode],t=[];e.length>0;){var n=e.shift();null!==n.presentation&&null!==n.presentation.geometry&&n.presentation.castsShadow&&n.presentation._worldOpacity>0&&!n.presentation.isHidden&&t.push(n),e.push.apply(e,i(n.childNodes))}return t}},{key:"_createRenderingNodeArray",value:function(){for(var e=[this.scene._rootNode],t=[];e.length>0;){var n=e.shift();null!==n.presentation&&null!==n.presentation.geometry&&t.push(n),e.push.apply(e,i(n.childNodes))}return t.sort(function(e,t){return e.presentation.renderingOrder-t.presentation.renderingOrder+.5*(t.presentation._worldOpacity-e.presentation._worldOpacity)}),t}},{key:"_createParticleNodeArray",value:function(){for(var e=[this.scene._rootNode],t=[];e.length>0;){var n=e.shift();null!==n.presentation&&null!==n.presentation.particleSystems&&t.push(n),e.push.apply(e,i(n.childNodes))}return t.sort(function(e,t){return e.renderingOrder-t.renderingOrder+.5*(t.opacity-e.opacity)}),t}},{key:"_createLightNodeArray",value:function(){for(var e={ies:[],ambient:[],directional:[],omni:[],probe:[],spot:[],directionalShadow:[]},t=[this.scene.rootNode],n=0;t.length>0;){var r=t.shift();null!==r.presentation&&null!==r.presentation.light&&("directional"===r.presentation.light.type&&r.presentation.light.castsShadow?e.directionalShadow.push(r):e[r.presentation.light.type].push(r),r.presentation.light.type!==R.default.LightType.ambient&&(n+=1)),t.push.apply(t,i(r.childNodes))}return this.autoenablesDefaultLighting&&0===n&&e[this._defaultLightNode.light.type].push(this._defaultLightNode),e}},{key:"_createRenderingPhysicsNodeArray",value:function(){for(var e=[this.scene._rootNode],t=[];e.length>0;){var n=e.shift();null!==n.presentation&&null!==n.presentation.physicsBody&&null!==n.presentation.physicsBody.physicsShape&&t.push(n),e.push.apply(e,i(n.childNodes))}return t.sort(function(e,t){return e.renderingOrder-t.renderingOrder}),t}},{key:"_renderNodesShadowOfLight",value:function(e,t){var n=t.presentation,r=n.light;if(n.castsShadow){this._setViewPort(r._shadowMapWidth,r._shadowMapHeight);var i=this.context,o=this._defaultShadowProgram._getGLProgramForContext(i);i.bindFramebuffer(i.FRAMEBUFFER,r._getDepthBufferForContext(i)),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.uniformMatrix4fv(i.getUniformLocation(o,"viewProjectionTransform"),!1,n.lightViewProjectionTransform.float32Array());var a=!0,u=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var f=s.value,h=f.presentation.geometry,d=h.geometryElements.length;if(0!==d){null===h._shadowVAO&&this._initializeShadowVAO(f,o),f.morpher,null!==f.presentation.skinner?f.presentation.skinner._useGPU?(i.uniform1i(i.getUniformLocation(o,"numSkinningJoints"),f.presentation.skinner.numSkinningJoints),i.uniform4fv(i.getUniformLocation(o,"skinningJoints"),f.presentation.skinner.float32Array())):(i.uniform1i(i.getUniformLocation(o,"numSkinningJoints"),0),i.uniform4fv(i.getUniformLocation(o,"skinningJoints"),(0,k.default)(0,0,0).float32Array3x4f())):(i.uniform1i(i.getUniformLocation(o,"numSkinningJoints"),0),i.uniform4fv(i.getUniformLocation(o,"skinningJoints"),f.presentation._worldTransform.float32Array3x4f()));for(var _=0;_<d;_++){var p=h._shadowVAO[_],y=h.geometryElements[_];i.bindVertexArray(p);var m=null;switch(y.primitiveType){case L.default.triangles:m=i.TRIANGLES;break;case L.default.triangleStrip:m=i.TRIANGLE_STRIP;break;case L.default.line:m=i.LINES;break;case L.default.point:m=i.POINTS;break;case L.default.polygon:m=i.TRIANGLE_FAN;break;default:throw new Error("unsupported primitiveType: "+y.primitiveType)}var v=null;switch(y.bytesPerIndex){case 1:v=i.UNSIGNED_BYTE;break;case 2:v=i.UNSIGNED_SHORT;break;case 4:v=i.UNSIGNED_INT;break;default:throw new Error("unsupported index size: "+y.bytesPerIndex)}i.drawElements(m,y._glData.length,v,0)}}}}catch(e){u=!0,l=e}finally{try{!a&&c.return&&c.return()}finally{if(u)throw l}}i.bindFramebuffer(i.FRAMEBUFFER,null)}}},{key:"_renderNode",value:function(e){if(!(e.presentation.isHidden||e.presentation._worldOpacity<=0)){var t=this.context,n=e.presentation.geometry,r=n.geometryElements.length;if(0!==r){var i=this._getProgramForGeometry(n),o=i._getGLProgramForContext(t);this._switchProgram(i),null===n._vertexArrayObjects&&(this._initializeVAO(e,o),this._initializeUBO(e,o)),(null!==e.morpher||e.skinner&&!e.skinner._useGPU)&&this._updateVAO(e),t.uniformMatrix4fv(t.getUniformLocation(o,"modelTransform"),!1,e._worldTransform.float32Array()),null!==e.presentation.skinner?e.presentation.skinner._useGPU?(t.uniform1i(t.getUniformLocation(o,"numSkinningJoints"),e.presentation.skinner.numSkinningJoints),t.uniform4fv(t.getUniformLocation(o,"skinningJoints"),e.presentation.skinner.float32Array())):(t.uniform1i(t.getUniformLocation(o,"numSkinningJoints"),0),t.uniform4fv(t.getUniformLocation(o,"skinningJoints"),(0,k.default)(0,0,0).float32Array3x4f())):(t.uniform1i(t.getUniformLocation(o,"numSkinningJoints"),0),t.uniform4fv(t.getUniformLocation(o,"skinningJoints"),e.presentation._worldTransform.float32Array3x4f()));for(var a=0;a<r;a++){var u=n.materials.length,l=n.materials[a%u],s=o;if(l&&(l.program||l.lightingModel===v.default.LightingModel.physicallyBased)){var c=l.program?l.program:this._defaultPBRProgram;this._switchProgram(c),s=c._getGLProgramForContext(t),null!==e.presentation.skinner?e.presentation.skinner._useGPU?(t.uniform1i(t.getUniformLocation(s,"numSkinningJoints"),e.presentation.skinner.numSkinningJoints),t.uniform4fv(t.getUniformLocation(s,"skinningJoints"),e.presentation.skinner.float32Array())):(t.uniform1i(t.getUniformLocation(s,"numSkinningJoints"),0),t.uniform4fv(t.getUniformLocation(s,"skinningJoints"),(0,k.default)(0,0,0).float32Array3x4f())):(t.uniform1i(t.getUniformLocation(s,"numSkinningJoints"),0),t.uniform4fv(t.getUniformLocation(s,"skinningJoints"),e.presentation._worldTransform.float32Array3x4f()));var f=t.getUniformBlockIndex(s,"materialUniform");t.uniformBlockBinding(s,f,1),t.bindBufferBase(t.UNIFORM_BUFFER,1,n._materialBuffer),l._callBindingHandlerForNodeProgramContextRenderer(e,s,t,this)}else this._switchProgram(i),n._callBindingHandlerForNodeProgramContextRenderer(e,o,t,this);var h=n._vertexArrayObjects[a],d=n.geometryElements[a];t.bindVertexArray(h),t.bindBufferBase(t.UNIFORM_BUFFER,1,n._materialBuffer),n._bufferMaterialData(t,s,a,e.presentation._worldOpacity);var _=null;switch(d.primitiveType){case L.default.triangles:_=t.TRIANGLES;break;case L.default.triangleStrip:_=t.TRIANGLE_STRIP;break;case L.default.line:_=t.LINES;break;case L.default.point:_=t.POINTS;break;case L.default.polygon:_=t.TRIANGLE_FAN;break;default:throw new Error("unsupported primitiveType: "+d.primitiveType)}var p=null;switch(d.bytesPerIndex){case 1:p=t.UNSIGNED_BYTE;break;case 2:p=t.UNSIGNED_SHORT;break;case 4:p=t.UNSIGNED_INT;break;default:throw new Error("unsupported index size: "+d.bytesPerIndex)}t.drawElements(_,d._glData.length,p,0)}}}}},{key:"_renderParticle",value:function(e){var t=this;if(!e.presentation.isHidden){e.particleSystems.forEach(function(n){t._renderParticleSystem(n,e)})}}},{key:"_renderParticleSystem",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.context,r=this._defaultParticleProgram;null!==e._program&&(r=e._program);var i=r._getGLProgramForContext(n);if(this._useProgram(r),n.disable(n.CULL_FACE),null===e._vertexBuffer&&e._initializeVAO(n,i),n.bindVertexArray(e._vertexArray),e._bufferMaterialData(n,i),t)n.uniformMatrix4fv(n.getUniformLocation(i,"modelTransform"),!1,t._worldTransform.float32Array());else{var o=(0,k.default)(0,0,0);n.uniformMatrix4fv(n.getUniformLocation(i,"modelTransform"),!1,o.float32Array())}n.drawElements(n.TRIANGLES,6*e._particles.length,e._glIndexSize,0)}},{key:"_renderNodeForHitTest",value:function(e,t,n){var r=this.context,i=e.presentation.geometry,o=this._defaultHitTestProgram._getGLProgramForContext(r),a=i.geometryElements.length;if(0!==a&&null!==i._vertexArrayObjects){null===i._hitTestVAO&&this._initializeHitTestVAO(e,o),r.uniform1i(r.getUniformLocation(o,"objectID"),t),null!==e.presentation.skinner&&e.presentation.skinner._useGPU?e.presentation.skinner._useGPU?(r.uniform1i(r.getUniformLocation(o,"numSkinningJoints"),e.presentation.skinner.numSkinningJoints),r.uniform4fv(r.getUniformLocation(o,"skinningJoints"),e.presentation.skinner.float32Array())):(r.uniform1i(r.getUniformLocation(o,"numSkinningJoints"),0),r.uniform4fv(r.getUniformLocation(o,"skinningJoints"),(0,k.default)(0,0,0).float32Array3x4f())):(r.uniform1i(r.getUniformLocation(o,"numSkinningJoints"),0),r.uniform4fv(r.getUniformLocation(o,"skinningJoints"),e.presentation._worldTransform.float32Array3x4f()));for(var u=0;u<a;u++){var l=i._hitTestVAO[u],s=i.geometryElements[u];r.bindVertexArray(l),r.uniform1i(r.getUniformLocation(o,"geometryID"),u);var c=null;switch(s.primitiveType){case L.default.triangles:c=r.TRIANGLES;break;case L.default.triangleStrip:c=r.TRIANGLE_STRIP;break;case L.default.line:c=r.LINES;break;case L.default.point:c=r.POINTS;break;case L.default.polygon:c=r.TRIANGLE_FAN;break;default:throw new Error("unsupported primitiveType: "+s.primitiveType)}var f=null;switch(s.bytesPerIndex){case 1:f=r.UNSIGNED_BYTE;break;case 2:f=r.UNSIGNED_SHORT;break;case 4:f=r.UNSIGNED_INT;break;default:throw new Error("unsupported index size: "+s.bytesPerIndex)}r.drawElements(c,s._glData.length,f,0)}}}},{key:"_renderPhysicsNodeForHitTest",value:function(e,t,n){var r=this.context,i=e.presentation,o=i.physicsBody,a=o.physicsShape._sourceGeometry,u=a.geometryElements.length;if(0!==u){var l=this._defaultHitTestProgram._getGLProgramForContext(r);null===a._vertexBuffer&&a._createVertexBuffer(r,e,!1,a),null===a._hitTestVAO&&this._initializeHitTestVAO(e,l,!0),r.uniform1i(r.getUniformLocation(l,"objectID"),t),null!==e.presentation.skinner&&e.presentation.skinner._useGPU?e.presentation.skinner._useGPU?(r.uniform1i(r.getUniformLocation(l,"numSkinningJoints"),e.presentation.skinner.numSkinningJoints),r.uniform4fv(r.getUniformLocation(l,"skinningJoints"),e.presentation.skinner.float32Array())):(r.uniform1i(r.getUniformLocation(l,"numSkinningJoints"),0),r.uniform4fv(r.getUniformLocation(l,"skinningJoints"),(0,k.default)(0,0,0).float32Array3x4f())):(r.uniform1i(r.getUniformLocation(l,"numSkinningJoints"),0),r.uniform4fv(r.getUniformLocation(l,"skinningJoints"),e.presentation._worldTransform.float32Array3x4f()));for(var s=0;s<u;s++){var c=a._hitTestVAO[s],f=a.geometryElements[s];r.bindVertexArray(c),r.uniform1i(r.getUniformLocation(l,"geometryID"),s);var h=null;switch(f.primitiveType){case L.default.triangles:h=r.TRIANGLES;break;case L.default.triangleStrip:h=r.TRIANGLE_STRIP;break;case L.default.line:h=r.LINES;break;case L.default.point:h=r.POINTS;break;case L.default.polygon:h=r.TRIANGLE_FAN;break;default:throw new Error("unsupported primitiveType: "+f.primitiveType)}var d=null;switch(f.bytesPerIndex){case 1:d=r.UNSIGNED_BYTE;break;case 2:d=r.UNSIGNED_SHORT;break;case 4:d=r.UNSIGNED_INT;break;default:throw new Error("unsupported index size: "+f.bytesPerIndex)}r.drawElements(h,f._glData.length,d,0)}}}},{key:"_createSKNodeArray",value:function(){if(null===this.overlaySKScene)return[];for(var e=[this.overlaySKScene],t=[];e.length>0;){var n=e.shift();t.push(n),e.push.apply(e,i(n.children))}return t}},{key:"_renderSKNode",value:function(e){e._render(this.context,this._viewRect)}},{key:"renderAtTime",value:function(e){}},{key:"snapshotAtTimeWith",value:function(e,t,n){return null}},{key:"updateProbesAtTime",value:function(e,t){}},{key:"presentWithIncomingPointOfView",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3]}},{key:"prepareShouldAbortBlock",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!1}},{key:"prepare",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"hitTest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===this.scene)return[];var n=new Map;t instanceof Map?n=t:Array.isArray(t)&&(n=new Map(t));var r=this._getCameraNode();r.camera._updateProjectionTransform(this._viewRect);var i=new I.default(e.x,e.y,0),o=new I.default(e.x,e.y,1);return this._hitTestByCPU(r.viewProjectionTransform,i,o,n)}},{key:"_initializeHitFrameBuffer",value:function(){var e=this.context,t=this._viewRect.size.width,n=this._viewRect.size.height;this._hitFrameBuffer=e.createFramebuffer(),this._hitDepthBuffer=e.createRenderbuffer(),e.bindFramebuffer(e.FRAMEBUFFER,this._hitFrameBuffer),e.bindRenderbuffer(e.RENDERBUFFER,this._hitDepthBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t,n),this._hitObjectIDTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._hitObjectIDTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),this._hitFaceIDTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._hitFaceIDTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),this._hitPositionTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._hitPositionTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),this._hitNormalTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this._hitNormalTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this._hitDepthBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this._hitObjectIDTexture,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT1,e.TEXTURE_2D,this._hitFaceIDTexture,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT2,e.TEXTURE_2D,this._hitPositionTexture,0),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT3,e.TEXTURE_2D,this._hitNormalTexture,0),e.drawBuffers([e.COLOR_ATTACHMENT0,e.COLOR_ATTACHMENT1,e.COLOR_ATTACHMENT2,e.COLOR_ATTACHMENT3]),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null)}},{key:"_hitTestByCPU",value:function(e,t,n,r){var o=[],a=e.invert(),u=t.transform(a),l=n.transform(a),s=this._createRenderingNodeArray(),c=r.get(Y.default.categoryBitMask);void 0===c&&(c=-1);var f=!0,h=!1,d=void 0;try{for(var _,p=s[Symbol.iterator]();!(f=(_=p.next()).done);f=!0){var y=_.value;if(y.categoryBitMask&c){var m=x.default._hitTestWithSegmentNode(u,l,y);if(m.length>0){var v=!0,g=!1,b=void 0;try{for(var S,w=m[Symbol.iterator]();!(v=(S=w.next()).done);v=!0){var T=S.value;T._node=y,T._worldCoordinates=y.convertPositionTo(T._localCoordinates,null),T._worldNormal=y.convertPositionTo(T._localNormal,null)}}catch(e){g=!0,b=e}finally{try{!v&&w.return&&w.return()}finally{if(g)throw b}}o.push.apply(o,i(m))}}}}catch(e){h=!0,d=e}finally{try{!f&&p.return&&p.return()}finally{if(h)throw d}}return o}},{key:"_hitTestByGPU",value:function(e,t,n,r){var i=[],o=this._context;null===this._hitFrameBuffer&&this._initializeHitFrameBuffer();var a=this._defaultHitTestProgram,u=a._glProgram;this._useProgram(a),o.bindFramebuffer(o.FRAMEBUFFER,this._hitFrameBuffer),o.depthMask(!0),o.depthFunc(o.LEQUAL),o.enable(o.SCISSOR_TEST),o.disable(o.BLEND),o.clearColor(0,0,0,0),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT);var l=.5*(t.x+1)*this._viewRect.size.width,s=.5*(t.y+1)*this._viewRect.size.height,c=l-1,f=s-1;c<0?c=0:c+3>this._viewRect.size.width&&(c=this._viewRect.size.width-3),f<0?f=0:f+3>this._viewRect.size.height&&(f=this._viewRect.size.width-3),o.scissor(c,f,3,3),o.uniformMatrix4fv(o.getUniformLocation(u,"viewProjectionTransform"),!1,e.float32Array());var h=r.get(Y.default.backFaceCulling);void 0===h&&(h=!0),h?(o.enable(o.CULL_FACE),o.cullFace(o.BACK)):o.disable(o.CULL_FACE);var d=r.get(Y.default.categoryBitMask);void 0===d&&(d=-1);var _=r.get(Y.default.ignoreHiddenNodes);void 0===_&&(_=!0);for(var p=this._createRenderingNodeArray(),y=p.length,m=0;m<y;m++){var v=p[m];0!=(v.categoryBitMask&d)&&(_&&v.isHidden||this._renderNodeForHitTest(v,m+100,r))}var g=new Uint8Array(4);o.readBuffer(o.COLOR_ATTACHMENT0),o.readPixels(l,s,1,1,o.RGBA,o.UNSIGNED_BYTE,g,0);var b=256*g[0]+g[1],S=256*g[2]+g[3],w=new Uint8Array(4);o.readBuffer(o.COLOR_ATTACHMENT1),o.readPixels(l,s,1,1,o.RGBA,o.UNSIGNED_BYTE,w,0);var T=16777216*w[0]+65536*w[1]+256*w[2]+w[3],k=new Uint8Array(4);o.readBuffer(o.COLOR_ATTACHMENT2),o.readPixels(l,s,1,1,o.RGBA,o.UNSIGNED_BYTE,k,0);var C=((k[3]/255+k[2])/255+k[1]/255+k[0])/255,O=t.lerp(n,C),E=new Uint8Array(4);o.readBuffer(o.COLOR_ATTACHMENT3),o.readPixels(l,s,1,1,o.RGBA,o.UNSIGNED_BYTE,E,0);var P=new I.default(E[0]/127.5-1,E[1]/127.5-1,E[2]/127.5-1);if(b>=100){var A=new H.default,x=p[b-100],M=x.presentation._worldTransform.invert();A._node=x,A._geometryIndex=S,A._faceIndex=T,A._worldCoordinates=O,A._worldNormal=P,A._modelTransform=x.presentation._worldTransform,A._localCoordinates=O.transform(M),A._localNormal=P.transform(M),i.push(A)}return o.disable(o.SCISSOR_TEST),o.bindFramebuffer(o.FRAMEBUFFER,null),i}},{key:"_physicsHitTestByGPU",value:function(e,t,n,r){var i=[],o=this._context,a=this._createViewProjectionTransformForRay(e,t),u=e.transform(a),l=t.transform(a);null===this._hitFrameBuffer&&this._initializeHitFrameBuffer();var s=this._defaultHitTestProgram,c=s._glProgram;this._useProgram(s),o.bindFramebuffer(o.FRAMEBUFFER,this._hitFrameBuffer),o.depthMask(!0),o.depthFunc(o.LEQUAL),o.enable(o.SCISSOR_TEST),o.disable(o.BLEND),o.clearColor(0,0,0,0),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT);var f=.5*(u.x+1)*this._viewRect.size.width,h=.5*(u.y+1)*this._viewRect.size.height,d=f-1,_=h-1;d<0?d=0:d+3>this._viewRect.size.width&&(d=this._viewRect.size.width-3),_<0?_=0:_+3>this._viewRect.size.height&&(_=this._viewRect.size.width-3),o.scissor(d,_,3,3),o.uniformMatrix4fv(o.getUniformLocation(c,"viewProjectionTransform"),!1,a.float32Array());var p=n.get(x.default.TestOption.backfaceCulling);void 0===p&&(p=!0),p?(o.enable(o.CULL_FACE),o.cullFace(o.BACK)):o.disable(o.CULL_FACE);var y=n.get(x.default.TestOption.collisionBitMask);void 0===y&&(y=-1);var m=n.get(x.default.TestOption.searchMode);void 0===m&&(m=x.default.TestSearchMode.closest);var v=null;r&&r.targets?(v=r.targets,y=-1):v=this._createRenderingPhysicsNodeArray();for(var g=v.length,b=0;b<g;b++){var S=v[b];0!=(S.physicsBody.categoryBitMask&y)&&this._renderPhysicsNodeForHitTest(S,b+100,n)}var w=new Uint8Array(4);o.readBuffer(o.COLOR_ATTACHMENT0),o.readPixels(f,h,1,1,o.RGBA,o.UNSIGNED_BYTE,w,0);var T=256*w[0]+w[1],k=256*w[2]+w[3],C=new Uint8Array(4);o.readBuffer(o.COLOR_ATTACHMENT1),o.readPixels(f,h,1,1,o.RGBA,o.UNSIGNED_BYTE,C,0);var O=16777216*C[0]+65536*C[1]+256*C[2]+C[3],E=new Uint8Array(4);o.readBuffer(o.COLOR_ATTACHMENT2),o.readPixels(f,h,1,1,o.RGBA,o.UNSIGNED_BYTE,E,0);var P=((E[3]/255+E[2])/255+E[1]/255+E[0])/255,A=u.lerp(l,P),M=A.transform(a.invert()),N=new Uint8Array(4);o.readBuffer(o.COLOR_ATTACHMENT3),o.readPixels(f,h,1,1,o.RGBA,o.UNSIGNED_BYTE,N,0);var F=new I.default(N[0]/127.5-1,N[1]/127.5-1,N[2]/127.5-1);if(T>=100){var R=new H.default,D=v[T-100],j=D.presentation._worldTransform.invert();R._node=D,R._geometryIndex=k,R._faceIndex=O,R._worldCoordinates=M,R._worldNormal=F,R._modelTransform=D.presentation._worldTransform,R._localCoordinates=M.transform(j),R._localNormal=F.transform(j),i.push(R)}return o.disable(o.SCISSOR_TEST),o.bindFramebuffer(o.FRAMEBUFFER,null),i}},{key:"_createViewProjectionTransformForRay",value:function(e,t){var n=t.sub(e),r=n.length(),i=1+r,o=new w.default;o.m11=1,o.m22=1,o.m33=-(i+1)/r,o.m34=-1,o.m43=-2*i*1/r;var a=new w.default,u=new I.default(0,1,0);0===n.x&&0===n.z&&(u.y=0,u.z=1);var l=n.normalize(),s=l.cross(u).normalize(),c=s.cross(l).normalize();a.m11=s.x,a.m21=s.y,a.m31=s.z,a.m12=c.x,a.m22=c.y,a.m32=c.z,a.m13=-l.x,a.m23=-l.y,a.m33=-l.z,a.m44=1;var f=e.sub(l.mul(1)),h=f.transform(a);return a.m41=-h.x,a.m42=-h.y,a.m43=-h.z,a.mult(o)}},{key:"isNodeInsideFrustumOf",value:function(e,t){return!1}},{key:"nodesInsideFrustumOf",value:function(e){return null}},{key:"projectPoint",value:function(e){return null}},{key:"unprojectPoint",value:function(e){return null}},{key:"_setContext",value:function(e){this._context=e,this._createDummyTexture()}},{key:"_getProgramForGeometry",value:function(e){if(null!==e.program&&e.program._programCompiled)return e.program;(e.program||null!==e.shaderModifiers||null!==e._shadableHelper)&&this._compileProgramForObject(e);var t=!0,n=!1,r=void 0;try{for(var i,o=e.materials[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;(a.program||null!==a.shaderModifiers||null!==a._shadableHelper)&&this._compileProgramForObject(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return e.program?e.program:this._defaultProgram}},{key:"_compileProgramForObject",value:function(e){var t=this.context,n=e.program;if(n){if(n._programCompiled)return n}else n=new P.default,e.program=n;n._parentObject=e;var r=n._getGLProgramForContext(t),i=this._vertexShaderForObject(e),o=this._fragmentShaderForObject(e),a=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(a,i),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS)){var u=t.getShaderInfoLog(a);throw new Error("vertex shader compile error: "+u)}n._glVertexShader=a;var l=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(l,o),t.compileShader(l),!t.getShaderParameter(l,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(l);throw new Error("fragment shader compile error: "+s)}if(n._glFragmentShader=l,t.attachShader(r,a),t.attachShader(r,l),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS)){var c=t.getProgramInfoLog(r);throw new Error("program link error: "+c)}return n._programCompiled=!0,n}},{key:"_useProgram",value:function(e){if(this._currentProgram!==e){var t=this.context,n=e._getGLProgramForContext(t);t.useProgram(n),e._setDummyTextureForContext(t),this._currentProgram=e}}},{key:"_switchProgram",value:function(e){if(this._currentProgram!==e){var t=this.context,n=e._getGLProgramForContext(t);t.useProgram(n),e._setDummyTextureForContext(t);for(var r=this._lightNodes,i=0;i<r.directionalShadow.length;i++){var o=r.directionalShadow[i],a="TEXTURE"+(i+8);t.activeTexture(t[a]),t.bindTexture(t.TEXTURE_2D,o.presentation.light._shadowDepthTexture)}var u=t.getUniformBlockIndex(n,"cameraUniform");t.uniformBlockBinding(n,u,0),t.bindBufferBase(t.UNIFORM_BUFFER,0,this._cameraBuffer);var l=t.getUniformBlockIndex(n,"fogUniform");t.uniformBlockBinding(n,l,4),t.bindBufferBase(t.UNIFORM_BUFFER,4,this._fogBuffer);var s=t.getUniformBlockIndex(n,"lightUniform");t.uniformBlockBinding(n,s,2),t.bindBufferBase(t.UNIFORM_BUFFER,2,this._lightBuffer);var c=t.getUniformBlockIndex(n,"SCNLightsUniform");t.uniformBlockBinding(n,c,3),t.bindBufferBase(t.UNIFORM_BUFFER,3,this._scnLightsBuffer);var f=t.getUniformLocation(n,"u_time");if(f){var h=this._time%1e5;t.uniform1f(f,h)}var d=e._parentObject;if(d){var _=16,p=!0,y=!1,m=void 0;try{for(var v,g=Object.keys(d._valuesForUndefinedKeys)[Symbol.iterator]();!(p=(v=g.next()).done);p=!0){var S=v.value,w=t.getUniformLocation(n,S);if(null!==w){var T=d._valuesForUndefinedKeys[S];if("number"==typeof T)t.uniform1f(w,T);else if((0,ve.default)(T,I.default))t.uniform3fv(w,T.float32Array());else if((0,ve.default)(T,B.default)||(0,ve.default)(T,K.default))t.uniform4fv(w,T.float32Array());else if((0,ve.default)(T,b.default)){if(T._contents instanceof Image){var k=T._contents,C=t.createTexture(),O=document.createElement("canvas");O.width=k.naturalWidth,O.height=k.naturalHeight,O.getContext("2d").drawImage(k,0,0),t.bindTexture(t.TEXTURE_2D,C),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,k.width,k.height,0,t.RGBA,t.UNSIGNED_BYTE,O),t.generateMipmap(t.TEXTURE_2D),T._contents=C}T._contents instanceof WebGLTexture&&(t.uniform1i(w,_),t.activeTexture(t["TEXTURE"+_]),t.bindTexture(t.TEXTURE_2D,T._contents),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,T._magnificationFilterFor(t)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,T._minificationFilterFor(t)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,T._wrapSFor(t)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,T._wrapTFor(t))),_+=1}}}}catch(e){y=!0,m=e}finally{try{!p&&g.return&&g.return()}finally{if(y)throw m}}}this._currentProgram=e}}},{key:"_programForGeometry",value:function(e){}},{key:"_vertexShaderForObject",value:function(e){var t=e.program.vertexShader;return t||(t=ee.default),this._replaceTexts(t,e)}},{key:"_fragmentShaderForObject",value:function(e){var t=e.program.fragmentShader;return t||(t=ne.default),this._replaceTexts(t,e)}},{key:"_replaceTexts",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=new Map,r=this._numLights[R.default.LightType.ambient],i=this._numLights[R.default.LightType.directional],o=this._numLights.directionalShadow,a=this._numLights[R.default.LightType.omni],u=this._numLights[R.default.LightType.spot],l=this._numLights[R.default.LightType.IES],s=this._numLights[R.default.LightType.probe],c=t?t._shadableHelper:null,f=t?t._valuesForUndefinedKeys:{},h=t?t.shaderModifiers:null;n.set("__NUM_AMBIENT_LIGHTS__",r),n.set("__NUM_DIRECTIONAL_LIGHTS__",i),n.set("__NUM_DIRECTIONAL_SHADOW_LIGHTS__",o),n.set("__NUM_OMNI_LIGHTS__",a),n.set("__NUM_SPOT_LIGHTS__",u),n.set("__NUM_IES_LIGHTS__",l),n.set("__NUM_PROBE_LIGHTS__",s),n.set("__USE_SHADER_MODIFIER_GEOMETRY__",0),n.set("__SHADER_MODIFIER_GEOMETRY__",""),n.set("__USE_SHADER_MODIFIER_SURFACE__",0),n.set("__SHADER_MODIFIER_SURFACE__",""),n.set("__USE_SHADER_MODIFIER_FRAGMENT__",0),n.set("__SHADER_MODIFIER_FRAGMENT__","");var d="",_="",p="";if(h){var y=!0,m=!1,v=void 0;try{for(var g,S=Object.keys(h)[Symbol.iterator]();!(y=(g=S.next()).done);y=!0){var w=g.value,T=h[w],k=T.split(/^\s*#pragma\s+body\s*$/m);if(1===k.length);else{if(2!==k.length)throw new Error('found multiple "#pragma body" in the shaderModifier');d+=k[0].replace(/^\s*#pragma\s+.*$/gm,"")}}}catch(e){m=!0,v=e}finally{try{!y&&S.return&&S.return()}finally{if(m)throw v}}}else{var C=!0,O=!1,E=void 0;try{for(var P,A=Object.keys(f)[Symbol.iterator]();!(C=(P=A.next()).done);C=!0){var x=P.value,M=f[x];if("number"==typeof M)d+="uniform float "+x+";";else{if(!(0,ve.default)(M,b.default))throw new Error("custom property for "+x+" is not implemented");d+="uniform sampler2D "+x+";",p+="_surface."+x+"Texcoord = v_texcoord"+M.mappingChannel+";",_+="vec2 "+x+"Texcoord;"}}}catch(e){O=!0,E=e}finally{try{!C&&A.return&&A.return()}finally{if(O)throw E}}}n.set("__USER_CUSTOM_UNIFORM__",d),n.set("__USER_CUSTOM_SURFACE__",_),n.set("__USER_CUSTOM_TEXCOORD__",p);var N=null;if(h?N=h:c&&(N=c._shaderModifiers),N){if(N.SCNShaderModifierEntryPointGeometry){var F=this._processShaderText(N.SCNShaderModifierEntryPointGeometry);n.set("__USE_SHADER_MODIFIER_GEOMETRY__",1),n.set("__SHADER_MODIFIER_GEOMETRY__",F)}if(N.SCNShaderModifierEntryPointSurface){var D=this._processShaderText(N.SCNShaderModifierEntryPointSurface);n.set("__USE_SHADER_MODIFIER_SURFACE__",1),n.set("__SHADER_MODIFIER_SURFACE__",D)}if(N.SCNShaderModifierEntryPointFragment){var I=this._processShaderText(N.SCNShaderModifierEntryPointFragment);n.set("__USE_SHADER_MODIFIER_FRAGMENT__",1),n.set("__SHADER_MODIFIER_FRAGMENT__",I)}}var j="";if(o>0)for(var B=0;B<o;B++){var U=ge.replace(new RegExp("__I__","g"),B);j+=U}n.set("__FS_LIGHTING__",j);var L=e;return n.forEach(function(e,t){var n=new RegExp(t,"g");L=L.replace(n,e)}),L}},{key:"_processShaderText",value:function(e){var t=e,n=e.split(/^\s*#pragma\s+body\s*$/m);return 2==n.length&&(t=n[1].replace(/^\s*#pragma\s+.*$/gm,"")),t=t.replace(/texture2D/g,"texture"),t=t.replace(/float2/g,"vec2"),t=t.replace(/float3/g,"vec3"),t=t.replace(/float4/g,"vec4"),t=t.replace(/scn_frame\.time/g,"u_time"),t=t.replace(/half /g,"float "),t=t.replace(/u_modelTransform/g,"modelTransform"),t=t.replace(/u_viewTransform/g,"camera.viewTransform"),t=t.replace(/u_inverseViewTransform/g,"camera.inverseViewTransform"),t=t.replace(/u_viewProjectionTransform/g,"caemra.viewProjectionTransform"),t=t.replace(/\s*uniform[^;]*;/g,""),t=t.replace("uvs.x *= 2","uvs.x *= 2.0"),t=t.replace("tn * 2 - 1","tn * 2.0 - vec3(1)"),t=t.replace("tn2 * 2 - 1","tn2 * 2.0 - vec3(1)"),t=t.replace("pow(_surface.ambientOcclusion,3)","pow(_surface.ambientOcclusion,3.0)"),t=t.replace("pow(AO,5)","pow(AO,5.0)"),t=t.replace("pow(1.-fresnelBasis , 6)","pow(1.-fresnelBasis , 6.0)"),t=t.replace("pow(1.-fresnelBasis , 4)","pow(1.-fresnelBasis , 4.0)"),t=t.replace("vec3(1,0.4,0.0) * 1;","vec3(1,0.4,0.0);"),t=t.replace("vec3(0.6,0.3,0.2) * 1;","vec3(0.6,0.3,0.2);"),t=t.replace("vec4 WorldPos","vec3 WorldPos"),t=t.replace("mult * 5;","mult * 5.0;"),t=t.replace("mask * (1 - feather) + feather / 2","mask * (1.0 - feather) + feather / 2.0"),t=t.replace("vec4 pos = modelTransform * _geometry.position;","vec4 pos = modelTransform * vec4(_geometry.position, 1);"),t=t.replace("cos((u_time * 0.5 + pos.x) * 2)","cos((u_time * 0.5 + pos.x) * 2.0)"),t=t.replace("(WorldPos.x * 10)","(WorldPos.x * 10.0)"),t=t.replace("(WorldPos.z + WorldPos.x) * 3)","(WorldPos.z + WorldPos.x) * 3.0)"),t=t.replace("pow(flowmap, 1.0/2.2)","pow(flowmap, vec2(1.0/2.2))"),t=t.replace(/\(flowmap\/2\)/g,"(flowmap/2.0)")}},{key:"_initializeVAO",value:function(e,t){var n=this.context,r=e.presentation.geometry,i=(e.geometry,r._createVertexBuffer(n,e)),o=n.getAttribLocation(t,"position"),a=n.getAttribLocation(t,"normal"),u=n.getAttribLocation(t,"tangent"),l=n.getAttribLocation(t,"color"),s=n.getAttribLocation(t,"texcoord0"),c=n.getAttribLocation(t,"texcoord1"),f=n.getAttribLocation(t,"boneIndices"),h=n.getAttribLocation(t,"boneWeights");r._vertexArrayObjects=[];for(var d=e.presentation.geometry.geometryElements.length,_=0;_<d;_++){var p=e.presentation.geometry.geometryElements[_],y=(e.presentation.geometry.materials[_],n.createVertexArray());n.bindVertexArray(y),n.bindBuffer(n.ARRAY_BUFFER,i),n.bindAttribLocation(t,o,"position"),n.bindAttribLocation(t,a,"normal"),n.bindAttribLocation(t,u,"tangent"),n.bindAttribLocation(t,l,"color"),n.bindAttribLocation(t,s,"texcoord0"),n.bindAttribLocation(t,c,"texcoord1"),n.bindAttribLocation(t,f,"boneIndices"),n.bindAttribLocation(t,h,"boneWeights");var m=r.getGeometrySourcesForSemantic(z.default.Semantic.vertex)[0];m?(n.enableVertexAttribArray(o),n.vertexAttribPointer(o,m.componentsPerVector,n.FLOAT,!1,m.dataStride,m.dataOffset)):n.disableVertexAttribArray(o);var v=r.getGeometrySourcesForSemantic(z.default.Semantic.normal)[0];v?(n.enableVertexAttribArray(a),n.vertexAttribPointer(a,v.componentsPerVector,n.FLOAT,!1,v.dataStride,v.dataOffset)):n.disableVertexAttribArray(a);var g=r.getGeometrySourcesForSemantic(z.default.Semantic.tangent)[0];g?(n.enableVertexAttribArray(u),n.vertexAttribPointer(u,g.componentsPerVector,n.FLOAT,!1,g.dataStride,g.dataOffset)):n.disableVertexAttribArray(u);var b=r.getGeometrySourcesForSemantic(z.default.Semantic.color)[0];b?(n.enableVertexAttribArray(l),n.vertexAttribPointer(l,b.componentsPerVector,n.FLOAT,!1,b.dataStride,b.dataOffset)):n.disableVertexAttribArray(l);var S=r.getGeometrySourcesForSemantic(z.default.Semantic.texcoord)[0];S?(n.enableVertexAttribArray(s),n.vertexAttribPointer(s,S.componentsPerVector,n.FLOAT,!1,S.dataStride,S.dataOffset)):n.disableVertexAttribArray(s);var w=r.getGeometrySourcesForSemantic(z.default.Semantic.texcoord)[1];w?(n.enableVertexAttribArray(c),n.vertexAttribPointer(c,w.componentsPerVector,n.FLOAT,!1,w.dataStride,w.dataOffset)):n.disableVertexAttribArray(c);var T=e.skinner&&e.skinner._useGPU?e.skinner._boneIndices:null;T?(n.enableVertexAttribArray(f),n.vertexAttribPointer(f,T.componentsPerVector,n.FLOAT,!1,T.dataStride,T.dataOffset)):n.disableVertexAttribArray(f);var k=e.skinner&&e.skinner._useGPU?e.skinner._boneWeights:null;k?(n.enableVertexAttribArray(h),n.vertexAttribPointer(h,k.componentsPerVector,n.FLOAT,!1,k.dataStride,k.dataOffset)):n.disableVertexAttribArray(h),n.disable(n.CULL_FACE);var C=p._createBuffer(n);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,C),r._vertexArrayObjects.push(y)}}},{key:"_initializeShadowVAO",value:function(e,t){var n=this.context,r=e.presentation.geometry,i=(e.geometry,r._createVertexBuffer(n,e)),o=n.getAttribLocation(t,"position"),a=n.getAttribLocation(t,"boneIndices"),u=n.getAttribLocation(t,"boneWeights");r._shadowVAO=[];for(var l=e.presentation.geometry.geometryElements.length,s=0;s<l;s++){var c=e.presentation.geometry.geometryElements[s],f=(e.presentation.geometry.materials[s],n.createVertexArray());n.bindVertexArray(f),n.bindBuffer(n.ARRAY_BUFFER,i),n.bindAttribLocation(t,o,"position"),n.bindAttribLocation(t,a,"boneIndices"),n.bindAttribLocation(t,u,"boneWeights");var h=r.getGeometrySourcesForSemantic(z.default.Semantic.vertex)[0];h?(n.enableVertexAttribArray(o),n.vertexAttribPointer(o,h.componentsPerVector,n.FLOAT,!1,h.dataStride,h.dataOffset)):n.disableVertexAttribArray(o);var d=e.skinner&&e.skinner._useGPU?e.skinner._boneIndices:null;d?(n.enableVertexAttribArray(a),n.vertexAttribPointer(a,d.componentsPerVector,n.FLOAT,!1,d.dataStride,d.dataOffset)):n.disableVertexAttribArray(a);var _=e.skinner&&e.skinner._useGPU?e.skinner._boneWeights:null;_?(n.enableVertexAttribArray(u),n.vertexAttribPointer(u,_.componentsPerVector,n.FLOAT,!1,_.dataStride,_.dataOffset)):n.disableVertexAttribArray(u),n.disable(n.CULL_FACE);var p=c._createBuffer(n);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,p),r._shadowVAO.push(f)}}},{key:"_initializeHitTestVAO",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this.context,i=n?e.physicsBody.physicsShape._sourceGeometry:e.presentation.geometry,o=(n||e.geometry,r.getAttribLocation(t,"position")),a=r.getAttribLocation(t,"normal"),u=r.getAttribLocation(t,"boneIndices"),l=r.getAttribLocation(t,"boneWeights");i._hitTestVAO=[];for(var s=i.geometryElements.length,c=0;c<s;c++){var f=i.geometryElements[c],h=r.createVertexArray();r.bindVertexArray(h),r.bindBuffer(r.ARRAY_BUFFER,i._vertexBuffer),r.bindAttribLocation(t,o,"position"),r.bindAttribLocation(t,a,"normal"),r.bindAttribLocation(t,u,"boneIndices"),r.bindAttribLocation(t,l,"boneWeights");var d=i.getGeometrySourcesForSemantic(z.default.Semantic.vertex)[0];d?(r.enableVertexAttribArray(o),r.vertexAttribPointer(o,d.componentsPerVector,r.FLOAT,!1,d.dataStride,d.dataOffset)):r.disableVertexAttribArray(o);var _=i.getGeometrySourcesForSemantic(z.default.Semantic.normal)[0];_?(r.enableVertexAttribArray(a),r.vertexAttribPointer(a,_.componentsPerVector,r.FLOAT,!1,_.dataStride,_.dataOffset)):r.disableVertexAttribArray(a);var p=e.skinner?e.skinner._boneIndices:null;p?(r.enableVertexAttribArray(u),r.vertexAttribPointer(u,p.componentsPerVector,r.FLOAT,!1,p.dataStride,p.dataOffset)):r.disableVertexAttribArray(u);var y=e.skinner?e.skinner._boneWeights:null;y?(r.enableVertexAttribArray(l),r.vertexAttribPointer(l,y.componentsPerVector,r.FLOAT,!1,y.dataStride,y.dataOffset)):r.disableVertexAttribArray(l);f._createBuffer(r);r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,f._buffer),i._hitTestVAO.push(h)}}},{key:"_initializeCameraBuffer",value:function(e){var t=this.context,n=t.getUniformBlockIndex(e,"cameraUniform");this._cameraBuffer=t.createBuffer(),t.uniformBlockBinding(e,n,0),t.bindBufferBase(t.UNIFORM_BUFFER,0,this._cameraBuffer)}},{key:"_initializeFogBuffer",value:function(e){var t=this.context,n=t.getUniformBlockIndex(e,"fogUniform");this._fogBuffer=t.createBuffer(),t.uniformBlockBinding(e,n,4),t.bindBufferBase(t.UNIFORM_BUFFER,4,this._fogBuffer)}},{key:"_initializeLightBuffer",value:function(e){var t=this.context,n=t.getUniformBlockIndex(e,"lightUniform");this._lightBuffer=t.createBuffer(),t.uniformBlockBinding(e,n,2),t.bindBufferBase(t.UNIFORM_BUFFER,2,this._lightBuffer);var r=t.getUniformBlockIndex(e,"SCNLightsUniform");this._scnLightsBuffer=t.createBuffer(),t.uniformBlockBinding(e,r,3),t.bindBufferBase(t.UNIFORM_BUFFER,3,this._scnLightsBuffer);for(var i=0;i<this._lightNodes.directionalShadow.length;i++){var o=this._lightNodes.directionalShadow[i],a="TEXTURE"+(i+8),u="u_shadowTexture"+i;t.uniform1i(t.getUniformLocation(e,u),i+8),t.activeTexture(t[a]),t.bindTexture(t.TEXTURE_2D,o.presentation.light._shadowDepthTexture)}}},{key:"_initializeUBO",value:function(e,t){var n=this.context,r=e.presentation.geometry,i=n.getUniformBlockIndex(t,"materialUniform");r._materialBuffer=n.createBuffer(),n.uniformBlockBinding(t,i,1),n.bindBufferBase(n.UNIFORM_BUFFER,1,r._materialBuffer)}},{key:"_updateVAO",value:function(e){var t=this.context,n=e.presentation.geometry,r=e.geometry;n._updateVertexBuffer(t,r)}},{key:"_createDummyTexture",value:function(){var e=this.context,t=document.createElement("canvas");t.width=1,t.height=1;var n=t.getContext("2d");n.fillStyle="rgba(255, 255, 255, 1.0)",n.fillRect(0,0,1,1),this.__dummyTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.__dummyTexture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,t),e.bindTexture(e.TEXTURE_2D,null)}},{key:"_switchToDefaultCamera",value:function(){if(null===this._pointOfView)this._defaultCameraPosNode.position=new I.default(0,0,0),this._defaultCameraRotNode.rotation=new B.default(0,0,0,0),this._defaultCameraNode.position=new I.default(0,0,be);else if(this._pointOfView!==this._defaultCameraNode){var e=this.pointOfView.presentation._worldRotation,t=w.default.matrixWithRotation(e),n=this.pointOfView.presentation._worldTranslation;this._defaultCameraPosNode.position=new I.default(0,0,-be).rotate(t).add(n),this._defaultCameraRotNode.rotation=e,this._defaultCameraNode.position=new I.default(0,0,be)}this._pointOfView=this._defaultCameraNode}},{key:"_setDefaultCameraOrientation",value:function(e){this._defaultCameraRotNode.orientation=e}},{key:"_searchCameraNode",value:function(){for(var e=[this.scene._rootNode],t=e.shift();t;){if(null!==t.camera)return t;e.push.apply(e,i(t._childNodes)),t=e.shift()}return null}},{key:"_getCameraPosition",value:function(){if(this._pointOfView===this._defaultCameraNode)return this._defaultCameraPosNode.position;if(null===this._pointOfView)return new I.default(0,0,0);var e=this._getCameraOrientation(),t=w.default.matrixWithRotation(e);return this._pointOfView.presentation._worldTranslation.add(new I.default(0,0,-be).rotate(t))}},{key:"_getCameraOrientation",value:function(){return this._pointOfView===this._defaultCameraNode?this._defaultCameraRotNode.presentation.orientation:null===this._pointOfView?new B.default(0,0,0,0):this._pointOfView.presentation._worldOrientation}},{key:"_getCameraDistance",value:function(){return this._pointOfView===this._defaultCameraNode?this._defaultCameraNode.presentation.position.z:be}},{key:"_numLightsChanged",value:function(){var e=!1,t=[].concat(i(Object.values(R.default.LightType)),["directionalShadow"]),n=!0,r=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=a.value,s=this._lightNodes[l].length;s!==this._numLights[l]&&(e=!0,this._numLights[l]=s)}}catch(e){r=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(r)throw o}}return e}},{key:"_nodeHitTestByCPU",value:function(e,t,n){var r=[],i=e.presentation.geometry,o=i.geometryElements.length;if(0===o)return r;var a=n.mul(-1),u=i.getGeometrySourcesForSemantic(z.default.Semantic.vertex)[0],l=u.vectorCount,s=[],c=e.presentation._worldTransform,f=[];if(e.presentation.skinner){for(var h=e.presentation.skinner,d=h._bones.length,_=0;_<d;_++){var p=h._bones[_],y=h._boneInverseBindTransforms[_].mult(p._presentation._worldTransform);f.push(y)}for(var m=0;m<l;m++){for(var v=h._boneWeights._vectorAt(m),g=h._boneIndices._vectorAt(m),b=new w.default,S=0;S<h.numSkinningJoints;S++)b.add(f[g[S]].mul(v[S]));s.push(u._scnVectorAt(m).transform(b))}}else for(var T=0;T<l;T++)s.push(u._scnVectorAt(T).transform(c));for(var k=0;k<o;k++){var C=i.geometryElements[k];switch(C.primitiveType){case L.default.line:console.warn("hitTest for line is not implemented");continue;case L.default.point:console.warn("hitTest for point is not implemented");continue}for(var O=(C._glData,C.primitiveCount),E=0;E<O;E++){var P=C._indexAt(E),A=s[P[0]],x=s[P[1]],M=s[P[2]],N=x.sub(A),F=M.sub(A),R=this._det(N,F,a);if(!(R<=0)){R=1/R;var D=t.sub(A),I=this._det(D,F,a)*R;if(!(I<0||I>1)){var j=this._det(N,D,a)*R;if(!(j<0||j>1)){var B=this._det(N,F,D)*R;if(!(B<0)){var U=t.add(n.mul(B)),V=c.invert(),G=new H.default;G._node=e,G._geometryIndex=k,G._faceIndex=E,G._worldCoordinates=U,G._localCoordinates=U.transform(V);var Y=N.cross(F);G._worldNormal=Y.normalize(),G._localNormal=Y.transform(V),G._modelTransform=c,G._boneNode=null,r.push(G)}}}}}}return r}},{key:"_setDummyParticleTextureAsDefault",value:function(){for(var e=this.context,t=this._defaultParticleProgram,n=t._getGLProgramForContext(e),r=[e.TEXTURE0],i=["particleTexture"],o=0;o<r.length;o++){var a=r[o],u=i[o];e.uniform1i(e.getUniformLocation(n,u),o),e.activeTexture(a),e.bindTexture(e.TEXTURE_2D,this.__dummyTexture)}}},{key:"_showShadowMapOfLight",value:function(e){var t=this.context,n=e.presentation,r=n.light;if(!this.__debugShadowMapSprite){var i=new q.default;i.size=new _.default(100,100),i.anchorPoint=new c.default(0,0);var o=new Q.default;o._glTexture=r._shadowDepthTexture,o._image={naturalWidth:100,naturalHeight:100},i._texture=o,i.__presentation=i.copy(),i.__presentation._isPresentationInstance=!0,i.position=new c.default(100,100),i._updateWorldTransform(),this.__debugShadowMapSprite=i}t.clearDepth(-1),t.clearStencil(0),t.depthMask(!0),t.enable(t.DEPTH_TEST),t.disable(t.CULL_FACE),t.depthFunc(t.GEQUAL),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.clear(t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._renderSKNode(this.__debugShadowMapSprite)}},{key:"_setViewPort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=e,r=t;null!==n&&null!==r||(n=this._viewRect.size.width,r=this._viewRect.size.height),this.context.viewport(0,0,n,r)}},{key:"_det",value:function(e,t,n){return e.x*t.y*n.z+e.y*t.z*n.x+e.z*t.x*n.y-e.x*t.z*n.y-e.y*t.x*n.z-e.z*t.y*n.x}},{key:"nextFrameTime",get:function(){return this._nextFrameTime}},{key:"pointOfView",get:function(){return this._getCameraNode()},set:function(e){this._pointOfView=e}},{key:"renderingAPI",get:function(){return this._renderingAPI}},{key:"currentRenderCommandEncoder",get:function(){return this._currentRenderCommandEncoder}},{key:"device",get:function(){return this._device}},{key:"commandQueue",get:function(){return this._commandQueue}},{key:"colorPixelFormat",get:function(){return this._colorPixelFormat}},{key:"depthPixelFormat",get:function(){return this._depthPixelFormat}},{key:"stencilPixelFormat",get:function(){return this._stencilPixelFormat}},{key:"context",get:function(){return this._context}},{key:"audioEnvironmentNode",get:function(){return this._audioEnvironmentNode}},{key:"audioEngine",get:function(){return this._audioEngine}},{key:"_defaultProgram",get:function(){var e=this._numLightsChanged();if(null!==this.__defaultProgram&&!e)return this.__defaultProgram;var t=this.context;null===this.__defaultProgram&&(this.__defaultProgram=new P.default);var n=this.__defaultProgram,r=n._getGLProgramForContext(t),i=this._defaultVertexShader,o=this._defaultFragmentShader,a=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(a,i),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS)){var u=t.getShaderInfoLog(a);throw new Error("vertex shader compile error: "+u)}this.__defaultProgram._glVertexShader=a;var l=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(l,o),t.compileShader(l),!t.getShaderParameter(l,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(l);throw new Error("fragment shader compile error: "+s)}if(this.__defaultProgram._glFragmentShader=l,t.attachShader(r,a),t.attachShader(r,l),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS)){var c=t.getProgramInfoLog(r);throw new Error("program link error: "+c)}return this._switchProgram(n),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.enable(t.CULL_FACE),t.cullFace(t.BACK),this.__defaultProgram}},{key:"_defaultPBRProgram",get:function(){var e=this._numLightsChanged();if(null!==this.__defaultPBRProgram&&!e)return this.__defaultPBRProgram;var t=this.context;null===this.__defaultPBRProgram&&(this.__defaultPBRProgram=new P.default);var n=this.__defaultPBRProgram,r=n._getGLProgramForContext(t),i=this._defaultVertexShader,o=this._defaultPBRFragmentShader,a=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(a,i),t.compileShader(a),!t.getShaderParameter(a,t.COMPILE_STATUS)){var u=t.getShaderInfoLog(a);throw new Error("vertex shader compile error: "+u)}this.__defaultPBRProgram._glVertexShader=a;var l=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(l,o),t.compileShader(l),!t.getShaderParameter(l,t.COMPILE_STATUS)){var s=t.getShaderInfoLog(l);throw new Error("fragment shader compile error: "+s)}if(this.__defaultPBRProgram._glFragmentShader=l,t.attachShader(r,a),t.attachShader(r,l),t.linkProgram(r),!t.getProgramParameter(r,t.LINK_STATUS)){var c=t.getProgramInfoLog(r);throw new Error("program link error: "+c)}return this._switchProgram(n),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.enable(t.CULL_FACE),t.cullFace(t.BACK),this.__defaultPBRProgram}},{key:"_defaultVertexShader",get:function(){return this._replaceTexts(ee.default)}},{key:"_defaultFragmentShader",get:function(){return this._replaceTexts(ne.default)}},{key:"_defaultPBRFragmentShader",get:function(){return this._replaceTexts(ie.default)}},{key:"_dummyTexture",get:function(){return this.__dummyTexture}},{key:"_defaultParticleProgram",get:function(){if(null!==this.__defaultParticleProgram)return this.__defaultParticleProgram;var e=this.context;null===this.__defaultParticleProgram&&(this.__defaultParticleProgram=new P.default);var t=this.__defaultParticleProgram,n=t._getGLProgramForContext(e),r=ce.default,i=he.default,o=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(o,r),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var a=e.getShaderInfoLog(o);throw new Error("particle vertex shader compile error: "+a)}var u=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(u,i),e.compileShader(u),!e.getShaderParameter(u,e.COMPILE_STATUS)){var l=e.getShaderInfoLog(u);throw new Error("particle fragment shader compile error: "+l)}if(e.attachShader(n,o),e.attachShader(n,u),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS)){var s=e.getProgramInfoLog(n);throw new Error("program link error: "+s)}return this._useProgram(t),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.enable(e.CULL_FACE),e.cullFace(e.BACK),this._setDummyParticleTextureAsDefault(),this.__defaultParticleProgram}},{key:"_defaultShadowProgram",get:function(){if(null!==this.__defaultShadowProgram)return this.__defaultShadowProgram;var e=this.context;null===this.__defaultShadowProgram&&(this.__defaultShadowProgram=new P.default);var t=this.__defaultShadowProgram,n=t._getGLProgramForContext(e),r=ae.default,i=le.default,o=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(o,r),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var a=e.getShaderInfoLog(o);throw new Error("particle vertex shader compile error: "+a)}var u=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(u,i),e.compileShader(u),!e.getShaderParameter(u,e.COMPILE_STATUS)){var l=e.getShaderInfoLog(u);throw new Error("particle fragment shader compile error: "+l)}if(e.attachShader(n,o),e.attachShader(n,u),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS)){var s=e.getProgramInfoLog(n);throw new Error("program link error: "+s)}return this._useProgram(t),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.disable(e.BLEND),e.enable(e.CULL_FACE),e.cullFace(e.BACK),this.__defaultShadowProgram}},{key:"_defaultHitTestProgram",get:function(){if(null!==this.__defaultHitTestProgram)return this.__defaultHitTestProgram;var e=this.context;null===this.__defaultHitTestProgram&&(this.__defaultHitTestProgram=new P.default);var t=this.__defaultHitTestProgram,n=t._getGLProgramForContext(e),r=_e.default,i=ye.default,o=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(o,r),e.compileShader(o),!e.getShaderParameter(o,e.COMPILE_STATUS)){var a=e.getShaderInfoLog(o);throw new Error("hitTest vertex shader compile error: "+a)}var u=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(u,i),e.compileShader(u),!e.getShaderParameter(u,e.COMPILE_STATUS)){var l=e.getShaderInfoLog(u);throw new Error("hitTest fragment shader compile error: "+l)}if(e.attachShader(n,o),e.attachShader(n,u),e.linkProgram(n),!e.getProgramParameter(n,e.LINK_STATUS)){var s=e.getProgramInfoLog(n);throw new Error("program link error: "+s)}return this._useProgram(t),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA),e.enable(e.CULL_FACE),e.cullFace(e.BACK),this.__defaultHitTestProgram}}]),t}(y.default);t.default=Se},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.vertexShader=null,e.fragmentShader=null,e.geometryShader=null,e.tessellationControlShader=null,e.tessellationEvaluationShader=null,e.delegate=null,e.isOpaque=!1,e.vertexFunctionName=null,e.fragmentFunctionName=null,e.library=null,e._semantics=new Map,e._bufferBindings=[new Map,new Map,new Map],e._programCompiled=!1,e._context=null,e._glProgram=null,e._glVertexShader=null,e._glFragmentShader=null,e._dummyTexture=null,e._dummyCubeMapTexture=null,e._parentObject=null,e}return o(t,e),a(t,[{key:"setSemanticForSymbol",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._semantics.set(t,e)}},{key:"semanticForSymbol",value:function(e){return this._semantics.set(e)}},{key:"handleBindingOfBufferNamedHandler",value:function(e,t,n){this._bufferBindings[t].set(e,n)}},{key:"_getGLProgramForContext",value:function(e){return this._context===e&&this._glProgram?this._glProgram:(this._context=e,this._glProgram=e.createProgram(),this._glProgram)}},{key:"_setDummyTextureForContext",value:function(e){var t=e;this._createDummyTextureForContext(t);for(var n=[t.TEXTURE0,t.TEXTURE1,t.TEXTURE2,t.TEXTURE3,t.TEXTURE4,t.TEXTURE5,t.TEXTURE6,t.TEXTURE7,t.TEXTURE8,t.TEXTURE9,t.TEXTURE10,t.TEXTURE11],r=["u_emissionTexture","u_ambientTexture","u_diffuseTexture","u_specularTexture","u_reflectiveTexture","u_transparentTexture","u_multiplyTexture","u_normalTexture","u_ambientOcclusionTexture","u_selfIlluminationTexture","u_metalnessTexture","u_roughnessTexture"],i=[!1,!1,!1,!1,!0,!1,!1,!1,!1,!1,!1,!1],o=0;o<n.length;o++){var a=n[o],u=r[o],l=t.getUniformLocation(this._glProgram,u);null!==l&&(t.uniform1i(l,o),t.activeTexture(a),i[o]?t.bindTexture(t.TEXTURE_CUBE_MAP,this._dummyCubeMapTexture):t.bindTexture(t.TEXTURE_2D,this._dummyTexture))}}},{key:"_createDummyTextureForContext",value:function(e){if(null===this._dummyTexture){var t=e,n=document.createElement("canvas");n.width=1,n.height=1;var r=n.getContext("2d");r.fillStyle="rgba(255, 255, 255, 1.0)",r.fillRect(0,0,1,1),this._dummyTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._dummyTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,n),t.bindTexture(t.TEXTURE_2D,null),this._dummyCubeMapTexture=t.createTexture();var i=[t.TEXTURE_CUBE_MAP_POSITIVE_Z,t.TEXTURE_CUBE_MAP_POSITIVE_X,t.TEXTURE_CUBE_MAP_NEGATIVE_Z,t.TEXTURE_CUBE_MAP_NEGATIVE_X,t.TEXTURE_CUBE_MAP_NEGATIVE_Y,t.TEXTURE_CUBE_MAP_POSITIVE_Y];t.bindTexture(t.TEXTURE_CUBE_MAP,this._dummyCubeMapTexture);for(var o=0;o<6;o++)t.texImage2D(i[o],0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,n);t.bindTexture(t.TEXTURE_CUBE_MAP,null)}}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(30),f=r(c),h=n(7),d=r(h),_=n(11),p=r(_),y=n(2),m=r(y),v={IES:"ies",ambient:"ambient",directional:"directional",omni:"omni",probe:"probe",spot:"spot"},g=function(e){function t(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.type=v.omni,e.color=new m.default(1,1,1,1),e.temperature=6500,e.intensity=1e3,e.name=null,e.attenuationStartDistance=0,e.attenuationEndDistance=0,e.attenuationFalloffExponent=0,e.spotInnerAngle=0,e.spotOuterAngle=45,e._gobo=new f.default,e.castsShadow=!1,e.shadowRadius=3,e.shadowColor=new m.default(0,0,0,1),e.shadowMapSize=new p.default(0,0),e.shadowSampleCount=0,e.shadowMode=null,e.shadowBias=1,e.orthographicScale=1,e.zFar=100,e.zNear=1,e.categoryBitMask=-1,e.iesProfileURL=null,e._entityID=null,e._context=null,e._shadowFrameBuffer=null,e._shadowDepthBuffer=null,e._shadowDepthTexture=null,e._projectionTransform=null,e.automaticallyAdjustsShadowProjection=!1,e.forcesBackFaceCasters=!1,e.maximumShadowDistance=0,e.sampleDistributedShadowMaps=!1,e.shadowCascadeCount=1,e.shadowCascadeSplittingFactor=1,e}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{type:"string",color:"plist",temperature:"float",intensity:"float",name:"string",attenuationStartDistance:"float",attenuationEndDistance:"float",attenuationFalloffExponent:"float",spotInnerAngle:"float",spotOuterAngle:"float",gobo:["SCNMaterialProperty","_gobo"],castsShadow:"boolean",shadowRadius:"float",shadowColor:"plist",shadowMapSize:"CGSize",shadowSampleCount:"integer",shadowMode:"integer",shadowBias:"float",orthographicScale:"float",zFar:"float",zNear:"float",lightCategoryBitMask:["integer","categoryBitMask"],automaticallyAdjustsShadowProjection:"boolean",forcesBackFaceCasters:"boolean",maximumShadowDistance:"float",sampleDistributedShadowMaps:"boolean",shadowCascadeCount:"integer",shadowCascadeSplittingFactor:"float",entityID:["string","_entityID"],version:["float",null],spotFallOffExponent:["float",null],usesDeferredShadows:["boolean",null],usesModulatedMode:["boolean",null],shouldBakeIndirectLighting:["boolean",null],shouldBakeDirectLighting:["boolean",null],baked:["boolean",null],goboProjectShadows:["boolean",null],shadowSampleCount2:["integer",null],sphericalHarmonics:["NSMutableData",null],autoShadowProjection:["boolean",null]}}}]),u(t,[{key:"attributeForKey",value:function(e){return null}},{key:"setAttributeForKey",value:function(e,t){}},{key:"_getDepthBufferForContext",value:function(e){if(this._shadowFrameBuffer&&this._context===e)return this._shadowFrameBuffer;this._context=e;var t=e,n=this._shadowMapWidth,r=this._shadowMapHeight;return this._shadowFrameBuffer=t.createFramebuffer(),this._shadowDepthBuffer=t.createRenderbuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this._shadowFrameBuffer),t.bindRenderbuffer(t.RENDERBUFFER,this._shadowDepthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,n,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this._shadowDepthBuffer),this._shadowDepthTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this._shadowDepthTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,r,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.generateMipmap(t.TEXTURE_2D),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this._shadowDepthTexture,0),t.drawBuffers([t.COLOR_ATTACHMENT0]),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this._shadowFrameBuffer}},{key:"_updateProjectionTransform",value:function(){var e=new d.default,t=(this._shadowMapWidth,this._shadowMapHeight,this._shadowMapWidth/this._shadowMapHeight);if(this.type===v.directional)e.m11=.1,e.m12=0,e.m13=0,e.m14=0,e.m21=0,e.m22=.1,e.m23=0,e.m24=0,e.m31=0,e.m32=0,e.m33=-2/(this.zFar-this.zNear),e.m34=0,e.m41=0,e.m42=0,e.m43=-(this.zFar+this.zNear)/(this.zFar-this.zNear),e.m44=1;else{var n=1,r=1;if(this.yFov<=0&&this.xFov<=0){var i=1/Math.tan(Math.PI/6);n=i/t,r=i}else if(this.yFov<=0){var o=1/Math.tan(this.xFov*Math.PI/360);n=o,r=o*t}else if(this.xFov<=0){var a=1/Math.tan(this.yFov*Math.PI/360);n=a/t,r=a}else{var u=1/Math.tan(this.yFov*Math.PI/360);n=u/t,r=u}e.m11=n,e.m12=0,e.m13=0,e.m14=0,e.m21=0,e.m22=r,e.m23=0,e.m24=0,e.m31=0,e.m32=0,e.m33=-(this.zFar+this.zNear)/(this.zFar-this.zNear),e.m34=-1,e.m41=0,e.m42=0,e.m43=-2*this.zFar*this.zNear/(this.zFar-this.zNear),e.m44=0}this._projectionTransform=e}},{key:"gobo",get:function(){return this._gobo}},{key:"_shadowMapWidth",get:function(){return this.shadowMapSize.width>0?this.shadowMapSize.width:2048}},{key:"_shadowMapHeight",get:function(){return this.shadowMapSize.height>0?this.shadowMapSize.height:2048}}],[{key:"LightType",get:function(){return v}}]),t}(s.default);t.default=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={backFaceCulling:"kHitTestBackFaceCulling",boundingBoxOnly:"kHitTestBoundingBoxOnly",categoryBitMask:"kHitTestCategoryBitMask",clipToZRange:"kHitTestClipToZRange",firstFoundOnly:"kHitTestFirstFoundOnly",ignoreChildNodes:"kHitTestIgnoreChildNodes",ignoreHiddenNodes:"kHitTestSkipHiddenNode",rootNode:"kHitTestRootNode",sortResults:"kHitTestSortResults"};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(10),c=r(s),f=n(16),h=r(f),d=n(11),_=r(d),p=n(31),y=r(p),m=n(2),v=r(m),g=n(20),b=r(g),S=n(56),w=r(S),T=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;arguments.length>1&&void 0!==arguments[1]&&arguments[1];i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.size=new _.default(0,0),n.anchorPoint=new c.default(.5,.5),n._texture=null,n.centerRect=new h.default(new c.default(0,0),new _.default(1,1)),n.colorBlendFactor=0,n.color=new v.default(1,1,1,0),n.blendMode=y.default.alpha,n.lightingBitMask=0,n.shadowedBitMask=0,n.shadowCastBitMask=0,n.normalTexture=null,n.shader=null,n.attributeValues=new Map,n._customPlaygroundQuickLook=null,n._program=null,n._vertexArrayObject=null,n._vertexBuffer=null,n._indexBuffer=null,n._loadingImagePromise=null,null!==e&&(n.texture=w.default.textureWithImageNamed(e)),n}return a(t,e),u(t,[{key:"scaleTo",value:function(e){}},{key:"setValueForAttribute",value:function(e,t){}},{key:"valueForAttributeNamed",value:function(e){return null}},{key:"initCoder",value:function(e){}},{key:"_render",value:function(e,t){var n=this.__presentation;if(null!==this.texture){if(null===this.texture._glTexture){if(this.texture._createTexture(e),null===this.texture._glTexture)return;this.size=new _.default(this.texture._image.naturalWidth,this.texture._image.naturalHeight),n.size=this.size.copy()}null===this._program&&(this._program=this._createProgram(e));var r=this._program;e.useProgram(r),null===this._vertexArrayObject&&this._createVertexArrayObject(e,r),e.bindVertexArray(this._vertexArrayObject),e.uniform1f(e.getUniformLocation(r,"screenWidth"),t.size.width),e.uniform1f(e.getUniformLocation(r,"screenHeight"),t.size.height),e.uniform1f(e.getUniformLocation(r,"alpha"),n.alpha);var i=this._createVertexData();e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform1i(e.getUniformLocation(r,"spriteTexture"),0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.texture._glTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_BYTE,0)}}},{key:"_createProgram",value:function(e){var t=e.createProgram(),n=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(n,"#version 300 es\n  precision mediump float;\n\n  in vec3 position;\n  in vec2 texcoord;\n\n  uniform float screenWidth;\n  uniform float screenHeight;\n\n  //out vec3 v_position;\n  out vec2 v_texcoord;\n\n  void main() {\n    vec3 pos = position;\n    pos.x = (pos.x * 2.0 / screenWidth) - 1.0;\n    pos.y = (pos.y * 2.0 / screenHeight) - 1.0;\n    v_texcoord = texcoord;\n    gl_Position = vec4(pos, 1.0);\n  }\n"),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){var r=e.getShaderInfoLog(n);throw new Error("SKSpriteNode vertex shader compile error: "+r)}var i=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(i,"#version 300 es\n  precision mediump float;\n\n  uniform sampler2D spriteTexture;\n  uniform float alpha;\n  in vec2 v_texcoord;\n\n  out vec4 outColor;\n\n  void main() {\n    outColor = texture(spriteTexture, v_texcoord);\n    outColor.a *= alpha;\n  }\n"),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(i);throw new Error("particle fragment shader compile error: "+o)}if(e.attachShader(t,n),e.attachShader(t,i),e.linkProgram(t),!e.getProgramParameter(t,e.LINK_STATUS)){var a=e.getProgramInfoLog(t);throw new Error("program link error: "+a)}return t}},{key:"_createVertexArrayObject",value:function(e,t){this._vertexArrayObject=e.createVertexArray(),e.bindVertexArray(this._vertexArrayObject),this._vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer);var n=e.getAttribLocation(t,"position");e.bindAttribLocation(t,n,"position"),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,3,e.FLOAT,!1,20,0);var r=e.getAttribLocation(t,"texcoord");e.bindAttribLocation(t,r,"texcoord"),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,2,e.FLOAT,!1,20,12),this._indexBuffer=e.createBuffer();var i=new Uint8Array([0,3,2,0,1,3]);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,i,e.STATIC_DRAW)}},{key:"_createVertexData",value:function(){var e=this.__presentation,t=e.size.width*e._worldXScale,n=e.size.height*e._worldYScale,r=e._worldPosition,i=e._worldZPosition,o=r.x-e.anchorPoint.x*t,a=r.x+(1-e.anchorPoint.x)*t,u=r.y+(1-e.anchorPoint.y)*n,l=r.y-e.anchorPoint.y*n,s=[o,u,i,e.centerRect.minX,e.centerRect.minY,a,u,i,e.centerRect.maxX,e.centerRect.minY,o,l,i,e.centerRect.minX,e.centerRect.maxY,a,l,i,e.centerRect.maxX,e.centerRect.maxY];return new Float32Array(s)}},{key:"_copyValue",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_copyValue",this).call(this,e),this.size=e.size.copy(),this.anchorPoint=e.anchorPoint.copy(),this._texture=e._texture?e._texture:null,this.centerRect=e.centerRect.copy(),this.colorBlendFactor=e.colorBlendFactor,this.color=e.color.copy(),this.blendMode=e.blendMode,this.lightingBitMask=e.lightingBitMask,this.shadowedBitMask=e.shadowedBitMask,this.shadowCastBitMask=e.shadowCastBitMask,this.normalTexture=e.normalTexture?e.normalTexture:null,this.shader=e.shader,this.attributeValues=e.attributeValues,this._customerPlaygroundQuickLook=e._customerPlaygroundQuickLook}},{key:"_getLoadedPromise",value:function(){return this._loadingImagePromise?this._loadingImagePromise:Promise.resolve()}},{key:"customPlaygroundQuickLook",get:function(){return this._customPlaygroundQuickLook}},{key:"texture",get:function(){return this._texture},set:function(e){var t=this;this._texture=e,this.size=new _.default(0,0),this._frame=new h.default(new c.default(0,0),this.size),this._texture?this._loadingImagePromise=this._texture._loadingImagePromise.then(function(e){if(t._texture===e){t.size=t._texture.size();var n=-t.size.width*t.anchorPoint.x,r=-t.size.height*(1-t.anchorPoint.y);t._frame=new h.default(new c.default(n,r),t.size)}}):this._loadingImagePromise=null}},{key:"didLoad",get:function(){return this._getLoadedPromise()}}],[{key:"nodeWithColorSize",value:function(e,n){var r=new t;return r.size=n,r.color=e,r}},{key:"nodeWithImageNamed",value:function(e){return new t(e)}},{key:"nodeWithImageNamedNormalMapped",value:function(e,n){return new t(e,n)}}]),t}(b.default);t.default=T},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={nearest:0,linear:1};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="#version 300 es\n  precision mediump float;\n  precision highp sampler2DShadow;\n\n  uniform bool[12] textureFlags;\n  #define TEXTURE_EMISSION_INDEX 0\n  #define TEXTURE_AMBIENT_INDEX 1\n  #define TEXTURE_DIFFUSE_INDEX 2\n  #define TEXTURE_SPECULAR_INDEX 3\n  #define TEXTURE_REFLECTIVE_INDEX 4\n  #define TEXTURE_TRANSPARENT_INDEX 5\n  #define TEXTURE_MULTIPLY_INDEX 6\n  #define TEXTURE_NORMAL_INDEX 7\n  #define TEXTURE_AMBIENT_OCCLUSION_INDEX 8\n  #define TEXTURE_SELF_ILLUMINATION_INDEX 9\n  #define TEXTURE_METALNESS_INDEX 10\n  #define TEXTURE_ROUGHNESS_INDEX 11\n\n  uniform bool selfIllumination;\n\n  uniform sampler2D u_emissionTexture;\n  uniform sampler2D u_ambientTexture;\n  uniform sampler2D u_diffuseTexture;\n  uniform sampler2D u_specularTexture;\n  uniform samplerCube u_reflectiveTexture;\n  uniform sampler2D u_transparentTexture;\n  uniform sampler2D u_multiplyTexture;\n  uniform sampler2D u_normalTexture;\n  uniform sampler2D u_ambientOcclusionTexture;\n  uniform sampler2D u_selfIlluminationTexture;\n  uniform sampler2D u_metalnessTexture;\n  uniform sampler2D u_roughnessTexture;\n\n  #define NUM_AMBIENT_LIGHTS __NUM_AMBIENT_LIGHTS__\n  #define NUM_DIRECTIONAL_LIGHTS __NUM_DIRECTIONAL_LIGHTS__\n  #define NUM_DIRECTIONAL_SHADOW_LIGHTS __NUM_DIRECTIONAL_SHADOW_LIGHTS__\n  #define NUM_OMNI_LIGHTS __NUM_OMNI_LIGHTS__\n  #define NUM_SPOT_LIGHTS __NUM_SPOT_LIGHTS__\n  #define NUM_IES_LIGHTS __NUM_IES_LIGHTS__\n  #define NUM_PROBE_LIGHTS __NUM_PROBE_LIGHTS__\n\n  #define NUM_SHADOW_LIGHTS (NUM_DIRECTIONAL_LIGHTS + NUM_DIRECTIONAL_SHADOW_LIGHTS + NUM_OMNI_LIGHTS + NUM_SPOT_LIGHTS)\n  #define NUM_LIGHTS (NUM_AMBIENT_LIGHTS + NUM_DIRECTIONAL_LIGHTS + NUM_DIRECTIONAL_SHADOW_LIGHTS + NUM_OMNI_LIGHTS + NUM_SPOT_LIGHTS + NUM_IES_LIGHTS + NUM_PROBE_LIGHTS)\n\n  #define USE_SHADER_MODIFIER_SURFACE __USE_SHADER_MODIFIER_SURFACE__\n  #define USE_SHADER_MODIFIER_FRAGMENT __USE_SHADER_MODIFIER_FRAGMENT__\n\n  layout (std140) uniform cameraUniform {\n    vec4 position;\n    mat4 viewTransform;\n    mat4 inverseViewTransform;\n    mat4 viewProjectionTransform;\n  } camera;\n\n  layout (std140) uniform materialUniform {\n    vec4 ambient;\n    vec4 diffuse;\n    vec4 specular;\n    vec4 normal;\n    vec4 reflective;\n    vec4 emission;\n    vec4 transparent;\n    vec4 multiply;\n    vec4 ambientOcclusion;\n    vec4 selfIllumination;\n    vec4 metalness;\n    vec4 roughness;\n    float shininess;\n    float fresnelExponent;\n  } material;\n\n  struct AmbientLight {\n    vec4 color;\n  };\n\n  struct SCNShaderLightingContribution {\n    vec3 ambient;\n    vec3 diffuse;\n    vec3 specular;\n  } _lightingContribution;\n\n  struct DirectionalLight {\n    vec4 color;\n    vec4 direction; // should use vec4; vec3 might cause problem for the layout\n  };\n\n  struct DirectionalShadowLight {\n    vec4 color;\n    vec4 direction; // should use vec4; vec3 might cause problem for the layout\n    vec4 shadowColor;\n    mat4 viewProjectionTransform;\n    mat4 shadowProjectionTransform;\n  };\n\n  struct OmniLight {\n    vec4 color;\n    vec4 position; // should use vec4; vec3 might cause problem for the layout\n  };\n\n  struct ProbeLight {\n    // TODO: implement\n    vec4 color;\n  };\n\n  struct SpotLight {\n    // TODO: implement\n    vec4 color;\n  };\n\n  layout (std140) uniform lightUniform {\n    #if NUM_AMBIENT_LIGHTS > 0\n      AmbientLight ambient[NUM_AMBIENT_LIGHTS];\n    #endif\n    #if NUM_DIRECTIONAL_LIGHTS > 0\n      DirectionalLight directional[NUM_DIRECTIONAL_LIGHTS];\n    #endif\n    #if NUM_DIRECTIONAL_SHADOW_LIGHTS > 0\n      DirectionalShadowLight directionalShadow[NUM_DIRECTIONAL_SHADOW_LIGHTS];\n    #endif\n    #if NUM_OMNI_LIGHTS > 0\n      OmniLight omni[NUM_OMNI_LIGHTS];\n    #endif\n    #if NUM_SPOT_LIGHTS > 0\n      SpotLight spot[NUM_SPOT_LIGHTS];\n    #endif\n    #if NUM_IES_LIGHTS > 0\n      IESLight ies[NUM_IES_LIGHTS];\n    #endif\n    #if NUM_PROBE_LIGHTS > 0\n      ProbeLight probe[NUM_PROBE_LIGHTS];\n    #endif\n    #if NUM_LIGHTS == 0\n      vec4 dummy;\n    #endif\n  } light;\n  #if NUM_SHADOW_LIGHTS > 0\n    in vec3 v_light[NUM_SHADOW_LIGHTS];\n  #endif\n  #if NUM_DIRECTIONAL_SHADOW_LIGHTS > 0\n    in vec4 v_directionalShadowDepth[NUM_DIRECTIONAL_SHADOW_LIGHTS];\n    in vec4 v_directionalShadowTexcoord[NUM_DIRECTIONAL_SHADOW_LIGHTS];\n    uniform sampler2D u_shadowTexture0;\n    #if NUM_DIRECTIONAL_SHADOW_LIGHTS > 1\n      uniform sampler2D u_shadowTexture1;\n    #endif\n    #if NUM_DIRECTIONAL_SHADOW_LIGHTS > 2\n      uniform sampler2D u_shadowTexture2;\n    #endif\n    #if NUM_DIRECTIONAL_SHADOW_LIGHTS > 3\n      uniform sampler2D u_shadowTexture3;\n    #endif\n  #endif\n\n  layout (std140) uniform SCNLightsUniform {\n    vec4 direction0;\n    mat4 shadowMatrix0;\n  } scn_lights;\n\n  layout (std140) uniform fogUniform {\n    vec4 color;\n    float startDistance;\n    float endDistance;\n    float densityExponent;\n  } fog;\n\n  struct SCNShaderSurface {\n    vec3 view;\n    vec3 position;\n    vec3 normal;\n    vec2 normalTexcoord;\n    vec3 geometryNormal;\n    vec3 tangent;\n    vec3 bitangent;\n    vec4 ambient;\n    vec2 ambientTexcoord;\n    vec4 diffuse;\n    vec2 diffuseTexcoord;\n    vec4 specular;\n    vec2 specularTexcoord;\n    vec4 emission;\n    vec2 emissionTexcoord;\n    vec4 multiply;\n    vec2 multiplyTexcoord;\n    vec4 transparent;\n    vec2 transparentTexcoord;\n    vec4 reflective;\n    float ambientOcclusion;\n    float shininess;\n    float fresnel;\n    __USER_CUSTOM_SURFACE__\n  } _surface;\n\n  struct SCNShaderOutput {\n    vec4 color;\n  } _output;\n\n  vec2 poissonDisk[4] = vec2[](\n    vec2( -0.94201624, -0.39906216 ),\n    vec2( 0.94558609, -0.76890725 ),\n    vec2( -0.094184101, -0.92938870 ),\n    vec2( 0.34495938, 0.29387760 )\n  );\n\n  //#define kSCNTexcoordCount 2\n  //struct SCNShaderGeometry {\n  //  vec3 position;\n  //  vec3 normal;\n  //  vec4 tangent;\n  //  vec4 color;\n  //  vec2 texcoords[kSCNTexcoordCount];\n  //};\n\n  uniform float u_time;\n\n  in vec3 v_position;\n  in vec3 v_normal;\n  in vec2 v_texcoord0;\n  in vec2 v_texcoord1;\n  //in vec4 v_color;\n  in vec3 v_eye;\n  in vec3 v_tangent;\n  in vec3 v_bitangent;\n  in float v_fogFactor;\n\n  //in SCNShaderGeometry _geometry;\n\n  out vec4 outColor;\n\n  __USER_CUSTOM_UNIFORM__\n\n  float saturate(float value) {\n    return clamp(value, 0.0, 1.0);\n  }\n\n  float convDepth(vec4 color) {\n    const float rMask = 1.0;\n    const float gMask = 1.0 / 255.0;\n    const float bMask = 1.0 / (255.0 * 255.0);\n    const float aMask = 1.0 / (255.0 * 255.0 * 255.0);\n    float depth = dot(color, vec4(rMask, gMask, bMask, aMask));\n    return depth * 2.0 - 1.0;\n  }\n\n  #if USE_SHADER_MODIFIER_SURFACE\n  void shaderModifierSurface() {\n    __SHADER_MODIFIER_SURFACE__\n  }\n  #endif\n\n  #if USE_SHADER_MODIFIER_FRAGMENT\n  void shaderModifierFragment() {\n    __SHADER_MODIFIER_FRAGMENT__\n  }\n  #endif\n\n    \n  void main() {\n    //_output.color = v_color;\n    //_output.color = vec4(0, 0, 0, 1);\n\n    //vec3 viewVec = normalize(v_eye);\n    //vec3 nom = normalize(v_normal);\n    _surface.view = normalize(v_eye);\n    _surface.position = v_position;\n    _surface.normal = normalize(v_normal);\n    _surface.tangent = normalize(v_tangent);\n    _surface.bitangent = normalize(v_bitangent);\n\n    // normal texture\n    if(textureFlags[TEXTURE_NORMAL_INDEX]){\n      mat3 tsInv = mat3(_surface.tangent, _surface.bitangent, _surface.normal);\n      vec3 color = normalize(texture(u_normalTexture, v_texcoord0).rgb * 2.0 - 1.0); // FIXME: check mappingChannel to decide which texture you use.\n      _surface.normal = normalize(tsInv * color);\n    }\n\n    //_surface.ambient = material.ambient;\n    _surface.ambient = vec4(0, 0, 0, 1); // FIXME: check: lock ambient with diffuse\n    _surface.diffuse = material.diffuse;\n    _surface.specular = material.specular;\n    _surface.emission = material.emission;\n    _surface.multiply = material.multiply;\n    _surface.transparent = material.transparent;\n    _surface.reflective = material.reflective;\n    _surface.ambientOcclusion = 1.0; // TODO: calculate AO\n    _surface.shininess = material.shininess;\n    _surface.fresnel = 0.4 * pow(1.0 - clamp(dot(_surface.view, _surface.normal), 0.0, 1.0), material.fresnelExponent); // TODO: calculate coefficient\n\n    // TODO: check mapping channel for each material\n    _surface.ambientTexcoord = v_texcoord0;\n    _surface.diffuseTexcoord = v_texcoord0;\n    _surface.specularTexcoord = v_texcoord0;\n    if(selfIllumination){\n      _surface.emissionTexcoord = v_texcoord1;\n    }else{\n      _surface.emissionTexcoord = v_texcoord0;\n    }\n    _surface.multiplyTexcoord = v_texcoord0;\n    _surface.transparentTexcoord = v_texcoord0;\n\n    if(textureFlags[TEXTURE_AMBIENT_INDEX]){\n      _surface.ambient = texture(u_ambientTexture, _surface.ambientTexcoord);\n    }\n    if(textureFlags[TEXTURE_DIFFUSE_INDEX]){\n      _surface.diffuse = texture(u_diffuseTexture, _surface.diffuseTexcoord);\n      _surface.diffuse.a *= material.diffuse.a;\n    }\n    if(textureFlags[TEXTURE_SPECULAR_INDEX]){\n      _surface.specular = texture(u_specularTexture, _surface.specularTexcoord);\n    }\n    if(textureFlags[TEXTURE_EMISSION_INDEX]){\n      _surface.emission = texture(u_emissionTexture, _surface.emissionTexcoord);\n    }\n    if(textureFlags[TEXTURE_MULTIPLY_INDEX]){\n      _surface.multiply = texture(u_multiplyTexture, _surface.multiplyTexcoord);\n    }\n    if(textureFlags[TEXTURE_TRANSPARENT_INDEX]){\n      _surface.transparent = texture(u_transparentTexture, _surface.transparentTexcoord);\n    }\n\n    __USER_CUSTOM_TEXCOORD__\n\n    #if USE_SHADER_MODIFIER_SURFACE\n      shaderModifierSurface();\n    #endif\n\n    // Lighting\n    int numLights = 0;\n    _lightingContribution.ambient = vec3(0);\n    _lightingContribution.diffuse = vec3(0);\n    _lightingContribution.specular = vec3(0);\n\n    #if NUM_AMBIENT_LIGHTS > 0\n      for(int i=0; i<NUM_AMBIENT_LIGHTS; i++){\n        _lightingContribution.ambient += light.ambient[i].color.rgb;\n      }\n    #endif\n\n    #if NUM_DIRECTIONAL_LIGHTS > 0\n      for(int i=0; i<NUM_DIRECTIONAL_LIGHTS; i++){\n        // diffuse\n        vec3 lightVec = normalize(v_light[numLights + i]);\n        float diffuse = clamp(dot(lightVec, _surface.normal), 0.0f, 1.0f);\n        //_output.color.rgb += light.directional[i].color.rgb * material.diffuse.rgb * diffuse;\n        _lightingContribution.diffuse += light.directional[i].color.rgb * diffuse;\n\n        // specular\n        if(diffuse > 0.0f){\n          vec3 halfVec = normalize(lightVec + _surface.view);\n          float specular = pow(dot(halfVec, _surface.normal), _surface.shininess);\n          // TODO: use intensity\n          _lightingContribution.specular += vec3(specular);\n        }\n      }\n      numLights += NUM_DIRECTIONAL_LIGHTS;\n    #endif\n\n    #if NUM_OMNI_LIGHTS > 0\n      for(int i=0; i<NUM_OMNI_LIGHTS; i++){\n        // diffuse\n        vec3 lightVec = normalize(v_light[numLights + i]);\n        float diffuse = clamp(dot(lightVec, _surface.normal), 0.0f, 1.0f);\n        //_output.color.rgb += light.omni[i].color.rgb * material.diffuse.rgb * diffuse;\n        _lightingContribution.diffuse += light.omni[i].color.rgb * diffuse;\n\n        // specular\n        if(diffuse > 0.0f){\n          vec3 halfVec = normalize(lightVec + _surface.view);\n          float specular = pow(dot(halfVec, _surface.normal), _surface.shininess);\n          // TODO: use intensity\n          _lightingContribution.specular += vec3(1, 1, 1) * specular;\n        }\n      }\n      numLights += NUM_OMNI_LIGHTS;\n    #endif\n\n    #if NUM_SPOT_LIGHTS > 0\n      // TODO: implement\n    #endif\n\n    #if NUM_IES_LIGHTS > 0\n      // TODO: implement\n    #endif\n\n    #if NUM_PROBE_LIGHTS > 0\n      // TODO: implement\n    #endif\n\n    __FS_LIGHTING__\n\n\n    // calculate color\n    _output.color = vec4(0, 0, 0, _surface.diffuse.a);\n\n    vec3 D = _lightingContribution.diffuse;\n\n    // lock ambient with diffuse\n    D += _lightingContribution.ambient * _surface.ambientOcclusion;\n\n    // emission\n    if(selfIllumination){\n      D += _surface.emission.rgb;\n    }\n\n    // diffuse\n    _output.color.rgb = _surface.diffuse.rgb * D;\n\n    vec3 S = _lightingContribution.specular;\n    //S += _surface.reflective.rgb * _surface.ambientOcclusion;\n    S *= _surface.specular.rgb;\n    _output.color.rgb += S;\n\n    // ambient\n    _output.color.rgb += _surface.ambient.rgb * _lightingContribution.ambient;\n\n    if(!selfIllumination){\n      _output.color.rgb += _surface.emission.rgb;\n    }\n\n    // multiply\n    _output.color.rgb *= _surface.multiply.rgb;\n\n    // fresnel reflection\n    if(textureFlags[TEXTURE_REFLECTIVE_INDEX]){\n      vec3 r = reflect(_surface.view, _surface.normal);\n      //float fresnel = f0 + (1.0 - f0) * pow(1.0 - clamp(dot(viewVec, nom), 0.0, 1.0), material.fresnelExponent);\n      //float fresnel = 0.4 * pow(1.0 - clamp(dot(_surface.view, _surface.normal), 0.0, 1.0), material.fresnelExponent);\n      _output.color.rgb += texture(u_reflectiveTexture, r).rgb * _surface.fresnel;\n    }\n\n    float fogFactor = pow(v_fogFactor, fog.densityExponent);\n    _output.color = mix(_output.color, fog.color, fogFactor);\n\n    _output.color.rgb *= _surface.diffuse.a;\n\n    #if USE_SHADER_MODIFIER_FRAGMENT\n      shaderModifierFragment();\n    #endif\n\n    if(_output.color.a <= 0.0){\n      // avoid overwriting the depth buffer\n      discard;\n    }\n\n    outColor = _output.color;\n\n    // linear To sRGB\n    //outColor.rgb = pow(_output.color.rgb, vec3(1.0/2.2));\n    //outColor.a = _output.color.a;\n  }\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="#version 300 es\n  precision mediump float;\n  precision highp sampler2DShadow;\n\n  uniform bool[12] textureFlags;\n  #define TEXTURE_EMISSION_INDEX 0\n  #define TEXTURE_AMBIENT_INDEX 1\n  #define TEXTURE_DIFFUSE_INDEX 2\n  #define TEXTURE_SPECULAR_INDEX 3\n  #define TEXTURE_REFLECTIVE_INDEX 4\n  #define TEXTURE_TRANSPARENT_INDEX 5\n  #define TEXTURE_MULTIPLY_INDEX 6\n  #define TEXTURE_NORMAL_INDEX 7\n  #define TEXTURE_AMBIENT_OCCLUSION_INDEX 8\n  #define TEXTURE_SELF_ILLUMINATION_INDEX 9\n  #define TEXTURE_METALNESS_INDEX 10\n  #define TEXTURE_ROUGHNESS_INDEX 11\n\n  uniform bool selfIllumination;\n\n  uniform sampler2D u_emissionTexture;\n  uniform sampler2D u_ambientTexture;\n  uniform sampler2D u_diffuseTexture;\n  uniform sampler2D u_specularTexture;\n  uniform samplerCube u_reflectiveTexture;\n  uniform sampler2D u_transparentTexture;\n  uniform sampler2D u_multiplyTexture;\n  uniform sampler2D u_normalTexture;\n  uniform sampler2D u_ambientOcclusionTexture;\n  uniform sampler2D u_selfIlluminationTexture;\n  uniform sampler2D u_metalnessTexture;\n  uniform sampler2D u_roughnessTexture;\n\n  #define NUM_AMBIENT_LIGHTS __NUM_AMBIENT_LIGHTS__\n  #define NUM_DIRECTIONAL_LIGHTS __NUM_DIRECTIONAL_LIGHTS__\n  #define NUM_DIRECTIONAL_SHADOW_LIGHTS __NUM_DIRECTIONAL_SHADOW_LIGHTS__\n  #define NUM_OMNI_LIGHTS __NUM_OMNI_LIGHTS__\n  #define NUM_SPOT_LIGHTS __NUM_SPOT_LIGHTS__\n  #define NUM_IES_LIGHTS __NUM_IES_LIGHTS__\n  #define NUM_PROBE_LIGHTS __NUM_PROBE_LIGHTS__\n\n  #define NUM_SHADOW_LIGHTS (NUM_DIRECTIONAL_LIGHTS + NUM_DIRECTIONAL_SHADOW_LIGHTS + NUM_OMNI_LIGHTS + NUM_SPOT_LIGHTS)\n  #define NUM_LIGHTS (NUM_AMBIENT_LIGHTS + NUM_DIRECTIONAL_LIGHTS + NUM_DIRECTIONAL_SHADOW_LIGHTS + NUM_OMNI_LIGHTS + NUM_SPOT_LIGHTS + NUM_IES_LIGHTS + NUM_PROBE_LIGHTS)\n\n  #define USE_SHADER_MODIFIER_SURFACE __USE_SHADER_MODIFIER_SURFACE__\n  #define USE_SHADER_MODIFIER_FRAGMENT __USE_SHADER_MODIFIER_FRAGMENT__\n\n  layout (std140) uniform cameraUniform {\n    vec4 position;\n    mat4 viewTransform;\n    mat4 inverseViewTransform;\n    mat4 viewProjectionTransform;\n  } camera;\n\n  layout (std140) uniform materialUniform {\n    vec4 ambient;\n    vec4 diffuse;\n    vec4 specular;\n    vec4 normal;\n    vec4 reflective;\n    vec4 emission;\n    vec4 transparent;\n    vec4 multiply;\n    vec4 ambientOcclusion;\n    vec4 selfIllumination;\n    vec4 metalness;\n    vec4 roughness;\n    float shininess;\n    float fresnelExponent;\n  } material;\n\n  struct AmbientLight {\n    vec4 color;\n  };\n\n  struct SCNShaderLightingContribution {\n    vec3 ambient;\n    vec3 diffuse;\n    vec3 specular;\n  } _lightingContribution;\n\n  struct DirectionalLight {\n    vec4 color;\n    vec4 direction; // should use vec4; vec3 might cause problem for the layout\n  };\n\n  struct DirectionalShadowLight {\n    vec4 color;\n    vec4 direction; // should use vec4; vec3 might cause problem for the layout\n    vec4 shadowColor;\n    mat4 viewProjectionTransform;\n    mat4 shadowProjectionTransform;\n  };\n\n  struct OmniLight {\n    vec4 color;\n    vec4 position; // should use vec4; vec3 might cause problem for the layout\n  };\n\n  struct ProbeLight {\n    // TODO: implement\n    vec4 color;\n  };\n\n  struct SpotLight {\n    // TODO: implement\n    vec4 color;\n  };\n\n  layout (std140) uniform lightUniform {\n    #if NUM_AMBIENT_LIGHTS > 0\n      AmbientLight ambient[NUM_AMBIENT_LIGHTS];\n    #endif\n    #if NUM_DIRECTIONAL_LIGHTS > 0\n      DirectionalLight directional[NUM_DIRECTIONAL_LIGHTS];\n    #endif\n    #if NUM_DIRECTIONAL_SHADOW_LIGHTS > 0\n      DirectionalShadowLight directionalShadow[NUM_DIRECTIONAL_SHADOW_LIGHTS];\n    #endif\n    #if NUM_OMNI_LIGHTS > 0\n      OmniLight omni[NUM_OMNI_LIGHTS];\n    #endif\n    #if NUM_SPOT_LIGHTS > 0\n      SpotLight spot[NUM_SPOT_LIGHTS];\n    #endif\n    #if NUM_IES_LIGHTS > 0\n      IESLight ies[NUM_IES_LIGHTS];\n    #endif\n    #if NUM_PROBE_LIGHTS > 0\n      ProbeLight probe[NUM_PROBE_LIGHTS];\n    #endif\n    #if NUM_LIGHTS == 0\n      vec4 dummy;\n    #endif\n  } light;\n  #if NUM_SHADOW_LIGHTS > 0\n    in vec3 v_light[NUM_SHADOW_LIGHTS];\n  #endif\n  #if NUM_DIRECTIONAL_SHADOW_LIGHTS > 0\n    in vec4 v_directionalShadowDepth[NUM_DIRECTIONAL_SHADOW_LIGHTS];\n    in vec4 v_directionalShadowTexcoord[NUM_DIRECTIONAL_SHADOW_LIGHTS];\n    uniform sampler2D u_shadowTexture0;\n    #if NUM_DIRECTIONAL_SHADOW_LIGHTS > 1\n      uniform sampler2D u_shadowTexture1;\n    #endif\n    #if NUM_DIRECTIONAL_SHADOW_LIGHTS > 2\n      uniform sampler2D u_shadowTexture2;\n    #endif\n    #if NUM_DIRECTIONAL_SHADOW_LIGHTS > 3\n      uniform sampler2D u_shadowTexture3;\n    #endif\n  #endif\n\n  layout (std140) uniform SCNLightsUniform {\n    vec4 direction0;\n    mat4 shadowMatrix0;\n  } scn_lights;\n\n  layout (std140) uniform fogUniform {\n    vec4 color;\n    float startDistance;\n    float endDistance;\n    float densityExponent;\n  } fog;\n\n  struct SCNShaderSurface {\n    vec3 view;\n    vec3 position;\n    vec3 normal;\n    vec2 normalTexcoord;\n    vec3 geometryNormal;\n    vec3 tangent;\n    vec3 bitangent;\n    vec4 ambient;\n    vec2 ambientTexcoord;\n    vec4 diffuse;\n    vec2 diffuseTexcoord;\n    vec4 specular;\n    vec2 specularTexcoord;\n    vec4 emission;\n    vec2 emissionTexcoord;\n    vec4 multiply;\n    vec2 multiplyTexcoord;\n    vec4 transparent;\n    vec2 transparentTexcoord;\n    vec4 reflective;\n    vec2 metalnessTexcoord;\n    vec2 roughnessTexcoord;\n    float ambientOcclusion;\n    float shininess;\n    float fresnel;\n    float metalness;\n    float roughness;\n    __USER_CUSTOM_SURFACE__\n  } _surface;\n\n  struct SCNShaderOutput {\n    vec4 color;\n  } _output;\n\n  vec2 poissonDisk[4] = vec2[](\n    vec2( -0.94201624, -0.39906216 ),\n    vec2( 0.94558609, -0.76890725 ),\n    vec2( -0.094184101, -0.92938870 ),\n    vec2( 0.34495938, 0.29387760 )\n  );\n\n  //#define kSCNTexcoordCount 2\n  //struct SCNShaderGeometry {\n  //  vec3 position;\n  //  vec3 normal;\n  //  vec4 tangent;\n  //  vec4 color;\n  //  vec2 texcoords[kSCNTexcoordCount];\n  //};\n\n  uniform float u_time;\n\n  in vec3 v_position;\n  in vec3 v_normal;\n  in vec2 v_texcoord0;\n  in vec2 v_texcoord1;\n  //in vec4 v_color;\n  in vec3 v_eye;\n  in vec3 v_tangent;\n  in vec3 v_bitangent;\n  in float v_fogFactor;\n\n  //in SCNShaderGeometry _geometry;\n\n  out vec4 outColor;\n\n  __USER_CUSTOM_UNIFORM__\n\n  float saturate(float value) {\n    return clamp(value, 0.0, 1.0);\n  }\n\n  float convDepth(vec4 color) {\n    const float rMask = 1.0;\n    const float gMask = 1.0 / 255.0;\n    const float bMask = 1.0 / (255.0 * 255.0);\n    const float aMask = 1.0 / (255.0 * 255.0 * 255.0);\n    float depth = dot(color, vec4(rMask, gMask, bMask, aMask));\n    return depth * 2.0 - 1.0;\n  }\n\n  #if USE_SHADER_MODIFIER_SURFACE\n  void shaderModifierSurface() {\n    __SHADER_MODIFIER_SURFACE__\n  }\n  #endif\n\n  #if USE_SHADER_MODIFIER_FRAGMENT\n  void shaderModifierFragment() {\n    __SHADER_MODIFIER_FRAGMENT__\n  }\n  #endif\n\n    \n  void main() {\n    //_output.color = v_color;\n    //_output.color = vec4(0, 0, 0, 1);\n\n    //vec3 viewVec = normalize(v_eye);\n    //vec3 nom = normalize(v_normal);\n    _surface.view = normalize(v_eye);\n    _surface.position = v_position;\n    _surface.normal = normalize(v_normal);\n    _surface.tangent = normalize(v_tangent);\n    _surface.bitangent = normalize(v_bitangent);\n\n    // normal texture\n    if(textureFlags[TEXTURE_NORMAL_INDEX]){\n      mat3 tsInv = mat3(_surface.tangent, _surface.bitangent, _surface.normal);\n      vec3 color = normalize(texture(u_normalTexture, v_texcoord0).rgb * 2.0 - 1.0); // FIXME: check mappingChannel to decide which texture you use.\n      _surface.normal = normalize(tsInv * color);\n    }\n\n    //_surface.ambient = material.ambient;\n    _surface.ambient = vec4(0, 0, 0, 1); // FIXME: check: lock ambient with diffuse\n    _surface.diffuse = material.diffuse;\n    _surface.specular = material.specular;\n    _surface.emission = material.emission;\n    _surface.multiply = material.multiply;\n    _surface.transparent = material.transparent;\n    _surface.reflective = material.reflective;\n    _surface.ambientOcclusion = material.ambientOcclusion.r;\n    _surface.shininess = material.shininess;\n    _surface.fresnel = 0.4 * pow(1.0 - clamp(dot(_surface.view, _surface.normal), 0.0, 1.0), material.fresnelExponent); // TODO: calculate coefficient\n    _surface.metalness = material.metalness.r;\n    _surface.roughness = material.roughness.r;\n\n    // TODO: check mapping channel for each material\n    _surface.ambientTexcoord = v_texcoord0;\n    _surface.diffuseTexcoord = v_texcoord0;\n    _surface.specularTexcoord = v_texcoord0;\n    if(selfIllumination){\n      _surface.emissionTexcoord = v_texcoord1;\n    }else{\n      _surface.emissionTexcoord = v_texcoord0;\n    }\n    _surface.multiplyTexcoord = v_texcoord0;\n    _surface.transparentTexcoord = v_texcoord0;\n    _surface.metalnessTexcoord = v_texcoord0;\n    _surface.roughnessTexcoord = v_texcoord0;\n\n    if(textureFlags[TEXTURE_AMBIENT_INDEX]){\n      _surface.ambient = texture(u_ambientTexture, _surface.ambientTexcoord);\n    }\n    if(textureFlags[TEXTURE_DIFFUSE_INDEX]){\n      _surface.diffuse = texture(u_diffuseTexture, _surface.diffuseTexcoord);\n      _surface.diffuse.a *= material.diffuse.a;\n    }\n    if(textureFlags[TEXTURE_SPECULAR_INDEX]){\n      _surface.specular = texture(u_specularTexture, _surface.specularTexcoord);\n    }\n    if(textureFlags[TEXTURE_EMISSION_INDEX]){\n      _surface.emission = texture(u_emissionTexture, _surface.emissionTexcoord);\n    }\n    if(textureFlags[TEXTURE_MULTIPLY_INDEX]){\n      _surface.multiply = texture(u_multiplyTexture, _surface.multiplyTexcoord);\n    }\n    if(textureFlags[TEXTURE_TRANSPARENT_INDEX]){\n      _surface.transparent = texture(u_transparentTexture, _surface.transparentTexcoord);\n    }\n    if(textureFlags[TEXTURE_METALNESS_INDEX]){\n      _surface.metalness = texture(u_metalnessTexture, _surface.metalnessTexcoord).r;\n    }\n    if(textureFlags[TEXTURE_ROUGHNESS_INDEX]){\n      _surface.roughness = texture(u_roughnessTexture, _surface.roughnessTexcoord).r;\n    }\n\n    __USER_CUSTOM_TEXCOORD__\n\n    #if USE_SHADER_MODIFIER_SURFACE\n      shaderModifierSurface();\n    #endif\n\n    // Lighting\n    int numLights = 0;\n    _lightingContribution.ambient = vec3(0);\n    _lightingContribution.diffuse = vec3(0);\n    _lightingContribution.specular = vec3(0);\n\n    #if NUM_AMBIENT_LIGHTS > 0\n      for(int i=0; i<NUM_AMBIENT_LIGHTS; i++){\n        _lightingContribution.ambient += light.ambient[i].color.rgb;\n      }\n    #endif\n\n    #if NUM_DIRECTIONAL_LIGHTS > 0\n      for(int i=0; i<NUM_DIRECTIONAL_LIGHTS; i++){\n        // diffuse\n        vec3 lightVec = normalize(v_light[numLights + i]);\n        float diffuse = clamp(dot(lightVec, _surface.normal), 0.0f, 1.0f);\n        _lightingContribution.diffuse += light.directional[i].color.rgb * diffuse;\n\n        // specular\n        if(diffuse > 0.0f){\n          vec3 halfVec = normalize(lightVec + _surface.view);\n          float specular = pow(dot(halfVec, _surface.normal), _surface.shininess);\n          _lightingContribution.specular += vec3(specular);\n        }\n      }\n      numLights += NUM_DIRECTIONAL_LIGHTS;\n    #endif\n\n    #if NUM_OMNI_LIGHTS > 0\n      for(int i=0; i<NUM_OMNI_LIGHTS; i++){\n        // diffuse\n        vec3 lightVec = normalize(v_light[numLights + i]);\n        float diffuse = clamp(dot(lightVec, _surface.normal), 0.0f, 1.0f);\n        //_output.color.rgb += light.omni[i].color.rgb * material.diffuse.rgb * diffuse;\n        _lightingContribution.diffuse += light.omni[i].color.rgb * diffuse;\n\n        // specular\n        if(diffuse > 0.0f){\n          vec3 halfVec = normalize(lightVec + _surface.view);\n          float specular = pow(dot(halfVec, _surface.normal), _surface.shininess);\n          // TODO: use intensity\n          _lightingContribution.specular += vec3(1, 1, 1) * specular;\n        }\n      }\n      numLights += NUM_OMNI_LIGHTS;\n    #endif\n\n    #if NUM_SPOT_LIGHTS > 0\n      // TODO: implement\n    #endif\n\n    #if NUM_IES_LIGHTS > 0\n      // TODO: implement\n    #endif\n\n    #if NUM_PROBE_LIGHTS > 0\n      // TODO: implement\n    #endif\n\n    __FS_LIGHTING__\n\n\n    // calculate color\n    _output.color = vec4(0, 0, 0, _surface.diffuse.a);\n\n    //vec3 D = _lightingContribution.diffuse;\n    //// lock ambient with diffuse\n    //D += _lightingContribution.ambient * _surface.ambientOcclusion;\n    //// emission\n    //if(selfIllumination){\n    //  D += _surface.emission.rgb;\n    //}\n    //// diffuse\n    //_output.color.rgb = _surface.diffuse.rgb * D;\n    //vec3 S = _lightingContribution.specular;\n    ////S += _surface.reflective.rgb * _surface.ambientOcclusion;\n    //S *= _surface.specular.rgb;\n    //_output.color.rgb += S;\n    //// ambient\n    //_output.color.rgb += _surface.ambient.rgb * _lightingContribution.ambient;\n    //if(!selfIllumination){\n    //  _output.color.rgb += _surface.emission.rgb;\n    //}\n    //// multiply\n    //_output.color.rgb *= _surface.multiply.rgb;\n    //// fresnel reflection\n    //if(textureFlags[TEXTURE_REFLECTIVE_INDEX]){\n    //  vec3 r = reflect(_surface.view, _surface.normal);\n    //  //float fresnel = f0 + (1.0 - f0) * pow(1.0 - clamp(dot(viewVec, nom), 0.0, 1.0), material.fresnelExponent);\n    //  //float fresnel = 0.4 * pow(1.0 - clamp(dot(_surface.view, _surface.normal), 0.0, 1.0), material.fresnelExponent);\n    //  _output.color.rgb += texture(u_reflectiveTexture, r).rgb * _surface.fresnel;\n    //}\n    //float fogFactor = pow(v_fogFactor, fog.densityExponent);\n    //_output.color = mix(_output.color, fog.color, fogFactor);\n    //_output.color.rgb *= _surface.diffuse.a;\n\n    #define pi 3.14159265\n    vec4 debugColor;\n    float alpha = pow(_surface.roughness, 4.0);\n    float invAlpha = 1.0 - alpha;\n    float nv = clamp(dot(_surface.normal, _surface.view), 0.0, 1.0);\n    float f0 = 0.6;\n    float Gv = 1.0 / (nv + sqrt(alpha + invAlpha * nv * nv));\n    for(int i=0; i<NUM_SHADOW_LIGHTS; i++){\n      vec3 lightVec = normalize(v_light[i]);\n      vec3 halfVec = normalize(lightVec + _surface.view);\n\n      float nh = clamp(dot(_surface.normal, halfVec), 0.0, 1.0);\n      float nl = clamp(dot(_surface.normal, lightVec), 0.0, 1.0);\n      //float vh = clamp(dot(_surface.view, halfVec), 0.0, 1.0);\n\n      float D = alpha / (pi * pow(nh * nh * (alpha - 1.0) + 1.0, 2.0));\n      //float F = f0 + (1.0 - f0) * pow(vh, 5.0);\n      float F = f0 + (1.0 - f0) * pow(1.0 - nh, 5.0);\n      float G = Gv / (nl + sqrt(alpha + invAlpha * nl * nl));\n      float specular = D * F * G;\n      float diffuse = (1.0 - F) * nl / pi;\n      _output.color.rgb += _surface.diffuse.rgb * mix(diffuse, specular, _surface.metalness);\n\n      debugColor = vec4(F, nl, diffuse, 1.0);\n    }\n\n    #if USE_SHADER_MODIFIER_FRAGMENT\n      shaderModifierFragment();\n    #endif\n\n    if(_output.color.a <= 0.0){\n      // avoid overwriting the depth buffer\n      discard;\n    }\n\n    outColor = _output.color;\n\n    // linear To sRGB\n    //outColor.rgb = pow(_output.color.rgb, vec3(1.0/2.2));\n    //outColor.a = _output.color.a;\n\n    //outColor = vec4(1.0, 0.0, 0.0, 1.0);\n    //outColor = debugColor;\n  }\n\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="#version 300 es\n  precision mediump float;\n\n  uniform mat4 viewProjectionTransform;\n  uniform vec4[765] skinningJoints;\n  uniform int numSkinningJoints;\n\n  in vec3 position;\n  //in vec3 normal;\n  in vec4 boneIndices;\n  in vec4 boneWeights;\n\n  out vec3 v_position;\n\n  void main() {\n    vec3 pos = vec3(0, 0, 0);\n    if(numSkinningJoints > 0){\n      for(int i=0; i<numSkinningJoints; i++){\n        float weight = boneWeights[i];\n        if(int(boneIndices[i]) < 0){\n          continue;\n        }\n        int idx = int(boneIndices[i]) * 3;\n        mat4 jointMatrix = transpose(mat4(skinningJoints[idx],\n                                          skinningJoints[idx+1],\n                                          skinningJoints[idx+2],\n                                          vec4(0, 0, 0, 1)));\n        pos += (jointMatrix * vec4(position, 1.0)).xyz * weight;\n      }\n    }else{\n      mat4 jointMatrix = transpose(mat4(skinningJoints[0],\n                                        skinningJoints[1],\n                                        skinningJoints[2],\n                                        vec4(0, 0, 0, 1)));\n      pos = (jointMatrix * vec4(position, 1.0)).xyz;\n    }\n    //v_position = pos;\n\n    gl_Position = viewProjectionTransform * vec4(pos, 1.0);\n    v_position = gl_Position.xyz / gl_Position.w;\n  }\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="#version 300 es\n  precision mediump float;\n\n  uniform mat4 modelTransform;\n  uniform mat4 viewTransform;\n  uniform mat4 projectionTransform;\n  uniform int orientationMode;\n  uniform float stretchFactor;\n\n  in vec3 position;\n  in vec3 velocity;\n  in vec4 rotation;\n  in vec4 color;\n  in float size;\n  //in float life;\n  in vec2 corner;\n  in vec2 texcoord;\n\n  out vec2 v_texcoord;\n  out vec4 v_color;\n\n  void main() {\n    vec4 pos = viewTransform * vec4(position, 1.0);\n    vec3 d;\n\n    if(stretchFactor > 0.0){\n      vec4 v = viewTransform * vec4(velocity, 0.0) * stretchFactor;\n      if(corner.y > 0.0){\n        pos.xyz += v.xyz;\n      }\n      vec2 cy = normalize(v.xy);\n      vec2 cx = vec2(-cy.y, cy.x);\n      d = vec3(cx * corner.x + cy * corner.y, 0) * size;\n    }else{\n      float sinAngle = sin(rotation.w);\n      float cosAngle = cos(rotation.w);\n      float tcos = 1.0 - cosAngle;\n\n      d = vec3(\n          corner.x * (rotation.x * rotation.x * tcos + cosAngle)\n        + corner.y * (rotation.x * rotation.y * tcos - rotation.z * sinAngle),\n          corner.x * (rotation.y * rotation.x * tcos + rotation.z * sinAngle)\n        + corner.y * (rotation.y * rotation.y * tcos + cosAngle),\n          corner.x * (rotation.z * rotation.x * tcos - rotation.y * sinAngle)\n        + corner.y * (rotation.z * rotation.y * tcos + rotation.x * sinAngle)) * size;\n      if(orientationMode == 2){\n        // orientation: free\n        d = mat3(viewTransform) * mat3(modelTransform) * d;\n      }\n    }\n    pos.xyz += d;\n\n    v_color = color;\n    v_texcoord = texcoord;\n    gl_Position = projectionTransform * pos;\n  }\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="#version 300 es\n  precision mediump float;\n\n  uniform mat4 viewProjectionTransform;\n  uniform vec4[765] skinningJoints;\n  uniform int numSkinningJoints;\n\n  in vec3 position;\n  in vec3 normal;\n  in vec4 boneIndices;\n  in vec4 boneWeights;\n  \n  out vec3 v_normal;\n  out vec3 v_position;\n\n  void main() {\n    vec3 pos = vec3(0, 0, 0);\n    vec3 nom = vec3(0, 0, 0);\n    if(numSkinningJoints > 0){\n      for(int i=0; i<numSkinningJoints; i++){\n        float weight = boneWeights[i];\n        if(int(boneIndices[i]) < 0){\n          continue;\n        }\n        int idx = int(boneIndices[i]) * 3;\n        mat4 jointMatrix = transpose(mat4(skinningJoints[idx],\n                                          skinningJoints[idx+1],\n                                          skinningJoints[idx+2],\n                                          vec4(0, 0, 0, 1)));\n        pos += (jointMatrix * vec4(position, 1.0)).xyz * weight;\n        nom += (mat3(jointMatrix) * normal) * weight;\n      }\n    }else{\n      mat4 jointMatrix = transpose(mat4(skinningJoints[0],\n                                        skinningJoints[1],\n                                        skinningJoints[2],\n                                        vec4(0, 0, 0, 1)));\n      pos = (jointMatrix * vec4(position, 1.0)).xyz;\n      nom = mat3(jointMatrix) * normal;\n    }\n    //v_position = pos;\n    v_normal = nom;\n\n    gl_Position = viewProjectionTransform * vec4(pos, 1.0);\n    v_position = gl_Position.xyz / gl_Position.w;\n  }\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default="#version 300 es\n  precision mediump float;\n\n  uniform int objectID;\n  uniform int geometryID;\n\n  in vec3 v_normal;\n  in vec3 v_position;\n\n  layout(location = 0) out vec4 out_objectID;\n  layout(location = 1) out vec4 out_faceID;\n  layout(location = 2) out vec4 out_position;\n  layout(location = 3) out vec4 out_normal;\n\n  void main() {\n    out_objectID = vec4(\n      float(objectID >> 8) / 255.0,\n      float(objectID & 0xFF) / 255.0,\n      float(geometryID >> 8) / 255.0,\n      float(geometryID & 0xFF) / 255.0\n    );\n    //out_faceID = vec4(\n    //  (gl_PrimitiveID >> 24) / 255.0,\n    //  ((gl_PrimitiveID >> 16) & 0xFF) / 255.0,\n    //  ((gl_PrimitiveID >> 8) & 0xFF) / 255.0,\n    //  (gl_PrimitiveID & 0xFF) / 255.0\n    //);\n    out_faceID = vec4(0, 0, 0, 0); // TODO: implement\n    vec3 n = normalize(v_normal);\n    out_normal = vec4((n.x + 1.0) * 0.5, (n.y + 1.0) * 0.5, (n.z + 1.0) * 0.5, 0);\n    //out_position = vec4((v_position.x + 1.0) * 0.5, (v_position.y + 1.0) * 0.5, (v_position.z + 1.0) * 0.5, 0);\n    float r = (v_position.z + 1.0) * 0.5;\n    float g = fract(r * 255.0);\n    float b = fract(g * 255.0);\n    float a = fract(b * 255.0);\n    float coef = 1.0 / 255.0;\n\n    r -= g * coef;\n    g -= b * coef;\n    b -= a * coef;\n    out_position = vec4(r, g, b, a);\n  }\n"},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(101),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._gainNode=null,e}return o(t,e),a(t,[{key:"volume",get:function(){return this._gainNode.gain.value},set:function(e){this._gainNode.gain.value=e}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._numberOfInputs=0,e._numberOfOutputs=0,e._engine=null,e._lastRenderTime=null,e._auAudioUnit=null,e._latency=0,e._outputPresentationLatency=0,e}return o(t,e),a(t,[{key:"inputFormatForBus",value:function(e){return null}},{key:"nameForInputBus",value:function(e){return null}},{key:"outputFormatForBus",value:function(e){return null}},{key:"nameForOutputBus",value:function(e){return null}},{key:"installTapOnBusBlock",value:function(e,t,n,r){}},{key:"removeTapOnBus",value:function(e){}},{key:"reset",value:function(){}},{key:"numberOfInputs",get:function(){return this._numberOfInputs}},{key:"numberOfOutputs",get:function(){return this._numberOfOutputs}},{key:"engine",get:function(){return this._engine}},{key:"lastRenderTime",get:function(){return this._lastRenderTime}},{key:"auAudioUnit",get:function(){return this._auAudioUnit}},{key:"latency",get:function(){return this._latency}},{key:"outputPresentationLatency",get:function(){return this._outputPresentationLatency}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e,t,n){return new i.default(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1)};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(104),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._smoothness=0,e._animationSpeed=1,e}return o(t,e),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.halfExtent=null,e.scope=null,e.usesEllipsoidalExtent=!1,e.offset=null,e.direction=null,e.strength=0,e.falloffExponent=0,e.minimumDistance=0,e.isActive=!1,e.isExclusive=!1,e.categoryBitMask=0,e}return o(t,e),a(t,null,[{key:"drag",value:function(){return null}},{key:"vortex",value:function(){return null}},{key:"radialGravity",value:function(){return null}},{key:"linearGravity",value:function(){return null}},{key:"noiseFieldAnimationSpeed",value:function(e,t){return null}},{key:"turbulenceFieldAnimationSpeed",value:function(e,t){return null}},{key:"spring",value:function(){return null}},{key:"electric",value:function(){return null}},{key:"magnetic",value:function(){return null}},{key:"customFieldEvaluationBlock",value:function(e){return null}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={none:0,multisampling2X:1,multisampling4X:2,multisampling8X:3,multisampling16X:4};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={none:0,phong:1,pnTriangles:2};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={constant:0,surfaceNormal:1,random:2};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={none:0,projectedDepth:1,distance:2,oldestFirst:3,youngestFirst:4};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={billboardScreenAligned:0,billboardViewAligned:1,free:2,billboardYAligned:3};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={repeat:0,clamp:1,autoReverse:2};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={additive:0,subtract:1,multiply:2,screen:3,alpha:4,replace:5};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={normalized:0,additive:1};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(35),f=(r(c),n(36)),h=r(f),d=n(57),_=r(d),p={A:0,B:1,X:2,Y:3,L1:4,R1:5,UP:12,DOWN:13,LEFT:14,RIGHT:15};"undefined"!=typeof navigator&&-1!==navigator.userAgent.indexOf("Firefox")&&(p.A=1,p.B=2,p.X=0,p.Y=3,p.UP=14,p.DOWN=15,p.LEFT=16,p.RIGHT=17);var y=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._controller=null,e.valueChangedHandler=null,e._leftShoulder=new h.default,e._rightShoulder=new h.default,e._dpad=new _.default,e._buttonA=new h.default,e._buttonB=new h.default,e._buttonX=new h.default,e._buttonY=new h.default,e._buttonMapping=new Map([[e._leftShoulder,p.L1],[e._rightShoulder,p.R1],[e._buttonA,p.A],[e._buttonB,p.B],[e._buttonX,p.X],[e._buttonY,p.Y]]),e._dpadMapping=new Map([[e._dpad._up,p.UP],[e._dpad._down,p.DOWN],[e._dpad._left,p.LEFT],[e._dpad._right,p.RIGHT]]),e}return a(t,e),u(t,[{key:"_update",value:function(){var e=this;this._buttonMapping.forEach(function(t,n){n._value=e._controller._state.buttons[t],n._isPressed=e._controller._state.pressed[t]}),this._dpadMapping.forEach(function(t,n){n._value=e._controller._state.buttons[t],n._isPressed=e._controller._state.pressed[t]}),this._dpad._xAxis._value=this._dpad._right._value-this._dpad._left._value,this._dpad._yAxis._value=this._dpad._down._value-this._dpad._up._value,this._buttonMapping.forEach(function(t,n){n.pressedChangedHandler&&e._controller._updated.pressed[t]&&n.pressedChangedHandler(n,n._value,n._isPressed),e._controller._updated.buttons[t]&&(n.valueChangedHandler&&n.valueChangedHandler(n,n._value,n._isPressed),e.valueChangedHandler&&e.valueChangedHandler(e,n))});var t=!1;this._dpadMapping.forEach(function(n,r){e._controller._updated.pressed[n]&&(t=!0,r.pressedChangedHandler&&r.pressedChangedHandler(r,r._value,r._isPressed)),e._controller._updated.buttons[n]&&(t=!0,r.valueChangedHandler&&r.valueChangedHandler(r,r._value,r._isPressed),e.valueChangedHandler&&e.valueChangedHandler(e,r))}),t&&(this._dpad.valueChangedHandler&&this._dpad.valueChangedHandler(this._dpad,this._dpad._xAxis.value,this._dpad._yAxis.value),this.valueChangedHandler&&this.valueChangedHandler(this,this._dpad))}},{key:"_getValue",value:function(e){var t=this._buttonMapping.get(e);return void 0===t&&(t=this._dpadMapping.get(e)),void 0===t?null:this._controller._state.buttons[t]}},{key:"saveSnapshot",value:function(){return null}},{key:"controller",get:function(){return this._controller}},{key:"leftShoulder",get:function(){return this._leftShoulder}},{key:"rightShoulder",get:function(){return this._rightShoulder}},{key:"dpad",get:function(){return this._dpad}},{key:"buttonA",get:function(){return this._buttonA}},{key:"buttonB",get:function(){return this._buttonB}},{key:"buttonX",get:function(){return this._buttonX}},{key:"buttonY",get:function(){return this._buttonY}}]),t}(s.default);t.default=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(37),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._value=0,e.valueChangedHandler=null,e}return o(t,e),a(t,[{key:"value",get:function(){return this._value}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(36),f=r(c),h=n(57),d=r(h),_=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._controller=null,e.valueChangedHandler=null,e._leftShoulder=new f.default,e._rightShoulder=new f.default,e._dpad=new d.default,e._buttonA=new f.default,e._buttonB=new f.default,e._buttonX=new f.default,e._buttonY=new f.default,e._leftThumbstick=new d.default,e._rightThumbstick=new d.default,e._leftTrigger=new f.default,e._rightTrigger=new f.default,e}return a(t,e),u(t,[{key:"_update",value:function(){}},{key:"saveSnapshot",value:function(){return null}},{key:"controller",get:function(){return this._controller}},{key:"leftShoulder",get:function(){return this._leftShoulder}},{key:"rightShoulder",get:function(){return this._rightShoulder}},{key:"dpad",get:function(){return this._dpad}},{key:"buttonA",get:function(){return this._buttonA}},{key:"buttonB",get:function(){return this._buttonB}},{key:"buttonX",get:function(){return this._buttonX}},{key:"buttonY",get:function(){return this._buttonY}},{key:"leftThumbstick",get:function(){return this._leftThumbstick}},{key:"rightThumbstick",get:function(){return this._rightThumbstick}},{key:"leftTrigger",get:function(){return this._leftTrigger}},{key:"rightTrigger",get:function(){return this._rightTrigger}}]),t}(s.default);t.default=_},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._controller=null,e.valueChangedHandler=null,e.reportsAbsoluteDpadValues=!1,e.allowsRotation=!1,e._dpad=null,e._buttonA=null,e._buttonX=null,e}return o(t,e),a(t,[{key:"saveSnapshot",value:function(){return null}},{key:"controller",get:function(){return this._controller}},{key:"dpad",get:function(){return this._dpad}},{key:"buttonA",get:function(){return this._buttonA}},{key:"buttonX",get:function(){return this._buttonX}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,null,[{key:"initWithCoder",value:function(e){var t={};if(void 0!==e._refObj["NS.objects"]){var n=e._refObj["NS.keys"],r=e._refObj["NS.objects"];if(!Array.isArray(n))throw new Error("NS.keys must be Array");if(!Array.isArray(r))throw new Error("NS.objects must be Array");if(n.length!==r.length)throw new Error("NS.keys.length !== NS.objects.length");var i=e.copy();i._refObj=n;var o=e.copy();o._refObj=r;for(var a=0;a<n.length;a++){var u=i.decodeObjectForKey(a),l=o.decodeObjectForKey(a);t[u]=l}}else for(var s=0;;s++){var c="NS.object."+s,f="NS.key."+s;if(void 0===e._refObj[c])break;var h=e.decodeObjectForKey(f),d=e.decodeObjectForKey(c);t[h]=d}return t}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,null,[{key:"initWithCoder",value:function(e){var t=[];if(void 0!==e._refObj["NS.objects"]){var n=e._refObj["NS.objects"];if(!Array.isArray(n))throw new Error("NS.objects must be Array");var r=e.copy();r._refObj=n;for(var i=0;i<n.length;i++){var o=r.decodeObjectForKey(i);t.push(o)}}else for(var a=0;;a++){var u="NS.object."+a;if(void 0===e._refObj[u])break;var l=e.decodeObjectForKey(u);t.push(l)}return t}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s={AVAudioEngineConfigurationChange:Symbol(),AVAudioSessionInterruption:Symbol(),AVAudioSessionMediaServicesWereLost:Symbol(),AVAudioSessionMediaServicesWereReset:Symbol(),AVAudioSessionRouteChange:Symbol(),AVAudioSessionSilenceSecondaryAudioHint:Symbol(),AVAudioUnitComponentTagsDidChange:Symbol(),CKAccountChanged:Symbol(),CLKComplicationServerActiveComplicationsDidChange:Symbol(),CNContactStoreDidChange:Symbol(),EKEventStoreChanged:Symbol(),HKUserPreferencesDidChange:Symbol(),HMCharacteristicPropertySupportsEvent:Symbol(),NSBundleResourceRequestLowDiskSpace:Symbol(),NSCalendarDayChanged:Symbol(),NSDidBecomeSingleThreaded:Symbol(),NSExtensionHostDidBecomeActive:Symbol(),NSExtensionHostDidEnterBackground:Symbol(),NSExtensionHostWillEnterForeground:Symbol(),NSExtensionHostWillResignActive:Symbol(),NSFileHandleConnectionAccepted:Symbol(),NSFileHandleDataAvailable:Symbol(),NSFileHandleReadToEndOfFileCompletion:Symbol(),NSHTTPCookieManagerAcceptPolicyChanged:Symbol(),NSHTTPCookieManagerCookiesChanged:Symbol(),NSManagedObjectContextDidSave:Symbol(),NSManagedObjectContextObjectsDidChange:Symbol(),NSManagedObjectContextWillSave:Symbol(),NSMetadataQueryDidFinishGathering:Symbol(),NSMetadataQueryDidStartGathering:Symbol(),NSMetadataQueryDidUpdate:Symbol(),NSMetadataQueryGatheringProgress:Symbol(),NSPersistentStoreCoordinatorStoresDidChange:Symbol(),NSPersistentStoreCoordinatorStoresWillChange:Symbol(),NSPersistentStoreCoordinatorWillRemoveStore:Symbol(),NSProcessInfoPowerStateDidChange:Symbol(),NSSystemClockDidChange:Symbol(),NSSystemTimeZoneDidChange:Symbol(),NSThreadWillExit:Symbol(),NSURLCredentialStorageChanged:Symbol(),NSUbiquityIdentityDidChange:Symbol(),NSUndoManagerCheckpoint:Symbol(),NSUndoManagerDidCloseUndoGroup:Symbol(),NSUndoManagerDidOpenUndoGroup:Symbol(),NSUndoManagerDidRedoChange:Symbol(),NSUndoManagerDidUndoChange:Symbol(),NSUndoManagerWillCloseUndoGroup:Symbol(),NSUndoManagerWillRedoChange:Symbol(),NSUndoManagerWillUndoChange:Symbol(),NSWillBecomeMultiThreaded:Symbol(),PKPassLibraryDidChange:Symbol(),PKPassLibraryRemotePaymentPassesDidChange:Symbol(),UIAccessibilityAnnouncementDidFinish:Symbol(),UIAccessibilityElementFocused:Symbol(),WKAudioFilePlayerItemDidPlayToEndTime:Symbol(),WKAudioFilePlayerItemFailedToPlayToEndTime:Symbol(),WKAudioFilePlayerItemTimeJumped:Symbol(),ABPeoplePickerDisplayedPropertyDidChange:Symbol(),ABPeoplePickerGroupSelectionDidChange:Symbol(),ABPeoplePickerNameSelectionDidChange:Symbol(),ABPeoplePickerValueSelectionDidChange:Symbol(),ACAccountStoreDidChange:Symbol(),AVAssetChapterMetadataGroupsDidChange:Symbol(),AVAssetContainsFragmentsDidChange:Symbol(),AVAssetDurationDidChange:Symbol(),AVAssetMediaSelectionGroupsDidChange:Symbol(),AVAssetTrackSegmentsDidChange:Symbol(),AVAssetTrackTimeRangeDidChange:Symbol(),AVAssetTrackTrackAssociationsDidChange:Symbol(),AVAssetWasDefragmented:Symbol(),AVCaptureDeviceWasConnected:Symbol(),AVCaptureDeviceWasDisconnected:Symbol(),AVCaptureInputPortFormatDescriptionDidChange:Symbol(),AVCaptureSessionDidStartRunning:Symbol(),AVCaptureSessionDidStopRunning:Symbol(),AVCaptureSessionRuntimeError:Symbol(),AVFragmentedMovieContainsMovieFragmentsDidChange:Symbol(),AVFragmentedMovieDurationDidChange:Symbol(),AVFragmentedMovieTrackSegmentsDidChange:Symbol(),AVFragmentedMovieTrackTimeRangeDidChange:Symbol(),AVFragmentedMovieTrackTotalSampleDataLengthDidChange:Symbol(),AVFragmentedMovieWasDefragmented:Symbol(),AVPlayerItemDidPlayToEndTime:Symbol(),AVPlayerItemFailedToPlayToEndTime:Symbol(),AVPlayerItemNewAccessLogEntry:Symbol(),AVPlayerItemNewErrorLogEntry:Symbol(),AVPlayerItemPlaybackStalled:Symbol(),AVPlayerItemTimeJumped:Symbol(),AVSampleBufferDisplayLayerFailedToDecode:Symbol(),CWBSSIDDidChange:Symbol(),CWCountryCodeDidChange:Symbol(),CWLinkDidChange:Symbol(),CWLinkQualityDidChange:Symbol(),CWModeDidChange:Symbol(),CWPowerDidChange:Symbol(),CWSSIDDidChange:Symbol(),CWScanCacheDidUpdate:Symbol(),GCControllerDidConnect:Symbol(),GCControllerDidDisconnect:Symbol(),IKFilterBrowserFilterDoubleClick:Symbol(),IKFilterBrowserFilterSelected:Symbol(),IKFilterBrowserWillPreviewFilter:Symbol(),IOBluetoothHostControllerPoweredOff:Symbol(),IOBluetoothHostControllerPoweredOn:Symbol(),IOBluetoothL2CAPChannelPublished:Symbol(),IOBluetoothL2CAPChannelTerminated:Symbol(),MKAnnotationCalloutInfoDidChange:Symbol(),NEFilterConfigurationDidChange:Symbol(),NEVPNConfigurationChange:Symbol(),NEVPNStatusDidChange:Symbol(),announcementRequested:Symbol(),applicationActivated:Symbol(),applicationDeactivated:Symbol(),applicationHidden:Symbol(),applicationShown:Symbol(),created:Symbol(),drawerCreated:Symbol(),focusedUIElementChanged:Symbol(),focusedWindowChanged:Symbol(),helpTagCreated:Symbol(),layoutChanged:Symbol(),mainWindowChanged:Symbol(),moved:Symbol(),resized:Symbol(),rowCollapsed:Symbol(),rowCountChanged:Symbol(),rowExpanded:Symbol(),selectedCellsChanged:Symbol(),selectedChildrenChanged:Symbol(),selectedChildrenMoved:Symbol(),selectedColumnsChanged:Symbol(),selectedRowsChanged:Symbol(),selectedTextChanged:Symbol(),sheetCreated:Symbol(),titleChanged:Symbol(),uiElementDestroyed:Symbol(),unitsChanged:Symbol(),valueChanged:Symbol(),windowCreated:Symbol(),windowDeminiaturized:Symbol(),windowMiniaturized:Symbol(),windowMoved:Symbol(),windowResized:Symbol(),progressMarkNotification:Symbol(),antialiasThresholdChangedNotification:Symbol(),NSAppleEventManagerWillProcessFirstEvent:Symbol(),didBecomeActiveNotification:Symbol(),didChangeOcclusionStateNotification:Symbol(),didChangeScreenParametersNotification:Symbol(),didFinishLaunchingNotification:Symbol(),didFinishRestoringWindowsNotification:Symbol(),didHideNotification:Symbol(),didResignActiveNotification:Symbol(),didUnhideNotification:Symbol(),didUpdateNotification:Symbol(),willBecomeActiveNotification:Symbol(),willFinishLaunchingNotification:Symbol(),willHideNotification:Symbol(),willResignActiveNotification:Symbol(),willTerminateNotification:Symbol(),willUnhideNotification:Symbol(),willUpdateNotification:Symbol(),columnConfigurationDidChangeNotification:Symbol(),NSClassDescriptionNeededForClass:Symbol(),didChangeNotification:Symbol(),colorDidChangeNotification:Symbol(),selectionDidChangeNotification:Symbol(),selectionIsChangingNotification:Symbol(),willDismissNotification:Symbol(),willPopUpNotification:Symbol(),contextHelpModeDidActivateNotification:Symbol(),contextHelpModeDidDeactivateNotification:Symbol(),textDidBeginEditingNotification:Symbol(),textDidChangeNotification:Symbol(),textDidEndEditingNotification:Symbol(),currentControlTintDidChangeNotification:Symbol(),didCloseNotification:Symbol(),didOpenNotification:Symbol(),willCloseNotification:Symbol(),willOpenNotification:Symbol(),fontSetChangedNotification:Symbol(),registryDidChangeNotification:Symbol(),didAddItemNotification:Symbol(),didBeginTrackingNotification:Symbol(),didChangeItemNotification:Symbol(),didEndTrackingNotification:Symbol(),didRemoveItemNotification:Symbol(),didSendActionNotification:Symbol(),willSendActionNotification:Symbol(),columnDidMoveNotification:Symbol(),columnDidResizeNotification:Symbol(),itemDidCollapseNotification:Symbol(),itemDidExpandNotification:Symbol(),itemWillCollapseNotification:Symbol(),itemWillExpandNotification:Symbol(),NSPersistentStoreDidImportUbiquitousContentChanges:Symbol(),didShowNotification:Symbol(),willShowNotification:Symbol(),preferredScrollerStyleDidChangeNotification:Symbol(),rowsDidChangeNotification:Symbol(),colorSpaceDidChangeNotification:Symbol(),didEndLiveMagnifyNotification:Symbol(),didEndLiveScrollNotification:Symbol(),didLiveScrollNotification:Symbol(),willStartLiveMagnifyNotification:Symbol(),willStartLiveScrollNotification:Symbol(),didChangeAutomaticCapitalizationNotification:Symbol(),didChangeAutomaticDashSubstitutionNotification:Symbol(),didChangeAutomaticPeriodSubstitutionNotification:Symbol(),didChangeAutomaticQuoteSubstitutionNotification:Symbol(),didChangeAutomaticSpellingCorrectionNotification:Symbol(),didChangeAutomaticTextReplacementNotification:Symbol(),didResizeSubviewsNotification:Symbol(),willResizeSubviewsNotification:Symbol(),systemColorsDidChangeNotification:Symbol(),selectedAlternativeStringNotification:Symbol(),didBeginEditingNotification:Symbol(),didEndEditingNotification:Symbol(),keyboardSelectionDidChangeNotification:Symbol(),NSTextStorageDidProcessEditing:Symbol(),NSTextStorageWillProcessEditing:Symbol(),didChangeSelectionNotification:Symbol(),didChangeTypingAttributesNotification:Symbol(),willChangeNotifyingTextViewNotification:Symbol(),willAddItemNotification:Symbol(),boundsDidChangeNotification:Symbol(),didUpdateTrackingAreasNotification:Symbol(),frameDidChangeNotification:Symbol(),globalFrameDidChangeNotification:Symbol(),didBecomeKeyNotification:Symbol(),didBecomeMainNotification:Symbol(),didChangeBackingPropertiesNotification:Symbol(),didChangeScreenNotification:Symbol(),didChangeScreenProfileNotification:Symbol(),didDeminiaturizeNotification:Symbol(),didEndLiveResizeNotification:Symbol(),didEndSheetNotification:Symbol(),didEnterFullScreenNotification:Symbol(),didEnterVersionBrowserNotification:Symbol(),didExitFullScreenNotification:Symbol(),didExitVersionBrowserNotification:Symbol(),didExposeNotification:Symbol(),didMiniaturizeNotification:Symbol(),didMoveNotification:Symbol(),didResignKeyNotification:Symbol(),didResignMainNotification:Symbol(),didResizeNotification:Symbol(),willBeginSheetNotification:Symbol(),willEnterFullScreenNotification:Symbol(),willEnterVersionBrowserNotification:Symbol(),willExitFullScreenNotification:Symbol(),willExitVersionBrowserNotification:Symbol(),willMiniaturizeNotification:Symbol(),willMoveNotification:Symbol(),willStartLiveResizeNotification:Symbol(),accessibilityDisplayOptionsDidChangeNotification:Symbol(),activeSpaceDidChangeNotification:Symbol(),didActivateApplicationNotification:Symbol(),didChangeFileLabelsNotification:Symbol(),didDeactivateApplicationNotification:Symbol(),didHideApplicationNotification:Symbol(),didLaunchApplicationNotification:Symbol(),didMountNotification:Symbol(),didPerformFileOperationNotification:Symbol(),didRenameVolumeNotification:Symbol(),didTerminateApplicationNotification:Symbol(),didUnhideApplicationNotification:Symbol(),didUnmountNotification:Symbol(),didWakeNotification:Symbol(),screensDidSleepNotification:Symbol(),screensDidWakeNotification:Symbol(),sessionDidBecomeActiveNotification:Symbol(),sessionDidResignActiveNotification:Symbol(),willLaunchApplicationNotification:Symbol(),willPowerOffNotification:Symbol(),willSleepNotification:Symbol(),willUnmountNotification:Symbol(),PDFDocumentDidBeginFind:Symbol(),PDFDocumentDidBeginPageFind:Symbol(),PDFDocumentDidBeginPageWrite:Symbol(),PDFDocumentDidBeginWrite:Symbol(),PDFDocumentDidEndFind:Symbol(),PDFDocumentDidEndPageFind:Symbol(),PDFDocumentDidEndPageWrite:Symbol(),PDFDocumentDidEndWrite:Symbol(),PDFDocumentDidFindMatch:Symbol(),PDFDocumentDidUnlock:Symbol(),PDFThumbnailViewDocumentEdited:Symbol(),PDFViewAnnotationHit:Symbol(),PDFViewAnnotationWillHit:Symbol(),PDFViewChangedHistory:Symbol(),PDFViewCopyPermission:Symbol(),PDFViewDisplayBoxChanged:Symbol(),PDFViewDisplayModeChanged:Symbol(),PDFViewDocumentChanged:Symbol(),PDFViewPageChanged:Symbol(),PDFViewPrintPermission:Symbol(),PDFViewScaleChanged:Symbol(),PDFViewSelectionChanged:Symbol(),PDFViewVisiblePagesChanged:Symbol(),QCCompositionPickerPanelDidSelectComposition:Symbol(),QCCompositionPickerViewDidSelectComposition:Symbol(),QCCompositionRepositoryDidUpdate:Symbol(),QCViewDidStartRendering:Symbol(),QCViewDidStopRendering:Symbol(),WebHistoryAllItemsRemoved:Symbol(),WebHistoryItemChanged:Symbol(),WebHistoryItemsAdded:Symbol(),WebHistoryItemsRemoved:Symbol(),WebHistoryLoaded:Symbol(),WebHistorySaved:Symbol(),WebPreferencesChanged:Symbol(),WebViewDidBeginEditing:Symbol(),WebViewDidChange:Symbol(),WebViewDidChangeSelection:Symbol(),WebViewDidChangeTypingStyle:Symbol(),WebViewDidEndEditing:Symbol(),WebViewProgressEstimateChanged:Symbol(),WebViewProgressFinished:Symbol(),WebViewProgressStarted:Symbol(),abDatabaseChanged:Symbol(),abDatabaseChangedExternally:Symbol(),quartzFilterManagerDidAddFilter:Symbol(),quartzFilterManagerDidModifyFilter:Symbol(),quartzFilterManagerDidRemoveFilter:Symbol(),quartzFilterManagerDidSelectFilter:Symbol(),EAAccessoryDidConnect:Symbol(),EAAccessoryDidDisconnect:Symbol(),MPMovieDurationAvailable:Symbol(),MPMovieMediaTypesAvailable:Symbol(),MPMovieNaturalSizeAvailable:Symbol(),MPMoviePlayerDidEnterFullscreen:Symbol(),MPMoviePlayerDidExitFullscreen:Symbol(),MPMoviePlayerIsAirPlayVideoActiveDidChange:Symbol(),MPMoviePlayerLoadStateDidChange:Symbol(),MPMoviePlayerNowPlayingMovieDidChange:Symbol(),MPMoviePlayerPlaybackDidFinish:Symbol(),MPMoviePlayerPlaybackStateDidChange:Symbol(),MPMoviePlayerReadyForDisplayDidChange:Symbol(),MPMoviePlayerScalingModeDidChange:Symbol(),MPMoviePlayerThumbnailImageRequestDidFinish:Symbol(),MPMoviePlayerTimedMetadataUpdated:Symbol(),MPMoviePlayerWillEnterFullscreen:Symbol(),MPMoviePlayerWillExitFullscreen:Symbol(),MPMovieSourceTypeAvailable:Symbol(),SKCloudServiceCapabilitiesDidChange:Symbol(),SKStorefrontIdentifierDidChange:Symbol(),TVTopShelfItemsDidChange:Symbol(),UIAccessibilityAssistiveTouchStatusDidChange:Symbol(),UIAccessibilityBoldTextStatusDidChange:Symbol(),UIAccessibilityClosedCaptioningStatusDidChange:Symbol(),UIAccessibilityDarkerSystemColorsStatusDidChange:Symbol(),UIAccessibilityGrayscaleStatusDidChange:Symbol(),UIAccessibilityGuidedAccessStatusDidChange:Symbol(),UIAccessibilityHearingDevicePairedEarDidChange:Symbol(),UIAccessibilityInvertColorsStatusDidChange:Symbol(),UIAccessibilityMonoAudioStatusDidChange:Symbol(),UIAccessibilityReduceMotionStatusDidChange:Symbol(),UIAccessibilityReduceTransparencyStatusDidChange:Symbol(),UIAccessibilityShakeToUndoDidChange:Symbol(),UIAccessibilitySpeakScreenStatusDidChange:Symbol(),UIAccessibilitySpeakSelectionStatusDidChange:Symbol(),UIAccessibilitySwitchControlStatusDidChange:Symbol(),UIApplicationDidBecomeActive:Symbol(),UIApplicationDidEnterBackground:Symbol(),UIApplicationDidFinishLaunching:Symbol(),UIApplicationDidReceiveMemoryWarning:Symbol(),UIApplicationSignificantTimeChange:Symbol(),UIApplicationUserDidTakeScreenshot:Symbol(),UIApplicationWillEnterForeground:Symbol(),UIApplicationWillResignActive:Symbol(),UIApplicationWillTerminate:Symbol(),UIContentSizeCategoryDidChange:Symbol(),UIDeviceProximityStateDidChange:Symbol(),UIScreenBrightnessDidChange:Symbol(),UIScreenDidConnect:Symbol(),UIScreenDidDisconnect:Symbol(),UIScreenModeDidChange:Symbol(),UITableViewSelectionDidChange:Symbol(),UITextFieldTextDidBeginEditing:Symbol(),UITextFieldTextDidChange:Symbol(),UITextFieldTextDidEndEditing:Symbol(),UITextInputCurrentInputModeDidChange:Symbol(),UITextViewTextDidBeginEditing:Symbol(),UITextViewTextDidChange:Symbol(),UITextViewTextDidEndEditing:Symbol(),UIViewControllerShowDetailTargetDidChange:Symbol(),UIWindowDidBecomeHidden:Symbol(),UIWindowDidBecomeKey:Symbol(),UIWindowDidBecomeVisible:Symbol(),UIWindowDidResignKey:Symbol(),ALAssetsLibraryChanged:Symbol(),AVCaptureDeviceSubjectAreaDidChange:Symbol(),AVCaptureSessionInterruptionEnded:Symbol(),AVCaptureSessionWasInterrupted:Symbol(),CTRadioAccessTechnologyDidChange:Symbol(),MFMessageComposeViewControllerTextMessageAvailabilityDidChange:Symbol(),MPMediaLibraryDidChange:Symbol(),MPMediaPlaybackIsPreparedToPlayDidChange:Symbol(),MPMusicPlayerControllerNowPlayingItemDidChange:Symbol(),MPMusicPlayerControllerPlaybackStateDidChange:Symbol(),MPMusicPlayerControllerVolumeDidChange:Symbol(),MPVolumeViewWirelessRouteActiveDidChange:Symbol(),MPVolumeViewWirelessRoutesAvailableDidChange:Symbol(),NKIssueDownloadCompleted:Symbol(),UIApplicationBackgroundRefreshStatusDidChange:Symbol(),UIApplicationDidChangeStatusBarFrame:Symbol(),UIApplicationDidChangeStatusBarOrientation:Symbol(),UIApplicationWillChangeStatusBarFrame:Symbol(),UIApplicationWillChangeStatusBarOrientation:Symbol(),UIDeviceBatteryLevelDidChange:Symbol(),UIDeviceBatteryStateDidChange:Symbol(),UIDeviceOrientationDidChange:Symbol(),UIDocumentStateChanged:Symbol(),UIKeyboardDidChangeFrame:Symbol(),UIKeyboardDidHide:Symbol(),UIKeyboardDidShow:Symbol(),UIKeyboardWillChangeFrame:Symbol(),UIKeyboardWillHide:Symbol(),UIKeyboardWillShow:Symbol(),UIMenuControllerDidHideMenu:Symbol(),UIMenuControllerDidShowMenu:Symbol(),UIMenuControllerMenuFrameDidChange:Symbol(),UIMenuControllerWillHideMenu:Symbol(),UIMenuControllerWillShowMenu:Symbol(),UIPasteboardChanged:Symbol(),UIPasteboardRemoved:Symbol(),UIApplicationProtectedDataDidBecomeAvailable:Symbol(),UIApplicationProtectedDataWillBecomeUnavailable:Symbol(),didChangeAutomaticTextCompletionNotification:Symbol(),MPMusicPlayerControllerQueueDidChange:Symbol(),GKPlayerAuthenticationDidChangeNotificationName:Symbol(),GKPlayerDidChangeNotificationName:Symbol(),NEDNSProxyConfigurationDidChange:Symbol(),SKStorefrontCountryCodeDidChange:Symbol(),UIAccessibilityVoiceOverStatusDidChange:Symbol(),UIFocusDidUpdate:Symbol(),UIFocusMovementDidFail:Symbol()},c=function(e){function t(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a._name=e,a._object=n,a._userInfo=o,a}return o(t,e),a(t,[{key:"initCoder",value:function(e){}},{key:"initNameObject",value:function(e,t){}}]),a(t,[{key:"name",get:function(){return this._name}},{key:"object",get:function(){return this._object}},{key:"userInfo",get:function(){return this._userInfo}}],[{key:"Name",get:function(){return s}}]),t}(l.default);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(38),f=(r(c),n(3)),h=r(f),d=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._components=[],e}return a(t,e),u(t,[{key:"addComponent",value:function(e){this._components.indexOf(e)<0&&(this._components.push(e),e._entity=this,e.didAddToEntity())}},{key:"updateDeltaTime",value:function(e){}},{key:"componentOfType",value:function(e){return this._components.find(function(t){return(0,h.default)(t,e)})}},{key:"removeComponentOfType",value:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this._components[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if((0,h.default)(a,e)){a.willRemoveFromEntity();var u=this._components.indexOf(a);u>=0&&(this._components.splice(u),a._entity=null)}}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"components",get:function(){return this._components.slice()}}]),t}(s.default);t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),f=n(122),h=(r(f),function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._goals=[],e._weights=[],e}return u(t,e),l(t,[{key:"setWeightFor",value:function(e,t){var n=this._goals.indexOf(t);n>=0&&(this._weights[n]=e)}},{key:"weightFor",value:function(e){var t=this._goals.indexOf(e);return t>=0?this._weights[t]:0}},{key:"remove",value:function(e){var t=this._goals.indexOf(e);t>=0&&(this._goals.splice(t,1),this._weights.splice(t,1))}},{key:"removeAllGoals",value:function(){this._goals=[],this._weights=[]}},{key:"subscript",value:function(e){return null}},{key:"goalCount",get:function(){return this._goals.length}}],[{key:"behaviorWithGoalWeight",value:function(e,n){var r=new t;return r._goals.push(e),r._weights.push(n),r}},{key:"behaviorWithGoals",value:function(e){var n,r=new t;(n=r._goals).push.apply(n,i(e));for(var o=0;o<e.length;o++)r._weights.push(1);return r}},{key:"behaviorWithGoalsAndWeights",value:function(e,n){var r,o,a=new t;return(r=a._goals).push.apply(r,i(e)),(o=a._weights).push.apply(o,i(n)),a}}]),t}(c.default));t.default=h},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(l),c={none:0,seek:1,flee:2,reach:3,wander:4,avoid:5,intercept:6,separate:7,align:8,cohere:9,stay:10,follow:11},f=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._type=0,e._path=null,e._obstacles=[],e._agents=[],e._time=0,e._angle=0,e._distance=0,e._speed=0,e._forward=!0,e}return a(t,e),u(t,null,[{key:"goalToSeekAgent",value:function(e){var n=new t;return n._type=c.seek,n._agents.push(e),n}},{key:"goalToFleeAgent",value:function(e){var n=new t;return n._type=c.flee,n._agents.push(e),n}},{key:"goalToReachTargetSpeed",value:function(e){var n=new t;return n._type=c.reach,n._speed=e,n}},{key:"goalToWander",value:function(e){var n=new t;return n._type=c.wander,n._speed=e,n}},{key:"goalToAvoid",value:function(e,n){var i,o=new t;return o._type=c.avoid,(i=o._obstacles).push.apply(i,r(e)),o._time=n,o}},{key:"goalToInterceptAgent",value:function(e,n){var i,o=new t;return o._type=c.intercept,(i=o._agents).push.apply(i,r(e)),o._time=n,o}},{key:"goalToSeparateFrom",value:function(e,n,i){var o,a=new t;return a._type=c.separate,(o=a._agents).push.apply(o,r(e)),a._distance=n,a._angle=i,a}},{key:"goalToAlignWith",value:function(e,n,i){var o,a=new t;return a._type=c.align,(o=a._agents).push.apply(o,r(e)),a._distance=n,a._angle=i,a}},{key:"goalToCohereWith",value:function(e,n,i){var o,a=new t;return a._type=c.cohere,(o=a._agents).push.apply(o,r(e)),a._distance=n,a._angle=i,a}},{key:"goalToStayOn",value:function(e,n){var r=new t;return r._type=c.stay,r._path=e,r._time=n,r}},{key:"goalToFollow",value:function(e,n,r){var i=new t;return i._type=c.follow,i._path=e,i._time=n,i._foward=r,i}}]),t}(s.default);t.default=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(58),a=(function(e){e&&e.__esModule}(o),function(){function e(){r(this,e)}return i(e,[{key:"agentWillUpdate",value:function(e){}},{key:"agentDidUpdate",value:function(e){}}]),e}());t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(20),l=r(u),s=n(31),c=r(s),f=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.shouldEnableEffects=!0,e.filter=null,e.shouldCenterFilter=!0,e.blendMode=c.default.alpha,e.shader=null,e.attributeValues=new Map,e.shouldRasterize=!1,e}return a(t,e),t}(l.default);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={fill:0,aspectFill:1,aspectFit:2,resizeFill:3};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={center:0,left:1,right:2};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={baseline:0,center:1,top:2,bottom:3};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(59),o=r(i),a=n(60),u=r(a),l=n(16),s=r(l),c=n(11),f=r(c),h=n(129),d=r(h),_=n(130),p=r(_),y=n(10),m=r(y),v=n(131),g=r(v),b=n(132),S=r(b),w=n(133),T=r(w),k=n(61),C=r(k),O=n(134),E=r(O),P=n(140),A=r(P),x=n(62),M=r(x),N=n(24),F=r(N),R=n(3),D=r(R),I=n(40),j=r(I),B=n(41),U=r(B),L=n(42),V=r(L),z=n(141),G=r(z),Y=n(25),X=r(Y),H=n(26),W=r(H),K=n(63),Z=r(K),q=n(142),J=r(q),Q=n(64),$=r(Q),ee=n(143),te=r(ee),ne=n(144),re=r(ne),ie=n(145),oe=r(ie),ae=n(146),ue=r(ae),le=n(147),se=r(le),ce=n(148),fe=r(ce),he=n(149),de=r(he),_e=n(150),pe=r(_e),ye=n(6),me=r(ye),ve=n(151),ge=r(ve),be=n(152),Se=r(be),we=n(153),Te=r(we),ke=n(154),Ce=r(ke),Oe=n(48),Ee=r(Oe),Pe=n(77),Ae=r(Pe),xe=n(155),Me=r(xe),Ne=n(78),Fe=r(Ne),Re=n(156),De=r(Re),Ie=n(157),je=r(Ie),Be=n(158),Ue=r(Be),Le=n(159),Ve=r(Le),ze=n(160),Ge=r(ze),Ye=n(161),Xe=r(Ye),He=n(72),We=r(He),Ke=n(79),Ze=r(Ke),qe=n(162),Je=r(qe),Qe=n(81),$e=r(Qe),et=n(163),tt=r(et),nt=n(164),rt=r(nt),it=n(82),ot=r(it),at=n(165),ut=r(at),lt=n(71),st=r(lt),ct=n(166),ft=r(ct),ht=n(87),dt=r(ht),_t=n(168),pt=r(_t),yt=n(169),mt=r(yt),vt=n(22),gt=r(vt),bt=n(170),St=r(bt),wt=n(85),Tt=r(wt),kt=n(171),Ct=r(kt),Ot=n(88),Et=r(Ot),Pt=n(19),At=r(Pt),xt=n(172),Mt=r(xt),Nt=n(46),Ft=r(Nt),Rt=n(173),Dt=r(Rt),It=n(174),jt=r(It),Bt=n(175),Ut=r(Bt),Lt=n(176),Vt=r(Lt),zt=n(177),Gt=r(zt),Yt=n(178),Xt=r(Yt),Ht=n(179),Wt=r(Ht),Kt=n(50),Zt=r(Kt),qt=n(180),Jt=r(qt),Qt=n(181),$t=r(Qt),en=n(182),tn=r(en),nn=n(183),rn=r(nn),on=n(184),an=r(on),un=n(13),ln=r(un),sn=n(185),cn=r(sn),fn=n(186),hn=r(fn),dn=n(51),_n=r(dn),pn=n(187),yn=r(pn),mn=n(188),vn=r(mn),gn=n(189),bn=r(gn),Sn=n(190),wn=r(Sn),Tn=n(102),kn=r(Tn),Cn=n(8),On=r(Cn),En=n(191),Pn=r(En),An=n(76),xn=r(An),Mn=n(98),Nn=r(Mn),Fn=n(99),Rn=r(Fn),Dn=n(192),In=r(Dn),jn=n(103),Bn=r(jn),Un=n(193),Ln=r(Un),Vn=n(194),zn=r(Vn),Gn=n(195),Yn=r(Gn),Xn=n(196),Hn=r(Xn),Wn=n(7),Kn=r(Wn),Zn=n(89),qn=r(Zn),Jn=n(105),Qn=r(Jn),$n=n(197),er=r($n),tr=n(74),nr=r(tr),rr=n(198),ir=r(rr),or=n(106),ar=r(or),ur=n(28),lr=r(ur),sr=n(199),cr=r(sr),fr=n(107),hr=r(fr),dr=n(200),_r=r(dr),pr=n(201),yr=r(pr),mr=n(70),vr=r(mr),gr=n(202),br=r(gr),Sr=n(94),wr=r(Sr),Tr=n(203),kr=r(Tr),Cr=n(83),Or=r(Cr),Er=n(204),Pr=r(Er),Ar=n(5),xr=r(Ar),Mr=n(205),Nr=r(Mr),Fr=n(15),Rr=r(Fr),Dr=n(206),Ir=r(Dr),jr=n(207),Br=r(jr),Ur=n(208),Lr=r(Ur),Vr=n(209),zr=r(Vr),Gr=n(49),Yr=r(Gr),Xr=n(210),Hr=r(Xr),Wr=n(211),Kr=r(Wr),Zr=n(90),qr=r(Zr),Jr=n(80),Qr=r(Jr),$r=n(212),ei=r($r),ti=n(213),ni=r(ti),ri=n(214),ii=r(ri),oi=n(75),ai=r(oi),ui=n(65),li=r(ui),si=n(215),ci=r(si),fi=n(68),hi=r(fi),di=n(216),_i=r(di),pi=n(217),yi=r(pi),mi=n(1),vi=r(mi),gi=n(91),bi=r(gi),Si=n(218),wi=r(Si),Ti=n(219),ki=r(Ti),Ci=n(220),Oi=r(Ci),Ei=n(108),Pi=r(Ei),Ai=n(221),xi=r(Ai),Mi=n(222),Ni=r(Mi),Fi=n(109),Ri=r(Fi),Di=n(84),Ii=r(Di),ji=n(14),Bi=r(ji),Ui=n(223),Li=r(Ui),Vi=n(224),zi=r(Vi),Gi=n(225),Yi=r(Gi),Xi=n(226),Hi=r(Xi),Wi=n(227),Ki=r(Wi),Zi=n(110),qi=r(Zi),Ji=n(228),Qi=r(Ji),$i=n(229),eo=r($i),to=n(230),no=r(to),ro=n(30),io=r(ro),oo=n(231),ao=r(oo),uo=n(232),lo=r(uo),so=n(233),co=r(so),fo=n(33),ho=r(fo),_o=n(234),po=r(_o),yo=n(34),mo=r(yo),vo=n(235),go=r(vo),bo=n(69),So=r(bo),wo=n(236),To=r(wo),ko=n(237),Co=r(ko),Oo=n(52),Eo=r(Oo),Po=n(238),Ao=r(Po),xo=n(4),Mo=r(xo),No=n(239),Fo=r(No),Ro=n(73),Do=r(Ro),Io=n(240),jo=r(Io),Bo=n(95),Uo=r(Bo),Lo=n(241),Vo=r(Lo),zo=n(9),Go=r(zo),Yo=n(111),Xo=r(Yo),Ho=n(242),Wo=r(Ho),Ko=n(86),Zo=r(Ko),qo=n(112),Jo=r(qo),Qo=n(243),$o=r(Qo),ea=n(12),ta=r(ea),na=n(244),ra=r(na),ia=n(32),oa=r(ia),aa=n(245),ua=r(aa),la=n(47),sa=r(la),ca=n(246),fa=r(ca),ha=n(18),da=r(ha),_a=n(247),pa=r(_a),ya=n(248),ma=r(ya),va=n(249),ga=r(va),ba=n(250),Sa=r(ba),wa=n(251),Ta=r(wa),ka=n(252),Ca=r(ka),Oa=n(253),Ea=r(Oa),Pa=n(97),Aa=r(Pa),xa=n(254),Ma=r(xa),Na=n(255),Fa=r(Na),Ra=n(96),Da=r(Ra),Ia=n(256),ja=r(Ia),Ba=n(257),Ua=r(Ba),La=n(258),Va=r(La),za=n(104),Ga=r(za),Ya=n(259),Xa=r(Ya),Ha=n(54),Wa=r(Ha),Ka=n(260),Za=r(Ka),qa=n(261),Ja=r(qa),Qa=n(55),$a=r(Qa),eu=n(262),tu=r(eu),nu=n(263),ru=r(nu),iu=n(264),ou=r(iu),au=n(118),uu=r(au),lu=n(119),su=r(lu),cu=n(53),fu=r(cu),hu=n(117),du=r(hu),_u=n(265),pu=r(_u),yu=n(266),mu=r(yu),vu=n(101),gu=r(vu),bu=n(100),Su=r(bu),wu=n(267),Tu=r(wu),ku=n(268),Cu=r(ku),Ou=n(122),Eu=r(Ou),Pu=n(269),Au=r(Pu),xu=n(121),Mu=r(xu),Nu=n(270),Fu=r(Nu),Ru=n(38),Du=r(Ru),Iu=n(123),ju=r(Iu),Bu=n(120),Uu=r(Bu),Lu=n(58),Vu=r(Lu),zu=n(92),Gu=r(zu),Yu=n(2),Xu=r(Yu),Hu=n(21),Wu=r(Hu),Ku=n(23),Zu=r(Ku),qu=n(31),Ju=r(qu),Qu=n(271),$u=r(Qu),el=n(272),tl=r(el),nl=n(126),rl=r(nl),il=n(125),ol=r(il),al=n(20),ul=r(al),ll=n(273),sl=r(ll),cl=n(124),fl=r(cl),hl=n(56),dl=r(hl),_l=n(93),pl=r(_l),yl=n(274),ml=r(yl),vl=n(275),gl=r(vl),bl=n(276),Sl=r(bl),wl=n(277),Tl=r(wl),kl=n(278),Cl=r(kl),Ol=n(127),El=r(Ol),Pl=n(279),Al=r(Pl),xl=n(115),Ml=r(xl),Nl=n(113),Fl=r(Nl),Rl=n(57),Dl=r(Rl),Il=n(37),jl=r(Il),Bl=n(116),Ul=r(Bl),Ll=n(114),Vl=r(Ll),zl=n(36),Gl=r(zl),Yl=n(35),Xl=r(Yl),Hl=n(280),Wl=r(Hl),Kl=n(66),Zl=r(Kl),ql=n(43),Jl=r(ql),Ql=n(45),$l=r(Ql),es=n(67),ts=r(es),ns=n(281),rs=r(ns),is=n(29),os=r(is),as=n(44),us=r(as),ls=n(282),ss=r(ls),cs=n(283),fs=r(cs),hs=n(284),ds=r(hs),_s=n(285),ps=r(_s),ys=n(286),ms=r(ys),vs=n(287),gs=r(vs),bs=n(0),Ss=r(bs);U.default.registerClass(o.default,"CGLineCap"),U.default.registerClass(u.default,"CGLineJoin"),U.default.registerClass(s.default,"CGRect"),U.default.registerClass(f.default,"CGSize"),U.default.registerClass(d.default,"CGBlendMode"),U.default.registerClass(p.default,"CGPath"),U.default.registerClass(m.default,"CGPoint"),U.default.registerClass(g.default,"CGPathApplierFunction"),U.default.registerClass(S.default,"CGPathFillRule"),U.default.registerClass(T.default,"CGMutablePath"),U.default.registerClass(C.default,"CGVector"),U.default.registerClass(Z.default,"MTLTessellationPartitionMode"),U.default.registerClass(J.default,"DispatchTimeInterval"),U.default.registerClass($.default,"DispatchObject"),U.default.registerClass(te.default,"DispatchTime"),U.default.registerClass(re.default,"DispatchQueue"),U.default.registerClass(oe.default,"SCNBufferFrequency"),U.default.registerClass(ue.default,"SCNMatrix4Translate"),U.default.registerClass(se.default,"SCNActionRepeat"),U.default.registerClass(fe.default,"SCNPhysicsVehicleWheel"),U.default.registerClass(de.default,"SCNPhysicsVehicle"),U.default.registerClass(pe.default,"SCNPhysicsHingeJoint"),U.default.registerClass(me.default,"SCNGeometrySource"),U.default.registerClass(ge.default,"SCNAnimationPlayer"),U.default.registerClass(Se.default,"SCNTransformConstraint"),U.default.registerClass(Te.default,"SCNActionable"),U.default.registerClass(Ce.default,"SCNLayer"),U.default.registerClass(Ee.default,"SCNHitTestResult"),U.default.registerClass(Ae.default,"SCNParticleBirthLocation"),U.default.registerClass(Me.default,"SCNAudioSource"),U.default.registerClass(Fe.default,"SCNRenderingAPI"),U.default.registerClass(De.default,"SCNParticleModifierStage"),U.default.registerClass(je.default,"SCNMatrix4ToMat4"),U.default.registerClass(Ue.default,"SCNShape"),U.default.registerClass(Ve.default,"SCNSceneExportDelegate"),U.default.registerClass(Ge.default,"SCNParticleModifierBlock"),U.default.registerClass(Xe.default,"SCNMatrix4Mult"),U.default.registerClass(We.default,"SCNFilterMode"),U.default.registerClass(Ze.default,"SCNCamera"),U.default.registerClass(Je.default,"SCNFieldForceEvaluator"),U.default.registerClass($e.default,"_SCNDefaultVertexShader"),U.default.registerClass(tt.default,"SCNTube"),U.default.registerClass(rt.default,"SCNActionRunBlock"),U.default.registerClass(ot.default,"_SCNDefaultParticleFragmentShader"),U.default.registerClass(ut.default,"SCNSceneSourceStatus"),U.default.registerClass(st.default,"SCNFillMode"),U.default.registerClass(ft.default,"SCNReferenceNode"),U.default.registerClass(dt.default,"_SCNDefaultShadowFragmentShader"),U.default.registerClass(pt.default,"SCNMatrix4MakeRotation"),U.default.registerClass(mt.default,"SCNBillboardConstraint"),U.default.registerClass(gt.default,"SCNOrderedDictionary"),U.default.registerClass(St.default,"SCNActionHide"),U.default.registerClass(Tt.default,"_SCNObjLoader"),U.default.registerClass(Ct.default,"SCNActionMove"),U.default.registerClass(Et.default,"SCNRenderer"),U.default.registerClass(At.default,"SCNConstraint"),U.default.registerClass(Mt.default,"SCNParticlePropertyController"),U.default.registerClass(Ft.default,"SCNCullMode"),U.default.registerClass(Dt.default,"SCNVector4Make"),U.default.registerClass(jt.default,"SCNTechniqueSupport"),U.default.registerClass(Ut.default,"SCNBufferStream"),U.default.registerClass(Vt.default,"SCNActionPerformSelector"),U.default.registerClass(Gt.default,"SCNActionRotate"),U.default.registerClass(Xt.default,"SCNPlane"),U.default.registerClass(Wt.default,"SCNVector3FromFloat3"),U.default.registerClass(Zt.default,"SCNPhysicsShape"),U.default.registerClass(Jt.default,"SCNDistanceConstraint"),U.default.registerClass($t.default,"SCNBufferBindingBlock"),U.default.registerClass(tn.default,"SCNVector3Zero"),U.default.registerClass(rn.default,"SCNProgramDelegate"),U.default.registerClass(an.default,"SCNChamferMode"),U.default.registerClass(ln.default,"SCNVector4"),U.default.registerClass(cn.default,"SCNVector4ToFloat4"),U.default.registerClass(hn.default,"SCNActionPlaySound"),U.default.registerClass(_n.default,"SCNSphere"),U.default.registerClass(yn.default,"SCNBindingBlock"),U.default.registerClass(vn.default,"SCNActionFade"),U.default.registerClass(bn.default,"SCNParticleInputMode"),U.default.registerClass(wn.default,"SCNAudioPlayer"),U.default.registerClass(kn.default,"SCNMatrix4MakeScale"),U.default.registerClass(On.default,"SCNMaterial"),U.default.registerClass(Pn.default,"SCNMatrix4Rotate"),U.default.registerClass(xn.default,"SCNQuaternion"),U.default.registerClass(Nn.default,"_SCNDefaultHitTestVertexShader"),U.default.registerClass(Rn.default,"_SCNDefaultHitTestFragmentShader"),U.default.registerClass(In.default,"SCNShaderModifierEntryPoint"),U.default.registerClass(Bn.default,"SCNPhysicsNoiseField"),U.default.registerClass(Ln.default,"SCNVector3FromGLKVector3"),U.default.registerClass(zn.default,"SCNVector4FromGLKVector4"),U.default.registerClass(Yn.default,"SCNMatrix4ToGLKMatrix4"),U.default.registerClass(Hn.default,"SCNVector4ToGLKVector4"),U.default.registerClass(Kn.default,"SCNMatrix4"),U.default.registerClass(qn.default,"SCNProgram"),U.default.registerClass(Qn.default,"SCNAntialiasingMode"),U.default.registerClass(er.default,"SCNBoundingVolume"),U.default.registerClass(nr.default,"SCNTransparencyMode"),U.default.registerClass(ir.default,"SCNMatrix4EqualToMatrix4"),U.default.registerClass(ar.default,"SCNTessellationSmoothingMode"),U.default.registerClass(lr.default,"SCNPhysicsBehavior"),U.default.registerClass(cr.default,"SCNMatrix4Invert"),U.default.registerClass(hr.default,"SCNParticleBirthDirection"),U.default.registerClass(_r.default,"SCNVector3Make"),U.default.registerClass(yr.default,"SCNPhysicsCollisionCategory"),U.default.registerClass(vr.default,"SCNColorMask"),U.default.registerClass(br.default,"SCNParticleEvent"),U.default.registerClass(wr.default,"_SCNDefaultFragmentShader"),U.default.registerClass(kr.default,"SCNActionReference"),U.default.registerClass(Or.default,"SCNReferenceLoadingPolicy"),U.default.registerClass(Pr.default,"SCNActionSequence"),U.default.registerClass(xr.default,"SCNActionTimingMode"),U.default.registerClass(Nr.default,"SCNBillboardAxis"),U.default.registerClass(Rr.default,"SCNGeometryElement"),U.default.registerClass(Ir.default,"SCNShadable"),U.default.registerClass(Br.default,"SCNVector3ToGLKVector3"),U.default.registerClass(Lr.default,"SCNCylinder"),U.default.registerClass(zr.default,"SCNLookAtConstraint"),U.default.registerClass(Yr.default,"SCNPhysicsBodyType"),U.default.registerClass(Hr.default,"SCNTorus"),U.default.registerClass(Kr.default,"SCNShadableHelper"),U.default.registerClass(qr.default,"SCNLight"),U.default.registerClass(Qr.default,"SCNCameraProjectionDirection"),U.default.registerClass(ei.default,"SCNSkinner"),U.default.registerClass(ni.default,"SCNAnimatable"),U.default.registerClass(ii.default,"SCNGeometryTessellator"),U.default.registerClass(ai.default,"SCNPhysicsContact"),U.default.registerClass(li.default,"SCNAnimation"),U.default.registerClass(ci.default,"SCNPhysicsContactDelegate"),U.default.registerClass(hi.default,"SCNMovabilityHint"),U.default.registerClass(_i.default,"SCNPhysicsFieldScope"),U.default.registerClass(yi.default,"SCNActionScale"),U.default.registerClass(vi.default,"SCNVector3"),U.default.registerClass(bi.default,"SCNHitTestOption"),U.default.registerClass(wi.default,"SCNActionCustom"),U.default.registerClass(ki.default,"SCNAnimationEvent"),U.default.registerClass(Oi.default,"SCNIKConstraint"),U.default.registerClass(Pi.default,"SCNParticleSortingMode"),U.default.registerClass(xi.default,"SCNMatrix4Scale"),U.default.registerClass(Ni.default,"SCNTechnique"),U.default.registerClass(Ri.default,"SCNParticleOrientationMode"),U.default.registerClass(Ii.default,"SCNSceneSource"),U.default.registerClass(Bi.default,"SCNNode"),U.default.registerClass(Li.default,"SCNSceneExportProgressHandler"),U.default.registerClass(zi.default,"SCNPhysicsBallSocketJoint"),U.default.registerClass(Yi.default,"SCNPhysicsBody"),U.default.registerClass(Hi.default,"SCNDebugOptions"),U.default.registerClass(Ki.default,"SCNLevelOfDetail"),U.default.registerClass(qi.default,"SCNParticleImageSequenceAnimationMode"),U.default.registerClass(Qi.default,"SCNMatrix4FromMat4"),U.default.registerClass(eo.default,"SCNShadowMode"),U.default.registerClass(no.default,"SCNVector4FromFloat4"),U.default.registerClass(io.default,"SCNMaterialProperty"),U.default.registerClass(ao.default,"SCNNodeRendererDelegate"),U.default.registerClass(lo.default,"SCNPhysicsSliderJoint"),U.default.registerClass(co.default,"SCNActionRunAction"),U.default.registerClass(ho.default,"SCNBox"),U.default.registerClass(po.default,"SCNParticleEventBlock"),U.default.registerClass(mo.default,"SCNTransaction"),U.default.registerClass(go.default,"SCNActionRemove"),U.default.registerClass(So.default,"SCNBlendMode"),U.default.registerClass(To.default,"SCNTimingFunction"),U.default.registerClass(Co.default,"SCNCone"),U.default.registerClass(Eo.default,"SCNScene"),U.default.registerClass(Ao.default,"SCNPhysicsTurbulenceField"),U.default.registerClass(Mo.default,"SCNAction"),U.default.registerClass(Fo.default,"SCNFloor"),U.default.registerClass(Do.default,"SCNWrapMode"),U.default.registerClass(jo.default,"SCNText"),U.default.registerClass(Uo.default,"_SCNDefaultPBRFragmentShader"),U.default.registerClass(Vo.default,"SCNActionWait"),U.default.registerClass(Go.default,"SCNGeometry"),U.default.registerClass(Xo.default,"SCNParticleBlendMode"),U.default.registerClass(Wo.default,"SCNActionTimingFunction"),U.default.registerClass(Zo.default,"_SCNMtlLoader"),U.default.registerClass(Jo.default,"SCNMorpherCalculationMode"),U.default.registerClass($o.default,"SCNVector3ToFloat3"),U.default.registerClass(ta.default,"SCNGeometryPrimitiveType"),U.default.registerClass(ra.default,"SCNSceneSourceStatusHandler"),U.default.registerClass(oa.default,"SCNPhysicsWorld"),U.default.registerClass(ua.default,"SCNVector4EqualToVector4"),U.default.registerClass(sa.default,"SCNCapsule"),U.default.registerClass(fa.default,"SCNSceneRenderer"),U.default.registerClass(da.default,"SCNMatrix4MakeTranslation"),U.default.registerClass(pa.default,"SCNAnimationEventBlock"),U.default.registerClass(ma.default,"SCNView"),U.default.registerClass(ga.default,"SCNMatrix4FromGLKMatrix4"),U.default.registerClass(Sa.default,"SCNMatrix4IsIdentity"),U.default.registerClass(Ta.default,"SCNMorpher"),U.default.registerClass(Ca.default,"SCNSceneRendererDelegate"),U.default.registerClass(Ea.default,"SCNActionJavaScript"),U.default.registerClass(Aa.default,"_SCNDefaultParticleVertexShader"),U.default.registerClass(Ma.default,"SCNAccelerationConstraint"),U.default.registerClass(Fa.default,"SCNPyramid"),U.default.registerClass(Da.default,"_SCNDefaultShadowVertexShader"),U.default.registerClass(ja.default,"SCNActionGroup"),U.default.registerClass(Ua.default,"SCNParticleSystem"),U.default.registerClass(Va.default,"SCNVector3EqualToVector3"),U.default.registerClass(Ga.default,"SCNPhysicsField"),U.default.registerClass(Xa.default,"NSColorSpace"),U.default.registerClass(Wa.default,"NSCoder"),U.default.registerClass(Za.default,"NSMutableData");U.default.registerClass(Ja.default,"NSMutableDictionary"),U.default.registerClass($a.default,"NSData"),U.default.registerClass(tu.default,"NSURL"),U.default.registerClass(ru.default,"NSKeyedArchiver"),U.default.registerClass(ou.default,"NSValue"),U.default.registerClass(uu.default,"NSArray"),U.default.registerClass(su.default,"NSNotification"),U.default.registerClass(fu.default,"NSKeyedUnarchiver"),U.default.registerClass(du.default,"NSDictionary"),U.default.registerClass(pu.default,"NotificationCenter"),U.default.registerClass(mu.default,"NSMutableArray"),U.default.registerClass(gu.default,"AVAudioNode"),U.default.registerClass(Su.default,"AVAudioMixerNode"),U.default.registerClass(Tu.default,"GKAgent2D"),U.default.registerClass(Cu.default,"GKSCNNodeComponent"),U.default.registerClass(Eu.default,"GKGoal"),U.default.registerClass(Au.default,"GKPath"),U.default.registerClass(Mu.default,"GKBehavior"),U.default.registerClass(Fu.default,"GKScene"),U.default.registerClass(Du.default,"GKComponent"),U.default.registerClass(ju.default,"GKAgentDelegate"),U.default.registerClass(Uu.default,"GKEntity"),U.default.registerClass(Vu.default,"GKAgent"),U.default.registerClass(Gu.default,"SKSpriteNode"),U.default.registerClass(Xu.default,"SKColor"),U.default.registerClass(Wu.default,"SKAction"),U.default.registerClass(Zu.default,"SKActionTimingMode"),U.default.registerClass(Ju.default,"SKBlendMode"),U.default.registerClass($u.default,"SKScene"),U.default.registerClass(tl.default,"SKFade"),U.default.registerClass(rl.default,"SKLabelHorizontalAlignmentMode"),U.default.registerClass(ol.default,"SKSceneScaleMode"),U.default.registerClass(ul.default,"SKNode"),U.default.registerClass(sl.default,"SKGroup"),U.default.registerClass(fl.default,"SKEffectNode"),U.default.registerClass(dl.default,"SKTexture"),U.default.registerClass(pl.default,"SKTextureFilteringMode"),U.default.registerClass(ml.default,"SKShapeNode"),U.default.registerClass(gl.default,"SKSequence"),U.default.registerClass(Sl.default,"SKRepeat"),U.default.registerClass(Tl.default,"SKScale"),U.default.registerClass(Cl.default,"SKLabelNode"),U.default.registerClass(El.default,"SKLabelVerticalAlignmentMode"),U.default.registerClass(Al.default,"SKWait"),U.default.registerClass(Ml.default,"GCExtendedGamepad"),U.default.registerClass(Fl.default,"GCGamepad"),U.default.registerClass(Dl.default,"GCControllerDirectionPad"),U.default.registerClass(jl.default,"GCControllerElement"),U.default.registerClass(Ul.default,"GCMicroGamepad"),U.default.registerClass(Vl.default,"GCControllerAxisInput"),U.default.registerClass(Gl.default,"GCControllerButtonInput"),U.default.registerClass(Xl.default,"GCController"),U.default.registerClass(Wl.default,"CAMediaTiming"),U.default.registerClass(Zl.default,"CAAnimationGroup"),U.default.registerClass(Jl.default,"CAMediaTimingFunction"),U.default.registerClass($l.default,"CAPropertyAnimation"),U.default.registerClass(ts.default,"CAKeyframeAnimation"),U.default.registerClass(rs.default,"CAAnimationDelegate"),U.default.registerClass(os.default,"CAAnimation"),U.default.registerClass(us.default,"CABasicAnimation"),U.default.registerClass(ss.default,"CATransform3D"),U.default.registerClass(fs.default,"CAAction"),U.default.registerClass(ds.default,"CACurrentMediaTime"),U.default.registerClass(ps.default,"NSColor"),U.default.registerClass(ms.default,"NSColorSpaceModel"),U.default.registerClass(gs.default,"CFAbsoluteTimeGetCurrent"),U.default.registerClass(Ss.default,"NSObject"),t.CGLineCap=o.default,t.CGLineJoin=u.default,t.CGRect=s.default,t.CGSize=f.default,t.CGBlendMode=d.default,t.CGPath=p.default,t.CGPoint=m.default,t.CGPathApplierFunction=g.default,t.CGPathFillRule=S.default,t.CGMutablePath=T.default,t.CGVector=C.default,t._Buffer=E.default,t._HTMLCanvasElement=A.default,t._BinaryReader=M.default,t._File=F.default,t._InstanceOf=D.default,t._TextReader=j.default,t._ClassList=U.default,t._AjaxRequest=V.default,t.CanUseWebGL2=G.default,t._BinaryRequest=X.default,t._FileReader=W.default,t.MTLTessellationPartitionMode=Z.default,t.DispatchTimeInterval=J.default,t.DispatchObject=$.default,t.DispatchTime=te.default,t.DispatchQueue=re.default,t.SCNBufferFrequency=oe.default,t.SCNMatrix4Translate=ue.default,t.SCNActionRepeat=se.default,t.SCNPhysicsVehicleWheel=fe.default,t.SCNPhysicsVehicle=de.default,t.SCNPhysicsHingeJoint=pe.default,t.SCNGeometrySource=me.default,t.SCNAnimationPlayer=ge.default,t.SCNTransformConstraint=Se.default,t.SCNActionable=Te.default,t.SCNLayer=Ce.default,t.SCNHitTestResult=Ee.default,t.SCNParticleBirthLocation=Ae.default,t.SCNAudioSource=Me.default,t.SCNRenderingAPI=Fe.default,t.SCNParticleModifierStage=De.default,t.SCNMatrix4ToMat4=je.default,t.SCNShape=Ue.default,t.SCNSceneExportDelegate=Ve.default,t.SCNParticleModifierBlock=Ge.default,t.SCNMatrix4Mult=Xe.default,t.SCNFilterMode=We.default,t.SCNCamera=Ze.default,t.SCNFieldForceEvaluator=Je.default,t._SCNDefaultVertexShader=$e.default,t.SCNTube=tt.default,t.SCNActionRunBlock=rt.default,t._SCNDefaultParticleFragmentShader=ot.default,t.SCNSceneSourceStatus=ut.default,t.SCNFillMode=st.default,t.SCNReferenceNode=ft.default,t._SCNDefaultShadowFragmentShader=dt.default,t.SCNMatrix4MakeRotation=pt.default,t.SCNBillboardConstraint=mt.default,t.SCNOrderedDictionary=gt.default,t.SCNActionHide=St.default,t._SCNObjLoader=Tt.default,t.SCNActionMove=Ct.default,t.SCNRenderer=Et.default,t.SCNConstraint=At.default,t.SCNParticlePropertyController=Mt.default,t.SCNCullMode=Ft.default,t.SCNVector4Make=Dt.default,t.SCNTechniqueSupport=jt.default,t.SCNBufferStream=Ut.default,t.SCNActionPerformSelector=Vt.default,t.SCNActionRotate=Gt.default,t.SCNPlane=Xt.default,t.SCNVector3FromFloat3=Wt.default,t.SCNPhysicsShape=Zt.default,t.SCNDistanceConstraint=Jt.default,t.SCNBufferBindingBlock=$t.default,t.SCNVector3Zero=tn.default,t.SCNProgramDelegate=rn.default,t.SCNChamferMode=an.default,t.SCNVector4=ln.default,t.SCNVector4ToFloat4=cn.default,t.SCNActionPlaySound=hn.default,t.SCNSphere=_n.default,t.SCNBindingBlock=yn.default,t.SCNActionFade=vn.default,t.SCNParticleInputMode=bn.default,t.SCNAudioPlayer=wn.default,t.SCNMatrix4MakeScale=kn.default,t.SCNMaterial=On.default,t.SCNMatrix4Rotate=Pn.default,t.SCNQuaternion=xn.default,t._SCNDefaultHitTestVertexShader=Nn.default,t._SCNDefaultHitTestFragmentShader=Rn.default,t.SCNShaderModifierEntryPoint=In.default,t.SCNPhysicsNoiseField=Bn.default,t.SCNVector3FromGLKVector3=Ln.default,t.SCNVector4FromGLKVector4=zn.default,t.SCNMatrix4ToGLKMatrix4=Yn.default,t.SCNVector4ToGLKVector4=Hn.default,t.SCNMatrix4=Kn.default,t.SCNProgram=qn.default,t.SCNAntialiasingMode=Qn.default,t.SCNBoundingVolume=er.default,t.SCNTransparencyMode=nr.default,t.SCNMatrix4EqualToMatrix4=ir.default,t.SCNTessellationSmoothingMode=ar.default,t.SCNPhysicsBehavior=lr.default,t.SCNMatrix4Invert=cr.default,t.SCNParticleBirthDirection=hr.default,t.SCNVector3Make=_r.default,t.SCNPhysicsCollisionCategory=yr.default,t.SCNColorMask=vr.default,t.SCNParticleEvent=br.default,t._SCNDefaultFragmentShader=wr.default,t.SCNActionReference=kr.default,t.SCNReferenceLoadingPolicy=Or.default,t.SCNActionSequence=Pr.default,t.SCNActionTimingMode=xr.default,t.SCNBillboardAxis=Nr.default,t.SCNGeometryElement=Rr.default,t.SCNShadable=Ir.default,t.SCNVector3ToGLKVector3=Br.default,t.SCNCylinder=Lr.default,t.SCNLookAtConstraint=zr.default,t.SCNPhysicsBodyType=Yr.default,t.SCNTorus=Hr.default,t.SCNShadableHelper=Kr.default,t.SCNLight=qr.default,t.SCNCameraProjectionDirection=Qr.default,t.SCNSkinner=ei.default;t.SCNAnimatable=ni.default,t.SCNGeometryTessellator=ii.default,t.SCNPhysicsContact=ai.default,t.SCNAnimation=li.default,t.SCNPhysicsContactDelegate=ci.default,t.SCNMovabilityHint=hi.default,t.SCNPhysicsFieldScope=_i.default,t.SCNActionScale=yi.default,t.SCNVector3=vi.default,t.SCNHitTestOption=bi.default,t.SCNActionCustom=wi.default,t.SCNAnimationEvent=ki.default,t.SCNIKConstraint=Oi.default,t.SCNParticleSortingMode=Pi.default,t.SCNMatrix4Scale=xi.default,t.SCNTechnique=Ni.default,t.SCNParticleOrientationMode=Ri.default,t.SCNSceneSource=Ii.default,t.SCNNode=Bi.default,t.SCNSceneExportProgressHandler=Li.default,t.SCNPhysicsBallSocketJoint=zi.default,t.SCNPhysicsBody=Yi.default,t.SCNDebugOptions=Hi.default,t.SCNLevelOfDetail=Ki.default,t.SCNParticleImageSequenceAnimationMode=qi.default,t.SCNMatrix4FromMat4=Qi.default,t.SCNShadowMode=eo.default,t.SCNVector4FromFloat4=no.default,t.SCNMaterialProperty=io.default,t.SCNNodeRendererDelegate=ao.default,t.SCNPhysicsSliderJoint=lo.default,t.SCNActionRunAction=co.default,t.SCNBox=ho.default,t.SCNParticleEventBlock=po.default,t.SCNTransaction=mo.default,t.SCNActionRemove=go.default,t.SCNBlendMode=So.default,t.SCNTimingFunction=To.default,t.SCNCone=Co.default,t.SCNScene=Eo.default,t.SCNPhysicsTurbulenceField=Ao.default,t.SCNAction=Mo.default,t.SCNFloor=Fo.default,t.SCNWrapMode=Do.default,t.SCNText=jo.default,t._SCNDefaultPBRFragmentShader=Uo.default,t.SCNActionWait=Vo.default,t.SCNGeometry=Go.default,t.SCNParticleBlendMode=Xo.default,t.SCNActionTimingFunction=Wo.default,t._SCNMtlLoader=Zo.default,t.SCNMorpherCalculationMode=Jo.default,t.SCNVector3ToFloat3=$o.default,t.SCNGeometryPrimitiveType=ta.default,t.SCNSceneSourceStatusHandler=ra.default,t.SCNPhysicsWorld=oa.default,t.SCNVector4EqualToVector4=ua.default,t.SCNCapsule=sa.default,t.SCNSceneRenderer=fa.default,t.SCNMatrix4MakeTranslation=da.default,t.SCNAnimationEventBlock=pa.default,t.SCNView=ma.default,t.SCNMatrix4FromGLKMatrix4=ga.default,t.SCNMatrix4IsIdentity=Sa.default,t.SCNMorpher=Ta.default,t.SCNSceneRendererDelegate=Ca.default,t.SCNActionJavaScript=Ea.default,t._SCNDefaultParticleVertexShader=Aa.default,t.SCNAccelerationConstraint=Ma.default,t.SCNPyramid=Fa.default,t._SCNDefaultShadowVertexShader=Da.default,t.SCNActionGroup=ja.default,t.SCNParticleSystem=Ua.default,t.SCNVector3EqualToVector3=Va.default,t.SCNPhysicsField=Ga.default,t.NSColorSpace=Xa.default,t.NSCoder=Wa.default,t.NSMutableData=Za.default,t.NSMutableDictionary=Ja.default,t.NSData=$a.default,t.NSURL=tu.default,t.NSKeyedArchiver=ru.default,t.NSValue=ou.default,t.NSArray=uu.default,t.NSNotification=su.default,t.NSKeyedUnarchiver=fu.default,t.NSDictionary=du.default,t.NotificationCenter=pu.default,t.NSMutableArray=mu.default,t.AVAudioNode=gu.default,t.AVAudioMixerNode=Su.default,t.GKAgent2D=Tu.default,t.GKSCNNodeComponent=Cu.default,t.GKGoal=Eu.default,t.GKPath=Au.default,t.GKBehavior=Mu.default,t.GKScene=Fu.default,t.GKComponent=Du.default,t.GKAgentDelegate=ju.default,t.GKEntity=Uu.default,t.GKAgent=Vu.default,t.SKSpriteNode=Gu.default,t.SKColor=Xu.default,t.SKAction=Wu.default,t.SKActionTimingMode=Zu.default,t.SKBlendMode=Ju.default,t.SKScene=$u.default,t.SKFade=tl.default,t.SKLabelHorizontalAlignmentMode=rl.default,t.SKSceneScaleMode=ol.default,t.SKNode=ul.default,t.SKGroup=sl.default,t.SKEffectNode=fl.default,t.SKTexture=dl.default,t.SKTextureFilteringMode=pl.default,t.SKShapeNode=ml.default,t.SKSequence=gl.default,t.SKRepeat=Sl.default,t.SKScale=Tl.default,t.SKLabelNode=Cl.default,t.SKLabelVerticalAlignmentMode=El.default,t.SKWait=Al.default,t.GCExtendedGamepad=Ml.default,t.GCGamepad=Fl.default,t.GCControllerDirectionPad=Dl.default,t.GCControllerElement=jl.default,t.GCMicroGamepad=Ul.default,t.GCControllerAxisInput=Vl.default,t.GCControllerButtonInput=Gl.default,t.GCController=Xl.default,t.CAMediaTiming=Wl.default,t.CAAnimationGroup=Zl.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={normal:0,multiply:1,screen:2,overlay:3,darken:4,lighten:5,colorDodge:6,colorBurn:7,softLight:8,hardLight:9,difference:10,exclusion:11,hue:12,saturation:13,color:14,luminosity:15,clear:16,copy:17,sourceIn:18,sourceOut:19,sourceAtop:20,destinationOver:21,destinationIn:22,destinationOut:23,destinationAtop:24,xor:25,plusDarker:26,plusLighter:27};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t,n){r(this,e),this._boundingBox=null,this._boundingBoxOfPath=null,this._currentPoint=null,this._isEmpty=!1}return i(e,[{key:"initEllipseIn",value:function(e,t){this._boundingBox=null,this._boundingBoxOfPath=null,this._currentPoint=null,this._isEmpty=!1}},{key:"initRoundedRect",value:function(e,t,n,r){this._boundingBox=null,this._boundingBoxOfPath=null,this._currentPoint=null,this._isEmpty=!1}},{key:"copy",value:function(){return null}},{key:"copyUsing",value:function(e){return null}},{key:"copyDashingWithPhase",value:function(e,t,n){return null}},{key:"copyStrokingWithWidth",value:function(e,t,n,r,i){return null}},{key:"mutableCopy",value:function(){return null}},{key:"mutableCopyUsing",value:function(e){return null}},{key:"containsUsing",value:function(e,t,n){return!1}},{key:"isRect",value:function(e){return!1}},{key:"apply",value:function(e,t){}},{key:"init__byDashing",value:function(e,t,n,r,i){this._boundingBox=null,this._boundingBoxOfPath=null,this._currentPoint=null,this._isEmpty=!1}},{key:"init__byStroking",value:function(e,t,n,r,i,o){this._boundingBox=null,this._boundingBoxOfPath=null,this._currentPoint=null,this._isEmpty=!1}},{key:"boundingBox",get:function(){return this._boundingBox}},{key:"boundingBoxOfPath",get:function(){return this._boundingBoxOfPath}},{key:"currentPoint",get:function(){return this._currentPoint}},{key:"isEmpty",get:function(){return this._isEmpty}}],[{key:"typeID",get:function(){return null}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={evenOdd:1,winding:0};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"mutableCopy",value:function(){return null}},{key:"mutableCopyUsing",value:function(e){return null}},{key:"moveTo",value:function(e,t){}},{key:"addLineTo",value:function(e,t){}},{key:"addLinesBetween",value:function(e,t){}},{key:"addRect",value:function(e,t){}},{key:"addRects",value:function(e,t){}},{key:"addEllipseIn",value:function(e,t){}},{key:"addRoundedRectIn",value:function(e,t,n,r){}},{key:"addArc",value:function(e,t,n,r,i,o){}},{key:"addRelativeArc",value:function(e,t,n,r,i){}},{key:"addCurveTo",value:function(e,t,n,r){}},{key:"addQuadCurveTo",value:function(e,t,n){}},{key:"addPath",value:function(e,t){}},{key:"closeSubpath",value:function(){}}]),e}();t.default=o},function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(139),a=function(e){return e&&e.__esModule?e:{default:e}}(o),u=n(39),l=["ascii","utf8","utf16le","ucs2","base64","latin1","binary","hex"],s=null;if(void 0!==e)s=e;else{var c=new a.default(!0,!0),f=new a.default(!1,!0);s=function(){function e(){r(this,e),this._data=null}return i(e,[{key:"readIntBE",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(t){case 1:return this.readInt8(e,n);case 2:return this.readInt16BE(e,n);case 4:return this.readInt32BE(e,n)}var r=this.slice(e,e+t)._data;return c.decodeInt(r,8*t,!0)}},{key:"readIntLE",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(t){case 1:return this.readInt8(e,n);case 2:return this.readInt16LE(e,n);case 4:return this.readInt32LE(e,n)}var r=this.slice(e,e+t)._data;return f.decodeInt(r,8*t,!0)}},{key:"readInt8",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._data.getInt8(e)}},{key:"readInt16BE",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._data.getInt16(e,!1)}},{key:"readInt16LE",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._data.getInt16(e,!0)}},{key:"readInt32BE",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._data.getInt32(e,!1)}},{key:"readInt32LE",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._data.getInt32(e,!0)}},{key:"readUIntBE",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(t){case 1:return this.readUInt8(e,n);case 2:return this.readUInt16BE(e,n);case 4:return this.readUInt32BE(e,n)}var r=this.slice(e,e+t)._data;return c.decodeInt(r,8*t,!1)}},{key:"readUIntLE",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(t){case 1:return this.readUInt8(e,n);case 2:return this.readUInt16LE(e,n);case 4:return this.readUInt32LE(e,n)}var r=this.slice(e,e+t)._data;return f.decodeInt(r,8*t,!1)}},{key:"readUInt8",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._data.getUint8(e)}},{key:"readUInt16BE",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._data.getUint16(e,!1)}},{key:"readUInt16LE",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._data.getUint16(e,!0)}},{key:"readUInt32BE",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._data.getUint32(e,!1)}},{key:"readUInt32LE",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._data.getUint32(e,!0)}},{key:"readFloatBE",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._data.getFloat32(e,!1)}},{key:"readFloatLE",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._data.getFloat32(e,!0)}},{key:"readDoubleBE",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._data.getFloat64(e,!1)}},{key:"readDoubleLE",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._data.getFloat64(e,!0)}},{key:"slice",value:function(t,n){return new e(this._data.buffer.slice(t,n))}},{key:"toString",value:function(t,n,r){if(!e.isEncoding(t))throw new Error("unsupported encoding: "+t);var i=new Uint8Array(this._data.buffer);if("binary"===t)return String.fromCharCode.apply("",i);if("ascii"===t||"latin1"===t){var o=i.indexOf(0),a=i.slice(0,o);return String.fromCharCode.apply("",a)}if("hex"===t)return this._hex(i,!1);if("base64"===t){var l=String.fromCharCode.apply("",i);if("function"==typeof atob)return atob(l);throw new Error("needs atob() function to convert to base64")}var s=this._hex(i,!0);if("utf8"===t)return(0,u.UnescapeUTF8)(s);if("utf16le"===t||"ucs2"===t)return(0,u.UnescapeUTF16LE)(s);throw new Error("unsupported encoding: "+t)}},{key:"_hex",value:function(e,t){var n=e.map(function(e){return e<16?"0"+e.toString(16):e.toString(16)}),r="";return t&&(r="%"),n.join(r)}},{key:"length",get:function(){return this._data.byteLength}}],[{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new e;if(Array.isArray(t)){var o=new ArrayBuffer(t);i._data=new DataView(o.buffer,n,r)}else t instanceof ArrayBuffer?i._data=new DataView(t,n,r):t.buffer instanceof ArrayBuffer&&(i._data=new DataView(t.buffer,n,r));if(null===i._data)throw new Error("Buffer.from: unsupported data type: "+t);return i}},{key:"isEncoding",value:function(e){return l.indexOf(e)>=0}}]),e}()}t.default=s}).call(t,n(17).Buffer)},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-r(e)}function o(e){var t,n,i,o,a,u=e.length;o=r(e),a=new f(3*u/4-o),n=o>0?u-4:u;var l=0;for(t=0;t<n;t+=4)i=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=255&i;return 2===o?(i=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,a[l++]=255&i):1===o&&(i=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,a[l++]=i>>8&255,a[l++]=255&i),a}function a(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}function u(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(a(r));return i.join("")}function l(e){for(var t,n=e.length,r=n%3,i="",o=[],a=0,l=n-r;a<l;a+=16383)o.push(u(e,a,a+16383>l?l:a+16383));return 1===r?(t=e[n-1],i+=s[t>>2],i+=s[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=s[t>>10],i+=s[t>>4&63],i+=s[t<<2&63],i+="="),o.push(i),o.join("")}t.byteLength=i,t.toByteArray=o,t.fromByteArray=l;for(var s=[],c=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,_=h.length;d<_;++d)s[d]=h[d],c[h.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,u=8*i-r-1,l=(1<<u)-1,s=l>>1,c=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-c)-1,d>>=-c,c+=u;c>0;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-s;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=s}return(d?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,u,l,s=8*o-i-1,c=(1<<s)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,_=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+f>=1?h/l:h*Math.pow(2,1-f),t*l>=2&&(a++,l/=2),a+f>=c?(u=0,a=c):a+f>=1?(u=(t*l-1)*Math.pow(2,i),a+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&u,d+=_,u/=256,i-=8);for(a=a<<i|u,s+=i;s>0;e[n+d]=255&a,d+=_,a/=256,s-=8);e[n+d-_]|=128*p}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t){this.bigEndian=e,this.allowExceptions=t};t.default=i;var o=i.prototype;o.encodeFloat=function(e,t,n){var i,o,a,u,l,s=Math.pow(2,n-1)-1,c=1-s,f=s,h=c-t,d=isNaN(v=parseFloat(e))||v==-1/0||v==1/0?v:0,_=0,p=2*s+1+t+3,y=new Array(p),m=(v=0!==d?0:v)<0,v=Math.abs(v),g=Math.floor(v),b=v-g;for(i=p;i;y[--i]=0);for(i=s+2;g&&i;y[--i]=g%2,g=Math.floor(g/2));for(i=s+1;b>0&&i;(y[++i]=((b*=2)>=1)-0)&&--b);for(i=-1;++i<p&&!y[i];);if(y[(o=t-1+(i=(_=s+1-i)>=c&&_<=f?i+1:s+1-(_=c-1)))+1]){if(!(a=y[o]))for(u=o+2;!a&&u<p;a=y[u++]);for(u=o+1;a&&--u>=0;(y[u]=!y[u]-0)&&(a=0));}for(i=i-2<0?-1:i-3;++i<p&&!y[i];);for((_=s+1-i)>=c&&_<=f?++i:_<c&&(_!=s+1-p&&_<h&&this.warn("encodeFloat::float underflow"),i=s+1-(_=c-1)),(g||0!==d)&&(this.warn(g?"encodeFloat::float overflow":"encodeFloat::"+d),_=f+1,i=s+2,d==-1/0?m=1:isNaN(d)&&(y[i]=1)),v=Math.abs(_+s),u=n+1,l="";--u;l=v%2+l,v=v>>=1);for(v=0,u=0,i=(l=(m?"1":"0")+l+y.slice(i,i+t).join("")).length,r=[];i;v+=(1<<u)*l.charAt(--i),7==u&&(r[r.length]=String.fromCharCode(v),v=0),u=(u+1)%8);return r[r.length]=v?String.fromCharCode(v):"",(this.bigEndian?r.reverse():r).join("")},o.encodeInt=function(e,t,n){var r=Math.pow(2,t),i=[];for((e>=r||e<-(r>>1))&&this.warn("encodeInt::overflow")&&(e=0),e<0&&(e+=r);e;i[i.length]=String.fromCharCode(e%256),e=Math.floor(e/256));for(t=-(-t>>3)-i.length;t--;i[i.length]="\0");return(this.bigEndian?i.reverse():i).join("")},o.decodeFloat=function(e,t,n){var r,i,o,a=((a=new this.Buffer(this.bigEndian,e)).checkBuffer(t+n+1),a),u=Math.pow(2,n-1)-1,l=a.readBits(t+n,1),s=a.readBits(t,n),c=0,f=2,h=a.buffer.length+(-t>>3)-1;do{for(r=a.buffer[++h],i=t%8||8,o=1<<i;o>>=1;r&o&&(c+=1/f),f*=2);}while(t-=i);return s==1+(u<<1)?c?NaN:l?-1/0:1/0:(1+-2*l)*(s||c?s?Math.pow(2,s-u)*(1+c):Math.pow(2,1-u)*c:0)},o.decodeInt=function(e,t,n){var r=new this.Buffer(this.bigEndian,e),i=r.readBits(0,t),o=Math.pow(2,t);return n&&i>=o/2?i-o:i};var a=(o.Buffer=function(e,t){this.bigEndian=e||0,this.buffer=[],this.setBuffer(t)}).prototype;a.readBits=function(e,t){if(e<0||t<=0)return 0;this.checkBuffer(e+t);for(var n,r=e%8,i=this.buffer.length-(e>>3)-1,o=this.buffer.length+(-(e+t)>>3),a=i-o,u=(this.buffer[i]>>r&(1<<(a?8-r:t))-1)+(a&&(n=(e+t)%8)?(this.buffer[o++]&(1<<n)-1)<<(a--<<3)-r:0);a;u+=function(e,t){for(++t;--t;e=1073741824==(1073741824&(e%=2147483648))?2*e:2*(e-1073741824)+2147483647+1);return e}(this.buffer[o++],(a--<<3)-r));return u},a.setBuffer=function(e){if(e){for(var t,n=t=e.length,r=this.buffer=new Array(t);n;r[t-n]=e.charCodeAt(--n));this.bigEndian&&r.reverse()}},a.hasNeededBits=function(e){return this.buffer.length>=-(-e>>3)},a.checkBuffer=function(e){if(!this.hasNeededBits(e))throw new Error("checkBuffer::missing bytes")},o.warn=function(e){if(this.allowExceptions)throw new Error(e);return 1},o.toSmall=function(e){return this.decodeInt(e,8,!0)},o.fromSmall=function(e){return this.encodeInt(e,8,!0)},o.toByte=function(e){return this.decodeInt(e,8,!1)},o.fromByte=function(e){return this.encodeInt(e,8,!1)},o.toShort=function(e){return this.decodeInt(e,16,!0)},o.fromShort=function(e){return this.encodeInt(e,16,!0)},o.toWord=function(e){return this.decodeInt(e,16,!1)},o.fromWord=function(e){return this.encodeInt(e,16,!1)},o.toInt=function(e){return this.decodeInt(e,32,!0)},o.fromInt=function(e){return this.encodeInt(e,32,!0)},o.toDWord=function(e){return this.decodeInt(e,32,!1)},o.fromDWord=function(e){return this.encodeInt(e,32,!1)},o.toFloat=function(e){return this.decodeFloat(e,23,8)},o.fromFloat=function(e){return this.encodeFloat(e,23,8)},o.toDouble=function(e){return this.decodeFloat(e,52,11)},o.fromDouble=function(e){return this.encodeFloat(e,52,11)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=null;if("undefined"!=typeof HTMLCanvasElement)o=HTMLCanvasElement;else{o=function(){function e(){r(this,e)}return i(e,[{key:"getContext",value:function(e,t){throw new Error("getContext is not implemented")}}]),e}()}t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){var e=document.createElement("canvas"),t={alpha:!0,depth:!0,stencil:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1},n=e.getContext("webgl2",t);if(!n)return console.log("canvas.getContext returns null"),!1;var r=n.createShader(n.VERTEX_SHADER);if(n.shaderSource(r,"#version 300 es\n  precision mediump float;\n\n  out vec3 position;\n\n  void main() {\n    position = vec3(0, 0, 0);\n    gl_Position = vec4(0, 0, 0, 0);\n  }\n"),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r);return console.log("vertexShader compile test error: "+i),!1}var o=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(o,"#version 300 es\n  precision mediump float;\n  precision highp sampler2DShadow;\n\n  in vec3 position;\n  out vec4 outColor;\n\n  void main() {\n    outColor = vec4(1, 1, 1, 1);\n  }\n"),n.compileShader(o),!n.getShaderParameter(o,n.COMPILE_STATUS)){var a=n.getShaderInfoLog(o);return console.log("fragmentShader compile test error: "+a),!1}var u=n.createProgram();if(n.attachShader(u,r),n.attachShader(u,o),n.linkProgram(u),!n.getProgramParameter(u,n.LINK_STATUS)){var l=n.getProgramInfoLog(u);return console.log("program link test error: "+l),!1}return!0};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={seconds:function(e){return 1e3*e},milliseconds:function(e){return e},microseconds:function(e){return.001*e},nanoseconds:function(e){return 1e-6*e}};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this._uptimeNanoseconds=t}return i(e,[{key:"uptimeNanoseconds",get:function(){throw new Error("uptimeNanoseconds: not implemented")}}],[{key:"now",value:function(){return Date.now()}},{key:"distantFuture",get:function(){}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(64),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=null,c=function(e){function t(e,n,o,a,u){r(this,t);var l=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return l._label=e,l._qos=n,l._attributes=o,l._target=u,l}return o(t,e),a(t,[{key:"init__label",value:function(e,t){this._label="",this._qos=null}},{key:"init__labelQueue",value:function(e,t,n){this._label="",this._qos=null}},{key:"syncExecute",value:function(e){}},{key:"asyncExecute",value:function(e){}},{key:"asyncAfter",value:function(e,t){var n=e-Date.now();window.setTimeout(function(){t()},n)}},{key:"asyncAfterExecute",value:function(e,t,n,r){}},{key:"getSpecific",value:function(e){return null}},{key:"setSpecific",value:function(e,t){}},{key:"sync",value:function(e){}},{key:"label",get:function(){return this._label}},{key:"qos",get:function(){return this._qos}}],[{key:"concurrentPerformExecute",value:function(e,t){}},{key:"global",value:function(e){return null}},{key:"main",get:function(){return s}}]),t}(l.default);t.default=c,s=new c("com.apple.main-thread",null)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={perFrame:0,perNode:1,perShadable:2};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e,t,n,r){return e.mult((0,i.default)(t,n,r))};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=r(s),f=n(5),h=r(f),d=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._timesToRepeat=0,e._repeatedAction=null,e._forever=!1,e._timesRepeated=0,e._finished=!1,e._duration=0,e._timingMode=h.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e}return a(t,e),l(t,null,[{key:"_propTypes",get:function(){return{_timesToRepeat:"float",_finished:"boolean",_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_repeatedAction:"SCNAction",_forever:"boolean",_timesRepeated:"integer",_pausedTime:"float",name:["string",null]}}}]),l(t,[{key:"copy",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._timesToRepeat=this._timesToRepeat,e._repeatedAction=this._repeatedAction.copy(),e._forever=this._forever,e._timesRepeated=this._timesRepeated,e}},{key:"_getTime",value:function(e,t){if(!t)return e;var n=this._basetimeFromTime(e);if(null===this.timingFunction)return n;var r=Math.floor(n);return r+this.timingFunction._getValueAtTime(n-r)}},{key:"_applyAction",value:function(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._getTime(t,n),i=Math.floor(r);i>this._timesRepeated;){if(this._timesRepeated+=1,this._repeatedAction._applyAction(e,1,!1),!this._forever&&this._timesRepeated>=this._timesToRepeat)return void(this._finished=!0);this._repeatedAction._resetFinished()}var o=r-this._timesRepeated;this._repeatedAction._applyAction(e,o,!1),this._finished=!1}},{key:"_resetFinished",value:function(){this._repeatedAction._resetFinished(),this._timesRepeated=0,this._finished=!1}},{key:"duration",get:function(){return this._forever?1/0:this._repeatedAction.duration*this._timesToRepeat}}],[{key:"repeat",value:function(e,n){var r=new t;return r._repeatedAction=e,r._duration=e.duration,r._timesToRepeat=n,r._forever=n===1/0,r}},{key:"repeatForever",value:function(e){return this.repeat(e,1/0)}}]),t}(c.default);t.default=d,c.default.repeat=d.repeat,c.default.repeatForever=d.repeatForever},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.connectionPosition=null,n.axle=null,n.steeringAxis=null,n.radius=0,n.frictionSlip=0,n.suspensionStiffness=0,n.suspensionCompression=0,n.suspensionDamping=0,n.maximumSuspensionTravel=0,n.maximumSuspensionForce=0,n.suspensionRestLength=0,n._node=null,n}return o(t,e),a(t,[{key:"node",get:function(){return this._node}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(28),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o._chassisBody=null,o._wheels=null,o._speedInKilometersPerHour=0,o}return o(t,e),a(t,[{key:"applyEngineForceForWheelAt",value:function(e,t){}},{key:"applyBrakingForceForWheelAt",value:function(e,t){}},{key:"setSteeringAngleForWheelAt",value:function(e,t){}},{key:"chassisBody",get:function(){return this._chassisBody}},{key:"wheels",get:function(){return this._wheels}},{key:"speedInKilometersPerHour",get:function(){return this._speedInKilometersPerHour}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(28),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e,n,o,a,u,l){r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.axisA=null,s.anchorA=null,s.axisB=null,s.anchorB=null,s._bodyA=null,s._bodyB=null,s}return o(t,e),a(t,[{key:"bodyA",get:function(){return this._bodyA}},{key:"bodyB",get:function(){return this._bodyB}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(65),f=(r(c),function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.blendFactor=0,n.paused=!1,n.speed=0,n._weight=0,n._animation=e,n}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{speed:"float",weight:["float","_weight"],paused:"boolean"}}}]),u(t,[{key:"play",value:function(){}},{key:"stop",value:function(){}},{key:"stopWithBlendOutDuration",value:function(e){}},{key:"animation",get:function(){return this._animation}}]),t}(s.default));t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(19),s=r(l),c=n(14),f=(r(c),n(7)),h=(r(f),n(76)),d=(r(h),n(1)),_=(r(d),function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,null,[{key:"constraintInWorldSpaceWith",value:function(e,n){return new t}},{key:"orientationConstraintInWorldSpaceWith",value:function(e,n){return new t}},{key:"positionConstraintInWorldSpaceWith",value:function(e,n){return new t}}]),t}(s.default));t.default=_},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this._hasActions=!1,this._actionKeys=null}return i(e,[{key:"runAction",value:function(e){}},{key:"runActionCompletionHandler",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"runActionForKey",value:function(e,t){}},{key:"runActionForKeyCompletionHandler",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"actionForKey",value:function(e){return null}},{key:"removeActionForKey",value:function(e){}},{key:"removeAllActions",value:function(){}},{key:"hasActions",get:function(){return this._hasActions}},{key:"actionKeys",get:function(){return this._actionKeys}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.scene=null};t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(42),s=r(l),c=n(0),f=r(c),h=function(){};"undefined"!=typeof AudioContext?h=AudioContext:console.error("error: AudioContext is not supported");var d=new h,_=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.isPositional=!1,n.rate=0,n.reverbBlend=0,n.shouldStream=!1,n._loading=!1,n._loadedPromise=new Promise(function(e,t){n._resolve=e,n._reject=t}),n._url=e,n._buffer=null,n._gainNode=d.createGain(),n._loops=!1,n._source=null,n}return a(t,e),u(t,null,[{key:"sourceNamed",value:function(e){return new t(e)}},{key:"sourceWithFileNamed",value:function(e){return new t(e)}}]),u(t,[{key:"load",value:function(){var e=this;if(!this._loading){this._loading=!0;s.default.get(this._url,{responseType:"arraybuffer"}).then(function(t){d.decodeAudioData(t,function(t){e._buffer=t,e._resolve()})})}}},{key:"_play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.load(),this._loadedPromise.then(function(){e._source=d.createBufferSource(),e._source.buffer=e._buffer,e._source.connect(e._gainNode),e._gainNode.connect(d.destination),e._source.loop=e._loops,e._source.start(t)})}},{key:"_stop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._source&&(this._source.stop(e),this._source=null)}},{key:"_getLoadedPromise",value:function(){return this._loadedPromise?this._loadedPromise:Promise.resolve()}},{key:"volume",get:function(){return this._gainNode.gain.value},set:function(e){this._gainNode.gain.value=e}},{key:"loops",get:function(){return this._loops},set:function(e){this._loops=e,null!==this._source&&(this._source.loop=e)}},{key:"_duration",get:function(){return this._buffer?this._buffer.duration:null}},{key:"didLoad",get:function(){return this._getLoadedPromise()}}]),t}(f.default);t.default=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={preDynamics:0,postDynamics:1,preCollision:2,postCollision:3};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return null};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.extrusionDepth=0,o.path=null,o.chamferMode=null,o.chamferProfile=null,o.chamferRadius=0,o}return o(t,e),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"writeWithSceneDocumentURL",value:function(e,t,n){return null}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r,i){};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return e.mult(t)};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r,i){};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(9),c=r(s),f=n(15),h=r(f),d=n(12),_=r(d),p=n(6),y=r(p),m=n(8),v=r(m),g=n(1),b=r(g),S=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.25,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.outerRadius=n,a.innerRadius=e,a.height=r,a.radialSegmentCount=48,a.heightSegmentCount=1,a._createGeometry(),a.materials.push(new v.default),a}return a(t,e),u(t,[{key:"_createGeometry",value:function(){for(var e=[],t=.5*this.height,n=.5*-this.height,r=[],i=[],o=[],a=[],u=2*Math.PI/this.radialSegmentCount,l=1/this.radialSegmentCount,s=0;s<=this.radialSegmentCount;s++){var c=-Math.sin(u*s),f=-Math.cos(u*s),d=c*this.outerRadius,p=f*this.outerRadius,m=c*this.innerRadius,v=f*this.innerRadius;r.push(d,n,p),i.push(m,t,v),o.push(d,t,p),a.push(-d,n,p),r.push(c,0,f),i.push(-c,0,-f),o.push(0,1,0),a.push(0,-1,0);var g=l*s;r.push(g,1),i.push(1-g,0);var S=.5+.5*Math.cos(u*s),w=.5+.5*Math.sin(u*s);o.push(S,w),a.push(S,w),r.push(d,t,p),i.push(m,n,v),o.push(m,t,v),a.push(-m,n,v),r.push(c,0,f),i.push(-c,0,-f),o.push(0,1,0),a.push(0,-1,0),r.push(g,0),i.push(1-g,1);var T=.5+.25*Math.cos(u*s),k=.5+.25*Math.sin(u*s);o.push(T,k),a.push(T,k)}e.push.apply(e,r.concat(i,o,a));for(var C=8*(this.radialSegmentCount+1),O=new y.default(e,y.default.Semantic.vertex,C,!0,3,4,0,32),E=new y.default(e,y.default.Semantic.normal,C,!0,3,4,12,32),P=new y.default(e,y.default.Semantic.texcoord,C,!0,2,4,24,32),A=[],x=0;x<4;x++){for(var M=[],N=(this.radialSegmentCount+1)*x*2,F=0;F<this.radialSegmentCount;F++){var R=N+2*F;M.push(R,R+3,R+1),M.push(R,R+2,R+3)}A.push(new h.default(M,_.default.triangles))}this._geometryElements=A,this._geometrySources=[O,E,P],this.boundingBox={min:new b.default(-this.outerRadius,n,-this.outerRadius),max:new b.default(this.outerRadius,t,this.outerRadius)}}},{key:"_updateBoundingBoxForSkinner",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?this.boundingBox:l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_updateBoundingBoxForSkinner",this).call(this,e)}}]),t}(c.default);t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=r(s),f=n(5),h=r(f),d=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=h.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e}return a(t,e),l(t,null,[{key:"_propTypes",get:function(){return{_actions:"NSArray",_finished:"boolean",_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_pausedTime:"float",name:["string",null]}}}]),l(t,[{key:"copy",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._block=this._block,e}},{key:"_applyAction",value:function(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._block(e),this._finished=!0}}],[{key:"run",value:function(e){var n=new t;return n._block=e,n}}]),t}(c.default);t.default=d,c.default.run=d.run},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={error:-1,parsing:4,validating:8,processing:12,complete:16};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(14),c=r(s),f=n(83),h=r(f),d=n(52),_=r(d),p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._isLoading=!1,n._isLoaded=!1,n.loadingPolicy=null,n._referenceURL=e,n._scene=null,e&&n.load(),n._loadedPromise=null,n}return a(t,e),l(t,null,[{key:"_propTypes",get:function(){return{paused:["boolean","isPaused"],scale:["SCNVector3","_scale"],rotation:["SCNVector4","_rotation"],orientation:["SCNVector4",function(e,t){e.orientation=t}],position:["SCNVector3","_position"],loadingPolicy:"integer",referenceURL:["NSURL",function(e,t){e.referenceURL=t,e.load()}],opacity:["float","_opacity"],castsShadow:"boolean",categoryBitMask:"integer",hidden:["boolean","isHidden"],name:"string",renderingOrder:"integer",movabilityHint:"integer",clientAttributes:["NSMutableDictionary",null],overrides:["NSObject",null]}}}]),l(t,[{key:"load",value:function(){var e=this;if(!this._isLoaded&&!this._isLoading&&this._referenceURL){this._isLoading=!0;var n=new Promise(function(n,r){var i=new _.default(e._referenceURL,null);i.didLoad.then(function(){i.rootNode.name="referenceRoot",u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addChildNode",e).call(e,i.rootNode),e._scene=i,e._isLoaded=!0,e._isLoading=!1,n()}).catch(function(){r()})});this._loadedPromise=n.then(function(){return e._scene.didLoad})}}},{key:"unload",value:function(){this._isLoaded&&(this.childNodes.forEach(function(e){e.removeFromParentNode()}),this._isLoaded=!1,this._loadedPromise=null)}},{key:"initCoder",value:function(e){}},{key:"addChildNode",value:function(e){throw new Error("cannot add a child node to SCNReferenceNode")}},{key:"insertChildNodeAt",value:function(e,t){throw new Error("cannot add a child node to SCNReferenceNode")}},{key:"replaceChildNodeWith",value:function(e,t){throw new Error("cannot add a child node to SCNReferenceNode")}},{key:"_getLoadedPromise",value:function(){return this._loadedPromise?this._loadedPromise:(this.load(),this._loadedPromise)}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"referenceURL",get:function(){return this._referenceURL},set:function(e){this.unload(),this._referenceURL=e,this.loadingPolicy===h.default.immediate&&this.load()}},{key:"childNodes",get:function(){return this._isLoaded||this.load(),this._childNodes.slice(0)}},{key:"didLoad",get:function(){return this._getLoadedPromise()}}]),t}(c.default);t.default=p},function(e,t){e.exports=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";(function(t){function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o={noImage:0,colorMapped:1,RGB:2,blackAndWhite:3,runlengthColorMapped:9,runlengthRGB:10,compressedBlackAndWhite:11,compressedColorMapped:32,compressed4PassQTColorMapped:33},a=function(){function e(n){var i=this;r(this,e),this._buffer=n instanceof t?n:"string"==typeof n?t.from(n,"binary"):n?t.from(n):null,this._idLength=0,this._colorMapType=0,this._imageType=0,this._colorMapOrigin=0,this._colorMapLength=0,this._colorMapDepth=0,this._imageXOrigin=0,this._imageYOrigin=0,this._imageWidth=0,this._imageHeight=0,this._imageDepth=0,this._alphaDepth=0,this._leftToRight=!0,this._topToBottom=!1,this._interleave=!1,this._hasAlpha=!1,this._imageID=null,this._canvas=null,this._context=null,this._imageData=null,this._image=null,this._src=null,this.onload=null,this.onerror=null,this._resolveFunc=null,this._rejectFunc=null,this._didLoad=new Promise(function(e,t){i._resolveFunc=e,i._rejectFunc=t}),n&&this._parseData()}return i(e,[{key:"_loadURL",value:function(e){var n=this;this._src=e,this._requestBinaryFile(e).then(function(e){n._buffer=t.from(e),n._parseData()}).catch(function(e){n._reject(e)})}},{key:"_requestBinaryFile",value:function(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="arraybuffer",r.onload=function(e){r.response?t(r.response):n(r)},r.onerror=function(e){n(e)},r.send(null)})}},{key:"_parseData",value:function(){this._readHeader(),this._readImageID(),this._initImage();var e=this._getImageData();switch(this._imageType){case o.noImage:break;case o.colorMapped:this._parseColorMapData(e);break;case o.RGB:this._parseRGBData(e);break;case o.blackAndWhite:this._parseBlackAndWhiteData(e);break;case o.runlengthColorMapped:this._parseColorMapData(e);break;case o.runlengthRGB:this._parseRGBData(e);break;case o.compressedBlackAndWhite:this._parseBlackAndWhiteData(e);break;case o.compressedColorMapped:case o.compressed4PassQTColorMapped:console.error("parser for compressed TGA is not implemeneted");break;default:throw new Error("unknown imageType: "+this._imageType)}this._setImage(),this._deleteBuffer()}},{key:"_readHeader",value:function(){this._idLength=this._buffer.readUIntLE(0,1),this._colorMapType=this._buffer.readUIntLE(1,1),this._imageType=this._buffer.readUIntLE(2,1),this._colorMapOrigin=this._buffer.readUIntLE(3,2),this._colorMapLength=this._buffer.readUIntLE(5,2),this._colorMapDepth=this._buffer.readUIntLE(7,1),this._imageXOrigin=this._buffer.readUIntLE(8,2),this._imageYOrigin=this._buffer.readUIntLE(10,2),this._imageWidth=this._buffer.readUIntLE(12,2),this._imageHeight=this._buffer.readUIntLE(14,2),this._imageDepth=this._buffer.readUIntLE(16,1);var e=this._buffer.readUIntLE(17,1);this._alphaDepth=15&e,this._leftToRight=0==(16&e),this._topToBottom=(32&e)>0,this._interleave=192&e}},{key:"_readImageID",value:function(){this._idLength>0&&(this._imageID=this._buffer.subarray(18,this._idLength))}},{key:"_initImage",value:function(){this._imageType!==o.noImage&&(this._imageWidth<=0||this._imageHeight<=0||(this._canvas=document.createElement("canvas"),this._canvas.width=this._imageWidth,this._canvas.height=this._imageHeight,this._context=this._canvas.getContext("2d"),this._imageData=this._context.createImageData(this._imageWidth,this._imageHeight)))}},{key:"_setImage",value:function(){var e=this;this._context.putImageData(this._imageData,0,0),this._image=new Image,this._image.width=this._imageWidth,this._image.height=this._imageHeight,this._image.onload=function(){e._resolve()},this._image.src=this._canvas.toDataURL()}},{key:"_deleteBuffer",value:function(){this._buffer&&(delete this._buffer,this._buffer=null),this._imageData&&(delete this._imageData,this._imageData=null)}},{key:"_parseColorMapData",value:function(e){if(24===this._colorMapDepth||16===this._colorMapDepth||15===this._colorMapDepth)this._hasAlpha=!1;else{if(32!==this._colorMapDepth)throw new Error("unknown colorMapDepth: "+this._colorMapDepth);this._hasAlpha=!0}for(var t=18+this._idLength,n=Math.ceil(this._colorMapDepth/8),r=(this._colorMapLength,[]),i=t,o=0;o<this._colorMapLength;o++){var a=this._getRGBA(this._buffer,i,this._colorMapDepth);r.push(a),i+=n}var u=this._imageData.data,l=0,s=0,c=1,f=1;this._leftToRight||(l=this._imageWidth-1,c=-1),this._topToBottom||(s=this._imageHeight-1,f=-1),i=0;for(var h=s,d=[255,255,255,255],_=0;_<this._imageHeight;_++){for(var p=l,y=0;y<this._imageWidth;y++){var m=4*(h*this._imageWidth+p),v=d,g=e[i]-this._colorMapOrigin;g>=0&&(v=r[g]),u[m]=v[0],u[m+1]=v[1],u[m+2]=v[2],u[m+3]=v[3],p+=c,i+=1}h+=f}}},{key:"_parseRGBData",value:function(e){if(24===this._imageDepth||16===this._imageDepth||15===this._imageDepth)this._hasAlpha=!1;else{if(32!==this._imageDepth)throw new Error("unknown imageDepth: "+this._imageDepth);this._hasAlpha=!0}var t=Math.ceil(this._imageDepth/8),n=this._imageData.data,r=0,i=0,o=1,a=1;this._leftToRight||(r=this._imageWidth-1,o=-1),this._topToBottom||(i=this._imageHeight-1,a=-1);for(var u=0,l=i,s=0;s<this._imageHeight;s++){for(var c=r,f=0;f<this._imageWidth;f++){var h=4*(l*this._imageWidth+c),d=this._getRGBA(e,u,this._imageDepth);n[h]=d[0],n[h+1]=d[1],n[h+2]=d[2],n[h+3]=d[3],c+=o,u+=t}l+=a}}},{key:"_getRGBA",value:function(e,t,n){if(15===n){return[(124&e[t+1])<<1,(3&e[t+1])<<6|(224&e[t])>>2,(31&e[t])<<3,255]}if(16===n){return[(124&e[t+1])<<1,(3&e[t+1])<<6|(224&e[t])>>2,(31&e[t])<<3,255]}if(24===n)return[e[t+2],e[t+1],e[t],255];if(32===n)return[e[t+2],e[t+1],e[t],e[t+3]];throw new Error("unsupported imageDepth: "+n)}},{key:"_parseBlackAndWhiteData",value:function(e){if(8==this._imageDepth)this._hasAlpha=!1;else{if(16!=this._imageDepth)throw new Error("unknown imageDepth: "+this._imageDepth);this._hasAlpha=!0}var t=this._imageDepth/8,n=this._imageData.data,r=0,i=0,o=1,a=1;this._leftToRight||(r=this._imageWidth-1,o=-1),this._topToBottom||(i=this._imageHeight-1,a=-1);var u=0;if(this._hasAlpha)for(var l=i,s=0;s<this._imageHeight;s++){for(var c=r,f=0;f<this._imageWidth;f++){var h=4*(l*this._imageWidth+c),d=e[u],_=e[u+1];n[h]=d,n[h+1]=d,n[h+2]=d,n[h+3]=_,c+=o,u+=t}l+=a}else for(var p=i,y=0;y<this._imageHeight;y++){for(var m=r,v=0;v<this._imageWidth;v++){var g=4*(p*this._imageWidth+m),b=e[u];n[g]=b,n[g+1]=b,n[g+2]=b,n[g+3]=255,m+=o,u+=t}p+=a}}},{key:"_getImageData",value:function(){var e=null;if(this._imageType!==o.none){var t=Math.ceil(this._colorMapDepth/8)*this._colorMapLength,n=18+this._idLength+t;e=this._buffer.subarray(n)}return this._imageType===o.runlengthColorMapped||this._imageType===o.runlengthRGB?e=this._decompressRunlengthData(e):this._imageType===o.compressedBlackAndWhite?e=this._decompressRunlengthData(e):this._imageType===o.compressedColorMapped?console.error("Compressed Color Mapped TGA Image data is not supported"):this._imageType===o.compressed4PassQTColorMapped&&console.error("Compressed Color Mapped TGA Image data is not supported"),e}},{key:"_decompressRunlengthData",value:function(e){for(var t=[],r=Math.ceil(this._imageDepth/8),i=r*this._imageWidth*this._imageHeight,o=0;t.length<i;){var a=e[o];if(o+=1,0!=(128&a)){var u=e.slice(o,o+r);o+=r;for(var l=1+(127&a),s=0;s<l;s++)t.push.apply(t,n(u))}else{var c=(a+1)*r;t.push.apply(t,n(e.slice(o,o+c))),o+=c}}return t}},{key:"_resolve",value:function(e){this.onload&&this.onload(e),this._resolveFunc(e)}},{key:"_reject",value:function(e){this.onerror&&this.onerror(e),this._rejectFunc(e)}},{key:"image",get:function(){return this._image}},{key:"canvas",get:function(){return this._canvas}},{key:"didLoad",get:function(){return this._didLoad}},{key:"src",get:function(){return this._src},set:function(e){this._loadURL(e)}}],[{key:"imageWithData",value:function(t){return new e(t)}},{key:"imageWithURL",value:function(t){var n=new e;return n._loadURL(t),n}}]),e}();e.exports=a}).call(t,n(1).Buffer)},function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return s(this,e)}return a(this,e,t,n)}function a(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,n,r):"string"==typeof t?c(e,t,n):d(e,t)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function l(e,t,n,r){return u(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function s(e,t){if(u(t),e=i(e,t<0?0:0|_(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function c(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n);e=i(e,r);var a=e.write(t,n);return a!==r&&(e=e.slice(0,a)),e}function f(e,t){var n=t.length<0?0:0|_(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function h(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=f(e,t),e}function d(e,t){if(o.isBuffer(t)){var n=0|_(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Z(t.length)?i(e,0):f(e,t);if("Buffer"===t.type&&Q(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function _(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function p(e){return+e!=e&&(e=0),o.alloc(+e)}function y(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(r)return Y(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,n);case"utf8":case"utf-8":return P(this,t,n);case"ascii":return x(this,t,n);case"latin1":case"binary":return M(this,t,n);case"base64":return E(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function g(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,u=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,u/=2,l/=2,n/=2}var s;if(i){var c=-1;for(s=n;s<u;s++)if(o(e,s)===o(t,-1===c?0:s-c)){if(-1===c&&(c=s),s-c+1===l)return c*a}else-1!==c&&(s-=s-c),c=-1}else for(n+l>u&&(n=u-l),s=n;s>=0;s--){for(var f=!0,h=0;h<l;h++)if(o(e,s+h)!==o(t,h)){f=!1;break}if(f)return s}return-1}function S(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var u=parseInt(t.substr(2*a,2),16);if(isNaN(u))return a;e[n+a]=u}return a}function w(e,t,n,r){return K(Y(t,e.length-n),e,n,r)}function T(e,t,n,r){return K(X(t),e,n,r)}function k(e,t,n,r){return T(e,t,n,r)}function C(e,t,n,r){return K(W(t),e,n,r)}function O(e,t,n,r){return K(H(t,e.length-n),e,n,r)}function E(e,t,n){return 0===t&&n===e.length?q.fromByteArray(e):q.fromByteArray(e.slice(t,n))}function P(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=n){var l,s,c,f;switch(u){case 1:o<128&&(a=o);break;case 2:l=e[i+1],128==(192&l)&&(f=(31&o)<<6|63&l)>127&&(a=f);break;case 3:l=e[i+1],s=e[i+2],128==(192&l)&&128==(192&s)&&(f=(15&o)<<12|(63&l)<<6|63&s)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:l=e[i+1],s=e[i+2],c=e[i+3],128==(192&l)&&128==(192&s)&&128==(192&c)&&(f=(15&o)<<18|(63&l)<<12|(63&s)<<6|63&c)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,u=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=u}return A(r)}function A(e){var t=e.length;if(t<=$)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=$));return n}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function M(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function N(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=G(e[o]);return i}function F(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function I(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function j(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function B(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(e,t,n,r,i){return i||B(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),J.write(e,t,n,r,23,4),n+4}function L(e,t,n,r,i){return i||B(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),J.write(e,t,n,r,52,8),n+8}function V(e){if(e=z(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function z(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function G(e){return e<16?"0"+e.toString(16):e.toString(16)}function Y(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function X(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function H(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function W(e){return q.toByteArray(V(e))}function K(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Z(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var q=n(3),J=n(4),Q=n(5);t.Buffer=o,t.SlowBuffer=p,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return a(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return l(null,e,t,n)},o.allocUnsafe=function(e){return s(null,e)},o.allocUnsafeSlow=function(e){return s(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?P(this,0,e):m.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,u=n-t,l=Math.min(a,u),s=this.slice(r,i),c=e.slice(t,n),f=0;f<l;++f)if(s[f]!==c[f]){a=s[f],u=c[f];break}return a<u?-1:u<a?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return g(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return g(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return S(this,e,t,n);case"utf8":case"utf-8":return w(this,e,t,n);case"ascii":return T(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var i=t-e;r=new o(i,void 0);for(var a=0;a<i;++a)r[a]=this[a+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},o.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||R(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),J.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),J.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),J.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),J.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){D(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){D(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):j(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,a=1,u=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===u&&0!==this[t+o-1]&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,a=1,u=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===u&&0!==this[t+o+1]&&(u=1),this[t+o]=(e/a>>0)-u&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):j(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):j(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return U(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return U(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return L(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return L(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,a=r-n;if(this===e&&n<t&&t<r)for(i=a-1;i>=0;--i)e[i+t]=this[i+n];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<n;++a)this[a]=e;else{var u=o.isBuffer(e)?e:Y(new o(e,r).toString()),l=u.length;for(a=0;a<n-t;++a)this[a+t]=u[a%l]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-r(e)}function o(e){var t,n,i,o,a,u=e.length;o=r(e),a=new f(3*u/4-o),n=o>0?u-4:u;var l=0;for(t=0;t<n;t+=4)i=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],a[l++]=i>>16&255,a[l++]=i>>8&255,a[l++]=255&i;return 2===o?(i=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,a[l++]=255&i):1===o&&(i=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,a[l++]=i>>8&255,a[l++]=255&i),a}function a(e){return s[e>>18&63]+s[e>>12&63]+s[e>>6&63]+s[63&e]}function u(e,t,n){for(var r,i=[],o=t;o<n;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(a(r));return i.join("")}function l(e){for(var t,n=e.length,r=n%3,i="",o=[],a=0,l=n-r;a<l;a+=16383)o.push(u(e,a,a+16383>l?l:a+16383));return 1===r?(t=e[n-1],i+=s[t>>2],i+=s[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=s[t>>10],i+=s[t>>4&63],i+=s[t<<2&63],i+="="),o.push(i),o.join("")}t.byteLength=i,t.toByteArray=o,t.fromByteArray=l;for(var s=[],c=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,_=h.length;d<_;++d)s[d]=h[d],c[h.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,a,u=8*i-r-1,l=(1<<u)-1,s=l>>1,c=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-c)-1,d>>=-c,c+=u;c>0;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-s;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=s}return(d?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,u,l,s=8*o-i-1,c=(1<<s)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,_=r?1:-1,p=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+f>=1?h/l:h*Math.pow(2,1-f),t*l>=2&&(a++,l/=2),a+f>=c?(u=0,a=c):a+f>=1?(u=(t*l-1)*Math.pow(2,i),a+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&u,d+=_,u/=256,i-=8);for(a=a<<i|u,s+=i;s>0;e[n+d]=255&a,d+=_,a/=256,s-=8);e[n+d-_]|=128*p}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}}])},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=r(i),a=n(1),u=r(a),l=function(e,t,n,r){var i=Math.cos(e),a=Math.sin(e),l=new u.default(t,n,r),s=new o.default,c=l.x,f=l.y,h=l.z;return s.m11=c*c*(1-i)+i,s.m12=c*f*(1-i)-h*a,s.m13=c*h*(1-i)+f*a,s.m14=0,s.m21=f*c*(1-i)+h*a,s.m22=f*f*(1-i)+i,s.m23=f*h*(1-i)-c*a,s.m24=0,s.m31=h*c*(1-i)-f*a,s.m32=h*f*(1-i)+c*a,s.m33=h*h*(1-i)+i,s.m34=0,s.m41=0,s.m42=0,s.m43=0,s.m44=1,s};t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.freeAxes=null,e}return o(t,e),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(5),f=r(c),h=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=f.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{_actions:"NSArray",_finished:"boolean",_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_pausedTime:"float",name:["string",null]}}}]),t}(s.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=r(s),f=n(5),h=r(f),d=n(14),_=r(d),p=n(1),y=r(p),m=n(3),v=r(m),g=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=h.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e._toValue=null,e._byValue=null,e}return a(t,e),l(t,null,[{key:"_propTypes",get:function(){return{_actions:"NSArray",_finished:"boolean",_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_pausedTime:"float"}}}]),l(t,[{key:"reversed",value:function(){var e=this.copy();return e._toValue?(e._toValue=null,e._byValue=new y.default(0,0,0)):this._byValue&&(e._byValue=this._byValue.mul(-1)),e}},{key:"copy",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._toValue=this._toValue?this._toValue._copy():null,e._byValue=this._byValue?this._byValue._copy():null,e}},{key:"_applyAction",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._getTime(t,n);if(!(0,v.default)(e,_.default))throw new Error("unsupported class for SCNActionMove: "+e.constructor.name);var i=e.position,o=null;if(null!==this._toValue)o=this._toValue;else{if(null===this._byValue)throw new Error("both toValue and byValue are null");o=i.add(this._byValue)}var a=this._lerp(i,o,r);e.presentation.position=a,this._finished&&(e.position=o)}}],[{key:"moveByXYZ",value:function(e,n,r,i){var o=new t;return o._byValue=new y.default(e,n,r),o._duration=i,o}},{key:"moveBy",value:function(e,n){var r=new t;return r._byValue=e._copy(),r._duration=n,r}},{key:"moveTo",value:function(e,n){var r=new t;return r._toValue=e._copy(),r._duration=n,r}}]),t}(c.default);t.default=g,c.default.moveByXYZ=g.moveByXYZ,c.default.moveBy=g.moveBy,c.default.moveTo=g.moveTo},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(14),f=r(c),h=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.animation=e,n.inputMode=null,n.inputBias=0,n.inputScale=0,n.inputOrigin=null,n.inputProperty=null,n}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{animation:["NSMutableDictionary",function(e,t){e.animation=f.default._loadAnimationData(t,null)}],inputMode:"integer",inputBias:"float",inputScale:"float",inputOrigin:"SCNNode"}}}]),t}(s.default);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,n,r,i){return new e(t,n,r,i)};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.technique=null};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"writeBytesCount",value:function(e,t){}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(5),f=r(c),h=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=f.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{_actions:"NSArray",_finished:"boolean",_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_pausedTime:"float"}}}]),t}(s.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=r(s),f=n(5),h=r(f),d=n(14),_=r(d),p=n(1),y=r(p),m=n(13),v=r(m),g=n(3),b=r(g),S=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._rotX=0,e._rotY=0,e._rotZ=0,e._lastRotX=0,e._lastRotY=0,e._lastRotZ=0,e._axisRot=new v.default,e._isRelative=!1,e._isReversed=!1,e._isUnitArc=!1,e._isAxisAngle=!1,e._isRunning=!1,e._finished=!1,e._duration=0,e._pausedTime=0,e._timingMode=h.default.linear,e._beginTime=0,e}return a(t,e),l(t,null,[{key:"_propTypes",get:function(){return{_rotX:"float",_rotY:"float",_rotZ:"float",_lastRotX:"float",_lastRotY:"float",_lastRotZ:"float",_axisRot:"SCNVector4",_isRelative:"boolean",_isReversed:"boolean",_isUnitArc:"boolean",_isAxisAngle:"boolean",_isRunning:"boolean",_finished:"boolean",_duration:"float",_pausedTime:"float",_timingMode:"integer",_beginTime:"float",name:["string",null]}}}]),l(t,[{key:"copy",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._rotX=this._rotX,e._rotY=this._rotY,e._rotZ=this._rotZ,e._lastRotX=this._lastRotX,e._lastRotY=this._lastRotY,e._lastRotZ=this._lastRotZ,e._axisRot=this._axisRot,e._isRelative=this._isRelative,e._isReveresed=this._isReversed,e._isUnitArc=this._isUnitArc,e._isAxisAngle=this._isAxisAngle,e._isRunning=this._isRunning,e._finished=this._finished,e._duration=this._duration,e._pausedTime=this._pausedTime,e._timingMode=this._timingMode,e}},{key:"_applyAction",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!(0,b.default)(e,_.default))throw new Error("unsupported class for SCNActionRotate: "+e.constructor.name);var r=this._getTime(t,n);if(this._isAxisAngle){var i=e.rotation,o=this._axisRot;if(this._isRelative){var a=i.rotationToQuat,u=this._axisRot.rotationToQuat;o=a.cross(u).quatToRotation}if(this._isUnitArc){var l=this._slerp(i.rotationToQuat(),o.rotationToQuat(),r);e.presentation.orientation=l}else{var s=this._lerp(i,o,r);e.presentation.rotation=s}this._finished&&(e.rotation=o)}else{var c=new y.default(this._rotX,this._rotY,this._rotZ),f=null;if(this._isRelative){f=e.orientation.cross(c.mul(r).eulerAnglesToQuat()),e.presentation.orientation=f}else if(this._isUnitArc){var h=e.orientation;f=this._slerp(h,c.eulerAnglesToQuat(),r),e.presentation.orientation=f}else{var d=e.eulerAngles;f=this._lerp(d,c,r),e.presentation.eulerAngles=f}this._finished&&(this._isRelative?(c=e.orientation.cross(c.eulerAnglesToQuat()),e.orientation=c):e.eulerAngles=c)}}}],[{key:"rotateByXYZ",value:function(e,n,r,i){var o=new t;return o._rotX=-e,o._rotY=-n,o._rotZ=r,o._duration=i,o._isRelative=!0,o}},{key:"rotateToXYZ",value:function(e,n,r,i){var o=new t;return o._rotX=e,o._rotY=n,o._rotZ=r,o._duration=i,o}},{key:"rotateToXYZUsesShortestUnitArc",value:function(e,n,r,i,o){var a=new t;return a._rotX=e,a._rotY=n,a._rotZ=r,a._duration=i,a._isUnitArc=o,a}},{key:"rotateByAround",value:function(e,n,r){var i=new t;return i._axisRot.w=e,i._axisRot.x=n.x,i._axisRot.y=n.y,i._axisRot.z=n.z,i._duration=r,i._isRelative=!0,i._isAxisAngle=!0,i}},{key:"rotateToAxisAngle",value:function(e,n){var r=new t;return r._axisRot=e,r._duration=n,r._isAxisAngle=!0,r}}]),t}(c.default);t.default=S,c.default.rotateByXYZ=S.rotateByXYZ,c.default.rotateToXYZ=S.rotateToXYZ,c.default.rotateToXYZUsesShortestUnitArc=S.rotateToXYZUsesShortestUnitArc,c.default.rotateByAround=S.rotateByAround,c.default.rotateToAxisAngle=S.rotateToAxisAngle},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(9),s=r(l),c=n(6),f=r(c),h=n(15),d=r(h),_=n(12),p=r(_),y=n(8),m=r(y),v=n(1),g=r(v),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,[],[]));return r.width=e,r.height=n,r.widthSegmentCount=1,r.heightSegmentCount=1,r.cornerRadius=0,r.cornerSegmentCount=10,r._createGeometry(),r.materials.push(new m.default),r}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{width:"float",height:"float",widthSegmentCount:"integer",heightSegmentCount:"integer",cornerRadius:"float",cornerSegmentCount:"integer",materials:"NSArray",tessellator:"SCNGeometryTessellator",wantsAdaptiveSubdivision:"boolean",name:"string",primitiveType:["integer",null],subdivisionLevel:"integer",subdivisionSettings:["bytes",null]}}}]),u(t,[{key:"_createGeometry",value:function(){for(var e=[],t=[],n=(this.widthSegmentCount,0);n<=this.heightSegmentCount;n++)for(var r=n/this.heightSegmentCount,i=(-.5+r)*this.height,o=0;o<=this.widthSegmentCount;o++){var a=o/this.widthSegmentCount,u=(-.5+a)*this.width;e.push(u,i,0),e.push(0,0,1),e.push(a,1-r)}for(var l=this.widthSegmentCount*this.heightSegmentCount,s=0;s<l;s++){var c=4*s;t.push(c,c+1,c+3),t.push(c,c+3,c+2)}var h=(this.widthSegmentCount+1)*(this.heightSegmentCount+1),_=new f.default(e,f.default.Semantic.vertex,h,!0,3,4,0,32),y=new f.default(e,f.default.Semantic.normal,h,!0,3,4,12,32),m=new f.default(e,f.default.Semantic.texcoord,h,!0,2,4,24,32),v=new d.default(t,p.default.triangles);this._geometryElements=[v],this._geometrySources=[_,y,m],this.boundingBox={min:new g.default(-.5*this.width,-.5*this.height,0),max:new g.default(.5*this.width,.5*this.height,0)}}}]),t}(s.default);t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e){return new i.default(e)};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(19),s=r(l),c=n(14),f=(r(c),function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.maximumDistance=0,e.minimumDistance=0,e.target=null,e}return a(t,e),u(t,null,[{key:"constraintWithTarget",value:function(e){return new t}}]),t}(s.default));t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r){};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=new i.default(0,0,0);t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"programHandleError",value:function(e,t){}},{key:"programIsOpaque",value:function(e){return!1}},{key:"programBindValueForSymbolAtLocation",value:function(e,t,n,r,i){return!1}},{key:"programUnbindValueForSymbolAtLocation",value:function(e,t,n,r,i){}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={both:0,front:1,back:2};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return[e.x,e.y,e.z,e.w]};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=r(s),f=n(5),h=r(f),d=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=h.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e._source=null,e._wait=!1,e}return a(t,e),l(t,null,[{key:"_propTypes",get:function(){return{_actions:"NSArray",_finished:"boolean",_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_pausedTime:"float",name:["string",null]}}}]),l(t,[{key:"copy",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._source=this._source,e._wait=this._wait,e}},{key:"_applyAction",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._isRunning||(this._source._play(),this._isRunning=!0),(this._duration<=0||this._source._duration>0)&&(this._duration=this._source._duration);var r=this._getTime(t,n);this._wait?!this._source.loops&&r>=1?this._finished=!0:this._finished=!1:this._finished=!0}}],[{key:"playAudioWaitForCompletion",value:function(e,n){var r=new t;return r._source=e,r._wait=n,r}}]),t}(c.default);t.default=d,c.default.playAudioWaitForCompletion=d.playAudioWaitForCompletion},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r){};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=r(s),f=n(5),h=r(f),d=n(14),_=r(d),p=n(3),y=r(p),m=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=h.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e._toValue=null,e._byValue=null,e}return a(t,e),l(t,null,[{key:"_propTypes",get:function(){return{_actions:"NSArray",_finished:"boolean",_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_pausedTime:"float",name:["string",null]}}}]),l(t,[{key:"copy",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._toValue=this._toValue,e._byValue=this._byValue,e._duration=this._duration,e}},{key:"_applyAction",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._getTime(t,n);if(!(0,y.default)(e,_.default))throw new Error("unsupported class for SCNActionFade: "+e.constructor.name);var i=e._opacity,o=0;if(null!==this._toValue)o=this._toValue;else{if(null===this._byValue)throw new Error("both toValue and byValue are null");o=i+this._byValue}var a=this._lerp(i,o,r);e.presentation._opacity=a,this._finished&&(e._opacity=o)}}],[{key:"fadeInDuration",value:function(e){var n=new t;return n._toValue=1,n._duration=e,n}},{key:"fadeOutDuration",value:function(e){var n=new t;return n._toValue=0,n._duration=e,n}},{key:"fadeOpacityByDuration",value:function(e,n){var r=new t;return r._byValue=e,r._duration=n,r}},{key:"fadeOpacityToDuration",value:function(e,n){var r=new t;return r._toValue=e,r._duration=n,r}}]),t}(c.default);t.default=m,c.default.fadeInDuration=m.fadeInDuration,c.default.fadeOutDuration=m.fadeOutDuration,c.default.fadeOpacityByDuration=m.fadeOpacityByDuration,c.default.fadeOpacityToDuration=m.fadeOpacityToDuration},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={overLife:0,overDistance:1,overOtherProperty:2};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(100),f=r(c),h=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._audioSource=e,n._audioNode=new f.default,n._audioNode._gainNode=e._gainNode,n.willStartPlayback=null,n.didFinishPlayback=null,n}return a(t,e),u(t,[{key:"initAvAudioNode",value:function(e){this._audioSource=null,this._audioNode=null,this.willStartPlayback=null,this.didFinishPlayback=null}},{key:"_play",value:function(){this._audioSource._play()}},{key:"_stop",value:function(){this._audioSource._stop()}},{key:"_getLoadedPromise",value:function(){return this._audioSource?this._audioSource._getLoadedPromise():Promise.resolve()}},{key:"audioSource",get:function(){return this._audioSource}},{key:"audioNode",get:function(){return this._audioNode}},{key:"didLoad",get:function(){return this._getLoadedPromise()}}]),t}(s.default);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r,i){return e.rotation(n,r,i,t)};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={fragment:"SCNShaderModifierEntryPointFragment",geometry:"SCNShaderModifierEntryPointGeometry",lightingModel:"SCNShaderModifierEntryPointLightingModel",surface:"SCNShaderModifierEntryPointSurface"};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return null};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return null};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return null};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return null};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.boundingBox=null,this._boundingSphere=null}return i(e,[{key:"boundingSphere",get:function(){return this._boundingSphere}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),o=r(i),a=n(3),u=r(a),l=function(e,t){return!!(0,u.default)(e,o.default)&&e.equalTo(t)};t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e.invert()};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e,t,n){return new i.default(e,t,n)};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"init",value:function(e){this._default=null,this._static=null,this._all=null}},{key:"default",get:function(){return this._default}},{key:"static",get:function(){return this._static}},{key:"all",get:function(){return this._all}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={birth:0,death:1,collision:2};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(5),f=r(c),h=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=f.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{_actions:"NSArray",_finished:"boolean",_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_pausedTime:"float"}}}]),t}(s.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=r(s),f=n(5),h=r(f),d=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._animIndex=0,e._duration=0,e._timingMode=h.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e}return a(t,e),l(t,null,[{key:"_propTypes",get:function(){return{_actions:"NSArray",_finished:"boolean","_mycaction->_animIndex":["integer","_animIndex"],_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_pausedTime:"float",name:["string",null]}}}]),l(t,[{key:"copy",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._actions=this._actions.slice(0),e._animIndex=this._animIndex,e}},{key:"_applyAction",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.duration,i=0;i=r<=0||r===1/0?this._activetimeFromTime(t):this._getTime(t,n)*r;for(var o=0;o<this._animIndex;o++)i-=this._actions[o].duration/this._actions[o].speed;for(;this._animIndex<this._actions.length;this._animIndex++){var a=this._actions[this._animIndex];if(a._applyAction(e,i,!0),(i-=a.duration/a.speed)<0)break}this._animIndex>=this._actions.length&&(this._finished=!0)}},{key:"_resetFinished",value:function(){this._actions.forEach(function(e){e._resetFinished()}),this._finished=!1,this._animIndex=0}},{key:"duration",get:function(){var e=0;return this._actions.forEach(function(t){t.speed>0&&(e+=t.duration/t.speed)}),e}}],[{key:"sequence",value:function(e){var n=new t;return n._actions=e,n._duration=0,n}}]),t}(c.default);t.default=d,c.default.sequence=d.sequence},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(t){r(this,e),this._X=null,this._Y=null,this._Z=null,this._all=null}return i(e,[{key:"X",get:function(){return this._X}},{key:"Y",get:function(){return this._Y}},{key:"Z",get:function(){return this._Z}},{key:"all",get:function(){return this._all}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"init",value:function(){this.program=null,this.shaderModifiers=null}},{key:"handleBindingOfSymbolHandler",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"handleUnbindingOfSymbolHandler",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=(function(e){e&&e.__esModule}(r),function(e){return null});t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(9),c=r(s),f=n(15),h=r(f),d=n(12),_=r(d),p=n(6),y=r(p),m=n(8),v=r(m),g=n(1),b=r(g),S=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,[],[]));return r.radius=e,r.height=n,r.radialSegmentCount=48,r.heightSegmentCount=1,r._createGeometry(),r.materials.push(new v.default),r}return a(t,e),l(t,null,[{key:"_propTypes",get:function(){return{$constructor:function(e,n){var r=new t(n.cylinderradius,n.cylinderheight);return r.radialSegmentCount=n.cylinderradialSegmentCount,r.heightSegmentCount=n.cylinderheightSegmentCount,r.materials=n.materials,r.tessellator=n.tessellator,r.subdivisionLevel=n.subdivisionLevel,r},name:["string",null],cylinderradius:["float",null],cylinderheight:["float",null],cylinderradialSegmentCount:["integer",null],cylinderheightSegmentCount:["integer",null],cylinderradialSpan:["float",null],cylinderprimitiveType:["integer",null],materials:["NSArray",null],tessellator:["SCNGeometryTessellator",null],subdivisionLevel:["integer",null],subdivisionSettings:["bytes",null],wantsAdaptiveSubdivision:["boolean",null]}}}]),l(t,[{key:"_createGeometry",value:function(){for(var e=[],t=.5*this.height,n=.5*-this.height,r=[],i=[],o=[],a=2*Math.PI/this.radialSegmentCount,u=1/this.radialSegmentCount,l=0;l<=this.radialSegmentCount;l++){var s=-Math.sin(a*l),c=-Math.cos(a*l),f=s*this.radius,d=c*this.radius;r.push(f,n,d),i.push(f,t,d),o.push(-f,n,d),r.push(s,0,c),i.push(0,1,0),o.push(0,-1,0);var p=u*l;r.push(p,1);var m=.5*(1+Math.cos(l*a)),v=.5*(1+Math.sin(l*a));i.push(m,v),o.push(m,v),r.push(f,t,d),i.push(0,t,0),o.push(0,n,0),r.push(s,0,c),i.push(0,1,0),o.push(0,-1,0),r.push(p,0),i.push(.5,.5),o.push(.5,.5)}e.push.apply(e,r.concat(i,o));for(var g=6*(this.radialSegmentCount+1),S=new y.default(e,y.default.Semantic.vertex,g,!0,3,4,0,32),w=new y.default(e,y.default.Semantic.normal,g,!0,3,4,12,32),T=new y.default(e,y.default.Semantic.texcoord,g,!0,2,4,24,32),k=[],C=[],O=[],E=[],P=2*(this.radialSegmentCount+1),A=4*(this.radialSegmentCount+1),x=0;x<this.radialSegmentCount;x++){var M=2*x;C.push(M,M+3,M+1),C.push(M,M+2,M+3);var N=P+M;O.push(N,N+2,N+3);var F=A+M;E.push(F,F+2,F+3)}k.push(new h.default(C,_.default.triangles)),k.push(new h.default(O,_.default.triangles)),k.push(new h.default(E,_.default.triangles)),this._geometryElements=k,this._geometrySources=[S,w,T],this.boundingBox={min:new b.default(-this.radius,n,-this.radius),max:new b.default(this.radius,t,this.radius)}}},{key:"_updateBoundingBoxForSkinner",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?this.boundingBox:u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_updateBoundingBoxForSkinner",this).call(this,e)}}]),t}(c.default);t.default=S},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(19),s=r(l),c=n(14),f=(r(c),n(1)),h=(r(f),function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.isGimbalLockEnabled=!1,e.target=null,e.localFront=null,e.targetOffset=null,e.worldUp=null,e}return a(t,e),u(t,null,[{key:"constraintWithTarget",value:function(e){return new t}}]),t}(s.default));t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(9),s=r(l),c=n(15),f=r(c),h=n(12),d=r(h),_=n(6),p=r(_),y=n(8),m=r(y),v=n(1),g=r(v),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.25;i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,[],[]));return r.ringRadius=e,r.pipeRadius=n,r.ringSegmentCount=48,r.pipeSegmentCount=24,r._createGeometry(),r.materials.push(new m.default),r}return a(t,e),u(t,[{key:"_createGeometry",value:function(){for(var e=[],t=[],n=(this.ringSegmentCount+1)*(this.pipeSegmentCount+1),r=0;r<=this.ringSegmentCount;r++)for(var i=2*r*Math.PI/this.ringSegmentCount,o=Math.sin(i),a=Math.cos(i),u=-o*this.ringRadius,l=-a*this.ringRadius,s=r/this.ringSegmentCount,c=0;c<=this.pipeSegmentCount;c++){var h=2*c*Math.PI/this.pipeSegmentCount,_=Math.sin(h),y=Math.cos(h),m=u+this.pipeRadius*o*y,v=-this.pipeRadius*_,b=l+this.pipeRadius*a*y;e.push(m,v,b),e.push(o*y,-_,a*y);var S=1-c/this.pipeSegmentCount;e.push(s,S)}for(var w=new p.default(e,p.default.Semantic.vertex,n,!0,3,4,0,32),T=new p.default(e,p.default.Semantic.normal,n,!0,3,4,12,32),k=new p.default(e,p.default.Semantic.texcoord,n,!0,2,4,24,32),C=this.ringSegmentCount*this.pipeSegmentCount,O=0,E=0;E<C;E++){var P=O+this.pipeSegmentCount+1;t.push(O,P+1,O+1),t.push(O,P,P+1),O+=1,(E+1)%this.pipeSegmentCount==0&&(O+=1)}var A=new f.default(t,d.default.triangles);this._geometryElements=[A],this._geometrySources=[w,T,k],this.boundingBox={min:new g.default(-this.radius,-this.radius,-this.radius),max:new g.default(this.radius,this.radius,this.radius)}}}]),t}(s.default);t.default=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._owner=null,e._shaderModifiers=null,e}return o(t,e),a(t,null,[{key:"_propTypes",get:function(){return{owner:["SCNGeometry","_owner"],shaderModifiers:["NSDictionary","_shaderModifiers"]}}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),f=n(6),h=r(f),d=n(18),_=r(d),p=n(1),y=r(p),m=function(e){function t(e,n,r,i,u){o(this,t);var l=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),s=n.length;if(r.length!==s)throw new Error("SCNSkinner: bones.length ("+s+") !== boneInverseBindTransforms.length ("+r.length+")");if(i.componentsPerVector!==u.componentsPerVector)throw new Error("SCNSkinner: boneWeights.componentsPerVector ("+i.componentsPerVector+") !== boneIndices.componentsPerVector ("+i.componentsPerVector+")");return l.baseGeometry=e,l.baseGeometryBindTransform=(0,_.default)(0,0,0),l.skeleton=null,l._bones=n,l._boneInverseBindTransforms=r,l._boneWeights=i,l._boneIndices=u,l._useGPU=!0,l._checkUseGPU(),l}return u(t,e),l(t,null,[{key:"_propTypes",get:function(){return{$constructor:function(e,n){for(var r=[],i=n.bones.length,o=0;o<i;o++){var a=n["baseGeometryBindTransform-"+o];if(void 0===a)throw new Error("boneInverseBindTransforms "+o+" does not exist");r.push(a)}var u=new t(n.baseGeometry,n.bones,r,n.boneWeights,n.boneIndices);return u.skeleton=n.skeleton,u.baseGeometryBindTransform=n.baseGeometryBindTransform,u},$unknownKey:function(e){var t=new RegExp(/^baseGeometryBindTransform-(\d+)$/);return null!==e.match(t)?["SCNMatrix4",null]:null},baseGeometry:["SCNGeometry",null],baseGeometryBindTransform:["SCNMatrix4",null],skeleton:["SCNNode",null],bones:["NSArray",null],boneWeights:["SCNGeometrySource",null],boneIndices:["SCNGeometrySource",null]}}}]),l(t,[{key:"_checkUseGPU",value:function(){this._useGPU=!0,this._boneWeights&&this._boneWeights.componentsPerVector>4&&(this._useGPU=!1),this._boneIndices&&this._boneIndices.componentsPerVector>4&&(this._useGPU=!1)}},{key:"float32Array",value:function(){for(var e=[],t=this._bones.length,n=0;n<t;n++){var r=this._bones[n],o=this.baseGeometryBindTransform.mult(this._boneInverseBindTransforms[n]).mult(r.presentation._worldTransform);e.push.apply(e,i(o.floatArray3x4f()))}return new Float32Array(e)}},{key:"_update",value:function(e){if(!this._useGPU){var t=e.presentation;if(null!==e.geometry&&null!==t&&null!==t.geometry){this.baseGeometryBindTransform,this._boneInverseBindTransforms;for(var n=this._bones.length,r=[],i=0;i<n;i++){var o=this._bones[i];r.push(this.baseGeometryBindTransform.mult(this._boneInverseBindTransforms[i]).mult(o.presentation._worldTransform))}var a=this.baseGeometry,u=a.getGeometrySourcesForSemantic(h.default.Semantic.vertex)[0],l=a.getGeometrySourcesForSemantic(h.default.Semantic.normal)[0],s=t.geometry,c=s.getGeometrySourcesForSemantic(h.default.Semantic.vertex)[0],f=s.getGeometrySourcesForSemantic(h.default.Semantic.normal)[0],d=this._boneWeights,_=this._boneIndices,p=d.vectorCount,m=d.componentsPerVector;if(l)for(var v=0;v<p;v++){for(var g=u._scnVectorAt(v),b=l._scnVectorAt(v),S=d._vectorAt(v),w=_._vectorAt(v),T=new y.default(0,0,0),k=new y.default(0,0,0),C=0;C<m;C++)if(!(w[C]<0)&&0!==S[C]){var O=r[w[C]];T=T.add(g.transform(O).mul(S[C])),k=k.add(b.rotate(O).mul(S[C]))}c._setVectorAt(T,v),f._setVectorAt(k,v)}}}}},{key:"bones",get:function(){return this._bones.slice(0)}},{key:"boneInverseBindTransforms",get:function(){return this._boneInverseBindTransforms.slice(0)}},{key:"boneWeights",get:function(){return this._boneWeights}},{key:"boneIndices",get:function(){return this._boneIndices}},{key:"numSkinningJoints",get:function(){return this._boneWeights.componentsPerVector}}]),t}(c.default);t.default=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(29),a=(function(e){e&&e.__esModule}(o),function(){function e(){r(this,e)}return i(e,[{key:"init",value:function(){this._animationKeys=null}},{key:"addAnimationForKey",value:function(e,t){}},{key:"animationForKey",value:function(e){return null}},{key:"removeAllAnimations",value:function(){}},{key:"removeAnimationForKey",value:function(e){}},{key:"removeAnimationForKeyFadeOutDuration",value:function(e,t){}},{key:"pauseAnimationForKey",value:function(e){}},{key:"resumeAnimationForKey",value:function(e){}},{key:"isAnimationPausedForKey",value:function(e){return!1}},{key:"setAnimationSpeedForKey",value:function(e,t){}},{key:"animationKeys",get:function(){return this._animationKeys}}]),e}());t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(0),l=r(u),s=n(106),c=r(s),f=n(63),h=r(f),d=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.edgeTessellationFactor=0,e.insideTessellationFactor=0,e.isAdaptive=!1,e.isScreenSpace=!1,e.maximumEdgeLength=0,e.smoothingMode=c.default.none,e.tessellationFactorScale=0,e.tessellationPartitionMode=h.default.none,e}return a(t,e),t}(l.default);t.default=d},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"physicsWorldDidBegin",value:function(e,t){}},{key:"physicsWorldDidUpdate",value:function(e,t){}},{key:"physicsWorldDidEnd",value:function(e,t){}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={insideExtent:0,outsideExtent:1};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(5),f=r(c),h=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=f.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{_actions:"NSArray",_finished:"boolean",_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_pausedTime:"float"}}}]),t}(s.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(5),f=r(c),h=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=f.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{_actions:"NSArray",_finished:"boolean",_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_pausedTime:"float"}}}]),t}(s.default);t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o._time=e,o._eventBlock=n,o}return o(t,e),a(t,null,[{key:"eventWithTimeEventBlock",value:function(e,n){return new t(e,n)}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(19),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"init",value:function(e){this._chainRootNode=null,this.targetPosition=null}},{key:"maxAllowedRotationAngleForJoint",value:function(e){return 0}},{key:"setMaxAllowedRotationAngleForJoint",value:function(e,t){}},{key:"chainRootNode",get:function(){return this._chainRootNode}}],[{key:"inverseKinematicsConstraint",value:function(e){return null}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(102),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e,t,n,r){return e.mult((0,i.default)(t,n,r))};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._dictionaryRepresentation=e,n}return o(t,e),a(t,[{key:"initBySequencingTechniques",value:function(e){this._dictionaryRepresentation=null}},{key:"handleBindingOfSymbolUsing",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"setObjectForKeyedSubscript",value:function(e,t){}},{key:"dictionaryRepresentation",get:function(){return this._dictionaryRepresentation}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(28),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e,n,o,a){r(this,t);var u=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return u.anchorA=null,u.anchorB=null,u._bodyA=null,u._bodyB=null,u}return o(t,e),a(t,[{key:"bodyA",get:function(){return this._bodyA}},{key:"bodyB",get:function(){return this._bodyB}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(49),f=r(c),h=n(50),d=r(h),_=n(1),p=r(_),y=n(13),m=r(y),v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.default.static,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;i(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.physicsShape=n,r.type=e,r.velocityFactor=new p.default(0,0,0),r.angularVelocityFactor=new p.default(0,0,0),r.isAffectedByGravity=!0,r.mass=0,r.charge=0,r.friction=0,r.rollingFriction=0,r.restitution=0,r.damping=0,r.angularDamping=0,r.momentOfInertia=new p.default(0,0,0),r.usesDefaultMomentOfInertia=!0,r.categoryBitMask=0,r.contactTestBitMask=0,r.collisionBitMask=0,r.velocity=new p.default(0,0,0),r.angularVelocity=new m.default(0,0,0,0),r.allowsResting=!1,r._isResting=!1,r._node=null,r._btRigidBody=null,r._updateRigidBody(),r._position=null,r._radius=null,r._transform=null,r._invTransform=null,r._shape=null,r._prevPosition=null,r._positionDiff=new p.default,r}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{physicsShape:"SCNPhysicsShape",type:"integer",velocityFactor:"SCNVector3",angularVelocityFactor:"SCNVector3",ignoreGravity:["boolean",function(e,t){e.isAffectedByGravity=!t}],mass:"float",charge:"float",friction:"float",rollingFriction:"float",restitution:"float",damping:"float",angularDamping:"float",momentOfInertia:"SCNVector3",explicitMomentOfInertia:["boolean",function(e,t){e.usesDefaultMomentOfInertia=!t}],categoryBitMask:"integer",contactTestBitMask:"integer",collisionBitMask:"integer",velocity:"SCNVector3",angularVelocity:"SCNVector4",allowsResting:"boolean",isDefaultShape:["boolean",null]}}}]),u(t,[{key:"applyForceAsImpulse",value:function(e,t){}},{key:"applyForceAtAsImpulse",value:function(e,t,n){}},{key:"applyTorqueAsImpulse",value:function(e,t){}},{key:"clearAllForces",value:function(){}},{key:"resetTransform",value:function(){this._resetTransform(!0)}},{key:"_resetTransform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(null!==this._node&&(e&&this._node._updateWorldTransform(),this._node._presentation?this._transform=this._node._presentation._worldTransform:this._transform=this._node._worldTransform),this._radius=0,!this.physicsShape&&this._node&&this._node.geometry&&(this.physicsShape=new d.default(this._node.geometry)),this.physicsShape){this.physicsShape._sourceObject||this.physicsShape._setSourceObject(this._node),this.physicsShape._sourceGeometry||this.physicsShape._setSourceObject(this._sourceObject),this.physicsShape._shape||this.physicsShape._createShape();var t=this.physicsShape._center;this._transform=this._transform.translation(t.x,t.y,t.z),this.physicsShape._shape&&(this._radius=this.physicsShape._shape.getBoundingSphere().radius)}this._position=this._transform.getTranslation(),this._invTransform=this._transform.invert()}},{key:"_updateRigidBody",value:function(){this._btRigidBody}},{key:"_createRigidBody",value:function(){}},{key:"_execDestroy",value:function(){}},{key:"_getPosition",value:function(){var e=new p.default(0,0,0);if(null!==this._node&&(e=this._node._worldTranslation),null!==this.physicsShape&&null!==this.physicsShape._sourceGeometry){var t=this.physicsShape._sourceGeometry.getBoundingSphere().center;e=e.add(t)}return e}},{key:"_getRadius",value:function(){return null===this.physicsShape||null===this.physicsShape._sourceGeometry?0:this.physicsShape._sourceGeometry.getBoundingSphere().radius}},{key:"isResting",get:function(){return this._isResting}}],[{key:"static",value:function(){return new t(f.default.static)}},{key:"dynamic",value:function(){return new t(f.default.dynamic)}},{key:"kinematic",value:function(){return new t(f.default.kinematic)}}]),t}(s.default);t.default=v},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"init",value:function(e){this._showPhysicsShapes=null,this._showBoundingBoxes=null,this._showLightInfluences=null,this._showLightExtents=null,this._showPhysicsFields=null,this._showWireframe=null}},{key:"showPhysicsShapes",get:function(){return this._showPhysicsShapes}},{key:"showBoundingBoxes",get:function(){return this._showBoundingBoxes}},{key:"showLightInfluences",get:function(){return this._showLightInfluences}},{key:"showLightExtents",get:function(){return this._showLightExtents}},{key:"showPhysicsFields",get:function(){return this._showPhysicsFields}},{key:"showWireframe",get:function(){return this._showWireframe}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(9),f=(r(c),function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._geometry=null,e._screenSpaceRadius=0,e._worldSpaceDistance=0,e}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{mode:["integer",null],threshold:["float",null]}}}]),u(t,[{key:"initScreenSpaceRadius",value:function(e,t){}},{key:"initWorldSpaceDistance",value:function(e,t){}},{key:"geometry",get:function(){return this._geometry}},{key:"screenSpaceRadius",get:function(){return this._screenSpaceRadius}},{key:"worldSpaceDistance",get:function(){return this._worldSpaceDistance}}]),t}(s.default));t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=(function(e){e&&e.__esModule}(r),function(e){return null});t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={forward:0,deferred:1,modulated:2};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(13),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function(e){return new i.default(e)};t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"renderNode",value:function(e,t,n){}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(28),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e,n,o,a,u,l){r(this,t);var s=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return s.axisA=null,s.anchorA=null,s.axisB=null,s.anchorB=null,s._bodyA=null,s._bodyB=null,s.minimumLinearLimit=0,s.maximumLinearLimit=0,s.minimumAngularLimit=0,s.maximumAngularLimit=0,s.motorTargetLinearVelocity=0,s.motorMaximumForce=0,s.motorTargetAngularVelocity=0,s.motorMaximumTorque=0,s}return o(t,e),a(t,[{key:"bodyA",get:function(){return this._bodyA}},{key:"bodyB",get:function(){return this._bodyB}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(5),f=r(c),h=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=f.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{_actions:"NSArray",_finished:"boolean",_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_pausedTime:"float"}}}]),t}(s.default);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r){};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),c=r(s),f=n(5),h=r(f),d=n(14),_=r(d),p=n(3),y=r(p),m=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=h.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e}return a(t,e),l(t,null,[{key:"_propTypes",get:function(){return{_actions:"NSArray",_finished:"boolean",_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_pausedTime:"float"}}}]),l(t,[{key:"copy",value:function(){return u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this)}},{key:"_applyAction",value:function(e,t){!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!(0,y.default)(e,_.default))throw new Error("unsupported class for SCNActionRemove: "+e.constructor.name);e.removeFromParentNode(),this._finished=!0}}],[{key:"removeFromParentNode",value:function(){return new t}}]),t}(c.default);t.default=m,c.default.removeFromParentNode=m.removeFromParentNode},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return o(t,e),a(t,[{key:"initCaMediaTimingFunction",value:function(e){}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(9),s=r(l),c=n(15),f=r(c),h=n(12),d=r(h),_=n(6),p=r(_),y=n(8),m=r(y),v=n(1),g=r(v),b=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,[],[]));return a.topRadius=e,a.bottomRadius=n,a.height=r,a.radialSegmentCount=48,a.heightSegmentCount=1,a._createGeometry(),a.materials.push(new m.default),a}return a(t,e),u(t,[{key:"_createGeometry",value:function(){for(var e=[],t=.5*this.height,n=.5*-this.height,r=[],i=[],o=2*Math.PI/this.radialSegmentCount,a=1/this.radialSegmentCount,u=0;u<=this.radialSegmentCount;u++){var l=-Math.sin(o*u),s=-Math.cos(o*u),c=l*this.topRadius,h=s*this.topRadius,_=l*this.bottomRadius,y=s*this.bottomRadius;r.push(_,n,y),i.push(-_,n,y),r.push(l,0,s),i.push(0,-1,0);var m=a*u;r.push(m,1);var v=.5*(1+Math.cos(u*o)),b=.5*(1+Math.sin(u*o));i.push(v,b),r.push(c,t,h),i.push(0,n,0),r.push(l,0,s),i.push(0,-1,0),r.push(m,0),i.push(.5,.5)}e.push.apply(e,r.concat(i));for(var S=4*(this.radialSegmentCount+1),w=new p.default(e,p.default.Semantic.vertex,S,!0,3,4,0,32),T=new p.default(e,p.default.Semantic.normal,S,!0,3,4,12,32),k=new p.default(e,p.default.Semantic.texcoord,S,!0,2,4,24,32),C=[],O=[],E=[],P=2*(this.radialSegmentCount+1),A=0;A<this.radialSegmentCount;A++){var x=2*A;O.push(x,x+2,x+3);var M=P+x;E.push(M,M+2,M+3)}C.push(new f.default(O,d.default.triangles)),C.push(new f.default(E,d.default.triangles)),this._geometryElements=C,this._geometrySources=[w,T,k],this.boundingBox={min:new g.default(-this.radius,n,-this.radius),max:new g.default(this.radius,t,this.radius)}}}]),t}(s.default);t.default=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(103),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,null,[{key:"_propTypes",get:function(){return{halfExtent:"SCNVector3",scope:"integer",usesEllipsoidalExtent:"boolean",offset:"SCNVector3",strength:"float",falloffExponent:"float",minimumDistance:"float",active:["boolean","isActive"],exclusive:["boolean","isExclusive"],smoothness:["float","_smoothness"],animationSpeed:["float","_animationSpeed"]}}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(9),s=r(l),c=n(15),f=r(c),h=n(12),d=r(h),_=n(6),p=r(_),y=n(8),m=r(y),v=n(1),g=r(v),b=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,[],[]));return e.reflectivity=.25,e.reflectionFalloffEnd=0,e.reflectionFalloffStart=0,e.reflectionResolutionScaleFactor=1,e.length=2,e.reflectionCategoryBitMask=-1,e.width=2,e._createGeometry(),e.materials.push(new m.default),e}return a(t,e),u(t,[{key:"_createGeometry",value:function(){for(var e=[],t=[],n=this.width/10,r=-this.length/10,i=.5*this.length,o=1,a=0;a<=10;a++){for(var u=.5*-this.width,l=0,s=0;s<=10;s++)e.push(u,i,0),e.push(0,0,1),e.push(l,o),u+=n,l+=.1;i+=r,o+=-.1}for(var c=0;c<10;c++)for(var h=11*c,_=0;_<10;_++){var y=h+_,m=y+11;t.push(y,y+1,m+1),t.push(y,m+1,m)}var v=new p.default(e,p.default.Semantic.vertex,121,!0,3,4,0,32),b=new p.default(e,p.default.Semantic.normal,121,!0,3,4,12,32),S=new p.default(e,p.default.Semantic.texcoord,121,!0,2,4,24,32),w=new f.default(t,d.default.triangles);this._geometryElements=[w],this._geometrySources=[v,b,S],this.boundingBox={min:new g.default(.5*-this.width,.5*-this.length,0),max:new g.default(.5*this.width,.5*this.length,0)}}}]),t}(s.default);t.default=b},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(9),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e,n){r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.string=null,o.font=null,o.containerFrame=null,o.isWrapped=!1,o.alignmentMode="",o.truncationMode="",o._textSize=null,o.flatness=0,o.extrusionDepth=0,o.chamferRadius=0,o.chamferProfile=null,o}return o(t,e),a(t,[{key:"textSize",get:function(){return this._textSize}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(5),f=r(c),h=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=f.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{_actions:"NSArray",_finished:"boolean",_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_pausedTime:"float",name:["string",null]}}}]),u(t,null,[{key:"waitDuration",value:function(e){var n=new t;return n._duration=e,n}},{key:"waitDurationWithRange",value:function(e,n){var r=Math.max(0,e+(Math.random()-.5)*n),i=new t;return i._duration=r,i}}]),t}(s.default);t.default=h,s.default.waitDuration=h.waitDuration,s.default.waitDurationWithRange=h.waitDurationWithRange},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return[e.x,e.y,e.z]};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r){};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return Math.abs(e.x-t.x)<1e-5&&Math.abs(e.y-t.y)<1e-5&&Math.abs(e.z-t.z)<1e-5&&Math.abs(e.w-t.w)<1e-5};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e),this.scene=null,this.pointOfView=null,this.autoenablesDefaultLighting=!1,this.isJitteringEnabled=!1,this.showsStatistics=!1,this.debugOptions=null,this._renderingAPI=null,this.sceneTime=0,this.isPlaying=!1,this.loops=!1,this.delegate=null,this._currentRenderCommandEncoder=null,this._device=null,this._commandQueue=null,this._colorPixelFormat=null,this._depthPixelFormat=null,this._stencilPixelFormat=null,this._context=null,this.overlaySKScene=null,this.audioListener=null,this._audioEnvironmentNode=null,this._audioEngine=null,this.currentTime=0}return i(e,[{key:"presentWithIncomingPointOfView",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3]}},{key:"prepareShouldAbortBlock",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!1}},{key:"prepare",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"hitTest",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return null}},{key:"isNodeInsideFrustumOf",value:function(e,t){return!1}},{key:"nodesInsideFrustumOf",value:function(e){return null}},{key:"projectPoint",value:function(e){return null}},{key:"unprojectPoint",value:function(e){return null}},{key:"renderingAPI",get:function(){return this._renderingAPI}},{key:"currentRenderCommandEncoder",get:function(){return this._currentRenderCommandEncoder}},{key:"device",get:function(){return this._device}},{key:"commandQueue",get:function(){return this._commandQueue}},{key:"colorPixelFormat",get:function(){return this._colorPixelFormat}},{key:"depthPixelFormat",get:function(){return this._depthPixelFormat}},{key:"stencilPixelFormat",get:function(){return this._stencilPixelFormat}},{key:"context",get:function(){return this._context}},{key:"audioEnvironmentNode",get:function(){return this._audioEnvironmentNode}},{key:"audioEngine",get:function(){return this._audioEngine}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(10),l=r(u),s=n(16),c=r(s),f=n(11),h=r(f),d=n(35),_=r(d),p=n(88),y=r(p),m=n(78),v=r(m),g=n(105),b=r(g),S=n(13),w=r(S),T=n(2),k=r(T),C={preferLowPowerDevice:"SCNPreferLowPowerDeviceKey",preferredDevice:"SCNPreferredDeviceKey",preferredRenderingAPI:"SCNPreferredRenderingAPIKey"},O=new Map([["KeyA",0],["KeyS",1],["KeyD",2],["KeyF",3],["KeyH",4],["KeyG",5],["KeyZ",6],["KeyX",7],["KeyC",8],["KeyV",9],["IntlBackslash",10],["KeyB",11],["KeyQ",12],["KeyW",13],["KeyE",14],["KeyR",15],["KeyY",16],["KeyT",17],["Digit1",18],["Digit2",19],["Digit3",20],["Digit4",21],["Digit6",22],["Digit5",23],["Equal",24],["Digit9",25],["Digit7",26],["Minus",27],["Digit8",28],["Digit0",29],["BracketRight",30],["KeyO",31],["KeyU",32],["BracietLeft",33],["KeyI",34],["KeyP",35],["Enter",36],["KeyL",37],["KeyJ",38],["Quote",39],["KeyK",40],["Semicolon",41],["Backslash",42],["Comma",43],["Slash",44],["KeyN",45],["KeyM",46],["Period",47],["Tab",48],["Space",49],["Backquote",50],["Delete",51],["NumpadEnter",52],["Escape",53],["OSRight",54],["MetaRight",54],["OSLeft",55],["MetaLeft",55],["ShiftLeft",56],["CapsLock",57],["AltLeft",58],["ControlLeft",59],["ShiftRight",60],["AltRight",61],["ControlRight",62],["Fn",63],["F17",64],["NumpadDecimal",65],["NumpadMultiply",67],["NumpadAdd",69],["NumLock",71],["AudioVolumeUp",72],["AudioVolumeDown",73],["AudioVolumeMute",74],["NumpadDivide",75],["NumpadEnter",76],["NumpadSubtract",78],["F18",79],["F19",80],["NumpadEqual",81],["Numpad0",82],["Numpad1",83],["Numpad2",84],["Numpad3",85],["Numpad4",86],["Numpad5",87],["Numpad6",88],["Numpad7",89],["F20",90],["Numpad8",91],["Numpad9",92],["IntlYen",93],["IntlRo",94],["NumpadComma",95],["F5",96],["F6",97],["F7",98],["F3",99],["F8",100],["F9",101],["Lang2",102],["F11",103],["Lang1",104],["F13",105],["F16",106],["F14",107],["F10",109],["F12",111],["F15",113],["Help",114],["Insert",114],["Home",115],["PageUp",116],["Delete",117],["F4",118],["End",119],["F2",120],["PageDown",121],["F1",122],["ArrowLeft",123],["ArrowRight",124],["ArrowDown",125],["ArrowUp",126]]),E=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;o(this,e),this._scene=null,this._backgroundColor=k.default.white,this.allowsCameraControl=!1,this.antialiasingMode=b.default.multisampling4X,this.preferredFramesPerSecond=0,this._context=null,this.pixelFormat=null,this._renderingAPI=v.default.webGL,this._delegate=null,this._device=null,this.technique=null,this._frame=t,this._canvas=document.createElement("canvas"),this._canvas.tabIndex=1,void 0===t&&(t=c.default.rectWithXYWidthHeight(0,0,300,300)),this._canvas.style.width=t.width,this._canvas.style.height=t.height,this._canvasWidth=0,this._canvasHeight=0,this._currentSystemTime=0,this._elapsedTime=0,this._previousSystemTimeMs=0,this._sumElapsedTimeMs=0,this._sumFrames=0,this._lastFpsCalculationTimeMs=0,this._fpsCalculationSpanMs=2e3,this._fps=0,this._renderer=new y.default,this._requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};var i=r?r[e.Option.preferLowPowerDevice]:null,a=(r&&r[e.Option.preferredDevice],r&&r[e.Option.preferredRenderingAPI],{alpha:!0,depth:!0,stencil:!0,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,preferLowPowerToHighPerformance:Boolean(i),failIfMajorPerformanceCaveat:!1}),u=["webgl2"],l=!0,s=!1,f=void 0;try{for(var h,d=u[Symbol.iterator]();!(l=(h=d.next()).done);l=!0){var _=h.value;try{this._context=this._canvas.getContext(_,a)}catch(e){}if(this._context)break}}catch(e){s=!0,f=e}finally{try{!l&&d.return&&d.return()}finally{if(s)throw f}}if(!this._context)throw new Error("can't create WebGL context");this._context.viewport(t.minX,t.minY,t.width,t.height),this._renderer._setContext(this._context),this._renderer._backgroundColor=this._backgroundColor,this._renderer._viewRect=t,this._mouseIsDown=!1,this._mouseDownX=0,this._mouseDownY=0,this._canvas.addEventListener("mousedown",function(e){var t=n._createEvent(e);n._mouseIsDown=!0,n._mouseDownX=e.clientX,n._mouseDownY=e.clientY,n.allowsCameraControl&&(n._baseCameraPosition=n._renderer._getCameraPosition(),n._baseCameraOrientation=n._renderer._getCameraOrientation(),n._baseCameraDistance=n._renderer._getCameraDistance()),n.mouseDownWith(t)}),this._canvas.addEventListener("mousemove",function(e){var t=n._createEvent(e);if(n.mouseMovedWith(t),n._mouseIsDown){if(n.allowsCameraControl){var r=e.clientX,i=e.clientY,o=r-n._mouseDownX,a=i-n._mouseDownY,u=Math.sqrt(o*o+a*a);if(u>0){var l=.5*-u*.01,s=Math.sin(l)/u,c=new w.default(a*s,o*s,0,Math.cos(l)),f=n._baseCameraOrientation.cross(c);n._renderer._setDefaultCameraOrientation(f)}n._renderer._switchToDefaultCamera()}n.mouseDraggedWith(t)}}),document.addEventListener("mouseup",function(e){if(n._mouseIsDown){n._mouseIsDown=!1;var t=n._createEvent(e);n.mouseUpWith(t),n._preventDefault(t)}}),this._canvas.addEventListener("mouseover",function(e){var t=n._createEvent(e);n._preventDefault(t)}),this._canvas.addEventListener("mouseout",function(e){var t=n._createEvent(e);n.mouseExitedWith(t),n._preventDefault(t)}),this._canvas.addEventListener("mousewheel",function(e){var t=n._createEvent(e);n.scrollWheelWith(t),n._preventDefault(t)}),this._canvas.addEventListener("DOMMouseScroll",function(e){var t=n._createEvent(e);n.scrollWheelWith(t),n._preventDefault(t)}),this._canvas.addEventListener("keydown",function(e){var t=n._createEvent(e);n.keyDownWith(t),n._preventDefault(t)}),this._canvas.addEventListener("keyup",function(e){var t=n._createEvent(e);n.keyUpWith(t),n._preventDefault(t)})}return a(e,[{key:"connectedCallback",value:function(){}},{key:"disconnectedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(){}},{key:"_resizeCanvas",value:function(){var e=this._canvas.clientWidth,t=this._canvas.clientHeight;this._frame&&this._frame.width===e&&this._frame.height===t||(this._frame=c.default.rectWithXYWidthHeight(0,0,e,t),this._canvas.width=e,this._canvas.height=t,this._context.viewport(0,0,e,t),this._renderer._viewRect=this._frame,this.setFrameSize(this._frame.size))}},{key:"appendTo",value:function(e){var t=this;e.appendChild(this._canvas),void 0===this._frame&&(this._canvas.style.width="100%",this._canvas.style.height="100%",this._canvas.clientHeight<=0&&(this._canvas.style.height=300)),this._resizeCanvas(),"undefined"!=typeof window&&window.addEventListener("resize",function(){t._resizeCanvas()})}},{key:"pause",value:function(e){this._isPlaying&&(this._isPlaying=!1)}},{key:"play",value:function(e){this._isPlaying||(this._isPlaying=!0,this.__requestAnimationFrame())}},{key:"stop",value:function(e){this._isPlaying=!1}},{key:"snapshot",value:function(){return null}},{key:"presentWithIncomingPointOfView",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]&&arguments[3]}},{key:"prepareShouldAbortBlock",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!1}},{key:"prepare",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"hitTest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=(e.x-this._frame.minX)/this._frame.width*2-1,r=(e.y-this._frame.minY)/this._frame.height*2-1;return this._renderer.hitTest(new l.default(n,-r),t)}},{key:"isNodeInsideFrustumOf",value:function(e,t){return!1}},{key:"nodesInsideFrustumOf",value:function(e){return null}},{key:"projectPoint",value:function(e){return null}},{key:"unprojectPoint",value:function(e){return null}},{key:"viewDidMoveToWindow",value:function(){}},{key:"setFrameSize",value:function(e){}},{key:"_drawAtTimeWithContext",value:function(e,t){this._renderer._time=e,this._createPresentationNodes(),this._createSKPresentationNodes(),this._updateTransform(),this._delegate&&this._delegate.rendererUpdateAtTime&&this._delegate.rendererUpdateAtTime(this._renderer,e),this._copyTransformToPresentationNodes(),this._copyTransformToPresentationSKNodes(),this._updateTransform(),this._runActions(),this._runAnimations(),this._runSKActions(),this._updateTransform(),this._delegate&&this._delegate.rendererDidApplyAnimationsAtTime&&this._delegate.rendererDidApplyAnimationsAtTime(this._renderer,e),this._updateTransform(),this._scene&&null!==this._scene._physicsWorld&&this._scene._physicsWorld._simulate(e),this._delegate&&this._delegate.rendererDidSimulatePhysicsAtTime&&this._delegate.rendererDidSimulatePhysicsAtTime(this._renderer,e),this._delegate&&this._delegate.rendererWillRenderSceneAtTime&&this._delegate.rendererWillRenderSceneAtTime(this._renderer,this._scene,e),this._updateSkinner(),this._updateMorph(),this._updateParticles(),this._updateSKTransform(),this._renderer.render(),this._delegate&&this._delegate.rendererDidRenderSceneAtTime&&this._delegate.rendererDidRenderSceneAtTime(this._renderer,e)}},{key:"_createPresentationNodes",value:function(){if(null!==this._scene)for(var e=[this._scene.rootNode];e.length>0;){var t=e.shift();t._presentation||t._createPresentation(),e.push.apply(e,i(t.childNodes))}}},{key:"_copyTransformToPresentationNodes",value:function(){if(null!==this._scene)for(var e=[this._scene.rootNode,this._scene._skyBox,this._renderer._defaultCameraPosNode,this._renderer._defaultLightNode];e.length>0;){var t=e.shift();t._copyTransformToPresentation(),t._copyMaterialPropertiesToPresentation(),t._copyMorpherToPresentation(),e.push.apply(e,i(t.childNodes))}}},{key:"_createSKPresentationNodes",value:function(){if(null!==this.overlaySKScene)for(var e=[this.overlaySKScene];e.length>0;){var t=e.shift(),n=t.__presentation;null===n&&(n=t.copy(),n._isPresentationInstance=!0,t.__presentation=n),e.push.apply(e,i(t.children))}}},{key:"_copyTransformToPresentationSKNodes",value:function(){if(null!==this.overlaySKScene)for(var e=[this.overlaySKScene];e.length>0;){var t=e.shift();t._copyTransformToPresentation(),e.push.apply(e,i(t.children))}}},{key:"__requestAnimationFrame",value:function(){var e=this;this._requestAnimationFrame.call(window,function(){var t=Date.now(),n=0;e._previousSystemTimeMs&&(n=t-e._previousSystemTimeMs),n&&(e._lastFpsCalculationTimeMs||(e._lastFpsCalculationTime=t),e._sumElapsedTimeMs+=n,e._sumFrames+=1,t-e._lastFpsCalculationTimeMs>e._fpsCalculationSpanMs&&(e._fps=e._sumFrames/(.001*e._sumElapsedTimeMs),e._sumFrames=0,e._sumElapsedTimeMs=0,e._lastFpsCalculationTimeMs=t,console.error("fps: "+e._fps))),e._currentSystemTime=.001*t,e._elapsedTime=.001*n,e.currentTime=e._currentSystemTime,_.default._update(),e._drawAtTimeWithContext(e.currentTime,e._context),e._isPlaying&&e.__requestAnimationFrame(),e._previousSystemTimeMs=t})}},{key:"_updateTransform",value:function(e,t){null!==this._scene&&(this._scene.rootNode._updateWorldTransform(),this._scene.rootNode._updateBoundingBox())}},{key:"_updateSkinner",value:function(e){var t=this;if(void 0===e)return void(this._scene&&this._updateSkinner(this._scene.rootNode));null===e.skinner||e.skinner._useGPU||e.skinner._update(e),e.childNodes.forEach(function(e){t._updateSkinner(e)})}},{key:"_updateMorph",value:function(e){var t=this;if(void 0===e)return void(this._scene&&this._updateMorph(this._scene.rootNode));null!==e.morpher&&e.morpher._morph(e),e.childNodes.forEach(function(e){t._updateMorph(e)})}},{key:"_updateSKTransform",value:function(){null!==this.overlaySKScene&&this.overlaySKScene._updateWorldTransform()}},{key:"_runActions",value:function(){null!==this._scene&&this._runActionForNode(this._scene.rootNode)}},{key:"_runActionForNode",value:function(e){var t=this;this._runActionForObject(e),e.childNodes.forEach(function(e){return t._runActionForNode(e)})}},{key:"_runActionForObject",value:function(e){var t=this,n=[];e._actions.forEach(function(r,i){r._applyAction(e,t.currentTime),r._finished&&(r._completionHandler&&r._completionHandler(),n.push(i))}),n.forEach(function(t){e._actions.delete(t)})}},{key:"_runSKActions",value:function(){null!==this.overlaySKScene&&this._runSKActionForNode(this.overlaySKScene)}},{key:"_runSKActionForNode",value:function(e){var t=this;this._runSKActionForObject(e),e.children.forEach(function(e){return t._runSKActionForNode(e)})}},{key:"_runSKActionForObject",value:function(e){var t=this,n=[];e._actions.forEach(function(r,i){r._applyAction(e,t.currentTime),r._finished&&(r._completionHandler&&r._completionHandler(),n.push(i))}),n.forEach(function(t){e._actions.delete(t)})}},{key:"_runAnimations",value:function(){null!==this._scene&&this._runAnimationForNode(this._scene.rootNode)}},{key:"_runAnimationForNode",value:function(e){var t=this;if(e.childNodes.forEach(function(e){return t._runAnimationForNode(e)}),this._runAnimationForObject(e),e.geometry&&(this._runAnimationForObject(e.geometry),e.geometry.materials.forEach(function(e){t._runAnimationForObject(e),[e._diffuse,e._ambient,e._specular,e._normal,e._reflective,e._emission,e._transparent,e._multiply,e._ambientOcclusion,e._selfIllumination,e._metalness,e._roughness].forEach(function(e){t._runAnimationForObject(e)})})),e._particleSystems){var n=!0,r=!1,i=void 0;try{for(var o,a=e._particleSystems[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;this._runAnimationForObject(u)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}}},{key:"_runAnimationForObject",value:function(e){var t=this,n=[];e._animations.forEach(function(r,i){r._applyAnimation(e,t.currentTime),r._isFinished&&r.isRemovedOnCompletion&&n.push(i)}),n.forEach(function(t){e._animations.delete(t)})}},{key:"_updateParticles",value:function(){null!==this._scene&&(this._updateParticlesForScene(),this._updateParticlesForNode(this._scene.rootNode))}},{key:"_updateParticlesForScene",value:function(){if(null!==this._scene._particleSystems){for(var e=this._scene.physicsWorld?this._scene.physicsWorld.gravity:null,t=this._scene._particleSystems.length,n=0;n<t;n++){var r=this._scene._particleSystems[n],i=this._scene._particleSystemsTransform[n];r._updateParticles(i,e,this.currentTime)}var o=!0,a=!1,u=void 0;try{for(var l,s=this._scene._particleSystems[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var c=l.value;c._finished&&this._scene.removeParticleSystem(c)}}catch(e){a=!0,u=e}finally{try{!o&&s.return&&s.return()}finally{if(a)throw u}}}}},{key:"_updateParticlesForNode",value:function(e){var t=this;this._updateParticlesForObject(e),e.childNodes.forEach(function(e){return t._updateParticlesForNode(e)})}},{key:"_updateParticlesForObject",value:function(e){if(null!==e.particleSystems){var t=this._scene.physicsWorld?this._scene.physicsWorld.gravity:null,n=!0,r=!1,i=void 0;try{for(var o,a=e.particleSystems[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){o.value._updateParticles(e.presentation.worldTransform,t,this.currentTime)}}catch(e){r=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}var u=!0,l=!1,s=void 0;try{for(var c,f=e.particleSystems[Symbol.iterator]();!(u=(c=f.next()).done);u=!0){var h=c.value;h._finished&&e.removeParticleSystem(h)}}catch(e){l=!0,s=e}finally{try{!u&&f.return&&f.return()}finally{if(l)throw s}}}}},{key:"_createEvent",value:function(e){var t={};return t.locationInWindow=new l.default(e.clientX,e.clientY),t.modifierFlags=0,t.timestamp=e.timeStamp,"undefined"!=typeof window&&(t.window=window),t.windowNumber=0,t.eventRef=e,t.cgEvent=null,t.characters=null,t.charactersIgnoringModifiers=null,t.isARepeat=!1,void 0!==e.repeat&&(t.isARepeat=e.repeat),e.code&&O.has(e.code)?t.keyCode=O.get(e.code):t.keyCode=0,t.buttonNumber=0,t.clickCount=0,t.associatedEventsMask=null,t.eventNumber=0,t.trackingNumber=0,t.trackingArea=0,t.userData=null,t.data1=0,t.data2=0,t.sutype=null,void 0!==e.deltaX?(t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ):(t.deltaX=0,t.deltaY=0,t.deltaZ=0,void 0!==e.detail&&(t.deltaY=10*-e.detail)),t._doDefaultAction=!1,t}},{key:"_preventDefault",value:function(e){e._doDefaultAction||e.eventRef.preventDefault()}},{key:"mouseDownWith",value:function(e){e._doDefaultAction=!0}},{key:"mouseDraggedWith",value:function(e){e._doDefaultAction=!0}},{key:"mouseUpWith",value:function(e){e._doDefaultAction=!0}},{key:"mouseMovedWith",value:function(e){e._doDefaultAction=!0}},{key:"mouseEnteredWith",value:function(e){e._doDefaultAction=!0}},{key:"mouseExitedWith",value:function(e){e._doDefaultAction=!0}},{key:"rightMouseDraggedWith",value:function(e){e._doDefaultAction=!0}},{key:"rightMouseUpWith",value:function(e){e._doDefaultAction=!0}},{key:"otherMouseDownWith",value:function(e){e._doDefaultAction=!0}},{key:"otherMouseDraggedWith",value:function(e){e._doDefaultAction=!0}},{key:"otherMouseUpWith",value:function(e){e._doDefaultAction=!0}},{key:"scrollWheelWith",value:function(e){e._doDefaultAction=!0}},{key:"keyDownWith",value:function(e){e._doDefaultAction=!0}},{key:"keyUpWith",value:function(e){e._doDefaultAction=!0}},{key:"flagsChangedWith",value:function(e){}},{key:"tablePointWith",value:function(e){}},{key:"tableProximityWith",value:function(e){}},{key:"convertFrom",value:function(e,t){var n=0,r=0;t&&(n=t._frame.origin.x,r=t._frame.origin.y);var i=this._canvas.getBoundingClientRect(),o=i.left,a=i.top;return new l.default(e.x+n-o,e.y+r-a)}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._renderer._backgroundColor=e}},{key:"isPlaying",get:function(){return this._renderer.isPlaying},set:function(e){e?this.play():this.pause()}},{key:"scene",get:function(){return this._scene},set:function(e){this._scene=e,this._renderer.scene=this._scene,null!==this._scene&&(this._scene._physicsWorld._renderer=this._renderer,this._updateTransform(),this._scene.rootNode._resetPhysicsTransformRecursively())}},{key:"pointOfView",get:function(){return this._renderer.pointOfView},set:function(e){this._renderer.pointOfView=e}},{key:"autoenablesDefaultLighting",get:function(){return this._renderer.autoenablesDefaultLighting},set:function(e){this._renderer.autoenablesDefaultLighting=e}},{key:"isJitteringEnabled",get:function(){return this._renderer.isJitteringEnabled},set:function(e){this._renderer.isJitteringEnabled=e}},{key:"showsStatistics",get:function(){return this._renderer.showsStatistics},set:function(e){this._renderer.showsStatistics=e}},{key:"debugOptions",get:function(){return this._renderer.debugOptions},set:function(e){this._renderer.debugOptions=e}},{key:"sceneTime",get:function(){return this._renderer.sceneTime},set:function(e){this._renderer.sceneTime=e}},{key:"loops",get:function(){return this._renderer.loops},set:function(e){this._renderer.loops=e}},{key:"renderingAPI",get:function(){return this._renderingAPI}},{key:"delegate",get:function(){return this._delegate},set:function(e){this._delegate=e}},{key:"currentRenderCommandEncoder",get:function(){return this._renderer.currentRenderCommandEncoder}},{key:"device",get:function(){return this._device}},{key:"commandQueue",get:function(){return this._renderer.commandQueue}},{key:"colorPixelFormat",get:function(){return this._renderer.colorPixelFormat}},{key:"depthPixelFormat",get:function(){return this._renderer.depthPixelFormat}},{key:"stencilPixelFormat",get:function(){return this._renderer._stencilPixelFormat}},{key:"context",get:function(){return this._renderer.context}},{key:"overlaySKScene",get:function(){return this._renderer.overlaySKScene},set:function(e){this._renderer.overlaySKScene=e}},{key:"audioListener",get:function(){return this._renderer.audioListener},set:function(e){this._renderer.audioListener=e}},{key:"audioEnvironmentNode",get:function(){return this._renderer.audioEnvironmentNode}},{key:"audioEngine",get:function(){return this._renderer.audioEngine}},{key:"currentTime",get:function(){return this._renderer.currentTime},set:function(e){this._renderer.currentTime=e}},{key:"bounds",get:function(){var e=this._canvas.getBoundingClientRect();return new c.default(new l.default(e.left,e.top),new h.default(e.width,e.height))}}],[{key:"Option",get:function(){return C}}]),e}();t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return null};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=(new i.default,function(e){return e.isIdentity()});t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(0),c=r(s),f=n(112),h=r(f),d=new RegExp(/^weights\[(\d+)\]$/),_=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.targets=[],e._weights=[],e.calculationMode=h.default.normalized,e}return a(t,e),u(t,[{key:"weightForTargetAt",value:function(e){return this._weights[e]}},{key:"setWeightForTargetAt",value:function(e,t){this._weights[t]=e}},{key:"setValueForKey",value:function(e,n){var r=n.match(d);if(null===r)l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValueForKey",this).call(this,e,n);else if(r.length>1){var i=r[1];this._weights[i]=e}}},{key:"_morph",value:function(e){var t=e.presentation;if(null!==e.geometry&&null!==t&&null!==t.geometry){var n=t.geometry,r=t.morpher,i=new Map;e.geometry.geometrySources.forEach(function(e){n.getGeometrySourcesForSemantic(e.semantic)[0].fill(0),i.set(e.semantic,0)});for(var o=r.targets.length,a=0;a<o;a++){(function(e){var t=r.targets[e],o=r._weights[e];if(0===o||void 0===o)return"continue";t.geometrySources.forEach(function(e){var t=n.getGeometrySourcesForSemantic(e.semantic)[0];if(void 0!==t){i.set(e.semantic,i.get(e.semantic)+o);var r=e._dataOffset/e._bytesPerComponent,a=e._dataStride/e._bytesPerComponent,u=t._dataOffset/t._bytesPerComponent,l=t._dataStride/t._bytesPerComponent,s=e._componentsPerVector,c=e._vectorCount;if(void 0===e._firstIndex){for(var f=r,h=0;h<c;h++){if(void 0!==e._data[f]&&0!==e._data[f]){e._firstIndex=h;break}f+=a}f=r+a*(c-1);for(var d=c-1;d>=0;d--){if(void 0!==e._data[f]&&0!==e._data[f]){e._lastIndex=d;break}f-=a}}r+=a*e._firstIndex,u+=l*e._firstIndex;for(var _=e._firstIndex;_<=e._lastIndex;_++){for(var p=0;p<s;p++){var y=e._data[r+p];y&&(t._data[u+p]+=y*o)}r+=a,u+=l}}})})(a)}e.geometry.geometrySources.forEach(function(e){var r=n.getGeometrySourcesForSemantic(e.semantic)[0],o=e._dataOffset/e._bytesPerComponent,a=e._dataStride/e._bytesPerComponent,u=r._dataOffset/r._bytesPerComponent,l=r._dataStride/r._bytesPerComponent,s=e._componentsPerVector,c=e._vectorCount;if(t.calculationMode===h.default.normalized)for(var f=1-i.get(e.semantic),d=0;d<c;d++){for(var _=0;_<s;_++)r._data[u+_]+=e._data[o+_]*f;o+=a,u+=l}else for(var p=0;p<c;p++){for(var y=0;y<s;y++)r._data[u+y]+=e._data[o+y];o+=a,u+=l}})}}},{key:"_copy",value:function(){var e=new t;return e.targets=this.targets.slice(0),e._weights=this._weights.slice(0),e.calculationMode=this.calculationMode,e}}]),t}(c.default);t.default=_},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"rendererUpdateAtTime",value:function(e,t){}},{key:"rendererDidApplyAnimationsAtTime",value:function(e,t){}},{key:"rendererDidSimulatePhysicsAtTime",value:function(e,t){}},{key:"rendererWillRenderSceneAtTime",value:function(e,t,n){}},{key:"rendererDidRenderSceneAtTime",value:function(e,t,n){}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=r(l),c=n(5),f=r(c),h=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=f.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e}return a(t,e),u(t,null,[{key:"_propTypes",get:function(){return{_actions:"NSArray",_finished:"boolean",_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_pausedTime:"float"}}}]),t}(s.default);t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(19),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.damping=0,e.decelerationDistance=0,e.maximumLinearAcceleration=0,e.maximumLinearVelocity=0,e}return o(t,e),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(9),c=r(s),f=n(15),h=r(f),d=n(12),_=r(d),p=n(6),y=r(p),m=n(8),v=r(m),g=n(1),b=r(g),S=function(e){function t(){var e=(arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,[],[]));return r.width=1,r.height=e,r.length=n,r.widthSegmentCount=1,r.heightSegmentCount=1,r.lengthSegmentCount=1,r._createGeometry(),r.materials.push(new v.default),r}return u(t,e),l(t,[{key:"_createGeometry",value:function(){var e=[],t=.5*this.width,n=-t,r=.5*this.length,o=-r,a=this.height;e.push.apply(e,i(this._createSideFace(n,r,t,r))),e.push.apply(e,i(this._createSideFace(t,r,t,o))),e.push.apply(e,i(this._createSideFace(t,o,n,o))),e.push.apply(e,i(this._createSideFace(n,o,n,r))),e.push(n,0,o),e.push(0,-1,0),e.push(0,1),e.push(t,0,o),e.push(0,-1,0),e.push(1,1),e.push(n,0,r),e.push(0,-1,0),e.push(0,0),e.push(t,0,r),e.push(0,-1,0),e.push(1,0);for(var u=new y.default(e,y.default.Semantic.vertex,20,!0,3,4,0,32),l=new y.default(e,y.default.Semantic.normal,20,!0,3,4,12,32),s=new y.default(e,y.default.Semantic.texcoord,20,!0,2,4,24,32),c=[],f=[[0,2,3],[4,6,7],[8,10,11],[12,14,15],[16,17,19,16,19,18]],d=0;d<5;d++)c.push(new h.default(f[d],_.default.triangles));this._geometryElements=c,this._geometrySources=[u,l,s],this.boundingBox={min:new b.default(n,0,o),max:new b.default(t,a,r)}}},{key:"_createSideFace",value:function(e,t,n,r){var i=this.height,o=[],a=new b.default;if(e===n)a.x=i,a.y=e,e<0&&(a.x=-a.x,a.y=-a.y);else{if(t!==r)throw new Error("position inconsistent");a.z=i,a.y=t,t<0&&(a.z=-a.z,a.y=-a.y)}return a=a.normalize(),o.push(e,0,t),o.push(a.x,a.y,a.z),o.push(0,1),o.push(0,this.height,0),o.push(a.x,a.y,a.z),o.push(0,0),o.push(n,0,r),o.push(a.x,a.y,a.z),o.push(1,1),o.push(0,this.height,0),o.push(a.x,a.y,a.z),o.push(1,0),o}}]),t}(c.default);t.default=S},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(4),s=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e}return o(t,e),u(t,null,[{key:"_propTypes",get:function(){return{_actions:"NSArray",_finished:"boolean",_duration:"float",_timingMode:"integer",_beginTime:"float",_isRunning:"boolean",_pausedTime:"float",name:["string",null]}}}]),u(t,[{key:"copy",value:function(){var e=a(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._actions=[],this._actions.forEach(function(t){e._actions.push(t.copy())}),e}},{key:"_applyAction",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._activetimeFromTime(t),i=!0;this._actions.forEach(function(t){t._finished||(t._applyAction(e,r,n),t._finished||(i=!1))}),this._finished=i}},{key:"_resetFinished",value:function(){this._actions.forEach(function(e){e._resetFinished()}),this._finished=!1}},{key:"duration",get:function(){var e=0;return this._actions.forEach(function(t){e<t.duration&&(e=t.duration)}),e}}],[{key:"group",value:function(e){var n=new t;return n._actions=e,n}}]),t}(s.default);t.default=c,s.default.group=c.group},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(25),f=r(c),h=n(53),d=r(h),_=n(0),p=r(_),y=n(6),m=r(y),v=n(7),g=r(v),b=n(77),S=r(b),w=n(107),T=r(w),k=n(1),C=r(k),O=n(13),E=r(O),P=n(22),A=r(P),x=n(110),M=r(x),N=n(111),F=r(N),R=n(109),D=r(R),I=n(108),j=r(I),B=n(34),U=r(B),L=n(2),V=r(L),z=n(3),G=r(z),Y={angle:"Angle",angularVelocity:"AngularVelocity",bounce:"Bounce",charge:"Charge",color:"Color",contactNormal:"ContactNormal",contactPoint:"ContactPoint",frame:"Frame",frameRate:"FrameRate",friction:"Friction",life:"Life",opacity:"Opacity",position:"Position",rotationAxis:"RotationAxis",size:"Size",velocity:"Velocity"},X=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.position=null,e.axis=null,e.angle=0,e.size=1,e.baseSize=1,e.color=null,e.velocity=null,e.angularVelocity=0,e.acceleration=null,e.birthTime=0,e.lifeSpan=0,e.imageFrameRate=0,e.initialImageFrame=0,e.texLeft=0,e.texRight=0,e.texTop=0,e.texBottom=0,e._maxParticleIndex=0,e}return u(t,e),l(t,[{key:"floatArray",value:function(){var e=[].concat(i(this.position.floatArray()),i(this.velocity.floatArray()),i(this.axis.floatArray()),[this.angle],i(this.color.floatArray()),[this.size]);return[].concat(i(e),[-1,-1,this.texLeft,this.texTop],i(e),[1,-1,this.texRight,this.texTop],i(e),[-1,1,this.texLeft,this.texBottom],i(e),[1,1,this.texRight,this.texBottom])}},{key:"valueForKeyPath",value:function(e){return"size"===e?this.baseSize:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"valueForKeyPath",this).call(this,e)}},{key:"float32Array",value:function(){return new Float32Array(this.floatArray())}}]),t}(p.default),H=function(e){function t(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.emissionDuration=1,e.emissionDurationVariation=0,e.idleDuration=0,e.idleDurationVariation=0,e.loops=!0,e.warmupDuration=0,e._birthRate=0,e.birthRateVariation=0,e.emitterShape=null,e.birthLocation=S.default.surface,e.birthDirection=T.default.constant,e.emittingDirection=new C.default(0,1,0),e.spreadingAngle=0,e.particleAngle=0,e.particleAngleVariation=0,e.particleVelocity=0,e.particleVelocityVariation=0,e.particleAngularVelocity=0,e.particleAngularVelocityVariation=0,e.particleLifeSpan=1,e.particleLifeSpanVariation=0,e.particleSize=1,e.particleSizeVariation=0,e.particleColor=V.default.white,e.particleColorVariation=new E.default(0,0,0,0),e.particleImage=null,e.fresnelExponent=0,e.stretchFactor=0,e.imageSequenceRowCount=1,e.imageSequenceColumnCount=1,e.imageSequenceInitialFrame=0,e.imageSequenceInitialFrameVariation=0,e.imageSequenceFrameRate=0,e.imageSequenceFrameRateVariation=0,e.imageSequenceAnimationMode=M.default.repeat,e.isAffectedByGravity=!1,e.isAffectedByPhysicsFields=!1,e.colliderNodes=null,e.particleDiesOnCollision=!1,e.acceleration=new C.default(0,0,0),e.dampingFactor=0,e.particleMass=1,e.particleMassVariation=0,e.particleCharge=0,e.particleChargeVariation=0,e.particleBounce=.7,e.particleBounceVariation=0,e.particleFriction=1,e.particleFrictionVariation=0,e.systemSpawnedOnCollision=null,e.systemSpawnedOnDying=null,e.systemSpawnedOnLiving=null,e.blendMode=F.default.additive,e.orientationMode=D.default.billboardScreenAligned,e.sortingMode=j.default.none,e.isLightingEnabled=!1,e.isBlackPassEnabled=!1,e.isLocal=!1,e.speedFactor=1,e.propertyControllers=null,e._program=null,e._vertexArray=null,e._vertexBuffer=null,e._indexBuffer=null,e._particles=[],e._glIndexSize=null,e._particleTexture=null,e._finished=!1,e._startTime=null,e._prevTime=0,e._nextBirthTime=0,e._emissionEndTime=0,e._idleEndTime=0,e._numImages=null,e._imageWidth=null,e._imageHeight=null,e.__presentation=null,e._animations=new A.default,e._loadedPromise=null,e}return u(t,e),l(t,null,[{key:"_propTypes",get:function(){return{emissionDuration:"float",emissionDurationVariation:"float",idleDuration:"float",idleDurationVariation:"float",loops:"boolean",warmupDuration:"float",birthRate:["float","_birthRate"],birthRateVariation:"float",emitterShape:"SCNGeometry",birthLocation:"integer",birthDirection:"integer",emittingDirection:"SCNVector3",spreadingAngle:"float",particleAngle:"float",particleAngleVariation:"float",particleVelocity:"float",particleVelocityVariation:"float",particleAngularVelocity:"float",particleAngularVelocityVariation:"float",particleLifeSpan:"float",particleLifeSpanVariation:"float",particleSize:"float",particleSizeVariation:"float",particleColor:"plist",particleColorVariation:"SCNVector4",particleImage:["NSMutableDictionary",function(e,t,n,r){var i="";void 0!==t.path?i=t.path:void 0!==t.URL&&(i=t.URL),e._loadParticleImage(i,r._directoryPath)}],fresnelExponent:"float",stretchFactor:"float",imageSequenceRowCount:"integer",imageSequenceColumnCount:"integer",imageSequenceInitialFrame:"float",imageSequenceInitialFrameVariation:"float",imageSequenceFrameRate:"float",imageSequenceFrameRateVariation:"float",imageSequenceAnimationMode:"integer",affectedByGravity:["boolean","isAffectedByGravity"],affectedByPhysicsFields:["boolean","isAffectedByPhysicsFields"],colliderNodes:"NSArray",particleDiesOnCollision:"boolean",acceleration:"SCNVector3",dampingFactor:"float",particleMass:"float",particleMassVariation:"float",particleCharge:"float",particleChargeVariation:"float",particleBounce:"float",particleBounceVariation:"float",particleFriction:"float",particleFrictionVariation:"float",systemSpawnedOnCollision:"SCNParticleSystem",systemSpawnedOnDying:"SCNParticleSystem",systemSpawnedOnLiving:"SCNParticleSystem",blendMode:"integer",orientationMode:"integer",sortingMode:"integer",lightingEnabled:["boolean","isLightingEnabled"],blackPassEnabled:["boolean","isBlackPassEnabled"],isLocal:"boolean",speedFactor:"float",propertyControllers:["NSMutableDictionary",function(e,t){Object.keys(Y).forEach(function(e){var n=t[Y[e]];void 0!==n&&(n.animation.keyPath=e,"size"===e&&(n.animation._isMultiplicative=!0))}),e.propertyControllers=t}],seed:["integer",null],softParticlesEnabled:["boolean",null],fixedTimeStep:["float",null],renderingMode:["integer",null],physicsCollisionsEnabled:["boolean",null],orientationDirection:["SCNVector3",null],particleIntensity:["float",null],particleIntensityVariation:["float",null]}}}]),l(t,[{key:"reset",value:function(){this._finished=!1,this._startTime=null,this._prevTime=0,this._nextBirthTime=0,this._emissionEndTime=0,this._idleEndTime=0,this._particles=[]}},{key:"handleForPropertiesHandler",value:function(e,t,n){}},{key:"addModifierForPropertiesAtModifier",value:function(e,t,n){}},{key:"removeModifiersAt",value:function(e){}},{key:"removeAllModifiers",value:function(){}},{key:"_loadParticleImage",value:function(e,t){var n=this,r=new Image;r.crossOrigin="anonymous";var i=e;return 0===i.indexOf("file:///")&&(i=i.slice(8)),i=i.replace(/\.exr$/,".png"),this._loadedPromise=new Promise(function(e,o){var a=i.split("/"),u=1,l=t+a.slice(-u).join("/");r.onload=function(){n.particleImage=r,e()},r.onerror=function(){u+=1,u>a.length?(r.onerror=function(){o()},r.src=i):(l=t+a.slice(-u).join("/"),r.src=l)},r.src=l}),r}},{key:"_initializeVAO",value:function(e,t){if(null===this._vertexArray){this._vertexArray=e.createVertexArray(),e.bindVertexArray(this._vertexArray),this._vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer);var n=e.getAttribLocation(t,"position"),r=e.getAttribLocation(t,"velocity"),i=e.getAttribLocation(t,"rotation"),o=e.getAttribLocation(t,"color"),a=e.getAttribLocation(t,"size"),u=e.getAttribLocation(t,"corner"),l=e.getAttribLocation(t,"texcoord");e.enableVertexAttribArray(n),e.vertexAttribPointer(n,3,e.FLOAT,!1,76,0),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,3,e.FLOAT,!1,76,12),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,4,e.FLOAT,!1,76,24),e.enableVertexAttribArray(o),e.vertexAttribPointer(o,4,e.FLOAT,!1,76,40),e.enableVertexAttribArray(a),e.vertexAttribPointer(a,1,e.FLOAT,!1,76,56),e.enableVertexAttribArray(u),e.vertexAttribPointer(u,2,e.FLOAT,!1,76,60),e.enableVertexAttribArray(l),e.vertexAttribPointer(l,2,e.FLOAT,!1,76,68);var s=this._maxParticles+5;this._updateIndexBuffer(e,s),this._numImages=this.imageSequenceRowCount*this.imageSequenceColumnCount,this._imageWidth=1/this.imageSequenceColumnCount,this._imageHeight=1/this.imageSequenceRowCount}}},{key:"_updateIndexBuffer",value:function(e,t){for(var n=e,r=[],i=0,o=0;o<t;o++)r.push(i+0),r.push(i+3),r.push(i+2),r.push(i+0),r.push(i+1),r.push(i+3),i+=4;var a=null;i<256?(a=new Uint8Array(r),this._glIndexSize=n.UNSIGNED_BYTE):i<65536?(a=new Uint16Array(r),this._glIndexSize=n.UNSIGNED_SHORT):(a=new Uint32Array(r),this._glIndexSize=n.UNSIGNED_INT),null===this._indexBuffer&&(this._indexBuffer=n.createBuffer()),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this._indexBuffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,a,n.STATIC_DRAW),this._maxParticleIndex=t}},{key:"_createParticle",value:function(e,t){var n=new X,r=t.getTranslation(),i=this.particleVelocity+this.particleVelocityVariation*(Math.random()-.5),o=this.spreadingAngle/180*Math.PI*Math.random(),a=2*Math.PI*Math.random(),u=g.default.matrixWithRotation(this._normal.x,this._normal.y,this._normal.z,o),l=g.default.matrixWithRotation(this._direction.x,this._direction.y,this._direction.z,a);if(null===this.emitterShape)n.position=r,n.velocity=new C.default(0,0,i);else if(this.birthLocation===S.default.surface){var s=null,c=null;switch(this.emitterShape.className){case"SCNBox":var f=Math.random(),h=Math.random()-.5,d=Math.random()-.5,_=this.emitterShape.width,p=this.emitterShape.height,y=this.emitterShape.length,v=p*y,b=y*_,w=_*p,k=1/(v+b+w),O=v*k,E=b*k,P=w*k;f<.5*O?(s=new C.default(.5*_,p*h,y*d),c=new C.default(1,0,0)):f<O?(s=new C.default(.5*-_,p*h,y*d),c=new C.default(-1,0,0)):f<O+.5*E?(s=new C.default(_*h,.5*p,y*d),c=new C.default(0,1,0)):f<O+E?(s=new C.default(_*h,.5*-p,y*d),c=new C.default(0,-1,0)):f<O+E+.5*P?(s=new C.default(_*h,p*d,.5*y),c=new C.default(0,0,1)):(s=new C.default(_*h,p*d,.5*-y),c=new C.default(0,0,-1));break;case"SCNSphere":var A=new C.default(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize();s=A.mul(this.emitterShape.radius),c=A;break;case"SCNPlane":s=new C.default((Math.random()-.5)*this.emitterShape.width,(Math.random()-.5)*this.emitterShape.height,0),c=new C.default(0,0,1);break;case"SCNCylinder":var x=(Math.random()-.5)*this.emitterShape.height,M=Math.random()*Math.PI*2,N=Math.sin(M),F=Math.cos(M);s=new C.default(N*this.emitterShape.radius,x,F*this.emitterShape.radius),c=new C.default(N,0,F);break;case"SCNGeometry":var R=this.emitterShape.geometryElementAtIndex(0),I=this.emitterShape.getGeometrySourcesForSemantic(m.default.Semantic.vertex)[0],j=this.emitterShape.getGeometrySourcesForSemantic(m.default.Semantic.normal)[0],B=Math.floor(Math.random()*R.primitiveCount),U=R._indexAt(B),L=U.map(function(e){return I._scnVectorAt(e)}),V=U.map(function(e){return j._scnVectorAt(e)}),z=L[0].add(L[1]).add(L[2]).mul(1/3),G=V[0].add(V[1]).add(V[2]).normalize();s=z,c=G;break;default:throw new Error("surface emitter for "+this.emitterShape.className+" is not implemented")}s=s.rotate(t),n.position=r.add(s),this.birthDirection===T.default.surfaceNormal&&(n.velocity=c.rotate(t).normalize().mul(i))}else{if(this.birthLocation!==S.default.volume)throw new Error("birthLocation "+this.birthLocation+" is not implemented.");var Y=null;switch(this.emitterShape.className){case"SCNBox":var H=(Math.random()-.5)*this.emitterShape.width,W=(Math.random()-.5)*this.emitterShape.height,K=(Math.random()-.5)*this.emitterShape.length;Y=new C.default(H,W,K);break;case"SCNSphere":var Z=Math.random()*this.emitterShape.radius,q=Math.random()*Math.PI,J=Math.random()*Math.PI*2,Q=Z*Math.sin(q),$=Q*Math.cos(J),ee=Q*Math.sin(J),te=Z*Math.cos(q);Y=new C.default($,ee,te);break;default:throw new Error("volume emitter for "+this.emitterShape.className+" is not implemented")}if(Y=Y.rotate(t),n.position=r.add(Y),this.birthDirection===T.default.surfaceNormal)throw new Error("combination of birthLocation=volume and birthDirection=surfaceNormal is not implemented.")}switch(this.orientationMode===D.default.billboardScreenAligned?n.axis=new C.default(0,0,1):n.axis=new C.default(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),n.angle=(this.particleAngle+this.particleAngleVariation*(Math.random()-.5))/180*Math.PI,n.size=this.particleSize+this.particleSizeVariation*(Math.random()-.5),n.baseSize=n.size,n.color=this._createColor(),this.birthDirection){case T.default.constant:n.velocity=this._direction.rotate(u).rotate(l).rotate(t).mul(i);break;case T.default.surfaceNormal:break;case T.default.random:var ne=2*Math.PI*Math.random(),re=g.default.matrixWithRotation(this._normal.x,this._normal.y,this._normal.z,ne);n.velocity=this._direction.rotate(re).rotate(l).rotate(t).mul(i);break;default:throw new Error("unknown birth direction: "+this.birthDirection)}n.angularVelocity=(this.particleAngularVelocity+this.particleAngularVelocityVariation*(Math.random()-.5))/180*Math.PI,n.acceleration=this.acceleration._copy(),n.birthTime=e,n.lifeSpan=this.particleLifeSpan+this.particleLifeSpanVariation*(2*Math.random()-1),n.imageFrameRate=this.imageSequenceFrameRate+this.imageSequenceFrameRateVariation*(Math.random()-.5),n.imageFrameRate<0&&(n.imageFrameRate=0);var ie=this.imageSequenceRowCount*this.imageSequenceColumnCount;return n.initialImageFrame=(this.imageSequenceInitialFrame+this.imageSequenceInitialFrameVariation*(Math.random()-.5))%ie,n.initialImageFrame<0&&(n.initialImageFrame+=ie),n}},{key:"_updateParticles",value:function(e,t,n){var r=this;if(this._prevTime<=0){this._prevTime=n,this._nextBirthTime=n,this._startTime=n,this._direction=this.emittingDirection.normalize();var i=new C.default(this._direction.z,this._direction.x,this._direction.y);this._normal=this._direction.cross(i),this._updateEndTime()}if(this._presentation._birthRate+this.birthRateVariation>0)for(;this._nextBirthTime<=n;){var o=this._createParticle(this._nextBirthTime,e);this._particles.push(o);var a=this._presentation._birthRate+this.birthRateVariation*(Math.random()-.5);a<1e-7&&(a=1e-7),this._nextBirthTime+=1/a,this._nextBirthTime>this._emissionEndTime&&(this._nextBirthTime=this._idleEndTime,this.loops||(this._finished=!0),this._updateEndTime())}var u=(n-this._prevTime)*this.speedFactor,l=1;this.dampingFactor>0&&(l=Math.pow(.01*(100-this.dampingFactor),60*u)),this._particles.forEach(function(e){var i=u,o=(n-e.birthTime)*r.speedFactor;e.birthTime>r._prevTime&&(i=o);var a=o/e.lifeSpan;if(e.life=a,!(a>1)){var s=e.acceleration;null!==t&&r.isAffectedByGravity&&(s=s.add(t)),e.angle+=e.angularVelocity*i,e.velocity.x=(e.velocity.x+s.x*i)*l,e.velocity.y=(e.velocity.y+s.y*i)*l,e.velocity.z=(e.velocity.z+s.z*i)*l,e.position.x+=e.velocity.x*i,e.position.y+=e.velocity.y*i,e.position.z+=e.velocity.z*i,null!==r.propertyControllers&&Object.keys(r.propertyControllers).forEach(function(t){r.propertyControllers[t].animation._applyAnimation(e,a,!1)});var c=e.initialImageFrame+e.imageFrameRate*o,f=0;switch(r.imageSequenceAnimationMode){case M.default.repeat:f=Math.floor(c%r._numImages);break;case M.default.clamp:var h=Math.floor(c%r._numImages);f=h>=r._numImages-1?r._numImages-1:h;break;case M.default.autoReverse:var d=Math.floor(c%(2*r._numImages-2));d>=r._numImages&&(d=2*r._numImages-2-d),f=d;break;default:throw new Error("unknown SCNParticleImageSequenceAnimationMode: "+r.imageSequenceAnimationMode)}var _=Math.floor(f/r.imageSequenceRowCount),p=f%r.imageSequenceColumnCount;e.texLeft=p*r._imageWidth,e.texTop=(_+1)*r._imageHeight,e.texRight=(p+1)*r._imageWidth,e.texBottom=_*r._imageHeight}}),this._particles=this._particles.filter(function(e){return e.life<=1}),this._prevTime=n}},{key:"_updateEndTime",value:function(){var e=0===this._idleEndTime?this._startTime:this._idleEndTime,t=this.emissionDuration+(Math.random()-.5)*this.emissionDurationVariation;t<0&&(t=0),this._emissionEndTime=e+t;var n=this.idleDuration+(Math.random()-.5)*this.idleDurationVariation;n<0&&(n=0),this._idleEndTime=this._emissionEndTime+n}},{key:"_bufferMaterialData",value:function(e,t){null===this._particleTexture&&null!==this.particleImage&&(this._particleTexture=this._createTexture(e,this.particleImage)),null!==this._particleTexture&&(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._particleTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.uniform1i(e.getUniformLocation(t,"orientationMode"),this.orientationMode),e.uniform1f(e.getUniformLocation(t,"stretchFactor"),this.stretchFactor),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this._particleData,e.DYNAMIC_DRAW),this._particles.length>this._maxParticleIndex&&this._updateIndexBuffer(e,this._particles.length+10);var n=[e.ONE,e.ZERO,e.ZERO,e.SRC_ALPHA,e.SRC_ALPHA,e.ONE],r=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ZERO];e.blendFunc(n[this.blendMode],r[this.blendMode])}},{key:"_createTexture",value:function(e,t){var n=e.createTexture(),r=document.createElement("canvas");return r.width=t.naturalWidth,r.height=t.naturalHeight,r.getContext("2d").drawImage(t,0,0),e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width,t.height,0,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),n}},{key:"_createColor",value:function(){var e=this._rgb2hsb(this.particleColor);return e.x=(e.x+this.particleColorVariation.x*(2*Math.random()-1))%360,e.x<0&&(e.x+=360),e.y=Math.max(0,Math.min(1,e.y+this.particleColorVariation.y*(Math.random()-.5))),e.z=Math.max(0,Math.min(1,e.z+this.particleColorVariation.z*(Math.random()-.5))),e.w=Math.max(0,Math.min(1,e.w+this.particleColorVariation.w*(Math.random()-.5))),this._hsb2rgb(e)}},{key:"_rgb2hsb",value:function(e){var t=new E.default,n=Math.min(e.red,Math.min(e.green,e.blue)),r=Math.max(e.red,Math.max(e.green,e.blue)),i=r-n;return t.w=e.alpha,t.z=r,0===t.z?(t.x=0,t.y=0,t):(t.y=i/r,0===t.y?(t.x=0,t):(r===e.red?t.x=(60*(e.green-e.blue)/i+360)%360:r===e.green?t.x=60*(e.blue-e.red)/i+120:t.x=60*(e.red-e.green)/i+240,t))}},{key:"_hsb2rgb",value:function(e){if(0===e.y)return new V.default(e.z,e.z,e.z,e.w);var t=Math.floor(e.x/60),n=e.z,r=e.x/60-t,i=n*(1-e.y),o=n*(1-e.y*r),a=n*(1-e.y*(1-r));switch(t){case 0:return new V.default(n,a,i,e.w);case 1:return new V.default(o,n,i,e.w);case 2:return new V.default(i,n,a,e.w);case 3:return new V.default(i,o,n,e.w);case 4:return new V.default(a,i,n,e.w);default:return new V.default(n,i,o,e.w)}}},{key:"_copy",value:function(){var e=new t,n=["_birthRate"],r=!0,i=!1,o=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;e[l]=this[l]}}catch(e){i=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return e}},{key:"_createPresentation",value:function(){if(this.__presentation)return this.__presentation;var e=this._copy();return this.__presentation=e,e}},{key:"addAnimationForKey",value:function(e,t){void 0!==t&&null!==t||(t=Symbol());var n=e.copy();n._animationStartTime=.001*Date.now(),this._animations.set(t,n)}},{key:"animationForKey",value:function(e){return this._animations.get(e)}},{key:"removeAllAnimations",value:function(){this._animations.clear()}},{key:"removeAnimationForKey",value:function(e){this._animations.delete(e),this._copyTransformToPresentationRecursive()}},{key:"removeAnimationForKeyFadeOutDuration",value:function(e,t){this.removeAnimationForKey(e)}},{key:"pauseAnimationForKey",value:function(e){}},{key:"resumeAnimationForKey",value:function(e){}},{key:"isAnimationPausedForKey",value:function(e){return!1}},{key:"setAnimationSpeedForKey",value:function(e,t){}},{key:"valueForKeyPath",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n&&this._presentation?this._presentation:this,i=e.split("."),o=i[0];i[1];return"_birthRate"===o?r[o]:s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"valueForKeyPath",this).call(this,e,n)}},{key:"setValueForKeyPath",value:function(e,n){var r=this._presentation?this._presentation:this,i=n.split("."),o=i.shift();i.join(".");if("_birthRate"===o)return void(r[o]=e);s(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValueForKeyPath",this).call(this,e,n)}},{key:"_getLoadedPromise",value:function(){return this._loadedPromise?this._loadedPromise:Promise.resolve()}},{key:"_particleData",get:function(){var e=[];return this._particles.forEach(function(t){e.push.apply(e,i(t.floatArray()))}),new Float32Array(e)}},{key:"_maxParticles",get:function(){var e=this._birthRate+.5*this.birthRateVariation,t=this.particleLifeSpan+.5*this.particleLifeSpanVariation;return Math.ceil(e*t)}},{key:"birthRate",get:function(){return this._birthRate},set:function(e){var t=this._birthRate;this._birthRate=e,U.default._addChange(this,"_birthRate",t,e)}},{key:"animationKeys",get:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this._animations.keys()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;e.push(a)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}return e}},{key:"_presentation",get:function(){return this.__presentation?this.__presentation:this}},{key:"didLoad",get:function(){return this._getLoadedPromise()}}],[{key:"systemNamedInDirectory",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!==e){var r=e;return null!==n&&(r=n+"/"+e),f.default.get(r).then(function(e){var n=d.default.unarchiveObjectWithData(e,r);if(!(0,G.default)(n,t))throw new Error("file "+r+" is not an instance of SCNParticleSystem");return n._loadedPromise=Promise.resolve(n),n})}return null}},{key:"ParticleProperty",get:function(){return Y}}]),t}(p.default);t.default=H},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){return Math.abs(e.x-t.x)<1e-5&&Math.abs(e.y-t.y)<1e-5&&Math.abs(e.z-t.z)<1e-5};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._icc=null,e._spaceID=null,e._id=null,e}return o(t,e),a(t,null,[{key:"_propTypes",get:function(){return{NSICC:["NSMutableData","_icc"],NSSpaceID:["integer","_spaceID"],NSID:["integer","_id"]}}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(55),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(117),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,null,[{key:"initWithCoder",value:function(e){var t=(e._refObj["NS.base"].obj,e._refObj["NS.relative"].obj),n=t;return n.indexOf(":")<0&&(n=e._directoryPath+n),n}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(54),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.outputFormat=null,e.requiresSecureCoding=!1,e.delegate=null,e._encodedData=null,e}return o(t,e),a(t,[{key:"finishEncoding",value:function(){}},{key:"encodeForKey",value:function(e,t){}},{key:"encodeBytesLengthForKey",value:function(e,t,n){}},{key:"encodeConditionalObjectForKey",value:function(e,t){}},{key:"encodedData",get:function(){return this._encodedData}}],[{key:"archiverForWritingWithData",value:function(e){return new t}},{key:"archivedDataWithRootObject",value:function(e){return null}},{key:"archiveRootObjectToFile",value:function(e,t){return!1}},{key:"setClassNameFor",value:function(e,t){}},{key:"classNameFor",value:function(e){return null}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(11),f=r(c),h=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._objCType=null,n._pointerValue=null,n._nonretainedObjectValue=null,n._rangeValue=null,n._pointValue=null,n._sizeValue=null,n._rectValue=null,n._cgPointValue=null,n._cgVectorValue=null,n._cgSizeValue=null,n._cgRectValue=null,n._cgAffineTransformValue=null,n._uiEdgeInsetsValue=null,n._uiOffsetValue=null,n._caTransform3DValue=null,n._timeValue=null,n._timeRangeValue=null,n._timeMappingValue=null,n._mkCoordinateValue=null,n._mkCoordinateSpanValue=null,n._scnVector3Value=null,n._scnVector4Value=null,n._scnMatrix4Value=null,n._edgeInsetsValue=null,n}return a(t,e),u(t,[{key:"initBytesObjCType",value:function(e,t){}},{key:"initWithObjCType",value:function(e,t){}},{key:"getValue",value:function(e){}},{key:"objCType",get:function(){return this._objCType}}],[{key:"initWithCoder",value:function(e){var t=(e._refObj["NS.special"],e._refObj["NS.sizeval"].obj);if(t){if("{"!==t.charAt(0)||"}"!==t.charAt(t.length-1))throw new Error("unknown NSValue size format: "+t);var n=t.slice(1,-1).split(",").map(parseFloat);return new f.default(n[0],n[1])}throw new Error("unknown NSValue type")}}]),u(t,[{key:"initNonretainedObject",value:function(e){}},{key:"initCgPoint",value:function(e){}},{key:"initCgVector",value:function(e){}},{key:"initCgSize",value:function(e){}},{key:"initCgRect",value:function(e){}},{key:"initCgAffineTransform",value:function(e){}},{key:"initUiEdgeInsets",value:function(e){}},{key:"initUiOffset",value:function(e){}},{key:"initCaTransform3D",value:function(e){}},{key:"initMkCoordinate",value:function(e){}},{key:"initMkCoordinateSpan",value:function(e){}},{key:"initScnVector3",value:function(e){}},{key:"initScnVector4",value:function(e){}},{key:"initScnMatrix4",value:function(e){}},{key:"isEqualTo",value:function(e){return!1}},{key:"initCoder",value:function(e){}},{key:"initEdgeInsets",value:function(e){}},{key:"pointerValue",get:function(){return this._pointerValue}},{key:"nonretainedObjectValue",get:function(){return this._nonretainedObjectValue}},{key:"rangeValue",get:function(){return this._rangeValue}},{key:"pointValue",get:function(){return this._pointValue}},{key:"sizeValue",get:function(){return this._sizeValue}},{key:"rectValue",get:function(){return this._rectValue}},{key:"cgPointValue",get:function(){return this._cgPointValue}},{key:"cgVectorValue",get:function(){return this._cgVectorValue}},{key:"cgSizeValue",get:function(){return this._cgSizeValue}},{key:"cgRectValue",get:function(){return this._cgRectValue}},{key:"cgAffineTransformValue",get:function(){return this._cgAffineTransformValue}},{key:"uiEdgeInsetsValue",get:function(){return this._uiEdgeInsetsValue}},{key:"uiOffsetValue",get:function(){return this._uiOffsetValue}},{key:"caTransform3DValue",get:function(){return this._caTransform3DValue}},{key:"timeValue",get:function(){return this._timeValue}},{key:"timeRangeValue",get:function(){return this._timeRangeValue}},{key:"timeMappingValue",get:function(){return this._timeMappingValue}},{key:"mkCoordinateValue",get:function(){return this._mkCoordinateValue}},{key:"mkCoordinateSpanValue",get:function(){return this._mkCoordinateSpanValue}},{key:"scnVector3Value",get:function(){return this._scnVector3Value}},{key:"scnVector4Value",get:function(){return this._scnVector4Value}},{key:"scnMatrix4Value",get:function(){return this._scnMatrix4Value}},{key:"edgeInsetsValue",get:function(){return this._edgeInsetsValue}}]),t}(s.default);t.default=h},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(119),f=r(c),h=n(35),d=r(h),_=null,p=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"addObserverForNameObjectUsing",value:function(e,t,n,r){return null}},{key:"addObserverSelectorNameObject",value:function(e,t,n,r){var i=t.bind(e);n===f.default.Name.GCControllerDidConnect&&(window.addEventListener("gamepadconnected",function(e){var t=d.default.getController(e.gamepad);t&&i(new f.default(n,t,r))}),window.addEventListener("gamepaddisconnected",function(e){var t=d.default.getController(e.gamepad);t&&i(new f.default(n,t,r))}))}},{key:"removeObserver",value:function(e){}},{key:"removeObserverNameObject",value:function(e,t,n){}},{key:"post",value:function(e){}},{key:"postNameObject",value:function(e,t){}},{key:"postNameObjectUserInfo",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}}],[{key:"default",get:function(){return null===_&&(_=new t),_}}]),t}(s.default);t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(118),u=function(e){return e&&e.__esModule?e:{default:e}}(a),l=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),t}(u.default);t.default=l},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(10),s=r(l),c=n(58),f=r(c),h=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.position=new s.default(0,0),e.rotation=0,e._velocity=new s.default,e}return a(t,e),u(t,[{key:"updateDeltaTime",value:function(e){}},{key:"velocity",get:function(){return this._velocity}}]),t}(f.default);t.default=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(38),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._node=e,n}return o(t,e),a(t,[{key:"node",get:function(){return this._node}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),c=r(s),f=n(1),h=r(f),d=n(10),_=r(d),p=function(e){function t(){o(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.radius=0,e.isCyclical=!1,e._points=[],e}return u(t,e),l(t,[{key:"float2At",value:function(e){return this.pointAt(e)}},{key:"float3At",value:function(e){var t=this._points[e];return t?new h.default(t.x,t.y,t.z):null}},{key:"pointAt",value:function(e){var t=this._points[e];return t?new _.default(t.x,t.y):null}},{key:"numPoints",get:function(){return this._points.length()}}],[{key:"pathWithPointsCountRadiusCyclical",value:function(e,n,r,o){var a,u=new t;return(a=u._points).push.apply(a,i(e.slice(0,n))),u.radius=r,u.isCyclical=o,u}},{key:"pathWithFloat3PointsCountRadiusCyclical",value:function(e,n,r,o){var a,u=new t;return(a=u._points).push.apply(a,i(e.slice(0,n))),u.radius=r,u.isCyclical=o,u}},{key:"pathWithGraphNodesRadius",value:function(e,n){var r=new t;return r.radius=n,r}},{key:"pathWithPointsRadiusCyclical",value:function(e,n,r){var o,a=new t;return(o=a._points).push.apply(o,i(e)),a.radius=n,a.isCyclical=r,a}}]),t}(c.default);t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(0),l=function(e){return e&&e.__esModule?e:{default:e}}(u),s=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.rootNode=null,e._entities=[],e._graphs={},e}return o(t,e),a(t,[{key:"addEntity",value:function(e){this._entities.indexOf(e)<0&&this._entities.push(e)}},{key:"removeEntity",value:function(e){var t=this._entities.indexOf(e);this._entities.splice(t,1)}},{key:"removeGraph",value:function(e){this._graphs[e]&&delete this._graphs[e]}},{key:"addGraph",value:function(e,t){this._graphs[t]=e}},{key:"entities",get:function(){return this._entities.slice()}},{key:"graphs",get:function(){return this._graphs}}],[{key:"sceneWithFileNamed",value:function(e){return new t}}]),t}(l.default);t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(10),s=r(l),c=n(11),f=r(c),h=n(2),d=r(h),_=n(124),p=r(_),y=n(125),m=r(y),v=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.camera=null,n.anchorPoint=new s.default(0,0),n.size=e||new f.default(1,1),n.scaleMode=m.default.fill,n.backgroundColor=new d.default(.15,.15,.15,1),n._view=null,n.delegate=null,n._physicsWorld=null,n.listener=null,n}return a(t,e),u(t,[{key:"_copyValue",value:function(e){this.camera=e.camera,this.anchorPoint=e.anchorPoint.copy(),this.size=e.size.copy(),this.scaleMode=e.scaleMode,this.backgroundColor=e.backgroundColor._copy(),this._view=e._view,this.delegate=e.delegate,this._physicsWorld=e._physicsWorld,this.listener=e.listener}},{key:"didChangeSize",value:function(e){}},{key:"convertPointFromView",value:function(e){return null}},{key:"convertPointToView",value:function(e){return null}},{key:"sceneDidLoad",value:function(){}},{key:"willMoveFrom",value:function(e){}},{key:"didMoveTo",value:function(e){}},{key:"update",value:function(e){}},{key:"didEvaluateActions",value:function(){}},{key:"didSimulatePhysics",value:function(){}},{key:"didApplyConstraints",value:function(){}},{key:"didFinishUpdate",value:function(){}},{key:"view",get:function(){return this._view}},{key:"physicsWorld",get:function(){return this._physicsWorld}}]),t}(p.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(21),c=r(s),f=n(23),h=r(f),d=n(20),_=r(d),p=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=h.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e._toValue=null,e._byValue=null,e}return a(t,e),u(t,[{key:"copy",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._toValue=this._toValue,e._byValue=this._byValue,e._duration=this._duration,e}},{key:"_applyAction",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._getTime(t,n);if(!(e instanceof _.default))throw new Error("unsupported class for SKFade: "+e.constructor.name);var i=e.alpha,o=0;if(null!==this._toValue)o=this._toValue;else{if(null===this._byValue)throw new Error("both toValue and byValue are null");o=i+this._byValue}var a=this._lerp(i,o,r);e._presentation.alpha=a,this._finished&&(e.alpha=o)}}],[{key:"fadeInWithDuration",value:function(e){var n=new t;return n._toValue=1,n._duration=e,n}},{key:"fadeOutWithDuration",value:function(e){var n=new t;return n._toValue=0,n._duration=e,n}},{key:"fadeAlphaByDuration",value:function(e,n){var r=new t;return r._byValue=e,r._duration=n,r}},{key:"fadeAlphaToDuration",value:function(e,n){var r=new t;return r._toValue=e,r._duration=n,r}}]),t}(c.default);t.default=p,c.default.fadeInWithDuration=p.fadeInWithDuration,c.default.fadeOutWithDuration=p.fadeOutWithDuration,c.default.fadeAlphaByDuration=p.fadeAlphaByDuration,c.default.fadeAlphaToDuration=p.fadeAlphaToDuration},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(21),s=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e}return o(t,e),a(t,[{key:"copy",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._actions=[],this._actions.forEach(function(t){e._actions.push(t.copy())}),e}},{key:"_applyAction",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._activetimeFromTime(t),i=!0;this._actions.forEach(function(t){t._finished||(t._applyAction(e,r,n),t._finished||(i=!1))}),this._finished=i}},{key:"_resetFinished",value:function(){this._actions.forEach(function(e){e._resetFinished()}),this._finished=!1}},{key:"duration",get:function(){var e=0;return this._actions.forEach(function(t){e<t.duration&&(e=t.duration)}),e}}],[{key:"group",value:function(e){var n=new t;return n._actions=e,n}}]),t}(s.default);t.default=c,s.default.group=c.group},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(59),s=r(l),c=n(60),f=r(c),h=n(31),d=r(h),_=n(2),p=r(_),y=n(20),m=r(y),v=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.path=null,e.fillColor=new p.default(0,0,0,0),e.fillTexture=null,e.fillShader=null,e.lineWidth=1,e.glowWidth=0,e.isAntialiased=!0,e.strokeColor=new p.default(1,1,1,1),e.strokeTexture=null,e.strokeShader=null,e.lineCap=s.default.butt,e.lineJoin=f.default.bevel,e.miterLimit=.5,e.blendMode=d.default.alpha,e.attributeValues=new Map,e._customPlaygroundQuickLook=null,e}return a(t,e),u(t,[{key:"setValueForAttribute",value:function(e,t){}},{key:"valueForAttributeNamed",value:function(e){return null}},{key:"_render",value:function(e){}},{key:"lineLength",get:function(){return 0}},{key:"customPlaygroundQuickLook",get:function(){return this._customPlaygroundQuickLook}}],[{key:"node",value:function(e){}},{key:"nodeWithRectOf",value:function(e){}},{key:"nodeWithCircleOfRadius",value:function(e){return new t}},{key:"nodeWithEllipseOf",value:function(e){}},{key:"nodeWithEllipseIn",value:function(e){}},{key:"nodeWithPointsCount",value:function(e,t){}},{key:"nodeWithSplinePointsCount",value:function(e,t){}}]),t}(m.default);t.default=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(21),c=r(s),f=n(23),h=r(f),d=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._animIndex=0,e._finished=!1,e._duration=0,e._timingMode=h.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e}return a(t,e),u(t,[{key:"copy",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._actions=this._actions.slice(0),e._animIndex=this._animIndex,e}},{key:"_applyAction",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.duration,i=0;i=r<=0||r===1/0?this._activetimeFromTime(t):this._getTime(t,n)*r;for(var o=0;o<this._animIndex;o++)i-=this._actions[o].duration/this._actions[o].speed;for(;this._animIndex<this._actions.length;this._animIndex++){var a=this._actions[this._animIndex];if(a._applyAction(e,i,!0),(i-=a.duration/a.speed)<=0||!a._finished)break}this._animIndex>=this._actions.length&&(this._finished=!0)}},{key:"_resetFinished",value:function(){this._actions.forEach(function(e){e._resetFinished()}),this._finished=!1,this._animIndex=0}},{key:"duration",get:function(){var e=0;return this._actions.forEach(function(t){t.speed>0&&(e+=t.duration/t.speed)}),e}}],[{key:"sequence",value:function(e){var n=new t;return n._actions=e,n._duration=0,n}}]),t}(c.default);t.default=d,c.default.sequence=d.sequence},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},l=n(21),s=function(e){return e&&e.__esModule?e:{default:e}}(l),c=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._timesToRepeat=0,e._repeatedAtion=null,e._forever=!1,e._timesRepeated=0,e}return o(t,e),a(t,[{key:"copy",value:function(){var e=u(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._timesToRepeat=this._timesToRepeat,e._repeatedAction=this._repeatedAction,e._forever=this._forever,e._timesRepeated=this._timesRepeated,e}},{key:"_getTime",value:function(e,t){if(!t)return e;var n=this._basetimeFromTime(e);if(null===this.timingFunction)return n;var r=Math.floor(n);return r+this.timingFunction._getValueAtTime(n-r)}},{key:"_applyAction",value:function(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._getTime(t,n),i=Math.floor(r);i>this._timesRepeated;){if(this._timesRepeated+=1,this._repeatedAction._applyAction(e,1,!1),!this._forever&&this._timesRepeated>=this._timesToRepeat)return void(this._finished=!0);this._repeatedAction._resetFinished()}var o=r-this._timesRepeated;this._repeatedAction._applyAction(e,o,!1),this._finished=!1}},{key:"_resetFinished",value:function(){this._repeatedAction._resetFinished(),this._timesRepeated=0,this._finished=!1}},{key:"duration",get:function(){return this._forever?1/0:this._repeatedAction.duration*this._timesToRepeat}}],[{key:"repeat",value:function(e,n){var r=new t;return r._repeatedAction=e,r._duration=e.duration,r._timesToRepeat=n,r._forever=n===1/0,r}},{key:"repeatForever",value:function(e){return this.repeat(e,1/0)}}]),t}(s.default);t.default=c,s.default.repeat=c.repeat,s.default.repeatForever=c.repeatForever},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(21),c=r(s),f=n(23),h=r(f),d=n(20),_=r(d),p=n(11),y=r(p),m=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=h.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e._scaleXTo=null,e._scaleXBy=null,e._scaleWidthTo=null,e._scaleYTo=null,e._scaleYBy=null,e._scaleHeightTo=null,e}return a(t,e),u(t,[{key:"copy",value:function(){var e=l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"copy",this).call(this);return e._scaleXTo=this._scaleXTo,e._scaleXBy=this._scaleXBy,e._scaleWidthTo=this._scaleWidthTo,e._scaleYTo=this._scaleYTo,e._scaleYBy=this._scaleYBy,e._scaleHeightTo=this._scaleHeightTo,e}},{key:"_applyAction",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this._getTime(t,n);if(!(e instanceof _.default))throw new Error("unsupported class for SKSequence: "+e.constructor.name);var i=e.xScale,o=null;null!==this._scaleXTo?o=this._scaleXTo:null!==this._scaleXBy?o=i+this._scaleXBy:null!==this._scaleWidthTo&&(o=this._scaleWidthTo/this._frame.size.width);var a=e.yScale,u=null;if(null!==this._scaleYTo?u=this._scaleYTo:null!==this._scaleYBy?u=a+this._scaleYBy:null!==this._scaleHeightTo&&(u=this._scaleHeightTo/this._frame.size.height),null===o&&null===u)throw new Error("both toXValue and toYValue are null");if(null!==o){var l=this._lerp(i,o,r);e._presentation.xScale=l}if(null!==u){var s=this._lerp(a,u,r);e._presentation.yScale=s}this._finished&&(null!==o&&(e.xScale=o),null!==u&&(e.yScale=u))}}],[{key:"scaleByDuration",value:function(e,n){var r=new t;return r._scaleXBy=e,r._scaleYBy=e,r._duration=n,r}},{key:"scaleToDuration",value:function(e,n){var r=new t;if(e instanceof y.default)r._scaleWidthTo=e.width,r._scaleHeightTo=e.height;else{if("number"!=typeof e)throw new Error("unsupported format");r._scaleXTo=e,r._scaleYTo=e}return r._duration=n,r}},{key:"scaleXByYDuration",value:function(e,n,r){var i=new t;return i._scaleXBy=e,i._scaleYBy=n,i._duration=r,i}},{key:"scaleXToYDuration",value:function(e,n,r){var i=new t;return i._scaleXTo=e,i._scaleYTo=n,i._duration=r,i}},{key:"scaleXToDuration",value:function(e,n){var r=new t;return r._scaleXTo=e,r._duration=n,r}},{key:"scaleYToDuration",value:function(e,n){var r=new t;return r._scaleYTo=e,r._duration=n,r}}]),t}(c.default);t.default=m,c.default.scaleByDuration=m.scaleByDuration,c.default.scaleToDuration=m.scaleToDuration,c.default.scaleXByYDuration=m.scaleXByYDuration,c.default.scaleXToYDuration=m.scaleXToYDuration,c.default.scaleXToDuration=m.scaleXToDuration,c.default.scaleYToDuration=m.scaleYToDuration},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(2),c=r(s),f=n(20),h=r(f),d=n(127),_=r(d),p=n(126),y=r(p),m=n(31),v=r(m),g=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._text=null,n._fontColor=new c.default(1,1,1,1),n._fontName="HelveticaNeue-UltraLight",n._fontSize=32,n._verticalAlignmentMode=_.default.baseline,n._horizontalAlignmentMode=y.default.center,n.color=new c.default(1,1,1,1),n.colorBlendFactor=0,n.blendMode=v.default.alpha,n._canvas=document.createElement("canvas"),n._context=n._canvas.getContext("2d"),n._glContext=null,n._texture=null,n._textureUpToDate=!1,n._program=null,n._vertexArrayObject=null,n._vertexBuffer=null,n._indexBuffer=null,n.text=e,n}return a(t,e),u(t,[{key:"_updateCanvas",value:function(){this._context.font=this._fontSize+"px "+this._fontName;var e=this._context.measureText(this._text);switch(this._canvas.width=e.width,this._canvas.height=3*this._fontSize,this._context.font=this._fontSize+"px "+this._fontName,this._context.fillStyle=this._fontColor.hexColor,this._verticalAlignmentMode){case _.default.baseline:this._context.textBaseline="alphabetic";break;case _.default.center:this._context.textBaseline="middle";break;case _.default.top:this._context.textBaseline="top";break;case _.default.bottom:this._context.textBaseline="bottom";break;default:throw new Error("unknown vertical alignment mode: "+this._verticalAlignmentMode)}this._context.textAlign="left",this._context.clearRect(0,0,this._canvas.width,this._canvas.height),this._context.fillText(this._text,0,.5*this._canvas.height),this._textureUpToDate=!1}},{key:"_render",value:function(e,t){var n=this.__presentation;null!==this._texture&&this._glContext===e||(this._glContext=e,this._texture=e.createTexture(),this._textureUpToDate=!1),this._textureUpToDate||(e.bindTexture(e.TEXTURE_2D,this._texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this._canvas.width,this._canvas.height,0,e.RGBA,e.UNSIGNED_BYTE,this._canvas),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null),this._textureUpToDate=!0),null===this._program&&(this._program=this._createProgram(e));var r=this._program;e.useProgram(r),null===this._vertexArrayObject&&this._createVertexArrayObject(e,r),e.bindVertexArray(this._vertexArrayObject),e.uniform1f(e.getUniformLocation(r,"screenWidth"),t.size.width),e.uniform1f(e.getUniformLocation(r,"screenHeight"),t.size.height),e.uniform1f(e.getUniformLocation(r,"alpha"),n.alpha);var i=this._createVertexData();e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer),e.bufferData(e.ARRAY_BUFFER,i,e.DYNAMIC_DRAW),e.uniform1i(e.getUniformLocation(r,"spriteTexture"),0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this._texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.drawElements(e.TRIANGLES,6,e.UNSIGNED_BYTE,0)}},{key:"_createProgram",value:function(e){var t=e.createProgram(),n=e.createShader(e.VERTEX_SHADER);if(e.shaderSource(n,"#version 300 es\n  precision mediump float;\n\n  in vec3 position;\n  in vec2 texcoord;\n\n  uniform float screenWidth;\n  uniform float screenHeight;\n\n  out vec2 v_texcoord;\n\n  void main() {\n    vec3 pos = position;\n    pos.x = (pos.x * 2.0 / screenWidth) - 1.0;\n    pos.y = (pos.y * 2.0 / screenHeight) - 1.0;\n    v_texcoord = texcoord;\n    gl_Position = vec4(pos, 1.0);\n  }\n"),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS)){var r=e.getShaderInfoLog(n);throw new Error("SKSpriteNode vertex shader compile error: "+r)}var i=e.createShader(e.FRAGMENT_SHADER);if(e.shaderSource(i,"#version 300 es\n  precision mediump float;\n\n  uniform sampler2D spriteTexture;\n  uniform float alpha;\n  in vec2 v_texcoord;\n\n  out vec4 outColor;\n\n  void main() {\n    outColor = texture(spriteTexture, v_texcoord);\n    outColor.a *= alpha;\n  }\n"),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(i);throw new Error("particle fragment shader compile error: "+o)}if(e.attachShader(t,n),e.attachShader(t,i),e.linkProgram(t),!e.getProgramParameter(t,e.LINK_STATUS)){var a=e.getProgramInfoLog(t);throw new Error("program link error: "+a)}return t}},{key:"_createVertexArrayObject",value:function(e,t){this._vertexArrayObject=e.createVertexArray(),e.bindVertexArray(this._vertexArrayObject),this._vertexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._vertexBuffer);var n=e.getAttribLocation(t,"position");e.bindAttribLocation(t,n,"position"),e.enableVertexAttribArray(n),e.vertexAttribPointer(n,3,e.FLOAT,!1,20,0);var r=e.getAttribLocation(t,"texcoord");e.bindAttribLocation(t,r,"texcoord"),e.enableVertexAttribArray(r),e.vertexAttribPointer(r,2,e.FLOAT,!1,20,12),this._indexBuffer=e.createBuffer();var i=new Uint8Array([0,3,2,0,1,3]);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this._indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,i,e.STATIC_DRAW)}},{key:"_createVertexData",value:function(){var e=this.__presentation._worldPosition,t=this._canvas.width*this.__presentation.xScale,n=this._canvas.height*this.__presentation.yScale,r=e.x,i=e.x,o=e.y+.5*n,a=e.y-.5*n;switch(this.__presentation._horizontalAlignmentMode){case y.default.center:r-=.5*t,i+=.5*t;break;case y.default.left:i+=t;break;case y.default.right:r-=t}var u=[r,o,this.__presentation._worldZPosition,0,0,i,o,this.__presentation._worldZPosition,1,0,r,a,this.__presentation._worldZPosition,0,1,i,a,this.__presentation._worldZPosition,1,1];return new Float32Array(u)}},{key:"copy",value:function(){var e=new t;return e._copyValue(this),e}},{key:"_copyValue",value:function(e){l(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_copyValue",this).call(this,e),this._text=e._text,this._fontColor=e._fontColor._copy(),this._fontName=e._fontName,this._fontSize=e._fontSize,this._verticalAlignmentMode=e._verticalAlignmentMode,this._horizontalAlignmentMode=e._horizontalAlignmentMode,this.color=e.color._copy(),this.colorBlendFactor=e.colorBlendFactor,this.blendMode=e.blendMode,this._canvas=e._canvas,this._context=e._context}},{key:"text",get:function(){return this._text},set:function(e){this._text=e,this._updateCanvas()}},{key:"fontColor",get:function(){return this._fontColor},set:function(e){this._fontColor=e,this._updateCanvas()}},{key:"fontName",get:function(){return this._fontName},set:function(e){this._fontName=e,this._updateCanvas()}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize=e,this._updateCanvas()}},{key:"verticalAlignmentMode",get:function(){return this._verticalAlignmentMode},set:function(e){this._verticalAlignmentMode=e,this._updateCanvas()}},{key:"horizontalAlignmentMode",get:function(){return this._horizontalAlignmentMode},set:function(e){this._horizontalAlignmentMode=e,this._updateCanvas()}}],[{key:"labelWithFontNamed",value:function(e){var n=new t;return n.fontName=e,n}},{key:"labelWithText",value:function(e){return new t(e)}}]),t}(h.default);t.default=g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(21),s=r(l),c=n(23),f=r(c),h=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._actions=[],e._finished=!1,e._duration=0,e._timingMode=f.default.linear,e._beginTime=0,e._isRunning=!1,e._pausedTime=0,e}return a(t,e),u(t,null,[{key:"waitForDuration",value:function(e){var n=new t;return n._duration=e,n}},{key:"waitForDurationWithRange",value:function(e,n){var r=Math.max(0,e+(Math.random()-.5)*n),i=new t;return i._duration=r,i}}]),t}(s.default);t.default=h,s.default.waitForDuration=h.waitForDuration,s.default.waitForDurationWithRange=h.waitForDurationWithRange},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(){r(this,e),this.beginTime=0,this.timeOffset=0,this.repeatCount=0,this.repeatDuration=0,this.duration=0,this.speed=0,this.autoreverses=!1,this.fillMode=""};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(29),a=(function(e){e&&e.__esModule}(o),function(){function e(){r(this,e)}return i(e,[{key:"animationDidStart",value:function(e){}},{key:"animationDidStopFinished",value:function(e,t){}}]),e}());t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t){r(this,e),this._m11=1,this._m12=0,this._m13=0,this._m14=0,this._m21=0,this._m22=1,this._m23=0,this._m24=0,this._m31=0,this._m32=0,this._m33=1,this._m34=0,this._m41=0,this._m42=0,this._m43=0,this._m44=1};t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"runForKeyObjectArguments",value:function(e,t,n){}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){return.001*Date.now()};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=r(l),c=n(2),f=r(c),h=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,null,[{key:"initWithCoder",value:function(e){return f.default.initWithCoder(e)}}]),t}(s.default);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={gray:0,RGB:1,CMYK:2,LAB:3,deviceN:4,indexed:5,patterned:6,unknown:-1};t.default=r},function(e,t,n){"use strict";function r(){return.001*(Date.now()-i)}Object.defineProperty(t,"__esModule",{value:!0});var i=Date.UTC(2001,0,1,0,0,0,0);t.default=r}]);